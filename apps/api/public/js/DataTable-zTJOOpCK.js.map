{"version":3,"file":"DataTable-zTJOOpCK.js","sources":["../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/MagnifyingGlassIcon.js","../../../web/src/components/GlobalSearch.tsx","../../../web/src/components/SearchFilters.tsx","../../../web/src/components/TableToolbar.tsx","../../../web/src/components/DataTable.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction MagnifyingGlassIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(MagnifyingGlassIcon);\nexport default ForwardRef;","// Глобальный модуль поиска\r\n// Модули: React, heroicons, i18next, ui\r\nimport React from \"react\";\r\nimport { MagnifyingGlassIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport useTasks from \"../context/useTasks\";\r\n\r\nexport default function GlobalSearch() {\r\n  const { query, setQuery } = useTasks();\r\n  const { t } = useTranslation();\r\n  const ref = React.useRef<HTMLInputElement>(null);\r\n  const [value, setValue] = React.useState(query);\r\n\r\n  const clear = () => {\r\n    setValue(\"\");\r\n    setQuery(\"\");\r\n    ref.current?.focus();\r\n  };\r\n\r\n  const search = () => {\r\n    setQuery(value);\r\n  };\r\n\r\n  const onKey = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Escape\") {\r\n      e.stopPropagation();\r\n      clear();\r\n      ref.current?.blur();\r\n    }\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      search();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-1.5\">\r\n      <div className=\"relative\">\r\n        <MagnifyingGlassIcon className=\"pointer-events-none absolute top-1/2 left-2 size-4 -translate-y-1/2 text-gray-400\" />\r\n        <Input\r\n          ref={ref}\r\n          value={value}\r\n          onChange={(e) => setValue(e.target.value)}\r\n          onKeyDown={onKey}\r\n          placeholder={t(\"search\")}\r\n          aria-label={t(\"search\")}\r\n          className=\"h-8 w-48 pr-8 pl-8\"\r\n        />\r\n        {value && (\r\n          <button\r\n            onClick={clear}\r\n            aria-label=\"Очистить\"\r\n            className=\"absolute top-1/2 right-2 -translate-y-1/2 text-gray-400 hover:text-black\"\r\n          >\r\n            <XMarkIcon className=\"size-4\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n      <button onClick={search} className=\"rounded border px-1.5 py-1\">\r\n        {t(\"find\")}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","// Фильтры поиска задач\r\n// Модули: React, shared, useTasks\r\nimport React from \"react\";\r\nimport { TASK_STATUSES, PRIORITIES, TASK_TYPES } from \"shared\";\r\nimport useTasks from \"../context/useTasks\";\r\nimport type { TaskFilterUser } from \"../context/TasksContext\";\r\n\r\ninterface Props {\r\n  inline?: boolean;\r\n}\r\n\r\nexport default function SearchFilters({ inline = false }: Props) {\r\n  const { filters, setFilters, filterUsers } = useTasks();\r\n  const [local, setLocal] = React.useState(filters);\r\n\r\n  React.useEffect(() => {\r\n    setLocal(filters);\r\n  }, [filters]);\r\n\r\n  const toFieldId = React.useCallback(\r\n    (prefix: string, value: string) =>\r\n      `${prefix}-${value}`\r\n        .toLowerCase()\r\n        .replace(/[^a-z0-9а-яё]+/gi, \"-\")\r\n        .replace(/-+/g, \"-\")\r\n        .replace(/^-|-$/g, \"\"),\r\n    [],\r\n  );\r\n\r\n  const toggleString = (\r\n    key: \"status\" | \"priority\" | \"taskTypes\",\r\n    value: string,\r\n  ) => {\r\n    setLocal((prev) => {\r\n      const arr = prev[key];\r\n      const exists = arr.includes(value);\r\n      const next = exists ? arr.filter((v) => v !== value) : [...arr, value];\r\n      return { ...prev, [key]: next };\r\n    });\r\n  };\r\n\r\n  const toggleAssignee = (id: number) => {\r\n    setLocal((prev) => {\r\n      const exists = prev.assignees.includes(id);\r\n      const next = exists\r\n        ? prev.assignees.filter((value) => value !== id)\r\n        : [...prev.assignees, id];\r\n      return { ...prev, assignees: next };\r\n    });\r\n  };\r\n\r\n  const renderAssigneeLabel = (user: TaskFilterUser) => {\r\n    if (user.username) {\r\n      return `${user.name} (@${user.username})`;\r\n    }\r\n    return user.name;\r\n  };\r\n\r\n  const content = (\r\n    <div className=\"flex w-52 flex-col gap-1.5 text-sm\">\r\n      <div>\r\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\r\n          Статус\r\n        </span>\r\n        {TASK_STATUSES.map((s) => {\r\n          const fieldId = toFieldId(\"status\", s);\r\n          return (\r\n            <label\r\n              key={s}\r\n              className=\"flex items-center gap-1 text-[13px]\"\r\n              htmlFor={fieldId}\r\n            >\r\n              <input\r\n                id={fieldId}\r\n                name=\"status[]\"\r\n                type=\"checkbox\"\r\n                checked={local.status.includes(s)}\r\n                onChange={() => toggleString(\"status\", s)}\r\n              />\r\n              {s}\r\n            </label>\r\n          );\r\n        })}\r\n      </div>\r\n      <div>\r\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\r\n          Приоритет\r\n        </span>\r\n        {PRIORITIES.map((p) => {\r\n          const fieldId = toFieldId(\"priority\", p);\r\n          return (\r\n            <label\r\n              key={p}\r\n              className=\"flex items-center gap-1 text-[13px]\"\r\n              htmlFor={fieldId}\r\n            >\r\n              <input\r\n                id={fieldId}\r\n                name=\"priority[]\"\r\n                type=\"checkbox\"\r\n                checked={local.priority.includes(p)}\r\n                onChange={() => toggleString(\"priority\", p)}\r\n              />\r\n              {p}\r\n            </label>\r\n          );\r\n        })}\r\n      </div>\r\n      <div>\r\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\r\n          Тип задачи\r\n        </span>\r\n        {TASK_TYPES.map((type) => {\r\n          const fieldId = toFieldId(\"task-type\", type);\r\n          return (\r\n            <label\r\n              key={type}\r\n              className=\"flex items-center gap-1 text-[13px]\"\r\n              htmlFor={fieldId}\r\n            >\r\n              <input\r\n                id={fieldId}\r\n                name=\"taskTypes[]\"\r\n                type=\"checkbox\"\r\n                checked={local.taskTypes.includes(type)}\r\n                onChange={() => toggleString(\"taskTypes\", type)}\r\n              />\r\n              {type}\r\n            </label>\r\n          );\r\n        })}\r\n      </div>\r\n      <div>\r\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\r\n          Исполнители\r\n        </span>\r\n        <div className=\"max-h-28 overflow-y-auto pr-1\">\r\n          {filterUsers.map((user) => {\r\n            const fieldId = toFieldId(\"assignee\", String(user.id));\r\n            return (\r\n              <label\r\n                key={user.id}\r\n                className=\"flex items-center gap-1 text-[13px]\"\r\n                htmlFor={fieldId}\r\n              >\r\n                <input\r\n                  id={fieldId}\r\n                  name=\"assignees[]\"\r\n                  type=\"checkbox\"\r\n                  checked={local.assignees.includes(user.id)}\r\n                  onChange={() => toggleAssignee(user.id)}\r\n                />\r\n                {renderAssigneeLabel(user)}\r\n              </label>\r\n            );\r\n          })}\r\n          {filterUsers.length === 0 ? (\r\n            <span className=\"block text-[13px] text-muted-foreground\">\r\n              Нет доступных исполнителей\r\n            </span>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex items-center gap-1.5\">\r\n        <input\r\n          type=\"date\"\r\n          className=\"rounded border px-1.5 py-1 text-[13px]\"\r\n          name=\"from\"\r\n          value={local.from}\r\n          onChange={(e) => setLocal({ ...local, from: e.target.value })}\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          className=\"rounded border px-1.5 py-1 text-[13px]\"\r\n          name=\"to\"\r\n          value={local.to}\r\n          onChange={(e) => setLocal({ ...local, to: e.target.value })}\r\n        />\r\n      </div>\r\n      <button\r\n        onClick={() => setFilters(local)}\r\n        className=\"mt-1.5 rounded border px-1.5 py-1 text-[13px]\"\r\n      >\r\n        Искать\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  if (inline) return content;\r\n\r\n  return (\r\n    <details className=\"relative\">\r\n      <summary className=\"cursor-pointer rounded border px-1.5 py-0.5 select-none text-sm\">\r\n        Фильтры\r\n      </summary>\r\n      <div className=\"absolute z-10 mt-1 rounded border bg-white p-1.5 shadow\">\r\n        {content}\r\n      </div>\r\n    </details>\r\n  );\r\n}\r\n","// Назначение файла: общий тулбар таблицы с экспортом, поиском и фильтрацией\r\n// Модули: React, @tanstack/react-table, jspdf\r\nimport React from \"react\";\r\nimport type { Table } from \"@tanstack/react-table\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport GlobalSearch from \"./GlobalSearch\";\r\nimport SearchFilters from \"./SearchFilters\";\r\n\r\ninterface Props<T> {\r\n  table: Table<T>;\r\n  children?: React.ReactNode;\r\n  showGlobalSearch?: boolean;\r\n  showFilters?: boolean;\r\n}\r\n\r\nexport default function TableToolbar<T>({\r\n  table,\r\n  children,\r\n  showGlobalSearch = true,\r\n  showFilters = true,\r\n}: Props<T>) {\r\n  const columns = table.getAllLeafColumns();\r\n  const { t } = useTranslation();\r\n\r\n  const exportCsv = () => {\r\n    const headers = columns\r\n      .filter((c) => c.getIsVisible())\r\n      .map((c) => c.columnDef.header as string);\r\n    const rows = table\r\n      .getRowModel()\r\n      .rows.map((r) =>\r\n        r.getVisibleCells().map((c) => String(c.getValue() ?? \"\")),\r\n      );\r\n    const csv = [headers.join(\",\"), ...rows.map((r) => r.join(\",\"))].join(\"\\n\");\r\n    const blob = new Blob([csv], { type: \"text/csv\" });\r\n    const a = document.createElement(\"a\");\r\n    a.href = URL.createObjectURL(blob);\r\n    a.download = \"table.csv\";\r\n    a.click();\r\n  };\r\n\r\n  const exportPdf = async () => {\r\n    const pdfEntry = \"jspdf\";\r\n    const autoTableEntry = \"jspdf-autotable\";\r\n    const { default: jsPDF } = await import(/* @vite-ignore */ pdfEntry);\r\n    await import(/* @vite-ignore */ autoTableEntry);\r\n    const headers = columns\r\n      .filter((c) => c.getIsVisible())\r\n      .map((c) => c.columnDef.header as string);\r\n    const rows = table\r\n      .getRowModel()\r\n      .rows.map((r) =>\r\n        r.getVisibleCells().map((c) => String(c.getValue() ?? \"\")),\r\n      );\r\n    const doc = new jsPDF();\r\n    (doc as any).autoTable({ head: [headers], body: rows });\r\n    doc.save(\"table.pdf\");\r\n  };\r\n\r\n  const toggleColumn = (id: string) => {\r\n    const col = table.getColumn(id);\r\n    if (col) col.toggleVisibility();\r\n  };\r\n\r\n  const moveColumn = (id: string, dir: number) => {\r\n    const order = table.getState().columnOrder;\r\n    const idx = order.indexOf(id);\r\n    if (idx === -1) return;\r\n    const next = idx + dir;\r\n    if (next < 0 || next >= order.length) return;\r\n    const newOrder = [...order];\r\n    [newOrder[idx], newOrder[next]] = [newOrder[next], newOrder[idx]];\r\n    table.setColumnOrder(newOrder);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex w-full flex-wrap items-center gap-1 text-xs sm:text-sm\">\r\n      <div className=\"flex flex-1 flex-wrap items-center gap-1\">\r\n        {showGlobalSearch ? <GlobalSearch /> : null}\r\n        {children}\r\n      </div>\r\n      <div className=\"ml-auto flex w-full flex-wrap items-center justify-end gap-1 sm:w-auto\">\r\n        <details className=\"group relative flex-shrink-0\">\r\n          <summary\r\n            className=\"cursor-pointer rounded-t-md rounded-b-none border border-b-0 border-gray-200 bg-white px-2 py-1 text-xs font-semibold leading-tight text-gray-700 shadow-sm transition-colors select-none hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 group-open:border-gray-200 sm:text-sm\"\r\n          >\r\n            {t(\"export\")}\r\n          </summary>\r\n          <div\r\n            className=\"absolute left-0 top-full z-10 w-32 min-w-full rounded-b-md border border-t border-gray-200 bg-white p-1 shadow-sm\"\r\n          >\r\n            <button\r\n              onClick={exportCsv}\r\n              className=\"block w-full rounded px-1.5 py-1 text-left text-xs font-medium transition-colors hover:bg-gray-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 sm:text-sm\"\r\n            >\r\n              CSV\r\n            </button>\r\n            <button\r\n              onClick={() => void exportPdf()}\r\n              className=\"mt-1 block w-full rounded px-1.5 py-1 text-left text-xs font-medium transition-colors hover:bg-gray-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 sm:text-sm\"\r\n            >\r\n              PDF\r\n            </button>\r\n          </div>\r\n        </details>\r\n        <details className=\"group relative flex-shrink-0\">\r\n          <summary\r\n            className=\"cursor-pointer rounded-t-md rounded-b-none border border-b-0 border-gray-200 bg-white px-2 py-1 text-xs font-semibold leading-tight text-gray-700 shadow-sm transition-colors select-none hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 group-open:border-gray-200 sm:text-sm\"\r\n          >\r\n            {t(\"settings\")}\r\n          </summary>\r\n          <div\r\n            className=\"absolute left-0 top-full z-10 w-64 min-w-full space-y-1 rounded-b-md border border-t border-gray-200 bg-white p-1.5 shadow-sm\"\r\n          >\r\n            {showFilters ? <SearchFilters inline /> : null}\r\n            <div className=\"border-t pt-1\">\r\n              {columns.map((col) => (\r\n                <div\r\n                  key={col.id}\r\n                  className=\"flex items-center justify-between gap-1\"\r\n                >\r\n                  <label\r\n                    className=\"flex items-center gap-1 text-xs font-medium sm:text-sm\"\r\n                    htmlFor={`table-column-${col.id}`}\r\n                  >\r\n                    <input\r\n                      id={`table-column-${col.id}`}\r\n                      name={`column-${col.id}`}\r\n                      type=\"checkbox\"\r\n                      checked={col.getIsVisible()}\r\n                      onChange={() => toggleColumn(col.id)}\r\n                    />\r\n                    {col.columnDef.header as string}\r\n                  </label>\r\n                  <div className=\"flex gap-1\">\r\n                    <button\r\n                      onClick={() => moveColumn(col.id, -1)}\r\n                      className=\"rounded border border-gray-200 px-1 text-xs font-medium leading-none text-gray-700 transition-colors hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1\"\r\n                    >\r\n                      ←\r\n                    </button>\r\n                    <button\r\n                      onClick={() => moveColumn(col.id, 1)}\r\n                      className=\"rounded border border-gray-200 px-1 text-xs font-medium leading-none text-gray-700 transition-colors hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1\"\r\n                    >\r\n                      →\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </details>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// Назначение файла: универсальная таблица на React Table с виртуализацией строк\r\n// Основные модули: React, @tanstack/react-table, TableToolbar\r\n/* eslint-disable react-refresh/only-export-components */\r\nimport React from \"react\";\r\nimport {\r\n  ColumnDef,\r\n  flexRender,\r\n  getCoreRowModel,\r\n  useReactTable,\r\n  Table as TableType,\r\n} from \"@tanstack/react-table\";\r\n\r\nimport TableToolbar from \"./TableToolbar\";\r\n\r\ninterface DataTableProps<T> {\r\n  columns: ColumnDef<T, any>[];\r\n  data: T[];\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  pageCount?: number;\r\n  onPageChange: (page: number) => void;\r\n  onPageSizeChange?: (size: number) => void;\r\n  onRowClick?: (row: T) => void;\r\n  toolbarChildren?: React.ReactNode;\r\n  showGlobalSearch?: boolean;\r\n  showFilters?: boolean;\r\n  wrapCellsAsBadges?: boolean;\r\n  badgeClassName?: string;\r\n  badgeWrapperClassName?: string;\r\n  badgeEmptyPlaceholder?: string;\r\n  enableVirtualization?: boolean;\r\n  virtualizationOverscan?: number;\r\n  virtualizationThreshold?: number;\r\n  rowHeight?: number;\r\n  maxBodyHeight?: number;\r\n}\r\n\r\ninterface ColumnMeta {\r\n  minWidth?: string;\r\n  maxWidth?: string;\r\n  width?: string;\r\n  cellClassName?: string;\r\n  headerClassName?: string;\r\n  renderAsBadges?: boolean;\r\n}\r\n\r\nexport const defaultBadgeClassName = [\r\n  \"inline-flex min-h-[1.65rem] max-w-full items-center justify-start gap-1\",\r\n  \"rounded-full px-2.5 py-0.5 text-[0.72rem] font-semibold leading-tight text-slate-900\",\r\n  \"ring-1 ring-slate-300/80 bg-slate-100/90 shadow-xs\",\r\n  \"dark:text-slate-100 dark:ring-slate-600/60 dark:bg-slate-800/80\",\r\n  \"truncate\",\r\n].join(\" \");\r\nexport const defaultBadgeWrapperClassName =\r\n  \"flex flex-wrap items-center gap-1.5\";\r\n\r\nconst sanitizeHtml = (html: string): string =>\r\n  html.replace(/<[^>]+>/g, \" \").replace(/\\s+/g, \" \").trim();\r\n\r\nconst normalizeToText = (value: unknown): string => {\r\n  if (value === null || value === undefined) return \"\";\r\n  if (typeof value === \"string\") {\r\n    return sanitizeHtml(value);\r\n  }\r\n  if (typeof value === \"number\" || typeof value === \"boolean\") {\r\n    return String(value).trim();\r\n  }\r\n  return \"\";\r\n};\r\n\r\nconst extractBadgeItems = (value: React.ReactNode): string[] => {\r\n  const items: string[] = [];\r\n  const pushItem = (text: string) => {\r\n    if (!text) return;\r\n    if (items.includes(text)) return;\r\n    items.push(text);\r\n  };\r\n  const visit = (node: React.ReactNode) => {\r\n    if (node === null || node === undefined || node === false) return;\r\n    if (typeof node === \"string\" || typeof node === \"number\") {\r\n      const text = String(node).trim();\r\n      if (!text) return;\r\n      const parts = text\r\n        .split(/[,\\n;]/)\r\n        .map((part) => part.trim())\r\n        .filter(Boolean);\r\n      if (parts.length) {\r\n        items.push(...parts);\r\n      } else {\r\n        items.push(text);\r\n      }\r\n      return;\r\n    }\r\n    if (Array.isArray(node)) {\r\n      node.forEach(visit);\r\n      return;\r\n    }\r\n    if (React.isValidElement(node)) {\r\n      const element = node as React.ReactElement<Record<string, unknown>>;\r\n      const beforeLength = items.length;\r\n      visit(element.props.children as React.ReactNode);\r\n      if (items.length === beforeLength) {\r\n        const props = element.props || {};\r\n        const fallbackCandidates: unknown[] = [\r\n          props[\"data-badge-label\"],\r\n          props[\"data-label\"],\r\n          props[\"aria-label\"],\r\n          props.title,\r\n        ];\r\n        fallbackCandidates.forEach((candidate) => {\r\n          if (candidate === null || candidate === undefined) return;\r\n          const text = String(candidate).trim();\r\n          pushItem(text);\r\n        });\r\n        const html = props.dangerouslySetInnerHTML as\r\n          | { __html?: unknown }\r\n          | undefined;\r\n        const rawHtml =\r\n          html && typeof html.__html === \"string\"\r\n            ? sanitizeHtml(html.__html)\r\n            : \"\";\r\n        if (rawHtml) {\r\n          pushItem(rawHtml);\r\n        }\r\n        const renderValue = props.renderValue;\r\n        if (typeof renderValue === \"function\") {\r\n          const rendered = normalizeToText(renderValue());\r\n          pushItem(rendered);\r\n        }\r\n        const getValue = props.getValue;\r\n        if (typeof getValue === \"function\") {\r\n          const rawValue = normalizeToText(getValue());\r\n          pushItem(rawValue);\r\n        }\r\n      }\r\n      return;\r\n    }\r\n    const fallback = String(node).trim();\r\n    pushItem(fallback);\r\n  };\r\n  visit(value);\r\n  return items;\r\n};\r\n\r\nconst renderBadgeContent = (\r\n  content: React.ReactNode,\r\n  badgeClassName: string,\r\n  wrapperClassName: string,\r\n  emptyPlaceholder: string,\r\n) => {\r\n  const items = extractBadgeItems(content);\r\n  if (!items.length) {\r\n    return (\r\n      <span className={badgeClassName} title={emptyPlaceholder}>\r\n        {emptyPlaceholder}\r\n      </span>\r\n    );\r\n  }\r\n  if (items.length === 1) {\r\n    return (\r\n      <span className={badgeClassName} title={items[0]}>\r\n        {items[0]}\r\n      </span>\r\n    );\r\n  }\r\n  return (\r\n    <div className={wrapperClassName}>\r\n      {items.map((item, index) => (\r\n        <span key={`${item}-${index}`} className={badgeClassName} title={item}>\r\n          {item}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst containerClasses = [\r\n  \"relative w-full overflow-auto rounded-xl border border-border/70\",\r\n  \"bg-background shadow-sm dark:border-border/60\",\r\n].join(\" \");\r\n\r\nconst tableClasses = [\r\n  \"min-w-full table-auto caption-bottom font-ui text-[12px] leading-tight\",\r\n  \"text-foreground dark:text-foreground sm:text-[13px]\",\r\n].join(\" \");\r\n\r\nconst headerCellClasses = [\r\n  \"border-b border-border/70 px-1.5 py-1.5 text-left align-middle font-semibold\",\r\n  \"text-[11px] leading-snug text-foreground sm:px-2 sm:text-[13px]\",\r\n  \"whitespace-normal\",\r\n].join(\" \");\r\n\r\nconst bodyCellClasses = [\r\n  \"relative z-[1] px-1.5 py-1.5 align-top text-[12px] leading-snug\",\r\n  \"text-foreground sm:px-2 sm:text-sm\",\r\n  \"whitespace-normal\",\r\n].join(\" \");\r\n\r\nconst bodyRowClasses = [\r\n  \"group relative isolate min-h-[2.5rem] cursor-pointer select-none\",\r\n  \"odd:bg-sky-50/70 even:bg-emerald-50/70 odd:text-slate-900 even:text-slate-900\",\r\n  \"hover:odd:bg-sky-100/80 hover:even:bg-emerald-100/80\",\r\n  \"dark:odd:bg-slate-800/70 dark:even:bg-slate-700/70 dark:text-slate-100\",\r\n  \"dark:hover:odd:bg-slate-700 dark:hover:even:bg-slate-600\",\r\n].join(\" \");\r\n\r\nconst headerRowClasses = [\r\n  \"bg-muted/20 text-foreground\",\r\n].join(\" \");\r\n\r\nexport default function DataTable<T>({\r\n  columns,\r\n  data,\r\n  pageIndex,\r\n  pageSize,\r\n  pageCount,\r\n  onPageChange,\r\n  onPageSizeChange,\r\n  onRowClick,\r\n  toolbarChildren,\r\n  showGlobalSearch = true,\r\n  showFilters = true,\r\n  wrapCellsAsBadges = false,\r\n  badgeClassName = defaultBadgeClassName,\r\n  badgeWrapperClassName = defaultBadgeWrapperClassName,\r\n  badgeEmptyPlaceholder = \"—\",\r\n  enableVirtualization = true,\r\n  virtualizationOverscan = 6,\r\n  virtualizationThreshold = 40,\r\n  rowHeight = 52,\r\n  maxBodyHeight = 520,\r\n}: DataTableProps<T>) {\r\n  const [columnVisibility, setColumnVisibility] = React.useState({});\r\n  const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\r\n\r\n  const table = useReactTable({\r\n    data,\r\n    columns,\r\n    state: {\r\n      columnVisibility,\r\n      columnOrder,\r\n      pagination: { pageIndex, pageSize },\r\n    },\r\n    onColumnVisibilityChange: setColumnVisibility,\r\n    onColumnOrderChange: setColumnOrder,\r\n    getCoreRowModel: getCoreRowModel(),\r\n    manualPagination: true,\r\n    pageCount,\r\n  });\r\n\r\n  const rows = table.getRowModel().rows;\r\n  const virtualizationContainerRef = React.useRef<HTMLDivElement>(null);\r\n  const [scrollTop, setScrollTop] = React.useState(0);\r\n  const [viewportHeight, setViewportHeight] = React.useState(maxBodyHeight);\r\n\r\n  const virtualizationActive =\r\n    enableVirtualization && rows.length > virtualizationThreshold;\r\n\r\n  React.useLayoutEffect(() => {\r\n    if (!virtualizationActive) return;\r\n    const element = virtualizationContainerRef.current;\r\n    if (!element) return;\r\n    const updateHeight = () => {\r\n      setViewportHeight(element.clientHeight || maxBodyHeight);\r\n    };\r\n    updateHeight();\r\n    if (typeof ResizeObserver !== \"undefined\") {\r\n      const observer = new ResizeObserver(updateHeight);\r\n      observer.observe(element);\r\n      return () => observer.disconnect();\r\n    }\r\n    return undefined;\r\n  }, [virtualizationActive, maxBodyHeight]);\r\n\r\n  React.useEffect(() => {\r\n    if (!virtualizationContainerRef.current) return;\r\n    virtualizationContainerRef.current.scrollTop = 0;\r\n    setScrollTop(0);\r\n  }, [rows.length, virtualizationActive]);\r\n\r\n  const handleScroll = React.useCallback(\r\n    (event: React.UIEvent<HTMLDivElement>) => {\r\n      if (!virtualizationActive) return;\r\n      setScrollTop(event.currentTarget.scrollTop);\r\n    },\r\n    [virtualizationActive],\r\n  );\r\n\r\n  const totalHeight = rows.length * rowHeight;\r\n  const effectiveViewport = virtualizationActive\r\n    ? viewportHeight\r\n    : rows.length * rowHeight;\r\n  const startIndex = virtualizationActive\r\n    ? Math.max(0, Math.floor(scrollTop / rowHeight) - virtualizationOverscan)\r\n    : 0;\r\n  const endIndex = virtualizationActive\r\n    ? Math.min(\r\n        rows.length,\r\n        Math.ceil((scrollTop + effectiveViewport) / rowHeight) +\r\n          virtualizationOverscan,\r\n      )\r\n    : rows.length;\r\n\r\n  const visibleRows = virtualizationActive\r\n    ? rows.slice(startIndex, endIndex)\r\n    : rows;\r\n  const paddingTop = virtualizationActive ? startIndex * rowHeight : 0;\r\n  const paddingBottom = virtualizationActive\r\n    ? Math.max(totalHeight - endIndex * rowHeight, 0)\r\n    : 0;\r\n\r\n  const columnCount = Math.max(table.getVisibleLeafColumns().length, 1);\r\n\r\n  return (\r\n    <div className=\"w-full space-y-3 px-0 font-ui text-[13px] sm:px-1.5 sm:text-sm\">\r\n      <TableToolbar\r\n        table={table as TableType<T>}\r\n        showGlobalSearch={showGlobalSearch}\r\n        showFilters={showFilters}\r\n      >\r\n        {toolbarChildren}\r\n      </TableToolbar>\r\n      <div\r\n        ref={virtualizationContainerRef}\r\n        className={containerClasses}\r\n        style={{ maxHeight: virtualizationActive ? maxBodyHeight : undefined }}\r\n        onScroll={handleScroll}\r\n      >\r\n        <table className={tableClasses}>\r\n          <thead>\r\n            {table.getHeaderGroups().map((hg) => (\r\n              <tr key={hg.id} className={headerRowClasses}>\r\n                {hg.headers.map((header) => {\r\n                  const meta =\r\n                    (header.column.columnDef.meta as ColumnMeta | undefined) || {};\r\n                  const baseSize = header.getSize();\r\n                  const computedWidth =\r\n                    typeof meta.width === \"string\"\r\n                      ? meta.width\r\n                      : Number.isFinite(baseSize)\r\n                        ? `${baseSize}px`\r\n                        : undefined;\r\n                  const headerClassName = [\r\n                    headerCellClasses,\r\n                    meta.headerClassName,\r\n                  ]\r\n                    .filter(Boolean)\r\n                    .join(\" \");\r\n                  return (\r\n                    <th\r\n                      key={header.id}\r\n                      style={{\r\n                        width: computedWidth,\r\n                        minWidth: meta.minWidth ?? \"4rem\",\r\n                        maxWidth: meta.maxWidth ?? \"24rem\",\r\n                      }}\r\n                      className={headerClassName}\r\n                    >\r\n                      {header.isPlaceholder\r\n                        ? null\r\n                        : flexRender(\r\n                            header.column.columnDef.header,\r\n                            header.getContext(),\r\n                          )}\r\n                    </th>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n          </thead>\r\n          <tbody>\r\n            {paddingTop > 0 ? (\r\n              <tr aria-hidden style={{ height: paddingTop }}>\r\n                <td colSpan={columnCount} />\r\n              </tr>\r\n            ) : null}\r\n            {visibleRows.map((row) => (\r\n              <tr\r\n                key={row.id}\r\n                onClick={() => onRowClick?.(row.original)}\r\n                className={onRowClick ? bodyRowClasses : bodyRowClasses.replace(\"cursor-pointer\", \"cursor-default\")}\r\n              >\r\n                {row.getVisibleCells().map((cell) => {\r\n                  const meta =\r\n                    (cell.column.columnDef.meta as ColumnMeta | undefined) || {};\r\n                  const baseSize = cell.column.getSize();\r\n                  const computedWidth =\r\n                    typeof meta.width === \"string\"\r\n                      ? meta.width\r\n                      : Number.isFinite(baseSize)\r\n                        ? `${baseSize}px`\r\n                        : undefined;\r\n                  const cellClassName = [\r\n                    bodyCellClasses,\r\n                    meta.cellClassName,\r\n                  ]\r\n                    .filter(Boolean)\r\n                    .join(\" \");\r\n                  const cellContent = flexRender(\r\n                    cell.column.columnDef.cell,\r\n                    cell.getContext(),\r\n                  );\r\n                  const shouldWrapWithBadges =\r\n                    wrapCellsAsBadges && meta.renderAsBadges !== false;\r\n                  return (\r\n                    <td\r\n                      key={cell.id}\r\n                      style={{\r\n                        width: computedWidth,\r\n                        minWidth: meta.minWidth ?? \"4rem\",\r\n                        maxWidth: meta.maxWidth ?? \"24rem\",\r\n                      }}\r\n                      className={cellClassName}\r\n                    >\r\n                      {shouldWrapWithBadges\r\n                        ? renderBadgeContent(\r\n                            cellContent,\r\n                            badgeClassName,\r\n                            badgeWrapperClassName,\r\n                            badgeEmptyPlaceholder,\r\n                          )\r\n                        : cellContent}\r\n                    </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n            {paddingBottom > 0 ? (\r\n              <tr aria-hidden style={{ height: paddingBottom }}>\r\n                <td colSpan={columnCount} />\r\n              </tr>\r\n            ) : null}\r\n            {!rows.length ? (\r\n              <tr>\r\n                <td colSpan={columnCount} className=\"px-4 py-6 text-center text-sm text-muted-foreground\">\r\n                  Нет данных для отображения\r\n                </td>\r\n              </tr>\r\n            ) : null}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div className=\"flex flex-col gap-2 text-xs sm:flex-row sm:items-center sm:justify-between sm:text-sm\">\r\n        <div className=\"flex flex-wrap items-center gap-1\">\r\n          <button\r\n            onClick={() => onPageChange(Math.max(0, pageIndex - 1))}\r\n            disabled={pageIndex === 0}\r\n            className=\"rounded border border-[color:var(--color-gray-300)] px-2 py-1 font-medium text-[color:var(--color-gray-700)] transition hover:bg-[color:var(--color-gray-50)] disabled:cursor-not-allowed disabled:opacity-50 dark:border-[color:var(--color-gray-700)] dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)]\"\r\n          >\r\n            Назад\r\n          </button>\r\n          <span className=\"px-1 text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n            Стр. {pageIndex + 1}\r\n            {pageCount ? ` / ${pageCount}` : \"\"}\r\n          </span>\r\n          <button\r\n            onClick={() =>\r\n              onPageChange(\r\n                pageCount\r\n                  ? Math.min(pageCount - 1, pageIndex + 1)\r\n                  : pageIndex + 1,\r\n              )\r\n            }\r\n            disabled={pageCount ? pageIndex + 1 >= pageCount : false}\r\n            className=\"rounded border border-[color:var(--color-gray-300)] px-2 py-1 font-medium text-[color:var(--color-gray-700)] transition hover:bg-[color:var(--color-gray-50)] disabled:cursor-not-allowed disabled:opacity-50 dark:border-[color:var(--color-gray-700)] dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)]\"\r\n          >\r\n            Вперёд\r\n          </button>\r\n        </div>\r\n        {onPageSizeChange ? (\r\n          <select\r\n            value={pageSize}\r\n            onChange={(event) => onPageSizeChange(Number(event.target.value))}\r\n            className=\"h-8 min-w-[4rem] rounded border border-[color:var(--color-gray-300)] bg-white px-1.5 text-xs text-[color:var(--color-gray-700)] shadow-sm transition focus:border-[color:var(--color-brand-400)] focus:outline-none focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-[color:var(--color-gray-100)]\"\r\n          >\r\n            {[10, 25, 50].map((size) => (\r\n              <option key={size} value={size}>\r\n                {size}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["MagnifyingGlassIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","GlobalSearch","query","setQuery","useTasks","t","useTranslation","ref","React","value","setValue","clear","_a","search","onKey","e","jsxs","jsx","Input","XMarkIcon","SearchFilters","inline","filters","setFilters","filterUsers","local","setLocal","toFieldId","prefix","toggleString","key","prev","arr","next","v","toggleAssignee","id","renderAssigneeLabel","user","content","TASK_STATUSES","s","fieldId","PRIORITIES","p","TASK_TYPES","type","TableToolbar","table","children","showGlobalSearch","showFilters","columns","exportCsv","headers","rows","r","c","csv","blob","a","exportPdf","pdfEntry","autoTableEntry","jsPDF","doc","toggleColumn","col","moveColumn","dir","order","idx","newOrder","defaultBadgeClassName","defaultBadgeWrapperClassName","sanitizeHtml","html","normalizeToText","extractBadgeItems","items","pushItem","text","visit","node","parts","part","element","beforeLength","candidate","rawHtml","renderValue","rendered","getValue","rawValue","fallback","renderBadgeContent","badgeClassName","wrapperClassName","emptyPlaceholder","item","index","containerClasses","tableClasses","headerCellClasses","bodyCellClasses","bodyRowClasses","headerRowClasses","DataTable","data","pageIndex","pageSize","pageCount","onPageChange","onPageSizeChange","onRowClick","toolbarChildren","wrapCellsAsBadges","badgeWrapperClassName","badgeEmptyPlaceholder","enableVirtualization","virtualizationOverscan","virtualizationThreshold","rowHeight","maxBodyHeight","columnVisibility","setColumnVisibility","columnOrder","setColumnOrder","useReactTable","getCoreRowModel","virtualizationContainerRef","scrollTop","setScrollTop","viewportHeight","setViewportHeight","virtualizationActive","updateHeight","observer","handleScroll","event","totalHeight","effectiveViewport","startIndex","endIndex","visibleRows","paddingTop","paddingBottom","columnCount","hg","header","meta","baseSize","computedWidth","headerClassName","_b","flexRender","row","cell","cellClassName","cellContent","shouldWrapWithBadges","size"],"mappings":"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","x_google_ignoreList":[0]}