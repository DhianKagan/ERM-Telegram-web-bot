import{j as Je}from"./index-DAGCYRZX.js";import{b as ee}from"./vendor-DBLHOZWC.js";import{A as $s}from"./App-DjzPhsfn.js";const We=e=>typeof e=="object"&&e!==null,Fn=(e,t)=>{if(e===t)return!0;if(e==null||t==null||!We(e)&&!We(t))return!1;if(We(e)&&We(t)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(t,n)){if(!Fn(e[n],t[n]))return!1}else return!1;return!0}return!1},xs=e=>{const t=ee.useRef(e);return Fn(t.current,e)||(t.current=e),t.current};function Es(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function As(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),s.forEach(function(i){Es(e,i,n[i])})}return e}function qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n.push.apply(n,s)}return n}function Is(e,t){return t=t!=null?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qs(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Ts(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,r;for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Ps(e,t){if(e==null)return{};var n=Ts(e,t),s,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Ms(...e){const t=[];return e.forEach(n=>{if(n)switch(typeof n){case"string":t.push(n);break;case"object":Object.keys(n).forEach(s=>{n[s]&&t.push(s)});break;default:t.push("".concat(n))}}),t.join(" ")}const Xe=ee.createContext({isRendered:!1}),Et=!!(typeof window<"u"&&window.document&&window.document.createElement),Rs=(e,t)=>{t&&(typeof t=="function"?t(e):t.current=e)},js=(...e)=>{let t=null;return{get current(){return t},set current(n){t=n,e.forEach(s=>s&&Rs(n,s))}}},bt=()=>{var e;if(Et)return(e=window.Telegram)===null||e===void 0?void 0:e.WebApp},Vs=e=>{if(!Et||!window.matchMedia)return()=>{};const t=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{e(t.matches?"dark":"light")};return t.addEventListener("change",n),()=>t.removeEventListener("change",n)},Os=()=>Et&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",Bs=e=>{const{appearance:t}=ee.useContext(Xe),[n,s]=ee.useState(e||t||Os()),i=ee.useCallback(()=>{const r=bt();r&&s(r.colorScheme)},[]);return ee.useEffect(()=>{if(e!==void 0)return s(e),()=>{};const r=bt();return r?(r.onEvent("themeChanged",i),()=>r.offEvent("themeChanged",i)):Vs(s)},[e]),n},Ls=()=>{const e=bt();return e&&["ios","macos"].includes(e.platform)?"ios":"base"},Ds=e=>{if(e!==void 0)return e;const t=ee.useContext(Xe);return t.isRendered&&t.platform!==void 0?t.platform:Ls()},Us=e=>{if(e!==void 0)return e;const t=ee.useContext(Xe);return t.isRendered&&t.portalContainer!==void 0?t.portalContainer:ee.useRef(null)},Gs=ee.forwardRef((e,t)=>{var{platform:n,appearance:s,portalContainer:i,children:r,className:a}=e,u=Ps(e,["platform","appearance","portalContainer","children","className"]);const l=Bs(s),c=Us(i),p=Ds(n),h=xs({platform:p,appearance:l,portalContainer:c,isRendered:!0});return Je.jsx("div",Is(As({ref:js(t,c),className:Ms("tgui-6a12827a138e8827",p==="ios"&&"tgui-56dbb42c1dbd5e2b",l==="dark"&&"tgui-865b921add8ee075",a)},u),{children:Je.jsx(Xe.Provider,{value:h,children:r})}))});let Se;function Ns(e,t){Se?Se.set(e,t):t()}function Qe(e){if(Se)return e();Se=new Map;try{e()}finally{Se.forEach(t=>t()),Se=void 0}}function U(e,t){t||(t={});const n=t.equals||Object.is;let s=[],i=e;const r=c=>{if(!n(i,c)){const p=i;i=c,Ns(l,()=>{[...s].forEach(([h,b])=>{h(c,p),b&&u(h,!0)})})}};function a(c){const p=typeof c!="object"?{once:c}:c;return{once:p.once||!1,signal:p.signal||!1}}const u=(c,p)=>{const h=a(p),b=s.findIndex(([g,w])=>g===c&&w.once===h.once&&w.signal===h.signal);b>=0&&s.splice(b,1)},l=Object.assign(function(){return Ws(l),i},{destroy(){s=[]},set:r,reset(){r(e)},sub(c,p){return s.push([c,a(p)]),()=>u(c,p)},unsub:u,unsubAll(){s=s.filter(c=>c[1].signal)}});return l}const qe=[];function Ws(e){qe.length&&qe[qe.length-1].add(e)}function C(e,t){let n=new Set,s;function i(){return s||(s=U(a(),t))}function r(){i().set(a())}function a(){n.forEach(c=>{c.unsub(r,{signal:!0})});const u=new Set;let l;qe.push(u);try{l=e()}finally{qe.pop()}return u.forEach(c=>{c.sub(r,{signal:!0})}),n=u,l}return Object.assign(function(){return i()()},{destroy(){i().destroy()},sub(...u){return i().sub(...u)},unsub(...u){i().unsub(...u)},unsubAll(...u){i().unsubAll(...u)}})}var oe;function At(e){var t,n,s;return{lang:(t=e==null?void 0:e.lang)!=null?t:oe==null?void 0:oe.lang,message:e==null?void 0:e.message,abortEarly:(n=e==null?void 0:e.abortEarly)!=null?n:oe==null?void 0:oe.abortEarly,abortPipeEarly:(s=e==null?void 0:e.abortPipeEarly)!=null?s:oe==null?void 0:oe.abortPipeEarly}}var ct;function Hs(e){return ct==null?void 0:ct.get(e)}var lt;function zs(e){return lt==null?void 0:lt.get(e)}var pt;function Ks(e,t){var n;return(n=pt==null?void 0:pt.get(e))==null?void 0:n.get(t)}function Js(e){var n,s,i;const t=typeof e;return t==="string"?'"'.concat(e,'"'):t==="number"||t==="bigint"||t==="boolean"?"".concat(e):t==="object"||t==="function"?(i=e&&((s=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:s.name))!=null?i:"null":t}function z(e,t,n,s,i){var h,b,g,w,S,m,v,d;const r=i&&"input"in i?i.input:n.value,a=(b=(h=i==null?void 0:i.expected)!=null?h:e.expects)!=null?b:null,u=(g=i==null?void 0:i.received)!=null?g:Js(r),l={kind:e.kind,type:e.type,input:r,expected:a,received:u,message:"Invalid ".concat(t,": ").concat(a?"Expected ".concat(a," but r"):"R","eceived ").concat(u),requirement:e.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},c=e.kind==="schema",p=(d=(v=(m=(S=(w=i==null?void 0:i.message)!=null?w:e.message)!=null?S:Ks(e.reference,l.lang))!=null?m:c?zs(l.lang):null)!=null?v:s.message)!=null?d:Hs(l.lang);p!==void 0&&(l.message=typeof p=="function"?p(l):p),c&&(n.typed=!1),n.issues?n.issues.push(l):n.issues=[l]}function Q(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},At())}}}function kn(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Qs(e,t){var s;const n=[...new Set(e)];return n.length>1?"(".concat(n.join(" ".concat(t," ")),")"):(s=n[0])!=null?s:"never"}var Zs=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function et(e,t){return{kind:"validation",type:"check",reference:et,async:!1,expects:null,requirement:e,message:t,"~run"(n,s){return n.typed&&!this.requirement(n.value)&&z(this,"input",n,s),n}}}function qt(e){return{kind:"validation",type:"integer",reference:qt,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&z(this,"integer",t,n),t}}}function ue(e){return{kind:"transformation",type:"transform",reference:ue,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Ys(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function It(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function $n(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function xn(e,t){return{kind:"schema",type:"array",reference:xn,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Q(this)},"~run"(n,s){var r;const i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];for(let a=0;a<i.length;a++){const u=i[a],l=this.item["~run"]({value:u},s);if(l.issues){const c={type:"array",origin:"value",input:i,key:a,value:u};for(const p of l.issues)p.path?p.path.unshift(c):p.path=[c],(r=n.issues)==null||r.push(p);if(n.issues||(n.issues=l.issues),s.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value.push(l.value)}}else z(this,"type",n,s);return n}}}function me(e){return{kind:"schema",type:"boolean",reference:me,expects:"boolean",async:!1,message:e,get"~standard"(){return Q(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:z(this,"type",t,n),t}}}function tt(e){return{kind:"schema",type:"date",reference:tt,expects:"Date",async:!1,message:e,get"~standard"(){return Q(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?z(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:z(this,"type",t,n),t}}}function Tt(e){return{kind:"schema",type:"function",reference:Tt,expects:"Function",async:!1,message:e,get"~standard"(){return Q(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:z(this,"type",t,n),t}}}function Pt(e,t){return{kind:"schema",type:"instance",reference:Pt,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Q(this)},"~run"(n,s){return n.value instanceof this.class?n.typed=!0:z(this,"type",n,s),n}}}function G(e,t){return{kind:"schema",type:"loose_object",reference:G,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Q(this)},"~run"(n,s){var r;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const l=a in i?i[a]:It(u),c=u["~run"]({value:l},s);if(c.issues){const p={type:"object",origin:"value",input:i,key:a,value:l};for(const h of c.issues)h.path?h.path.unshift(p):h.path=[p],(r=n.issues)==null||r.push(h);if(n.issues||(n.issues=c.issues),s.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[a]=c.value}else if(u.fallback!==void 0)n.value[a]=Ys(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(z(this,"key",n,s,{input:void 0,expected:'"'.concat(a,'"'),path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),s.abortEarly))break}if(!n.issues||!s.abortEarly)for(const a in i)kn(i,a)&&!(a in this.entries)&&(n.value[a]=i[a])}else z(this,"type",n,s);return n}}}function Ce(e,t){return{kind:"schema",type:"nullish",reference:Ce,expects:"(".concat(e.expects," | null | undefined)"),async:!1,wrapped:e,default:t,get"~standard"(){return Q(this)},"~run"(n,s){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=It(this,n,s)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,s)}}}function pe(e){return{kind:"schema",type:"number",reference:pe,expects:"number",async:!1,message:e,get"~standard"(){return Q(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:z(this,"type",t,n),t}}}function $(e,t){return{kind:"schema",type:"optional",reference:$,expects:"(".concat(e.expects," | undefined)"),async:!1,wrapped:e,default:t,get"~standard"(){return Q(this)},"~run"(n,s){return n.value===void 0&&(this.default!==void 0&&(n.value=It(this,n,s)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,s)}}}function Mt(e,t,n){return{kind:"schema",type:"record",reference:Mt,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return Q(this)},"~run"(s,i){var a,u;const r=s.value;if(r&&typeof r=="object"){s.typed=!0,s.value={};for(const l in r)if(kn(r,l)){const c=r[l],p=this.key["~run"]({value:l},i);if(p.issues){const b={type:"object",origin:"key",input:r,key:l,value:c};for(const g of p.issues)g.path=[b],(a=s.issues)==null||a.push(g);if(s.issues||(s.issues=p.issues),i.abortEarly){s.typed=!1;break}}const h=this.value["~run"]({value:c},i);if(h.issues){const b={type:"object",origin:"value",input:r,key:l,value:c};for(const g of h.issues)g.path?g.path.unshift(b):g.path=[b],(u=s.issues)==null||u.push(g);if(s.issues||(s.issues=h.issues),i.abortEarly){s.typed=!1;break}}(!p.typed||!h.typed)&&(s.typed=!1),p.typed&&(s.value[p.value]=h.value)}}else z(this,"type",s,i);return s}}}function y(e){return{kind:"schema",type:"string",reference:y,expects:"string",async:!1,message:e,get"~standard"(){return Q(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:z(this,"type",t,n),t}}}function un(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function nt(e,t){return{kind:"schema",type:"union",reference:nt,expects:Qs(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Q(this)},"~run"(n,s){let i,r,a;for(const u of this.options){const l=u["~run"]({value:n.value},s);if(l.typed)if(l.issues)r?r.push(l):r=[l];else{i=l;break}else a?a.push(l):a=[l]}if(i)return i;if(r){if(r.length===1)return r[0];z(this,"type",n,s,{issues:un(r)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];z(this,"type",n,s,{issues:un(a)})}return n}}}function Rt(){return{kind:"schema",type:"unknown",reference:Rt,expects:"unknown",async:!1,get"~standard"(){return Q(this)},"~run"(e){return e.typed=!0,e}}}function ge(e,t,n){const s=e["~run"]({value:t},At(n));if(s.issues)throw new Zs(s.issues);return s.value}function ne(...e){return{...e[0],pipe:e,get"~standard"(){return Q(this)},"~run"(t,n){for(const s of e)if(s.kind!=="metadata"){if(t.issues&&(s.kind==="schema"||s.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=s["~run"](t,n))}return t}}}function gt(e,t,n){const s=e["~run"]({value:t},At(n));return{typed:s.typed,success:!s.issues,output:s.value,issues:s.issues}}var Xs=Object.defineProperty,er=(e,t,n)=>t in e?Xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cn=(e,t,n)=>er(e,typeof t!="symbol"?t+"":t,n),tr=Object.defineProperty,nr=(e,t,n)=>t in e?tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vt=(e,t,n)=>nr(e,typeof t!="symbol"?t+"":t,n);function En(e){return t=>t instanceof e}function An(e,t){const n=class extends Error{constructor(...i){const r=typeof t=="function"?t(...i):typeof t=="string"?[t]:t||[];super(...r),this.name=e}};vt(n,"is",En(n));let s=n;return Object.defineProperty(s,"name",{value:e}),s}function sr(e,t,n){const s=class extends An(e,n){constructor(...r){super(...r),vt(this,"data"),this.data=t(...r)}};vt(s,"is",En(s));let i=s;return Object.defineProperty(i,"name",{value:e}),i}let rr=class extends An("CancelledError","Promise was canceled"){},ir=class extends sr("TimeoutError",t=>({timeout:t}),(t,n)=>["Timeout reached: ".concat(t,"ms"),{cause:n}]){};const or=Symbol("resolved");function ar(e){return{tag:or,value:e}}function ln(e,t){return e.reject=t.reject,e.resolve=t.resolve,e}let qn=class wt extends Promise{constructor(t,n){let s,i,r,a;typeof t=="function"?(r=t,a=n||{}):a=t||{};let u,l;const c=()=>!!l,p=()=>!!u;let h={};const b=[],g=()=>{b.forEach(m=>m()),b.splice(0,b.length),h={}},w=new AbortController,S=()=>p()||c();super((m,v)=>{const{abortOnResolve:d=!0,abortOnReject:T=!0}=a;i=F=>{var M,A;S()||(m(F),u=[F],(M=h.resolved)==null||M.forEach(B=>B(F)),(A=h.finalized)==null||A.forEach(B=>B({kind:"resolved",result:F})),g(),d&&w.abort(ar(F)))},s=F=>{var M,A;S()||(v(F),l=[F],(M=h.rejected)==null||M.forEach(B=>B(F)),(A=h.finalized)==null||A.forEach(B=>B({kind:"rejected",reason:F})),g(),T&&w.abort(F))};const{abortSignal:P}=a;if(P){if(P.aborted)return s(P.reason);const F=()=>{s(P.reason)};P.addEventListener("abort",F,!0),b.push(()=>{P.removeEventListener("abort",F,!0)})}const{timeout:j}=a;if(j){const F=setTimeout(()=>{s(new ir(j))},j);b.push(()=>{clearTimeout(F)})}try{const F=()=>{},M=r&&r(i,s,{abortSignal:w.signal,get isRejected(){return c()},get isResolved(){return p()},on(A,B){if(u||l){if(A==="finalized"){const ye=u?{kind:"resolved",result:u[0]}:{kind:"rejected",reason:l[0]};B(ye)}else A==="resolved"&&u?B(u[0]):A==="rejected"&&l&&B(l[0]);return F}return h[A]||(h[A]=[]),h[A].push(B),()=>{const ye=h[A]||[],Ae=ye.indexOf(B);Ae>=0&&ye.splice(Ae,1)}},get result(){return u==null?void 0:u[0]},get rejectReason(){return l==null?void 0:l[0]},throwIfRejected(){if(l)throw l[0]}});M instanceof Promise&&M.catch(s)}catch(F){s(F)}}),cn(this,"reject"),cn(this,"resolve"),this.reject=s,this.resolve=i}static fn(t,n){return new wt(async(s,i,r)=>{try{s(await t(r))}catch(a){i(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new wt((n,s)=>{s(t)})}cancel(){this.reject(new rr)}catch(t){return this.then(void 0,t)}finally(t){return ln(super.finally(t),this)}then(t,n){return ln(super.then(t,n),this)}};function In(e){return e.replace(/[A-Z]/g,t=>"-".concat(t.toLowerCase()))}function ur(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function cr(e){return Object.entries(e).reduce((t,[n,s])=>(t[ur(n)]=s,t),{})}function yt(e){const t=cr(e);for(const n in t){const s=t[n];s&&typeof s=="object"&&!(s instanceof Date)&&(t[n]=Array.isArray(s)?s.map(yt):yt(s))}return t}function lr(e){return e.replace(/_([a-z])/g,(t,n)=>"-".concat(n.toLowerCase()))}function Tn(e){return"tapps/".concat(e)}function Pn(e,t){sessionStorage.setItem(Tn(e),JSON.stringify(t))}function Mn(e){const t=sessionStorage.getItem(Tn(e));try{return t?JSON.parse(t):void 0}catch(n){}}function st(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function pr(e,t){t||(t={});const{textColor:n,bgColor:s,shouldLog:i}=t,r=i===void 0?!0:i,a=typeof r=="boolean"?()=>r:r,u=(l,c,...p)=>{if(c||a()){const h="font-weight:bold;padding:0 5px;border-radius:100px",[b,g,w]={log:["#0089c3","white","INFO"],error:["#ff0000F0","white","ERR"],warn:["#D38E15","white","WARN"]}[l];console[l]("%c".concat(w," ").concat(Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date),"%c %c").concat(e),"".concat(h,";background-color:").concat(b,";color:").concat(g),"","".concat(h,";").concat(n?"color:".concat(n,";"):"").concat(s?"background-color:".concat(s):""),...p)}};return[["log","forceLog"],["warn","forceWarn"],["error","forceError"]].reduce((l,[c,p])=>(l[c]=u.bind(void 0,c,!1),l[p]=u.bind(void 0,c,!0),l),{})}var hr=function(e,t,n){if(arguments.length===2)for(var s=0,i=t.length,r;s<i;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))};function Rn(e,t,n,s,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return s(n(t(e.apply(this,arguments))))};case 5:return function(){return i(s(n(t(e.apply(this,arguments)))))};case 6:return function(){return r(i(s(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(r(i(s(n(t(e.apply(this,arguments)))))))};case 8:return function(){return u(a(r(i(s(n(t(e.apply(this,arguments))))))))};case 9:return function(){return l(u(a(r(i(s(n(t(e.apply(this,arguments)))))))))}}}function Fe(e,t,n,s,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return s(n(t(e)));case 5:return i(s(n(t(e))));case 6:return r(i(s(n(t(e)))));case 7:return a(r(i(s(n(t(e))))));case 8:return u(a(r(i(s(n(t(e)))))));case 9:return l(u(a(r(i(s(n(t(e))))))));default:{for(var c=arguments[0],p=1;p<arguments.length;p++)c=arguments[p](c);return c}}}var jn=function(e,t){var n=function(s){return s.length>=e};return function(){var s=Array.from(arguments);return n(arguments)?t.apply(this,s):function(i){return t.apply(void 0,hr([i],s,!1))}}},fr=function(e){return e._tag==="Left"},Vn=function(e){return{_tag:"Left",left:e}},On=function(e){return{_tag:"Right",right:e}},Bn=Vn,Ln=On,Dn=fr,dr=function(e,t){return function(n){return Dn(n)?e(n.left):t(n.right)}},jt=dr;function _r(e){return Rn(Ln,e.of)}function mr(e){return Rn(Bn,e.of)}function br(e){return function(t,n){return e.chain(t,function(s){return Dn(s)?e.of(s):n(s.right)})}}function gr(e){return function(t,n){return function(s){return e.map(s,jt(t,n))}}}var Un=function(e,t){return Fe(e,wr(t))},vr=function(e,t){return Fe(e,yr(t))},wr=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},yr=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(n){var s=n[0],i=n[1];return s(i)})}}},Vt=function(e){return function(){return Promise.resolve(e)}},Cr=jn(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(n){return t(n)()})}}),Gn="Task",Sr={URI:Gn,map:Un},Nn={of:Vt},Fr={URI:Gn,map:Un,of:Vt,ap:vr,chain:Cr},kr=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function u(p){try{c(s.next(p))}catch(h){a(h)}}function l(p){try{c(s.throw(p))}catch(h){a(h)}}function c(p){p.done?r(p.value):i(p.value).then(u,l)}c((s=s.apply(e,[])).next())})},$r=function(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,i,r,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(p){return l([c,p])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(s=1,i&&(r=c[0]&2?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){n.label=c[1];break}if(c[0]===6&&n.label<r[1]){n.label=r[1],r=c;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(c);break}r[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(p){c=[6,p],i=0}finally{s=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},xr=mr(Nn),Er=_r(Nn),Ar=Vt,Wn=gr(Sr),qr=Wn,Ir=function(e,t){return function(){return kr(void 0,void 0,void 0,function(){var n;return $r(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,e().then(On)];case 1:return[2,s.sent()];case 2:return n=s.sent(),[2,Vn(t(n))];case 3:return[2]}})})}},Tr=jn(2,br(Fr)),Pr=Tr;function Ot(e){const t=n=>{throw n};return typeof e=="function"?qn.resolve(Fe(e,Wn(t,n=>n))()):Fe(e,jt(t,n=>n))}function Y(e){return Object.assign((...t)=>Ot(e(...t)),e)}const Ie=Object.assign((e,t)=>Fe(Ir(()=>new qn((n,s,i)=>e(r=>n(Ln(r)),r=>n(Bn(r)),i),t),n=>n),Pr(jt(xr,Er))),{fn:(e,t)=>Ie((n,s,i)=>{const r=e(i);Fe(typeof r=="function"?r:Ar(r),qr(s,n))()},t)});function Mr(e,t,n,s,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return s(n(t(e)));case 5:return i(s(n(t(e))));case 6:return r(i(s(n(t(e)))));case 7:return a(r(i(s(n(t(e))))));case 8:return u(a(r(i(s(n(t(e)))))));case 9:return l(u(a(r(i(s(n(t(e))))))));default:{for(var c=arguments[0],p=1;p<arguments.length;p++)c=arguments[p](c);return c}}}var Rr=function(e){return e._tag==="Left"},jr=function(e){return{_tag:"Left",left:e}},Vr=function(e){return{_tag:"Right",right:e}},Hn=jr,_e=Vr,Or=function(e){return function(t){return Br(t)?t:_e(e(t.right))}},Br=Rr,zn=function(e,t){try{return _e(e())}catch(n){return Hn(t(n))}};function Lr(e){const t=n=>{const s={};return new URLSearchParams(n).forEach((i,r)=>{const a=s[r];Array.isArray(a)?a.push(i):a===void 0?s[r]=i:s[r]=[a,i]}),ge(e,s)};return ne(nt([y(),Pt(URLSearchParams)]),et(n=>{try{return t(n),!0}catch(s){return!1}},"The value doesn't match required schema"),ue(t))}function Dr(e){return ne(y(),et(t=>{try{return JSON.parse(t),!0}catch(n){return!1}},"Input is not a valid JSON value"),ue(JSON.parse),e)}function be(e){return ne(y(),Dr(e))}function Bt(e){return ne(nt([y(),Pt(URLSearchParams)]),Lr(e))}function rt(e){return t=>e.test(t)}const Ur=rt(/^#[\da-f]{3}$/i),Gr=rt(/^#[\da-f]{4}$/i),ze=rt(/^#[\da-f]{6}$/i),Nr=rt(/^#[\da-f]{8}$/i);function Wr(e){return[ze,Nr,Ur,Gr].some(t=>t(e))}function pn(e){let t="#";for(let n=0;n<e.length-1;n+=1)t+=e[1+n].repeat(2);return t}function Lt(e){const t=e.replace(/\s/g,"").toLowerCase();if(/^#[\da-f]{3}$/i.test(t))return _e(pn(t.toLowerCase()+"f"));if(/^#[\da-f]{4}$/i.test(t))return _e(pn(t.toLowerCase()));if(/^#[\da-f]{6}$/i.test(t))return _e(t.toLowerCase()+"ff");if(/^#[\da-f]{8}$/i.test(t))return _e(t.toLowerCase());const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);return n?_e(n.slice(1).reduce((s,i)=>s+parseInt(i,10).toString(16).padStart(2,"0"),"#").padEnd(9,"f")):Hn(new Error('Value "'.concat(e,'" does not satisfy any of known RGB formats.')))}function Hr(e){return Mr(Lt(e),Or(t=>t.slice(0,7)))}Y(Hr);Y(Lt);function zr(){return G({id:pe(),photo_url:$(y()),type:y(),title:y(),username:$(y())})}function hn(){return G({added_to_attachment_menu:$(me()),allows_write_to_pm:$(me()),first_name:y(),id:pe(),is_bot:$(me()),is_premium:$(me()),last_name:$(y()),language_code:$(y()),photo_url:$(y()),username:$(y())})}function Kr(){return G({auth_date:ne(y(),ue(e=>new Date(Number(e)*1e3)),tt()),can_send_after:$(ne(y(),ue(Number),qt())),chat:$(be(zr())),chat_type:$(y()),chat_instance:$(y()),hash:y(),query_id:$(y()),receiver:$(be(hn())),start_param:$(y()),signature:y(),user:$(be(hn()))})}function Kn(){return Bt(Kr())}function Ct(){return Mt(y(),ne(nt([y(),pe()]),ue(e=>typeof e=="number"?"#".concat((e&16777215).toString(16).padStart(6,"0")):e),et(Wr)))}function Jr(){const e=$(ne(y(),ue(t=>t==="1")));return G({tgWebAppBotInline:e,tgWebAppData:$(Kn()),tgWebAppDefaultColors:$(be(Ct())),tgWebAppFullscreen:e,tgWebAppPlatform:y(),tgWebAppShowSettings:e,tgWebAppStartParam:$(y()),tgWebAppThemeParams:be(Ct()),tgWebAppVersion:y()})}function Qr(){return Bt(Jr())}function Zr(){return G({eventType:y(),eventData:$(Rt())})}function Yr(e){return zn(()=>ge(Kn(),e),t=>t)}function Dt(e){return zn(()=>ge(Qr(),e),t=>t)}Y(Yr);Y(Dt);var Xr=Object.defineProperty,ei=(e,t,n)=>t in e?Xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,St=(e,t,n)=>ei(e,typeof t!="symbol"?t+"":t,n);function Jn(e){return t=>t instanceof e}function N(e,t){const n=class extends Error{constructor(...r){const a=typeof t=="function"?t(...r):typeof t=="string"?[t]:t||[];super(...a),this.name=e}};St(n,"is",Jn(n));let s=n;return Object.defineProperty(s,"name",{value:e}),s}function Qn(e,t,n){const s=class extends N(e,n){constructor(...a){super(...a),St(this,"data"),this.data=t(...a)}};St(s,"is",Jn(s));let i=s;return Object.defineProperty(i,"name",{value:e}),i}function ti(e){return{all:e=e||new Map,on:function(t,n){var s=e.get(t);s?s.push(n):e.set(t,[n])},off:function(t,n){var s=e.get(t);s&&(n?s.splice(s.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var s=e.get(t);s&&s.slice().map(function(i){i(n)}),(s=e.get("*"))&&s.slice().map(function(i){i(t,n)})}}}function Zn(e){return $n(G({TelegramWebviewProxy:G({postEvent:Tt()})}),e)}function ni(){try{return window.self!==window.top}catch(e){return!0}}var si=function(e,t,n){if(arguments.length===2)for(var s=0,i=t.length,r;s<i;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))};function it(e,t,n,s,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return s(n(t(e.apply(this,arguments))))};case 5:return function(){return i(s(n(t(e.apply(this,arguments)))))};case 6:return function(){return r(i(s(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(r(i(s(n(t(e.apply(this,arguments)))))))};case 8:return function(){return u(a(r(i(s(n(t(e.apply(this,arguments))))))))};case 9:return function(){return l(u(a(r(i(s(n(t(e.apply(this,arguments)))))))))}}}function xe(e,t,n,s,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return s(n(t(e)));case 5:return i(s(n(t(e))));case 6:return r(i(s(n(t(e)))));case 7:return a(r(i(s(n(t(e))))));case 8:return u(a(r(i(s(n(t(e)))))));case 9:return l(u(a(r(i(s(n(t(e))))))));default:{for(var c=arguments[0],p=1;p<arguments.length;p++)c=arguments[p](c);return c}}}var ot=function(e,t){var n=typeof e=="number"?function(s){return s.length>=e}:e;return function(){var s=Array.from(arguments);return n(arguments)?t.apply(this,s):function(i){return t.apply(void 0,si([i],s,!1))}}},ri={_tag:"None"},ii=function(e){return{_tag:"Some",value:e}},oi=function(e){return e._tag==="Left"},ai=function(e){return{_tag:"Left",left:e}},ui=function(e){return{_tag:"Right",right:e}},Ee=ai,ae=ui,ci=ot(2,function(e,t){return Me(e)?e:t(e.right)}),li=function(e){return function(t){return Me(t)?t:ae(e(t.right))}},pi=function(e,t){return function(n){return Me(n)?Ee(e(n.left)):ae(t(n.right))}},Me=oi,Yn=function(e,t){return function(n){return Me(n)?e(n.left):t(n.right)}},hi=Yn,fi=Yn,di=function(e,t){try{return ae(e())}catch(n){return Ee(t(n))}},_i=ci,mi=ri,bi=ii;function gi(e){return it(ae,e.of)}function vi(e){return it(Ee,e.of)}function wi(e){return function(t,n){return e.chain(t,function(s){return Me(s)?e.of(s):n(s.right)})}}function yi(e){return function(t,n,s){return e.map(t,pi(n,s))}}var Xn=function(e,t){return xe(e,Si(t))},Ci=function(e,t){return xe(e,Fi(t))},Si=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},Fi=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(n){var s=n[0],i=n[1];return s(i)})}}},es=function(e){return function(){return Promise.resolve(e)}},ki=ot(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(n){return t(n)()})}}),ts="Task",$i={URI:ts,map:Xn},ns={of:es},xi={URI:ts,map:Xn,of:es,ap:Ci,chain:ki},Ei=vi(ns),Ai=gi(ns),qi=ot(3,yi($i)),ss=ot(2,wi(xi)),Ii=ss,Ti=ss;class Su extends N("MethodUnsupportedError",(t,n)=>['Method "'.concat(t,'" is unsupported in Mini Apps version ').concat(n)]){}let Fu=class extends N("MethodParameterUnsupportedError",(t,n,s)=>['Parameter "'.concat(n,'" of "').concat(t,'" method is unsupported in Mini Apps version ').concat(s)]){},Pi=class extends Qn("LaunchParamsRetrieveError",t=>({errors:t}),t=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/tma-js-bridge/environment","","Collected errors:",...t.map(({source:n,error:s})=>"Source: ".concat(n," / ").concat(s instanceof Error?s.message:String(s)))].join("\n")]){};class xu extends N("InvalidLaunchParamsError",(t,n)=>["Invalid value for launch params: ".concat(t),{cause:n}]){}class Mi extends N("UnknownEnvError"){}class Ri extends N("InvokeCustomMethodError",t=>["Server returned error: ".concat(t)]){}const fn="launchParams";function dn(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}const Te=it(at,_i(Dt)),ji=Y(Te),Vi=it(at,li(e=>{const t=new URLSearchParams(e).get("tgWebAppData");return t?bi(t):mi}));function at(){const e=[];for(const[t,n]of[[()=>dn(window.location.href),"window.location.href"],[()=>{const s=performance.getEntriesByType("navigation")[0];return s&&dn(s.name)},"performance navigation entries"],[()=>Mn(fn),"local storage"]]){const s=t();if(!s){e.push({source:n,error:new Error("Source is empty")});continue}const i=xe(Dt(s),hi(r=>r,()=>!0));if(typeof i!="boolean"){e.push({source:n,error:i});continue}return Pn(fn,s),ae(s)}return Ee(new Pi(e))}Y(at);function Oi(e,t){const n=new Map,s=ti(),i=(r,a,u=!1)=>{const l=n.get(r)||new Map;n.set(r,l);const c=l.get(a)||[];l.set(a,c);const p=c.findIndex(h=>h[1]===u);if(p>=0&&(s.off(r,c[p][0]),c.splice(p,1),!c.length&&(l.delete(a),!l.size))){const h=n.size;n.delete(r),h&&!n.size&&t()}};return{on(r,a,u){!n.size&&e();const l=()=>{i(r,a,u)},c=(...b)=>{u&&l(),r==="*"?a({name:b[0],payload:b[1]}):a(...b)};s.on(r,c);const p=n.get(r)||new Map;n.set(r,p);const h=p.get(a)||[];return p.set(a,h),h.push([c,u||!1]),l},off:i,emit:s.emit,clear(){const r=n.size;s.all.clear(),n.clear(),r&&t()}}}function ht(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}function ft(e,t,n){const s=[n],i=e[t];typeof i=="function"&&s.push(i);const r=(...u)=>{s.forEach(l=>l(...u))},a=Object.assign((...u)=>{r(...u)},{unwrap(){const{length:u}=s;if(u===1){delete e[t];return}if(u===2){mn(e,t,s[1]);return}s.unshift(1),mn(e,t,r)}});rs(e,t,()=>a,u=>s.push(u))}function _n(e,t){const n=e[t];rs(e,t,()=>n,s=>{Object.entries(s).forEach(([i,r])=>{n[i]=r})})}function rs(e,t,n,s){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n,set:s})}function mn(e,t,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n})}const Bi={clipboard_text_received:G({req_id:y(),data:Ce(y())}),custom_method_invoked:G({req_id:y(),result:$(Rt()),error:$(y())}),popup_closed:Ce(G({button_id:Ce(y(),()=>{})}),{}),viewport_changed:Ce(G({height:pe(),width:Ce(pe(),()=>window.innerWidth),is_state_stable:me(),is_expanded:me()}),()=>({height:window.innerHeight,is_state_stable:!0,is_expanded:!0})),theme_changed:G({theme_params:Ct()})};function bn(e){if(e.source!==window.parent)return;let t;try{t=ge(be(Zr()),e.data)}catch(a){return}const{eventType:n,eventData:s}=t,i=Bi[n];let r;try{r=i?ge(i,s):s}catch(a){return Ze().forceError(['An error occurred processing the "'.concat(n,'" event from the Telegram application.'),"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose"].join("\n"),t,a)}Li(n,r)}const{on:se,off:Re,emit:Li}=Oi(()=>{const e=window;!e.TelegramGameProxy&&(e.TelegramGameProxy={}),ft(e.TelegramGameProxy,"receiveEvent",ht),_n(e,"TelegramGameProxy"),!e.Telegram&&(e.Telegram={}),!e.Telegram.WebView&&(e.Telegram.WebView={}),ft(e.Telegram.WebView,"receiveEvent",ht),_n(e.Telegram,"WebView"),ft(e,"TelegramGameProxy_receiveEvent",ht),window.addEventListener("message",bn)},()=>{[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{const t=window;let n=[void 0,t];for(const r of e)if(n=[n[1],n[1][r]],!n[1])return;const[s,i]=n;"unwrap"in i&&(i.unwrap(),s&&s!==t&&!Object.keys(s).length&&delete t[e[0]])}),window.removeEventListener("message",bn)}),Di=U(!1),Ui=U("https://web.telegram.org"),Gi=C(Di),Ni=C(Ui),Wi=U((...e)=>{window.parent.postMessage(...e)}),Ze=U(pr("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:Gi})),Hi=(...e)=>Wi()(...e);function is(e,t){Ze().log("Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,s=JSON.stringify({eventType:e,eventData:t});return ni()?(Hi(s,Ni()),ae(void 0)):Zn(n)?(n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t)),ae(void 0)):$n(G({external:G({notify:Tt()})}),n)?(n.external.notify(s),ae(void 0)):Ee(new Mi)}function os(e,t,n={}){const{capture:s=()=>!0,postEvent:i=is}=n,r=U(),[a,u]=st();(Array.isArray(t)?t:[t]).forEach(c=>{a(se(c,p=>{(Array.isArray(t)?s({event:c,payload:p}):s(p))&&r.set([p])}))});const l=c=>(u(),c);return xe(async()=>i(e,n.params),Ti(()=>Ie((c,p,h)=>{const b=r();if(b)return c(b[0]);const g=S=>{S&&c(S[0])},w=()=>{r.unsub(g)};r.sub(g),h.on("finalized",w)},n)),qi(l,l))}function zi(e,t){return Zn(window)||xe(at(),fi(()=>!1,()=>!0))}function as(e){return({req_id:t})=>t===e}function gn(e){return e.split(".").map(Number)}function Ki(e,t){const n=gn(e),s=gn(t),i=Math.max(n.length,s.length);for(let r=0;r<i;r+=1){const a=n[r]||0,u=s[r]||0;if(a!==u)return a>u?1:-1}return 0}const vn={"6.0":["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"],6.1:["web_app_open_tg_link","web_app_open_invoice","web_app_setup_back_button","web_app_set_background_color","web_app_set_header_color","web_app_trigger_haptic_feedback"],6.2:["web_app_open_popup"],6.4:["web_app_close_scan_qr_popup","web_app_open_scan_qr_popup","web_app_read_text_from_clipboard",{method:"web_app_open_link",param:"try_instant_view"}],6.7:["web_app_switch_inline_query"],6.9:["web_app_invoke_custom_method","web_app_request_write_access","web_app_request_phone",{method:"web_app_set_header_color",param:"color"}],"6.10":["web_app_setup_settings_button"],7.2:["web_app_biometry_get_info","web_app_biometry_open_settings","web_app_biometry_request_access","web_app_biometry_request_auth","web_app_biometry_update_token"],7.6:[{method:"web_app_open_link",param:"try_browser"},{method:"web_app_close",param:"return_back"}],7.7:["web_app_setup_swipe_behavior"],7.8:["web_app_share_to_story"],"7.10":["web_app_setup_secondary_button","web_app_set_bottom_bar_color",{method:"web_app_setup_main_button",param:"has_shine_effect"}],"8.0":["web_app_request_safe_area","web_app_request_content_safe_area","web_app_request_fullscreen","web_app_exit_fullscreen","web_app_set_emoji_status","web_app_add_to_home_screen","web_app_check_home_screen","web_app_request_emoji_status_access","web_app_check_location","web_app_open_location_settings","web_app_request_file_download","web_app_request_location","web_app_send_prepared_message","web_app_start_accelerometer","web_app_start_device_orientation","web_app_start_gyroscope","web_app_stop_accelerometer","web_app_stop_device_orientation","web_app_stop_gyroscope","web_app_toggle_orientation_lock"],"9.0":["web_app_device_storage_clear","web_app_device_storage_get_key","web_app_device_storage_save_key","web_app_secure_storage_clear","web_app_secure_storage_get_key","web_app_secure_storage_restore_key","web_app_secure_storage_save_key"],9.1:["web_app_hide_keyboard"]};function wn(e,t){return Object.keys(vn).find(n=>vn[n].some(s=>t?typeof s=="object"&&s.method===e&&s.param===t:s===e))||null}function ke(e,t,n){const s=n?wn(e,t):wn(e);return s?Ki(s,n||t)<=0:!1}function Ji(e,t,n,s){return xe(os("web_app_invoke_custom_method","custom_method_invoked",{...s||{},params:{method:e,params:t,req_id:n},capture:as(n)}),Ii(({result:i,error:r})=>r?Ei(new Ri(r)):Ai(i)))}function Qi(e){return di(()=>decodeURIComponent(atob(e).replace(/-/g,"+").replace(/_/g,"/").split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")),t=>t)}Y(Qi);function Zi(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt("0x".concat(n))))).replace(/\+/g,"-").replace(/\//g,"_")}function Yi(e){const t=Zi(typeof e=="string"?e:JSON.stringify(e));return t.length>512?Ee(new Error("Value is too long for start parameter")):ae(t)}Y(Yi);var Xi=Object.defineProperty,eo=(e,t,n)=>t in e?Xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o=(e,t,n)=>eo(e,typeof t!="symbol"?t+"":t,n),to=function(e,t,n){if(arguments.length===2)for(var s=0,i=t.length,r;s<i;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))};function us(e,t,n,s,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return s(n(t(e.apply(this,arguments))))};case 5:return function(){return i(s(n(t(e.apply(this,arguments)))))};case 6:return function(){return r(i(s(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(r(i(s(n(t(e.apply(this,arguments)))))))};case 8:return function(){return u(a(r(i(s(n(t(e.apply(this,arguments))))))))};case 9:return function(){return l(u(a(r(i(s(n(t(e.apply(this,arguments)))))))))}}}function f(e,t,n,s,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return s(n(t(e)));case 5:return i(s(n(t(e))));case 6:return r(i(s(n(t(e)))));case 7:return a(r(i(s(n(t(e))))));case 8:return u(a(r(i(s(n(t(e)))))));case 9:return l(u(a(r(i(s(n(t(e))))))));default:{for(var c=arguments[0],p=1;p<arguments.length;p++)c=arguments[p](c);return c}}}var je=function(e,t){var n=typeof e=="number"?function(s){return s.length>=e}:e;return function(){var s=Array.from(arguments);return n(arguments)?t.apply(this,s):function(i){return t.apply(void 0,to([i],s,!1))}}},no={_tag:"None"},so=function(e){return{_tag:"Some",value:e}},ro=function(e){return e._tag==="Left"},cs=function(e){return{_tag:"Left",left:e}},ls=function(e){return{_tag:"Right",right:e}},Ut={};function io(e,t){return function(n){return function(s){return e.ap(e.map(s,function(i){return function(r){return t.ap(i,r)}}),n)}}}function oo(e,t){return function(n){return function(s){return e.map(s,function(i){return t.map(i,n)})}}}function Gt(e){return function(t,n){return function(s){return e.chain(s,function(i){return e.map(n(i),function(r){var a;return Object.assign({},i,(a={},a[t]=r,a))})})}}}var D=cs,R=ls,ao=je(2,function(e,t){return ve(e)?e:t(e.right)}),Nt=function(e,t){return f(e,K(t))},ps=function(e,t){return f(e,po(t))},Wt="Either",K=function(e){return function(t){return ve(t)?t:R(e(t.right))}},uo={URI:Wt,map:Nt},co=R,lo=function(e){return function(t){return ve(t)?t:ve(e)?e:R(t.right(e.right))}},po=lo,ho={URI:Wt,map:Nt,ap:ps},fo={URI:Wt,map:Nt,ap:ps,chain:ao},_o=function(e,t){return function(n){return ve(n)?D(e(n.left)):R(t(n.right))}},ve=ro,hs=function(e,t){return function(n){return ve(n)?e(n.left):t(n.right)}},Ve=hs,mo=function(e,t){try{return R(e())}catch(n){return D(t(n))}},bo=co(Ut),go=Gt(fo),yn=go;function J(e){return typeof e=="function"?e():e}function re(e,t){return C(()=>ke(e,J(t)))}var Oe=no,Be=so,vo=function(e,t){return f(e,Co(t))},wo=function(e,t){return f(e,Fo(t))},yo="Option",Co=function(e){return function(t){return Pe(t)?Oe:Be(e(t.value))}},So=Be,Fo=function(e){return function(t){return Pe(t)||Pe(e)?Oe:Be(t.value(e.value))}},ko=je(2,function(e,t){return Pe(e)?Oe:t(e.value)}),$o={URI:yo,map:vo,ap:wo,chain:ko},Pe=function(e){return e._tag==="None"},xo=function(e,t){return function(n){return Pe(n)?e():t(n.value)}},fs=xo,Eo=So(Ut),Cn=Gt($o);function Ao(e){return us(R,e.of)}function qo(e){return us(D,e.of)}function Io(e){return oo(e,uo)}function To(e){return io(e,ho)}function Po(e){return function(t,n){return e.chain(t,function(s){return ve(s)?e.of(s):n(s.right)})}}function Mo(e){return function(t,n,s){return e.map(t,_o(n,s))}}function Ro(e){return function(t,n){return function(s){return e.map(s,Ve(t,n))}}}var Ht=function(e,t){return f(e,jo(t))},ds=function(e,t){return f(e,Vo(t))},jo=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},Vo=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(n){var s=n[0],i=n[1];return s(i)})}}},zt=function(e){return function(){return Promise.resolve(e)}},Oo=je(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(n){return t(n)()})}}),Kt="Task",Jt={URI:Kt,map:Ht},_s={of:zt},Bo={URI:Kt,map:Ht,ap:ds},Lo={URI:Kt,map:Ht,of:zt,ap:ds,chain:Oo},Do=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function u(p){try{c(s.next(p))}catch(h){a(h)}}function l(p){try{c(s.throw(p))}catch(h){a(h)}}function c(p){p.done?r(p.value):i(p.value).then(u,l)}c((s=s.apply(e,[])).next())})},Uo=function(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,i,r,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(p){return l([c,p])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(s=1,i&&(r=c[0]&2?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){n.label=c[1];break}if(c[0]===6&&n.label<r[1]){n.label=r[1],r=c;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(c);break}r[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(p){c=[6,p],i=0}finally{s=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},W=qo(_s),O=Ao(_s),ms=zt,Go=Ro(Jt),No=function(e,t){return function(){return Do(void 0,void 0,void 0,function(){var n;return Uo(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,e().then(ls)];case 1:return[2,s.sent()];case 2:return n=s.sent(),[2,cs(t(n))];case 3:return[2]}})})}},Wo=function(e,t){return f(e,V(t))},Ho=function(e,t){return f(e,zo(t))},V=Io(Jt),Qt=je(3,Mo(Jt)),zo=To(Bo),Zt=je(2,Po(Lo)),Ko=O,Jo="TaskEither",Qo={URI:Jo,map:Wo,ap:Ho,chain:Zt},Zo=Ko(Ut),Yo=Gt(Qo),He=Yo,ce=Zt,$e=Zt;function we(e){return[e]}class Ke extends Qn("ValidationError",(t,n)=>({input:t,issues:n}),"Validation error"){}class Yt extends N("CSSVarsBoundError","CSS variables are already bound"){}class Xo extends N("NotAvailableError",we){}class Eu extends N("InvalidEnvError",we){}class ea extends N("FunctionNotAvailableError",we){}class te extends N("InvalidArgumentsError",(t,n)=>[t,{cause:n}]){}class Xt extends N("ConcurrentCallError",we){}class ta extends N("SetEmojiStatusError",t=>["Failed to set emoji status: ".concat(t)]){}class bs extends N("AccessDeniedError",we){}class na extends N("FullscreenFailedError",we){}class sa extends N("ShareMessageError",we){}class ra extends N("UnknownThemeParamsKeyError",t=>["Unknown theme params key passed: ".concat(t)]){}function I(e,t){const n=C(()=>J(t.version)||"100"),s=C(()=>J(t.isTma)),{requires:i,returns:r}=t,a=i?typeof i=="object"?i:{every:[i]}:void 0,u=m=>{if(!t.supports)return!0;const v=t.supports[m];return ke(v.method,v.param,n())},l=()=>{if(!a)return;const[m,v]="every"in a?["every",a.every]:["some",a.some];for(let d=0;d<v.length;d++){const T=v[d],P=typeof T=="function"?T():ke(T,n())?void 0:"it is unsupported in Mini Apps version ".concat(n());if(P&&(m==="every"||d===v.length-1))return P}},c=(...m)=>{for(const v in t.supports)if(t.supports[v].shouldCheck(...m)&&!u(v))return"option ".concat(v," is not supported in Mini Apps version ").concat(n())},p=C(()=>!l()),h=C(()=>n()!=="0.0"),b=C(()=>t.isMounted?t.isMounted():!0),g=C(()=>s()&&h()&&p()&&b()),w=m=>{const v=new ea(m);return["task","promise"].includes(t.returns)?W(v):D(v)},S=(...m)=>r==="plain"?mo(()=>e(...m),v=>v):r==="promise"?No(()=>e(...m),v=>v):e(...m);return Object.assign((...m)=>{var v;const d="Unable to call function:";if(!s())return w("".concat(d," it can't be called outside Mini Apps"));if(!h())return w("".concat(d," the SDK was not initialized. Use the SDK init() function"));const T=l();if(T)return w("".concat(d," ").concat(T));const P=c(...m);if(P)return w("".concat(d," ").concat(P));if(!b()){const j=(v=t.isMounting)!=null&&v.call(t)?"mounting. Wait for the mount completion":"unmounted. Use the mount() method";return w("".concat(d," the component is ").concat(j))}return S(...m)},e,{isAvailable:g,ifAvailable(...m){return g()?Be(S(...m)):Oe}},a?{isSupported:p}:{},t.supports?{supports:u}:{})}function q(e){return t=>I(t,e)}function _(e){return Object.assign(Y(e),{ifAvailable(...t){return f(e.ifAvailable(...t),fs(()=>({ok:!1}),n=>({ok:!0,data:Ot(n)})))}})}function Ft(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=s)}return t}function dt(e,t){const n=Object.keys(e),s=Object.keys(t);return n.length!==s.length?!1:n.every(i=>Object.prototype.hasOwnProperty.call(t,i)&&e[i]===t[i])}class he{constructor({initialState:t,onChange:n}){o(this,"_state"),o(this,"state"),o(this,"setState",s=>{const i={...this.state(),...Ft(s)};dt(i,this.state())||this._state.set(i)}),this._state=U(t,{equals:dt}),this.state=C(this._state),this.state.sub(n)}getter(t){return C(()=>this._state()[t])}hasDiff(t){return!dt({...this.state(),...Ft(t)},this.state())}}class Le{constructor({onMounted:t,restoreState:n,initialState:s,onUnmounted:i,isPageReload:r}){o(this,"_isMounted",U(!1)),o(this,"isMounted",C(this._isMounted)),o(this,"mount"),o(this,"unmount"),this.mount=()=>{if(this.isMounted())return R(void 0);const a=J(r)?n():void 0,u=a?R(a):typeof s=="function"?s():R(s);return f(u,K(l=>{Qe(()=>{this._isMounted.set(!0),t==null||t(l)})}))},this.unmount=()=>{this._isMounted()&&Qe(()=>{this._isMounted.set(!1),i==null||i()})}}}class ut{constructor({isTma:t,storage:n,onClick:s,offClick:i,initialState:r,isPageReload:a,postEvent:u,payload:l,method:c,version:p}){o(this,"isMounted"),o(this,"isSupported"),o(this,"state"),o(this,"stateSetters"),o(this,"stateBoolSetters"),o(this,"setStateFp"),o(this,"setState"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const h=new he({initialState:r,onChange(m){n.set(m)}}),b=new Le({initialState:r,isPageReload:a,onMounted:h.setState,restoreState:n.get}),g={version:p,requires:c,isTma:t},w=q({...g,returns:"plain"}),S=q({...g,returns:"either",isMounted:b.isMounted});this.isMounted=b.isMounted,this.isSupported=re(c,p),this.state=h.state,this.setStateFp=S(m=>{const v={...this.state(),...Ft(m)};return h.hasDiff(v)?f(u(c,l(v)),K(()=>{h.setState(v)})):R(void 0)}),this.setState=_(this.setStateFp),this.onClickFp=w(s),this.onClick=_(this.onClickFp),this.offClickFp=w(i),this.offClick=_(this.offClickFp),this.mountFp=w(()=>{const m=()=>{};return f(b.mount(),Ve(m,m))}),this.mount=_(this.mountFp),this.unmount=b.unmount,this.stateSetters=m=>{const v=S(d=>this.setStateFp({[m]:d}));return[_(v),v]},this.stateBoolSetters=m=>{const[,v]=this.stateSetters(m),d=S(()=>v(!1)),T=S(()=>v(!0));return[[_(d),d],[_(T),T]]}}stateGetter(t){return C(()=>this.state()[t])}}class ia{constructor(t){o(this,"isVisible"),o(this,"isMounted"),o(this,"isSupported"),o(this,"hideFp"),o(this,"hide"),o(this,"showFp"),o(this,"show"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const n=new ut({...t,method:"web_app_setup_back_button",payload:s=>({is_visible:s.isVisible}),initialState:{isVisible:!1}});this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.isSupported=n.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount}}function k(){return{isTma:C(()=>zi())}}function oa(e){return{get:()=>Mn(e),set(t){Pn(e,t)}}}function aa(){return performance.getEntriesByType("navigation")[0]}function ua(){const e=aa();return!!e&&e.type==="reload"}function De(e){return t=>({...t,...J(e)})}function fe(e){return De({storage:oa(e),isPageReload:ua})}function Ue(e,t){return U(e,t)}const gs=Ue(is),Ge=(...e)=>gs()(...e),ca=(...e)=>Ot(Ge(...e)),H=De({postEvent:Ge}),kt=Ue("0.0"),x=De({version:kt});function en(e,t){return{...f(k(),H,x,fe(e)),onClick(n,s){return se(t,n,s)},offClick(n,s){Re(t,n,s)}}}new ia(en("backButton","back_button_pressed"));class tn{constructor({initialState:t,onMounted:n,restoreState:s,onUnmounted:i,isPageReload:r}){o(this,"_isMounted",U(!1)),o(this,"isMounted",C(this._isMounted)),o(this,"mount"),o(this,"unmount"),this.mount=a=>{if(this._isMounted())return O(void 0);const u=J(r)?s():void 0;return f(u?O(u):t(a),V(l=>{this._isMounted()||Qe(()=>{this._isMounted.set(!0),n==null||n(l)})}))},this.unmount=()=>{this._isMounted()&&Qe(()=>{this._isMounted.set(!1),i==null||i()})}}}const Sn=new Xo("Biometry is not available");function _t(e){let t=!1,n=!1,s="",i=!1,r="",a=!1;return e.available&&(t=!0,n=e.token_saved,s=e.device_id,i=e.access_requested,r=e.type,a=e.access_granted),{available:t,tokenSaved:n,deviceId:s,type:r,accessGranted:a,accessRequested:i}}class la{constructor({version:t,request:n,postEvent:s,storage:i,onInfoReceived:r,offInfoReceived:a,isTma:u,isPageReload:l}){o(this,"isAvailable"),o(this,"isSupported"),o(this,"isMounted"),o(this,"state"),o(this,"authenticateFp"),o(this,"authenticate"),o(this,"openSettingsFp"),o(this,"openSettings"),o(this,"requestAccessFp"),o(this,"requestAccess"),o(this,"updateTokenFp"),o(this,"updateToken"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const c=m=>{p.setState(_t(m))},p=new he({initialState:{available:!1,type:"unknown",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1},onChange:i.set}),h=new tn({initialState(m){return f(n("web_app_biometry_get_info","biometry_info_received",m),V(_t))},isPageReload:l,onMounted(m){p.setState(m),r(c)},onUnmounted(){a(c)},restoreState:i.get}),b={version:t,requires:"web_app_biometry_request_auth",isTma:u},g=q({...b,returns:"either"}),w=q({...b,returns:"task"}),S=q({...b,isMounted:h.isMounted,returns:"task"});this.isAvailable=p.getter("available"),this.isMounted=h.isMounted,this.isSupported=re("web_app_biometry_request_auth",t),this.state=p.state,this.unmount=h.unmount,this.mountFp=w(h.mount),this.authenticateFp=S(m=>this.isAvailable()?f(n("web_app_biometry_request_auth","biometry_auth_requested",{...m,params:{reason:((m||{}).reason||"").trim()}}),V(v=>(p.setState({token:v.token}),v))):W(Sn)),this.openSettingsFp=g(()=>s("web_app_biometry_open_settings")),this.requestAccessFp=S(m=>f(n("web_app_biometry_request_access","biometry_info_received",{...m,params:{reason:((m||{}).reason||"").trim()}}),ce(v=>{const d=_t(v);return d.available?(p.setState(d),O(d.accessRequested)):W(Sn)}))),this.updateTokenFp=S((m={})=>{var v;return f(n("web_app_biometry_update_token","biometry_token_updated",{...m,params:{token:m.token||"",reason:(v=m.reason)==null?void 0:v.trim()}}),V(d=>d.status))}),this.authenticate=_(this.authenticateFp),this.openSettings=_(this.openSettingsFp),this.requestAccess=_(this.requestAccessFp),this.updateToken=_(this.updateTokenFp),this.mount=_(this.mountFp)}}const pa=(e,t,n)=>os(e,t,{postEvent:Ge,...n}),Z=De({request:pa});new la({...f(k(),H,x,Z,fe("biometry")),offInfoReceived(e){Re("biometry_info_received",e)},onInfoReceived(e){return se("biometry_info_received",e)}});class ha{constructor({postEvent:t,storage:n,isTma:s,isPageReload:i}){o(this,"isConfirmationEnabled"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"disableConfirmationFp"),o(this,"disableConfirmation"),o(this,"enableConfirmationFp"),o(this,"enableConfirmation");const r=new he({initialState:{isConfirmationEnabled:!1},onChange(h){n.set(h)}}),a=new Le({onMounted:r.setState,restoreState:n.get,initialState:{isConfirmationEnabled:!1},isPageReload:i}),u={requires:"web_app_setup_closing_behavior",isTma:s},l=q({...u,returns:"plain"}),c=q({...u,returns:"either",isMounted:a.isMounted}),p=h=>h===this.isConfirmationEnabled()?R(void 0):(r.setState({isConfirmationEnabled:h}),t("web_app_setup_closing_behavior",{need_confirmation:h}));this.isConfirmationEnabled=r.getter("isConfirmationEnabled"),this.isMounted=a.isMounted,this.disableConfirmationFp=c(()=>p(!1)),this.enableConfirmationFp=c(()=>p(!0)),this.mountFp=l(()=>{const h=()=>{};return f(a.mount(),Ve(h,h))}),this.unmount=a.unmount,this.disableConfirmation=_(this.disableConfirmationFp),this.enableConfirmation=_(this.enableConfirmationFp),this.mount=_(this.mountFp)}}new ha(f(k(),fe("closingBehavior"),H));class fa{constructor({version:t,isTma:n,invokeCustomMethod:s}){o(this,"isSupported"),o(this,"deleteItemFp"),o(this,"deleteItem"),o(this,"getItemFp"),o(this,"getItem"),o(this,"getItemsFp"),o(this,"getItems"),o(this,"getKeysFp"),o(this,"getKeys"),o(this,"setItemFp"),o(this,"setItem"),o(this,"clearFp"),o(this,"clear");const i=q({version:t,requires:"web_app_invoke_custom_method",isTma:n,returns:"task"});this.isSupported=re("web_app_invoke_custom_method",t),this.deleteItemFp=i((r,a)=>{const u=Array.isArray(r)?r:[r];return f(u.length?s("deleteStorageValues",{keys:u},a):O(void 0),V(()=>{}))}),this.getItemFp=i((r,a)=>f(this.getItemsFp([r],a),V(u=>u[r]||""))),this.getItemsFp=i((r,a)=>f(r.length?s("getStorageValues",{keys:r},a):O({}),V(u=>({...r.reduce((l,c)=>(l[c]="",l),{}),...ge(Mt(y(),y()),u)})))),this.getKeysFp=i(r=>f(s("getStorageKeys",{},r),V(a=>ge(xn(y()),a)))),this.setItemFp=i((r,a,u)=>f(s("saveStorageValue",{key:r,value:a},u),V(()=>{}))),this.clearFp=i(r=>f(this.getKeysFp(r),ce(this.deleteItemFp))),this.deleteItem=_(this.deleteItemFp),this.getItem=_(this.getItemFp),this.getItems=_(this.getItemsFp),this.getKeys=_(this.getKeysFp),this.setItem=_(this.setItemFp),this.clear=_(this.clearFp)}}const mt=Ue(0);function vs(){return mt.set(mt()+1),mt().toString()}function da(e,t,n){return Ji(e,t,vs(),{...n||{},postEvent:Ge})}const nn=De({invokeCustomMethod:da});new fa(f(k(),x,nn));function _a({request:e,...t}){return I(n=>f(e("web_app_request_emoji_status_access","emoji_status_access_requested",n),V(s=>s.status)),{...t,requires:"web_app_request_emoji_status_access",returns:"task"})}const ma=_a(f(k(),x,Z));_(ma);function ba({request:e,...t}){return I((n,s)=>f(e("web_app_set_emoji_status",["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:n,duration:(s||{}).duration},...s}),$e(i=>i&&"error"in i?W(new ta(i.error)):O(void 0))),{...t,requires:"web_app_set_emoji_status",returns:"task"})}const ga=ba(f(k(),Z,x));_(ga);class va{constructor({postEvent:t,isTma:n,version:s}){o(this,"isSupported"),o(this,"impactOccurredFp"),o(this,"impactOccurred"),o(this,"notificationOccurredFp"),o(this,"notificationOccurred"),o(this,"selectionChangedFp"),o(this,"selectionChanged");const i="web_app_trigger_haptic_feedback",r=q({requires:i,isTma:n,version:s,returns:"plain"});this.isSupported=re(i,s),this.impactOccurredFp=r(a=>t(i,{type:"impact",impact_style:a})),this.notificationOccurredFp=r(a=>t(i,{type:"notification",notification_type:a})),this.selectionChangedFp=r(()=>t(i,{type:"selection_change"})),this.impactOccurred=_(this.impactOccurredFp),this.notificationOccurred=_(this.notificationOccurredFp),this.selectionChanged=_(this.selectionChangedFp)}}new va(f(k(),H,x));function wa({postEvent:e,...t}){return I(()=>e("web_app_add_to_home_screen"),{...t,requires:"web_app_add_to_home_screen",returns:"either"})}const ya=wa(f(k(),x,H));_(ya);function Ca({request:e,...t}){return I(n=>f(e("web_app_check_home_screen","home_screen_checked",n),V(s=>s.status||"unknown")),{...t,requires:"web_app_check_home_screen",returns:"task"})}const Sa=Ca(f(k(),x,Z));_(Sa);class Fa{constructor({retrieveInitData:t}){o(this,"_state",U()),o(this,"_raw",U()),o(this,"state",C(this._state)),o(this,"authDate",this.fromState("auth_date")),o(this,"canSendAfter",this.fromState("can_send_after")),o(this,"canSendAfterDate",C(()=>{const n=this.authDate(),s=this.canSendAfter();return s&&n?new Date(n.getTime()+s*1e3):void 0})),o(this,"chat",this.fromState("chat")),o(this,"chatType",this.fromState("chat_type")),o(this,"chatInstance",this.fromState("chat_instance")),o(this,"hash",this.fromState("hash")),o(this,"queryId",this.fromState("query_id")),o(this,"raw",C(this._raw)),o(this,"receiver",this.fromState("receiver")),o(this,"signature",this.fromState("signature")),o(this,"startParam",this.fromState("start_param")),o(this,"user",this.fromState("user")),o(this,"restoreFp"),o(this,"restore"),this.restoreFp=()=>f(t(),K(fs(()=>{},({raw:n,obj:s})=>{this._state.set(s),this._raw.set(n)}))),this.restore=Y(this.restoreFp)}fromState(t){return C(()=>{const n=this._state();return n?n[t]:void 0})}}new Fa({retrieveInitData(){return f(bo,yn("obj",()=>f(Te(),K(({tgWebAppData:e})=>e?Be(e):Oe))),yn("raw",Vi),K(({obj:e,raw:t})=>f(Eo,Cn("obj",()=>e),Cn("raw",()=>t))))}});class ka{constructor({version:t,request:n,isTma:s}){o(this,"isOpened"),o(this,"isSupported"),o(this,"openSlugFp"),o(this,"openSlug"),o(this,"openUrlFp"),o(this,"openUrl");const i=q({version:t,isTma:s,requires:"web_app_open_invoice",returns:"task"}),r=U(!1),a=()=>{r.set(!1)};this.isSupported=re("web_app_open_invoice",t),this.isOpened=C(r),this.openSlugFp=i((u,l)=>f(this.isOpened()?W(new Xt("Invoice is already opened")):O(void 0),ce(()=>(r.set(!0),n("web_app_open_invoice","invoice_closed",{...l,params:{slug:u},capture:c=>u===c.slug}))),Qt(c=>(a(),c),c=>(a(),c.status)))),this.openUrlFp=i((u,l)=>{const{hostname:c,pathname:p}=new URL(u,window.location.href);if(c!=="t.me")return W(new te("Link has unexpected hostname: ".concat(c)));const h=p.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);return h?this.openSlugFp(h[2],l):W(new te('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"'))}),this.openUrl=_(this.openUrlFp),this.openSlug=_(this.openSlugFp)}}new ka(f(k(),Z,x));function $a({postEvent:e,...t}){return I((n,s={})=>{if(typeof n=="string")try{n=new URL(n)}catch(i){return D(new te('"'.concat(n.toString(),'" is invalid URL'),i))}return e("web_app_open_link",{url:n.toString(),try_browser:s.tryBrowser,try_instant_view:s.tryInstantView})},{...t,returns:"either"})}const xa=$a(f(k(),H));_(xa);function Ea({postEvent:e,version:t,...n}){return I(s=>{const i=s.toString();return i.match(/^https:\/\/t.me\/.+/)?ke("web_app_open_tg_link",J(t))?(s=new URL(s),e("web_app_open_tg_link",{path_full:s.pathname+s.search})):(window.location.href=i,R(void 0)):D(new te('"'.concat(i,'" is invalid URL')))},{...n,returns:"either"})}const ws=Ea(f(k(),H,x));_(ws);function Aa({openTelegramLink:e,...t}){return I((n,s)=>e("https://t.me/share/url?"+new URLSearchParams({url:n,text:s||""}).toString().replace(/\+/g,"%20")),{...t,returns:"either"})}const qa=Aa({...k(),openTelegramLink:ws});_(qa);function Ia(e){let t=!1,n,s;return e.available&&(t=!0,n=e.access_requested,s=e.access_granted),{available:t,accessGranted:s||!1,accessRequested:n||!1}}class Ta{constructor({version:t,request:n,postEvent:s,storage:i,isTma:r,isPageReload:a}){o(this,"state"),o(this,"isAvailable"),o(this,"isAccessGranted"),o(this,"isAccessRequested"),o(this,"isMounted"),o(this,"isSupported"),o(this,"openSettingsFp"),o(this,"openSettings"),o(this,"requestLocationFp"),o(this,"requestLocation"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const u=new he({initialState:{available:!1,accessGranted:!1,accessRequested:!1},onChange:i.set}),l=new tn({isPageReload:a,restoreState:i.get,onMounted:u.setState,initialState(g){return f(n("web_app_check_location","location_checked",g),V(Ia))}}),c={version:t,requires:"web_app_check_location",isTma:r},p=q({...c,returns:"either"}),h=q({...c,returns:"task"}),b=q({...c,returns:"task",isMounted:l.isMounted});this.isAvailable=u.getter("available"),this.isAccessRequested=u.getter("accessRequested"),this.isAccessGranted=u.getter("accessGranted"),this.isSupported=re("web_app_check_location",t),this.isMounted=l.isMounted,this.state=u.state,this.unmount=l.unmount,this.mountFp=h(l.mount),this.openSettingsFp=p(()=>s("web_app_open_location_settings")),this.requestLocationFp=b(g=>f(n("web_app_request_location","location_requested",g),V(w=>{if(!w.available)return u.setState({available:!1}),null;const{available:S,...m}=w;return m}))),this.mount=_(this.mountFp),this.openSettings=_(this.openSettingsFp),this.requestLocation=_(this.requestLocationFp)}}new Ta(f(k(),H,x,Z,fe("locationManager")));class Pa{constructor({defaults:t,...n}){o(this,"bgColor"),o(this,"hasShineEffect"),o(this,"isEnabled"),o(this,"isLoaderVisible"),o(this,"isVisible"),o(this,"isMounted"),o(this,"state"),o(this,"text"),o(this,"textColor"),o(this,"showFp"),o(this,"show"),o(this,"hideFp"),o(this,"hide"),o(this,"enableFp"),o(this,"enable"),o(this,"enableShineEffectFp"),o(this,"enableShineEffect"),o(this,"disableFp"),o(this,"disable"),o(this,"disableShineEffectFp"),o(this,"disableShineEffect"),o(this,"setBgColorFp"),o(this,"setBgColor"),o(this,"setTextColorFp"),o(this,"setTextColor"),o(this,"setTextFp"),o(this,"setText"),o(this,"showLoaderFp"),o(this,"showLoader"),o(this,"hideLoaderFp"),o(this,"hideLoader"),o(this,"setParamsFp"),o(this,"setParams"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick");const s=new ut({...n,version:"100",initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"},method:"web_app_setup_main_button",payload:r=>({has_shine_effect:r.hasShineEffect,is_visible:r.isVisible,is_active:r.isEnabled,is_progress_visible:r.isLoaderVisible,text:r.text,color:r.bgColor,text_color:r.textColor})}),i=(r,a)=>{const u=s.stateGetter(r);return C(()=>u()||J(a))};this.bgColor=i("bgColor",t.bgColor),this.textColor=i("textColor",t.textColor),this.hasShineEffect=s.stateGetter("hasShineEffect"),this.isEnabled=s.stateGetter("isEnabled"),this.isLoaderVisible=s.stateGetter("isLoaderVisible"),this.text=s.stateGetter("text"),this.isVisible=s.stateGetter("isVisible"),this.isMounted=s.isMounted,this.state=s.state,[this.setBgColor,this.setBgColorFp]=s.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=s.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=s.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=s.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=s.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=s.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=s.stateBoolSetters("isVisible"),this.setParams=s.setState,this.setParamsFp=s.setStateFp,this.onClick=s.onClick,this.onClickFp=s.onClickFp,this.offClick=s.offClick,this.offClickFp=s.offClickFp,this.mount=s.mount,this.mountFp=s.mountFp,this.unmount=s.unmount}}function ys(e,t,n){return f(en(e,t),s=>({...s,defaults:n}))}const $t=Ue({});function sn(e,t){document.documentElement.style.setProperty(e,t)}function rn(e){document.documentElement.style.removeProperty(e)}function Ma(e){return f(Lt(e),K(t=>Math.sqrt([.299,.587,.114].reduce((n,s,i)=>{const r=parseInt(t.slice(1+i*2,1+(i+1)*2),16);return n+r*r*s},0))<120))}const Cs=Y(Ma);class Ra{constructor({initialState:t,onChange:n,offChange:s,isTma:i,storage:r,isPageReload:a}){o(this,"accentTextColor"),o(this,"bgColor"),o(this,"buttonColor"),o(this,"buttonTextColor"),o(this,"bottomBarBgColor"),o(this,"destructiveTextColor"),o(this,"headerBgColor"),o(this,"hintColor"),o(this,"linkColor"),o(this,"secondaryBgColor"),o(this,"sectionBgColor"),o(this,"sectionHeaderTextColor"),o(this,"sectionSeparatorColor"),o(this,"subtitleTextColor"),o(this,"textColor"),o(this,"_isCssVarsBound",U(!1)),o(this,"isCssVarsBound",C(this._isCssVarsBound)),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"state"),o(this,"isDark",C(()=>{const g=this.bgColor();return!g||Cs(g)})),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const u=new he({initialState:{},onChange:r.set}),l=g=>{u.setState(g.theme_params)},c=new Le({initialState:()=>R(J(t)),isPageReload:a,onMounted(g){u.setState(g),n(l)},onUnmounted(){s(l)},restoreState:r.get}),p={isTma:i,returns:"either"},h=q(p),b=q({...p,isMounted:c.isMounted});this.accentTextColor=u.getter("accent_text_color"),this.bgColor=u.getter("bg_color"),this.buttonColor=u.getter("button_color"),this.buttonTextColor=u.getter("button_text_color"),this.bottomBarBgColor=u.getter("bottom_bar_bg_color"),this.destructiveTextColor=u.getter("destructive_text_color"),this.headerBgColor=u.getter("header_bg_color"),this.hintColor=u.getter("hint_color"),this.linkColor=u.getter("link_color"),this.secondaryBgColor=u.getter("secondary_bg_color"),this.sectionBgColor=u.getter("section_bg_color"),this.sectionHeaderTextColor=u.getter("section_header_text_color"),this.sectionSeparatorColor=u.getter("section_separator_color"),this.subtitleTextColor=u.getter("subtitle_text_color"),this.textColor=u.getter("text_color"),this.state=u.state,this.isMounted=c.isMounted,this.bindCssVarsFp=b(g=>{if(this._isCssVarsBound())return D(new Yt);g||(g=m=>"--tg-theme-".concat(lr(m)));const w=m=>{Object.entries(u.state()).forEach(([v,d])=>{d&&m(v,d)})},S=()=>{w((m,v)=>{sn(g(m),v)})};return S(),u.state.sub(S),this._isCssVarsBound.set(!0),R(()=>{w(rn),u.state.unsub(S),this._isCssVarsBound.set(!1)})}),this.mountFp=h(c.mount),this.unmount=c.unmount,this.bindCssVars=_(this.bindCssVarsFp),this.mount=_(this.mountFp)}}const Ye=new Ra({...f(k(),fe("themeParams")),offChange(e){Re("theme_changed",e)},onChange(e){se("theme_changed",e)},initialState:$t});new Pa(ys("mainButton","main_button_pressed",{bgColor:C(()=>Ye.buttonColor()||"#2481cc"),textColor:C(()=>Ye.buttonTextColor()||"#ffffff")}));class ja{constructor({storage:t,isPageReload:n,version:s,postEvent:i,isTma:r,theme:a,onVisibilityChanged:u,offVisibilityChanged:l}){o(this,"isSupported"),o(this,"isDark",C(()=>{const d=this.bgColorRgb();return d?Cs(d):!1})),o(this,"isActive"),o(this,"state"),o(this,"isCssVarsBound"),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"bgColor"),o(this,"bgColorRgb"),o(this,"setBgColorFp"),o(this,"setBgColor"),o(this,"headerColor"),o(this,"headerColorRgb"),o(this,"setHeaderColorFp"),o(this,"setHeaderColor"),o(this,"bottomBarColor"),o(this,"bottomBarColorRgb"),o(this,"setBottomBarColorFp"),o(this,"setBottomBarColor"),o(this,"closeFp"),o(this,"close"),o(this,"readyFp"),o(this,"ready");const c=d=>{b.setState({isActive:d.is_visible})},p=d=>{[[this.headerColor,"web_app_set_header_color"],[this.bgColor,"web_app_set_background_color"],[this.bottomBarColor,"web_app_set_bottom_bar_color"]].forEach(([T,P])=>{const j=T();if(!ze(j)&&(P!=="web_app_set_header_color"||!["bg_color","secondary_bg_color"].includes(j))){const F=d[j];F&&i(P,{color:F})}})},h=new Le({initialState(){return R({bgColor:"bg_color",headerColor:"header_bg_color",bottomBarColor:"bottom_bar_bg_color",isActive:!0})},isPageReload:n,onMounted:d=>{u(c),a.sub(p),b.setState(d)},onUnmounted(){l(c),a.unsub(p)},restoreState:t.get});this.isMounted=h.isMounted,this.mountFp=I(()=>{const d=()=>{};return f(h.mount(),Ve(d,d))},{isTma:r,returns:"plain"}),this.mount=_(this.mountFp),this.unmount=h.unmount;const b=new he({initialState:{bgColor:"bg_color",bottomBarColor:"bottom_bar_bg_color",headerColor:"bg_color",isActive:!1},onChange:t.set});this.state=b.state;const g=d=>ze(d)?d:J(a)[d],w=d=>C(()=>g(d()));this.isActive=b.getter("isActive"),this.isSupported=C(()=>["web_app_set_header_color","web_app_set_background_color","web_app_set_bottom_bar_color"].some(d=>ke(d,J(s))));const S=U(!1);this.isCssVarsBound=C(S),this.bindCssVarsFp=I(d=>{if(S())return D(new Yt);const[T,P]=st(()=>{S.set(!1)}),j=(F,M)=>{const A=()=>{sn(F,M()||null)};A(),T(M.sub(A),rn.bind(null,F))};return d||(d=F=>"--tg-".concat(In(F))),j(d("bgColor"),this.bgColorRgb),j(d("bottomBarColor"),this.bottomBarColorRgb),j(d("headerColor"),this.headerColorRgb),S.set(!0),R(P)},{isTma:r,returns:"either",isMounted:this.isMounted}),this.bindCssVars=_(this.bindCssVarsFp);const m=d=>{const T=b.getter(d),P=w(T),j={headerColor:"web_app_set_header_color",bgColor:"web_app_set_background_color",bottomBarColor:"web_app_set_bottom_bar_color"}[d],F=I(M=>{if(M===T())return R(void 0);if(j==="web_app_set_header_color"&&(M==="bg_color"||M==="secondary_bg_color"))return f(i("web_app_set_header_color",{color_key:M}),K(()=>{b.setState({[d]:M})}));const A=g(M);return f(A?i(j,{color:A}):D(new ra(M)),K(()=>{b.setState({[d]:A})}))},{isTma:r,version:s,requires:j,isMounted:this.isMounted,returns:"either",supports:d==="headerColor"?{rgb:{method:"web_app_set_header_color",param:"color",shouldCheck:ze}}:void 0});return[T,P,_(F),F]};[this.bgColor,this.bgColorRgb,this.setBgColor,this.setBgColorFp]=m("bgColor"),[this.headerColor,this.headerColorRgb,this.setHeaderColor,this.setHeaderColorFp]=m("headerColor"),[this.bottomBarColor,this.bottomBarColorRgb,this.setBottomBarColor,this.setBottomBarColorFp]=m("bottomBarColor");const v=q({isTma:r,returns:"either"});this.closeFp=v(d=>i("web_app_close",{return_back:d})),this.close=_(this.closeFp),this.readyFp=v(()=>i("web_app_ready")),this.ready=_(this.readyFp)}}const Va=new ja({...f(k(),H,x,fe("miniApp")),offVisibilityChanged(e){Re("visibility_changed",e)},onVisibilityChanged(e){se("visibility_changed",e)},theme:Ye.state});function Oa(e){const t=e.message.trim(),n=(e.title||"").trim(),s=e.buttons||[];if(n.length>64)return D(new te("Invalid title: ".concat(n)));if(!t||t.length>256)return D(new te("Invalid message: ".concat(t)));if(s.length>3)return D(new te("Invalid buttons count: ".concat(s.length)));const i=[];if(!s.length)i.push({type:"close",id:""});else for(let r=0;r<s.length;r++){const a=s[r],u=a.id||"";if(u.length>64)return D(new te("Button with index ".concat(r," has invalid id: ").concat(u)));if(!a.type||a.type==="default"||a.type==="destructive"){const l=a.text.trim();if(!l||l.length>64)return D(new te("Button with index ".concat(r," has invalid text: ").concat(l)));i.push({type:a.type,text:l,id:u})}else i.push({type:a.type,id:u})}return R({title:n,message:t,buttons:i})}class Ba{constructor({version:t,isTma:n,request:s}){o(this,"isOpened"),o(this,"isSupported"),o(this,"showFp"),o(this,"show");const i=U(!1),r=()=>{i.set(!1)},a=q({version:t,isTma:n,requires:"web_app_open_popup",returns:"task"});this.isSupported=re("web_app_open_popup",t),this.isOpened=C(i),this.showFp=a(u=>f(this.isOpened()?W(new Xt("A popup is already opened")):O(void 0),$e(()=>ms(Oa(u))),ce(l=>(i.set(!0),s("web_app_open_popup","popup_closed",{...u,params:l}))),Qt(l=>(r(),l),l=>(r(),l.button_id)))),this.show=_(this.showFp)}}new Ba(f(k(),Z,x));function La({request:e,...t}){return I(n=>f(e("web_app_request_phone","phone_requested",n),V(s=>s.status)),{...t,requires:"web_app_request_phone",returns:"task"})}const Ss=La(f(k(),x,Z));_(Ss);function Da({invokeCustomMethod:e,requestPhoneAccess:t,...n}){const s=a=>f(e("getRequestedContact",{},{...a,timeout:(a||{}).timeout||5e3}),$e(u=>{const l=gt(y(),u);if(!l.success)return W(new Ke(u,l.issues));if(!l.output)return O(void 0);const c=gt(Bt(G({contact:be(G({user_id:pe(),phone_number:y(),first_name:y(),last_name:$(y())})),auth_date:ne(y(),ue(p=>new Date(Number(p)*1e3)),tt()),hash:y()})),l.output);return c.success?O({raw:l.output,parsed:c.output}):W(new Ke(l.output,c.issues))})),i=a=>f(s(a),Go(u=>Ke.is(u)?D(u):R(void 0),u=>R(u))),r=a=>Ie(async(u,l,c)=>{let p=50;for(;!c.isRejected;){const h=await i(c)();if(h._tag==="Left")return l(h.left);if(h.right)return u(h.right);await new Promise(b=>setTimeout(b,p)),p+=50}},a);return I(a=>Ie.fn(u=>f(i(u),ce(l=>l?O(l):f(t(u),$e(c=>c==="sent"?r(u):W(new bs("User denied access")))))),a),{...n,returns:"task",requires:"web_app_request_phone"})}function Ua({requestContact:e,...t}){return I(e,{...t,returns:"task",requires:"web_app_request_phone"})}const Fs=Da({...f(k(),nn,x),requestPhoneAccess:Ss});_(Fs);const Ga=Ua({...f(k(),x),requestContact(e){return f(Fs(e),V(t=>t.parsed))}});_(Ga);function Na({request:e,...t}){return I(n=>f(e("web_app_request_write_access","write_access_requested",n),V(s=>s.status)),{...t,requires:"web_app_request_write_access",returns:"task"})}const Wa=Na(f(k(),x,Z));_(Wa);class Ha{constructor({version:t,onClosed:n,onTextReceived:s,isTma:i,postEvent:r}){o(this,"isOpened"),o(this,"isSupported"),o(this,"captureFp"),o(this,"capture"),o(this,"closeFp"),o(this,"close"),o(this,"openFp"),o(this,"open");const a={version:t,requires:"web_app_open_scan_qr_popup",isTma:i},u=q({...a,returns:"either"}),l=q({...a,returns:"task"}),c=U(!1),p=()=>{c.set(!1)};this.isSupported=re("web_app_open_scan_qr_popup",t),this.isOpened=C(c),this.captureFp=l(h=>{let b;return f(this.openFp({...h,onCaptured:g=>{h.capture(g)&&(b=g,this.close())}}),V(()=>b))}),this.closeFp=u(()=>f(r("web_app_close_scan_qr_popup"),K(p))),this.openFp=l(h=>f(this.isOpened()?W(new Xt("The QR Scanner is already opened")):async()=>r("web_app_open_scan_qr_popup",{text:h.text}),$e(()=>{const[b,g]=st(),w=S=>(g(),S);return f(Ie(S=>{b(n(S),s(h.onCaptured))},h),Qt(w,w))}))),this.open=_(this.openFp),this.capture=_(this.captureFp),this.close=_(this.closeFp)}}new Ha({...f(k(),H,x),onClosed(e){return se("scan_qr_popup_closed",e)},onTextReceived(e){return se("qr_text_received",t=>{e(t.data)})}});class za{constructor({defaults:t,...n}){o(this,"isSupported"),o(this,"position"),o(this,"bgColor"),o(this,"hasShineEffect"),o(this,"isEnabled"),o(this,"isLoaderVisible"),o(this,"isVisible"),o(this,"isMounted"),o(this,"state"),o(this,"text"),o(this,"textColor"),o(this,"showFp"),o(this,"show"),o(this,"hideFp"),o(this,"hide"),o(this,"enableFp"),o(this,"enable"),o(this,"enableShineEffectFp"),o(this,"enableShineEffect"),o(this,"disableFp"),o(this,"disable"),o(this,"disableShineEffectFp"),o(this,"disableShineEffect"),o(this,"setBgColorFp"),o(this,"setBgColor"),o(this,"setTextColorFp"),o(this,"setTextColor"),o(this,"setTextFp"),o(this,"setText"),o(this,"setPositionFp"),o(this,"setPosition"),o(this,"showLoaderFp"),o(this,"showLoader"),o(this,"hideLoaderFp"),o(this,"hideLoader"),o(this,"setParamsFp"),o(this,"setParams"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick");const s=new ut({...n,initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Cancel",position:"left"},method:"web_app_setup_secondary_button",payload:r=>({has_shine_effect:r.hasShineEffect,is_visible:r.isVisible,is_active:r.isEnabled,is_progress_visible:r.isLoaderVisible,text:r.text,color:r.bgColor,text_color:r.textColor,position:r.position})}),i=(r,a)=>{const u=s.stateGetter(r);return C(()=>u()||J(a))};this.isSupported=re("web_app_setup_secondary_button",n.version),this.bgColor=i("bgColor",t.bgColor),this.textColor=i("textColor",t.textColor),this.position=s.stateGetter("position"),this.hasShineEffect=s.stateGetter("hasShineEffect"),this.isEnabled=s.stateGetter("isEnabled"),this.isLoaderVisible=s.stateGetter("isLoaderVisible"),this.text=s.stateGetter("text"),this.isVisible=s.stateGetter("isVisible"),this.isMounted=s.isMounted,this.state=s.state,[this.setPosition,this.setPositionFp]=s.stateSetters("position"),[this.setBgColor,this.setBgColorFp]=s.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=s.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=s.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=s.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=s.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=s.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=s.stateBoolSetters("isVisible"),this.setParams=s.setState,this.setParamsFp=s.setStateFp,this.onClick=s.onClick,this.onClickFp=s.onClickFp,this.offClick=s.offClick,this.offClickFp=s.offClickFp,this.mount=s.mount,this.mountFp=s.mountFp,this.unmount=s.unmount}}new za(ys("secondaryButton","secondary_button_pressed",{bgColor:C(()=>Va.bottomBarColorRgb()||"#000000"),textColor:C(()=>Ye.buttonColor()||"#2481cc")}));class Ka{constructor(t){o(this,"isVisible"),o(this,"isMounted"),o(this,"isSupported"),o(this,"hideFp"),o(this,"hide"),o(this,"showFp"),o(this,"show"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const n=new ut({...t,method:"web_app_setup_settings_button",payload:s=>({is_visible:s.isVisible}),initialState:{isVisible:!1}});this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.isSupported=n.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount}}new Ka(en("settingsButton","settings_button_pressed"));class Ja{constructor({postEvent:t,storage:n,isTma:s,isPageReload:i,version:r}){o(this,"isSupported"),o(this,"isVerticalEnabled"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"disableVerticalFp"),o(this,"disableVertical"),o(this,"enableVerticalFp"),o(this,"enableVertical");const a={isVerticalEnabled:!0},u=new he({initialState:a,onChange(g){n.set(g)}}),l=new Le({initialState:a,isPageReload:i,onMounted:u.setState,restoreState:n.get}),c={requires:"web_app_setup_swipe_behavior",isTma:s,version:r},p=q({...c,returns:"plain"}),h=q({...c,isMounted:l.isMounted,returns:"either"}),b=g=>{const w={isVerticalEnabled:g};return u.hasDiff(w)?f(t("web_app_setup_swipe_behavior",{allow_vertical_swipe:g}),K(()=>{u.setState(w)})):R(void 0)};this.isSupported=re("web_app_setup_swipe_behavior",r),this.isVerticalEnabled=u.getter("isVerticalEnabled"),this.isMounted=l.isMounted,this.disableVerticalFp=h(()=>b(!1)),this.enableVerticalFp=h(()=>b(!0)),this.mountFp=p(()=>{const g=()=>{};return f(l.mount(),Ve(g,g))}),this.unmount=l.unmount,this.disableVertical=_(this.disableVerticalFp),this.enableVertical=_(this.enableVerticalFp),this.mount=_(this.mountFp)}}new Ja(f(k(),H,x,fe("swipeBehavior")));function Qa({request:e,...t}){return I((n,s,i)=>f(e("web_app_request_file_download","file_download_requested",{...i,params:{url:n,file_name:s}}),ce(r=>r.status==="downloading"?O(void 0):W(new bs("User denied the action")))),{...t,requires:"web_app_request_file_download",returns:"task"})}const Za=Qa(f(k(),Z,x));_(Za);function Ya({invokeCustomMethod:e,...t}){return I(n=>f(e("getCurrentTime",{},n),ce(s=>{const i=gt(ne(pe(),qt(),ue(r=>new Date(r*1e3)),tt()),s);return i.success?O(i.output):W(new Ke(s,i.issues))})),{...t,requires:"web_app_invoke_custom_method",returns:"task"})}const Xa=Ya(f(k(),nn,x));_(Xa);function eu({postEvent:e,...t}){return I(()=>e("web_app_hide_keyboard"),{...t,returns:"either",requires:"web_app_hide_keyboard"})}const tu=eu(f(k(),H,x));_(tu);function nu({request:e,createRequestId:t,...n}){return I(s=>{const i=t();return f(e("web_app_read_text_from_clipboard","clipboard_text_received",{...s,params:{req_id:i},capture:as(i)}),V(({data:r=null})=>r))},{...n,requires:"web_app_read_text_from_clipboard",returns:"task"})}const su=nu({...f(k(),x,Z),createRequestId:vs});_(su);function ru({postEvent:e,...t}){return I(n=>{const{size:s}=new Blob([n]);return!s||s>4096?D(new te(s?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data")):e("web_app_data_send",{data:n})},{...t,returns:"either"})}const iu=ru(f(k(),H));_(iu);function ou({request:e,...t}){return I((n,s)=>f(e("web_app_send_prepared_message",["prepared_message_failed","prepared_message_sent"],{...s,params:{id:n}}),ce(i=>i&&"error"in i?W(new sa(i.error)):O(void 0))),{...t,requires:"web_app_send_prepared_message",returns:"task"})}const au=ou(f(k(),Z,x));_(au);function uu({postEvent:e,...t}){return I((n,s={})=>e("web_app_share_to_story",{text:s.text,media_url:n,widget_link:s.widgetLink}),{...t,requires:"web_app_share_to_story",returns:"either"})}const cu=uu(f(k(),H,x));_(cu);const xt=Ue(!1);function lu({isInlineMode:e,postEvent:t,...n}){return I((s,i)=>t("web_app_switch_inline_query",{query:s,chat_types:i||[]}),{...n,requires:{every:["web_app_switch_inline_query",()=>J(e)?void 0:"The application must be launched in the inline mode"]},returns:"either"})}const pu=lu({...f(k(),H,x),isInlineMode:xt});_(pu);class hu{constructor({storage:t,isPageReload:n,onContentSafeAreaInsetsChanged:s,onSafeAreaInsetsChanged:i,onViewportChanged:r,onFullscreenChanged:a,offContentSafeAreaInsetsChanged:u,offFullscreenChanged:l,offSafeAreaInsetsChanged:c,offViewportChanged:p,request:h,isViewportStable:b,isFullscreen:g,isTma:w,version:S,postEvent:m}){o(this,"state"),o(this,"height"),o(this,"stableHeight"),o(this,"width"),o(this,"isExpanded"),o(this,"isStable",C(()=>this.height()===this.stableHeight())),o(this,"contentSafeAreaInsets"),o(this,"contentSafeAreaInsetTop"),o(this,"contentSafeAreaInsetLeft"),o(this,"contentSafeAreaInsetRight"),o(this,"contentSafeAreaInsetBottom"),o(this,"safeAreaInsets"),o(this,"safeAreaInsetTop"),o(this,"safeAreaInsetLeft"),o(this,"safeAreaInsetRight"),o(this,"safeAreaInsetBottom"),o(this,"isFullscreen"),o(this,"requestFullscreenFp"),o(this,"requestFullscreen"),o(this,"exitFullscreenFp"),o(this,"exitFullscreen"),o(this,"isCssVarsBound"),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"expandFp"),o(this,"expand");const v={top:0,right:0,left:0,bottom:0},d=new he({initialState:{contentSafeAreaInsets:v,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:v,stableHeight:0,width:0},onChange:t.set}),T=E=>{d.setState({isExpanded:E.is_expanded,height:E.height,width:E.width,stableHeight:E.is_state_stable?E.height:void 0})},P=E=>{d.setState({isFullscreen:E.is_fullscreen})},j=E=>{d.setState({safeAreaInsets:E})},F=E=>{d.setState({contentSafeAreaInsets:E})},M=new tn({initialState(E){const de=ie=>()=>{const[le,X]=ie==="safe-area"?["web_app_request_safe_area","safe_area_changed"]:["web_app_request_content_safe_area","content_safe_area_changed"];return ke(le,J(S))?h(le,X,E):O({top:0,left:0,right:0,bottom:0})},L=ie=>()=>typeof ie=="boolean"?O(ie):ms(ie());return f(Zo,He("safeAreaInsets",de("safe-area")),He("contentSafeAreaInsets",de("content-safe-area")),He("isFullscreen",L(g)),He("isViewportStable",L(b)),$e(({isViewportStable:ie,...le})=>ie?O({...le,height:window.innerHeight,isExpanded:!0,stableHeight:window.innerHeight,width:window.innerWidth}):f(h("web_app_request_viewport","viewport_changed",E),V(X=>({...le,height:X.height,isExpanded:X.is_expanded,stableHeight:X.is_state_stable?X.height:0,width:X.width})))))},isPageReload:n,onMounted(E){r(T),a(P),i(j),s(F),d.setState(E)},onUnmounted(){p(T),l(P),c(j),u(F)},restoreState:t.get}),A=E=>C(()=>this.safeAreaInsets()[E]),B=E=>C(()=>this.contentSafeAreaInsets()[E]);this.state=d.state,this.height=d.getter("height"),this.stableHeight=d.getter("stableHeight"),this.width=d.getter("width"),this.isExpanded=d.getter("isExpanded"),this.safeAreaInsets=d.getter("safeAreaInsets"),this.safeAreaInsetTop=A("top"),this.safeAreaInsetBottom=A("bottom"),this.safeAreaInsetLeft=A("left"),this.safeAreaInsetRight=A("right"),this.contentSafeAreaInsets=d.getter("contentSafeAreaInsets"),this.contentSafeAreaInsetTop=B("top"),this.contentSafeAreaInsetBottom=B("bottom"),this.contentSafeAreaInsetLeft=B("left"),this.contentSafeAreaInsetRight=B("right");const ye=q({isTma:w,returns:"task"}),Ae=q({isTma:w,returns:"either"}),ks=q({isTma:w,requires:"web_app_request_fullscreen",version:S,returns:"task"}),on=E=>ks(de=>f(h(E?"web_app_request_fullscreen":"web_app_exit_fullscreen",["fullscreen_changed","fullscreen_failed"],de),ce(L=>"error"in L&&L.error!=="ALREADY_FULLSCREEN"?W(new na(L.error)):(d.setState({isFullscreen:"is_fullscreen"in L?L.is_fullscreen:!0}),O(void 0)))));this.isMounted=M.isMounted,this.mountFp=ye(M.mount),this.mount=_(this.mountFp),this.isFullscreen=d.getter("isFullscreen"),this.requestFullscreenFp=on(!0),this.requestFullscreen=_(this.requestFullscreenFp),this.exitFullscreenFp=on(!1),this.exitFullscreen=_(this.exitFullscreenFp);const Ne=U(!1);this.isCssVarsBound=C(Ne),this.bindCssVarsFp=Ae(E=>{if(Ne())return D(new Yt);E||(E=L=>"--tg-viewport-".concat(In(L)));const de=[["height",this.height],["stableHeight",this.stableHeight],["width",this.width],["safeAreaInsetTop",this.safeAreaInsetTop],["safeAreaInsetBottom",this.safeAreaInsetBottom],["safeAreaInsetLeft",this.safeAreaInsetLeft],["safeAreaInsetRight",this.safeAreaInsetRight],["contentSafeAreaInsetTop",this.contentSafeAreaInsetTop],["contentSafeAreaInsetBottom",this.contentSafeAreaInsetBottom],["contentSafeAreaInsetLeft",this.contentSafeAreaInsetLeft],["contentSafeAreaInsetRight",this.contentSafeAreaInsetRight]].reduce((L,[ie,le])=>{const X=E(ie);if(X){const an=()=>{sn(X,"".concat(le(),"px"))};L.push({update:an,removeListener:le.sub(an),cssVar:X})}return L},[]);return de.forEach(L=>{L.update()}),Ne.set(!0),R(()=>{de.forEach(L=>{L.removeListener(),rn(L.cssVar)}),Ne.set(!1)})}),this.bindCssVars=_(this.bindCssVarsFp),this.expandFp=Ae(()=>m("web_app_expand")),this.expand=_(this.expandFp)}}function fu(){const e=r=>({on:a=>{se(r,a)},off:a=>{Re(r,a)}}),t=e("viewport_changed"),n=e("fullscreen_changed"),s=e("safe_area_changed"),i=e("content_safe_area_changed");return new hu({...f(k(),fe("viewport"),x,H,Z),isFullscreen(){return f(Te(),K(r=>!!r.tgWebAppFullscreen))},isViewportStable(){return f(Te(),K(r=>["macos","tdesktop","unigram","webk","weba","web"].includes(r.tgWebAppPlatform)))},offContentSafeAreaInsetsChanged:i.off,offFullscreenChanged:n.off,offSafeAreaInsetsChanged:s.off,offViewportChanged:t.off,onContentSafeAreaInsetsChanged:i.on,onFullscreenChanged:n.on,onSafeAreaInsetsChanged:s.on,onViewportChanged:t.on})}fu();function du(e={}){const{version:t,isInlineMode:n,themeParams:s}=e;if(t&&typeof n=="boolean"&&s)kt.set(t),xt.set(n),$t.set(s);else{const u=f(Te(),hs(l=>l,l=>{kt.set(t||l.tgWebAppVersion),xt.set(typeof n=="boolean"?n:!!l.tgWebAppBotInline),$t.set(s||l.tgWebAppThemeParams)}));if(u)return D(u)}e.postEvent&&gs.set(e.postEvent);const[i,r]=st(se("reload_iframe",()=>{Ze().log("Received a request to reload the page"),ca("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:a=!0}=e;if(a){const u=document.createElement("style");u.id="telegram-custom-styles",document.head.appendChild(u),i(se("set_custom_style",l=>{u.innerHTML=l}),()=>{document.head.removeChild(u)})}return f(Ge("iframe_ready",{reload_supported:!0}),K(()=>(Ze().log("The package was initialized"),r)))}Y(du);function _u(e){return ee.useMemo(()=>{const t=ji();return yt(t)},[e])}function Au(){var s;const e=_u(!0),n=((s=e==null?void 0:e.themeParams)==null?void 0:s.colorScheme)==="dark"?"dark":"light";return Je.jsx(Gs,{appearance:n,children:Je.jsx($s,{})})}export{Au as default};
//# sourceMappingURL=TelegramApp-Bbq6igK9.js.map
