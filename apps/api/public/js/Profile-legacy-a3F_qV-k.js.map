{"version":3,"file":"Profile-legacy-a3F_qV-k.js","sources":["../../../web/src/pages/Profile.tsx"],"sourcesContent":["// Назначение: страница профиля пользователя\r\n// Основные модули: React, React Router\r\nimport { useEffect, useMemo, useState, type FormEvent } from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useAuth } from \"../context/useAuth\";\r\nimport { updateProfile } from \"../services/auth\";\r\nimport { fetchCollectionItems, type CollectionItem } from \"../services/collections\";\r\nimport { showToast } from \"../utils/toast\";\r\n\r\ninterface EditableProfileForm {\r\n  name: string;\r\n  phone: string;\r\n  email: string;\r\n}\r\n\r\nconst roleTitles: Record<string, string> = {\r\n  admin: \"Администратор\",\r\n  manager: \"Менеджер\",\r\n  user: \"Пользователь\",\r\n};\r\n\r\nconst defaultForm: EditableProfileForm = {\r\n  name: \"\",\r\n  phone: \"\",\r\n  email: \"\",\r\n};\r\n\r\nconst parseCollection = (items: CollectionItem[]) => {\r\n  const map = new Map<string, string>();\r\n  items.forEach((item) => {\r\n    map.set(item._id, item.name);\r\n  });\r\n  return map;\r\n};\r\n\r\nexport default function Profile() {\r\n  const { user, setUser, loading } = useAuth();\r\n  const [form, setForm] = useState<EditableProfileForm>({ ...defaultForm });\r\n  const [initialForm, setInitialForm] = useState<EditableProfileForm>({\r\n    ...defaultForm,\r\n  });\r\n  const [departments, setDepartments] = useState<CollectionItem[]>([]);\r\n  const [divisions, setDivisions] = useState<CollectionItem[]>([]);\r\n  const [positions, setPositions] = useState<CollectionItem[]>([]);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchCollectionItems(\"departments\", \"\", 1, 200).then((d) =>\r\n      setDepartments(d.items),\r\n    ).catch(() => setDepartments([]));\r\n    fetchCollectionItems(\"divisions\", \"\", 1, 200).then((d) =>\r\n      setDivisions(d.items),\r\n    ).catch(() => setDivisions([]));\r\n    fetchCollectionItems(\"positions\", \"\", 1, 200).then((d) =>\r\n      setPositions(d.items),\r\n    ).catch(() => setPositions([]));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    const next: EditableProfileForm = {\r\n      name: user.name || user.telegram_username || \"\",\r\n      phone: user.phone || \"\",\r\n      email: user.email || \"\",\r\n    };\r\n    setForm(next);\r\n    setInitialForm(next);\r\n    setError(null);\r\n  }, [user]);\r\n\r\n  const departmentMap = useMemo(() => parseCollection(departments), [\r\n    departments,\r\n  ]);\r\n  const divisionMap = useMemo(() => parseCollection(divisions), [divisions]);\r\n  const positionMap = useMemo(() => parseCollection(positions), [positions]);\r\n\r\n  const departmentName = useMemo(() => {\r\n    const fallback =\r\n      typeof user?.departmentName === \"string\"\r\n        ? user.departmentName.trim()\r\n        : \"\";\r\n    if (fallback) return fallback;\r\n    const id =\r\n      typeof user?.departmentId === \"string\"\r\n        ? user.departmentId.trim()\r\n        : \"\";\r\n    if (!id) return \"\";\r\n    return departmentMap.get(id) || id;\r\n  }, [departmentMap, user?.departmentId, user?.departmentName]);\r\n\r\n  const divisionName = useMemo(() => {\r\n    const fallback =\r\n      typeof user?.divisionName === \"string\"\r\n        ? user.divisionName.trim()\r\n        : \"\";\r\n    if (fallback) return fallback;\r\n    const id =\r\n      typeof user?.divisionId === \"string\" ? user.divisionId.trim() : \"\";\r\n    if (!id) return \"\";\r\n    return divisionMap.get(id) || id;\r\n  }, [divisionMap, user?.divisionId, user?.divisionName]);\r\n\r\n  const positionName = useMemo(() => {\r\n    const fallback =\r\n      typeof user?.positionName === \"string\"\r\n        ? user.positionName.trim()\r\n        : \"\";\r\n    if (fallback) return fallback;\r\n    const id =\r\n      typeof user?.positionId === \"string\"\r\n        ? user.positionId.trim()\r\n        : \"\";\r\n    if (!id) return \"\";\r\n    return positionMap.get(id) || id;\r\n  }, [positionMap, user?.positionId, user?.positionName]);\r\n\r\n  const updateField = <K extends keyof EditableProfileForm>(\r\n    key: K,\r\n    value: EditableProfileForm[K],\r\n  ) => {\r\n    setForm((prev) => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const isDirty = useMemo(() => {\r\n    return (\r\n      form.name !== initialForm.name ||\r\n      form.phone !== initialForm.phone ||\r\n      form.email !== initialForm.email\r\n    );\r\n  }, [form, initialForm]);\r\n\r\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    if (!user || !isDirty || saving) return;\r\n    const trimmedName = form.name.trim();\r\n    const trimmedPhone = form.phone.trim();\r\n    const trimmedEmail = form.email.trim();\r\n    setSaving(true);\r\n    setError(null);\r\n    try {\r\n      const data = await updateProfile({\r\n        name: trimmedName,\r\n        phone: trimmedPhone || undefined,\r\n        email: trimmedEmail,\r\n      });\r\n      setUser(data);\r\n      const next: EditableProfileForm = {\r\n        name: data.name || data.telegram_username || \"\",\r\n        phone: data.phone || \"\",\r\n        email: data.email || \"\",\r\n      };\r\n      setForm(next);\r\n      setInitialForm(next);\r\n      showToast(\"Профиль обновлён\", \"success\");\r\n    } catch (e) {\r\n      const message =\r\n        e instanceof Error ? e.message : \"Не удалось обновить профиль\";\r\n      setError(message);\r\n      showToast(message, \"error\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm(initialForm);\r\n    setError(null);\r\n  };\r\n\r\n  if (loading) return <div>Загрузка...</div>;\r\n  if (!user) return <div>Профиль недоступен</div>;\r\n\r\n  const roleLabel = user.role ? roleTitles[user.role] || user.role : \"—\";\r\n  const telegramId = user.telegram_id\r\n    ? String(user.telegram_id)\r\n    : user.id || \"\";\r\n  const telegramUsername = user.telegram_username || \"—\";\r\n  const additionalPhone = user.mobNumber || \"—\";\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"mx-auto max-w-4xl space-y-4\">\r\n        {error && (\r\n          <div className=\"rounded border border-red-200 bg-red-50 p-3 text-sm text-red-700\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          className=\"space-y-4 rounded bg-white p-8 shadow\"\r\n        >\r\n          <h2 className=\"text-2xl\">Личный кабинет</h2>\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <label className=\"space-y-1 md:col-span-2\">\r\n              <span className=\"block text-sm font-medium\">ФИО</span>\r\n              <input\r\n                name=\"fullName\"\r\n                className=\"h-10 w-full rounded border px-3\"\r\n                value={form.name}\r\n                onChange={(e) => updateField(\"name\", e.target.value)}\r\n                required\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Телефон</span>\r\n              <input\r\n                name=\"phone\"\r\n                className=\"h-10 w-full rounded border px-3\"\r\n                value={form.phone}\r\n                onChange={(e) => updateField(\"phone\", e.target.value)}\r\n                type=\"tel\"\r\n                placeholder=\"\"\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Email</span>\r\n              <input\r\n                name=\"email\"\r\n                className=\"h-10 w-full rounded border px-3\"\r\n                value={form.email}\r\n                onChange={(e) => updateField(\"email\", e.target.value)}\r\n                type=\"email\"\r\n                required\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Доп. телефон</span>\r\n              <input\r\n                name=\"additionalPhone\"\r\n                className=\"h-10 w-full rounded border bg-gray-100 px-3 text-gray-600\"\r\n                value={additionalPhone}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Telegram ID</span>\r\n              <input\r\n                name=\"telegramId\"\r\n                className=\"h-10 w-full rounded border bg-gray-100 px-3 text-gray-600\"\r\n                value={telegramId}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Username</span>\r\n              <input\r\n                name=\"telegramUsername\"\r\n                className=\"h-10 w-full rounded border bg-gray-100 px-3 text-gray-600\"\r\n                value={telegramUsername}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Роль</span>\r\n              <input\r\n                name=\"role\"\r\n                className=\"h-10 w-full rounded border bg-gray-100 px-3 text-gray-600\"\r\n                value={roleLabel}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Департамент</span>\r\n              <input\r\n                name=\"department\"\r\n                className=\"h-10 w-full rounded border bg-gray-100 px-3 text-gray-600\"\r\n                value={departmentName || \"—\"}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Отдел</span>\r\n              <input\r\n                name=\"division\"\r\n                className=\"h-10 w-full rounded border bg-gray-100 px-3 text-gray-600\"\r\n                value={divisionName || \"—\"}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </label>\r\n            <label className=\"space-y-1\">\r\n              <span className=\"block text-sm font-medium\">Должность</span>\r\n              <input\r\n                name=\"position\"\r\n                className=\"h-10 w-full rounded border bg-gray-100 px-3 text-gray-600\"\r\n                value={positionName || \"—\"}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </label>\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            <Button type=\"submit\" disabled={!isDirty || saving}>\r\n              {saving ? \"Сохранение...\" : \"Сохранить\"}\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={resetForm}\r\n              disabled={!isDirty || saving}\r\n            >\r\n              Отменить\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["_useAuth","useAuth","user","setUser","loading","_reactExports$useStat2","_slicedToArray","useState","defaultForm","form","setForm","_reactExports$useStat4","_objectSpread","initialForm","setInitialForm","_reactExports$useStat6","departments","setDepartments","_reactExports$useStat8","divisions","setDivisions","_reactExports$useStat0","positions","setPositions","_reactExports$useStat10","saving","setSaving","_reactExports$useStat12","error","setError","useEffect","fetchCollectionItems","then","d","items","catch","next","name","telegram_username","phone","email","departmentMap","useMemo","parseCollection","divisionMap","positionMap","departmentName","fallback","trim","id","departmentId","get","divisionName","divisionId","positionName","positionId","updateField","key","value","prev","isDirty","handleSubmit","_ref","_regenerator","m","_callee","event","trimmedName","trimmedPhone","trimmedEmail","data","message","_t","w","_context","p","n","preventDefault","a","updateProfile","v","showToast","Error","f","_x","apply","this","arguments","jsx","children","roleLabel","role","roleTitles","telegramId","telegram_id","String","telegramUsername","additionalPhone","mobNumber","className","jsxs","onSubmit","onChange","e","target","required","type","placeholder","readOnly","disabled","Button","variant","onClick","admin","manager","map","Map","forEach","item","set","_id"],"mappings":"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"}