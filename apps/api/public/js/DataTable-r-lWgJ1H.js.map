{"version":3,"file":"DataTable-r-lWgJ1H.js","sources":["../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/MagnifyingGlassIcon.js","../../../web/src/components/GlobalSearch.tsx","../../../web/src/components/SearchFilters.tsx","../../../web/src/components/TableToolbar.tsx","../../../web/src/components/DataTable.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction MagnifyingGlassIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(MagnifyingGlassIcon);\nexport default ForwardRef;","// Глобальный модуль поиска\n// Модули: React, heroicons, i18next, ui\nimport React from 'react';\nimport { MagnifyingGlassIcon, XMarkIcon } from '@heroicons/react/24/outline';\nimport { useTranslation } from 'react-i18next';\nimport { Input } from '@/components/ui/input';\nimport useTasks from '../context/useTasks';\n\nexport default function GlobalSearch() {\n  const { query, setQuery } = useTasks();\n  const { t } = useTranslation();\n  const ref = React.useRef<HTMLInputElement>(null);\n  const [value, setValue] = React.useState(query);\n\n  const clear = () => {\n    setValue('');\n    setQuery('');\n    ref.current?.focus();\n  };\n\n  const search = () => {\n    setQuery(value);\n  };\n\n  const onKey = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Escape') {\n      e.stopPropagation();\n      clear();\n      ref.current?.blur();\n    }\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      search();\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-1.5\">\n      <div className=\"relative\">\n        <MagnifyingGlassIcon className=\"pointer-events-none absolute top-1/2 left-2 size-4 -translate-y-1/2 text-gray-400\" />\n        <Input\n          ref={ref}\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n          onKeyDown={onKey}\n          placeholder={t('search')}\n          aria-label={t('search')}\n          className=\"h-8 w-48 pr-8 pl-8\"\n        />\n        {value && (\n          <button\n            onClick={clear}\n            aria-label=\"Очистить\"\n            className=\"absolute top-1/2 right-2 -translate-y-1/2 text-gray-400 hover:text-black\"\n          >\n            <XMarkIcon className=\"size-4\" />\n          </button>\n        )}\n      </div>\n      <button onClick={search} className=\"rounded border px-1.5 py-1\">\n        {t('find')}\n      </button>\n    </div>\n  );\n}\n","// Фильтры поиска задач\n// Модули: React, shared, useTasks\nimport React from 'react';\nimport { TASK_STATUSES, PRIORITIES, TASK_TYPES } from 'shared';\nimport useTasks from '../context/useTasks';\nimport type { TaskFilterUser } from '../context/TasksContext';\n\ninterface Props {\n  inline?: boolean;\n}\n\nexport default function SearchFilters({ inline = false }: Props) {\n  const { filters, setFilters, filterUsers } = useTasks();\n  const [local, setLocal] = React.useState(filters);\n\n  React.useEffect(() => {\n    setLocal(filters);\n  }, [filters]);\n\n  const toFieldId = React.useCallback(\n    (prefix: string, value: string) =>\n      `${prefix}-${value}`\n        .toLowerCase()\n        .replace(/[^a-z0-9а-яё]+/gi, '-')\n        .replace(/-+/g, '-')\n        .replace(/^-|-$/g, ''),\n    [],\n  );\n\n  const toggleString = (\n    key: 'status' | 'priority' | 'taskTypes',\n    value: string,\n  ) => {\n    setLocal((prev) => {\n      const arr = prev[key];\n      const exists = arr.includes(value);\n      const next = exists ? arr.filter((v) => v !== value) : [...arr, value];\n      return { ...prev, [key]: next };\n    });\n  };\n\n  const toggleAssignee = (id: number) => {\n    setLocal((prev) => {\n      const exists = prev.assignees.includes(id);\n      const next = exists\n        ? prev.assignees.filter((value) => value !== id)\n        : [...prev.assignees, id];\n      return { ...prev, assignees: next };\n    });\n  };\n\n  const renderAssigneeLabel = (user: TaskFilterUser) => {\n    if (user.username) {\n      return `${user.name} (@${user.username})`;\n    }\n    return user.name;\n  };\n\n  const content = (\n    <div className=\"flex w-52 flex-col gap-1.5 text-sm\">\n      <div>\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\n          Статус\n        </span>\n        {TASK_STATUSES.map((s) => {\n          const fieldId = toFieldId('status', s);\n          return (\n            <label\n              key={s}\n              className=\"flex items-center gap-1 text-[13px]\"\n              htmlFor={fieldId}\n            >\n              <input\n                id={fieldId}\n                name=\"status[]\"\n                type=\"checkbox\"\n                checked={local.status.includes(s)}\n                onChange={() => toggleString('status', s)}\n              />\n              {s}\n            </label>\n          );\n        })}\n      </div>\n      <div>\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\n          Приоритет\n        </span>\n        {PRIORITIES.map((p) => {\n          const fieldId = toFieldId('priority', p);\n          return (\n            <label\n              key={p}\n              className=\"flex items-center gap-1 text-[13px]\"\n              htmlFor={fieldId}\n            >\n              <input\n                id={fieldId}\n                name=\"priority[]\"\n                type=\"checkbox\"\n                checked={local.priority.includes(p)}\n                onChange={() => toggleString('priority', p)}\n              />\n              {p}\n            </label>\n          );\n        })}\n      </div>\n      <div>\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\n          Тип задачи\n        </span>\n        {TASK_TYPES.map((type) => {\n          const fieldId = toFieldId('task-type', type);\n          return (\n            <label\n              key={type}\n              className=\"flex items-center gap-1 text-[13px]\"\n              htmlFor={fieldId}\n            >\n              <input\n                id={fieldId}\n                name=\"taskTypes[]\"\n                type=\"checkbox\"\n                checked={local.taskTypes.includes(type)}\n                onChange={() => toggleString('taskTypes', type)}\n              />\n              {type}\n            </label>\n          );\n        })}\n      </div>\n      <div>\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\n          Исполнители\n        </span>\n        <div className=\"max-h-28 overflow-y-auto pr-1\">\n          {filterUsers.map((user) => {\n            const fieldId = toFieldId('assignee', String(user.id));\n            return (\n              <label\n                key={user.id}\n                className=\"flex items-center gap-1 text-[13px]\"\n                htmlFor={fieldId}\n              >\n                <input\n                  id={fieldId}\n                  name=\"assignees[]\"\n                  type=\"checkbox\"\n                  checked={local.assignees.includes(user.id)}\n                  onChange={() => toggleAssignee(user.id)}\n                />\n                {renderAssigneeLabel(user)}\n              </label>\n            );\n          })}\n          {filterUsers.length === 0 ? (\n            <span className=\"block text-[13px] text-muted-foreground\">\n              Нет доступных исполнителей\n            </span>\n          ) : null}\n        </div>\n      </div>\n      <div className=\"flex items-center gap-1.5\">\n        <input\n          type=\"date\"\n          className=\"rounded border px-1.5 py-1 text-[13px]\"\n          name=\"from\"\n          value={local.from}\n          onChange={(e) => setLocal({ ...local, from: e.target.value })}\n        />\n        <input\n          type=\"date\"\n          className=\"rounded border px-1.5 py-1 text-[13px]\"\n          name=\"to\"\n          value={local.to}\n          onChange={(e) => setLocal({ ...local, to: e.target.value })}\n        />\n      </div>\n      <button\n        onClick={() => setFilters(local)}\n        className=\"mt-1.5 rounded border px-1.5 py-1 text-[13px]\"\n      >\n        Искать\n      </button>\n    </div>\n  );\n\n  if (inline) return content;\n\n  return (\n    <details className=\"relative\">\n      <summary className=\"cursor-pointer rounded border px-1.5 py-0.5 select-none text-sm\">\n        Фильтры\n      </summary>\n      <div className=\"absolute z-10 mt-1 rounded border bg-white p-1.5 shadow\">\n        {content}\n      </div>\n    </details>\n  );\n}\n","// Назначение файла: общий тулбар таблицы с экспортом, поиском и фильтрацией\n// Модули: React, @tanstack/react-table, jspdf\nimport React from 'react';\nimport type { Table } from '@tanstack/react-table';\nimport type JsPDFClass from 'jspdf';\nimport type { UserOptions as AutoTableOptions } from 'jspdf-autotable';\nimport { useTranslation } from 'react-i18next';\nimport GlobalSearch from './GlobalSearch';\nimport SearchFilters from './SearchFilters';\n\ninterface Props<T> {\n  table: Table<T>;\n  children?: React.ReactNode;\n  showGlobalSearch?: boolean;\n  showFilters?: boolean;\n}\n\ntype JsPdfWithAutoTable = InstanceType<typeof JsPDFClass> & {\n  autoTable: (options: AutoTableOptions) => void;\n};\n\nexport default function TableToolbar<T>({\n  table,\n  children,\n  showGlobalSearch = true,\n  showFilters = true,\n}: Props<T>) {\n  const columns = table.getAllLeafColumns();\n  const { t } = useTranslation();\n\n  const exportCsv = () => {\n    const headers = columns\n      .filter((c) => c.getIsVisible())\n      .map((c) => c.columnDef.header as string);\n    const rows = table\n      .getRowModel()\n      .rows.map((r) =>\n        r.getVisibleCells().map((c) => String(c.getValue() ?? '')),\n      );\n    const csv = [headers.join(','), ...rows.map((r) => r.join(','))].join('\\n');\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'table.csv';\n    a.click();\n  };\n\n  const exportPdf = async () => {\n    const pdfEntry = 'jspdf';\n    const autoTableEntry = 'jspdf-autotable';\n    const { default: jsPDF } = await import(/* @vite-ignore */ pdfEntry);\n    await import(/* @vite-ignore */ autoTableEntry);\n    const headers = columns\n      .filter((c) => c.getIsVisible())\n      .map((c) => c.columnDef.header as string);\n    const rows = table\n      .getRowModel()\n      .rows.map((r) =>\n        r.getVisibleCells().map((c) => String(c.getValue() ?? '')),\n      );\n    const doc = new jsPDF() as JsPdfWithAutoTable;\n    doc.autoTable({ head: [headers], body: rows });\n    doc.save('table.pdf');\n  };\n\n  const toggleColumn = (id: string) => {\n    const col = table.getColumn(id);\n    if (col) col.toggleVisibility();\n  };\n\n  const moveColumn = (id: string, dir: number) => {\n    const order = table.getState().columnOrder;\n    const idx = order.indexOf(id);\n    if (idx === -1) return;\n    const next = idx + dir;\n    if (next < 0 || next >= order.length) return;\n    const newOrder = [...order];\n    [newOrder[idx], newOrder[next]] = [newOrder[next], newOrder[idx]];\n    table.setColumnOrder(newOrder);\n  };\n\n  return (\n    <div className=\"flex w-full flex-wrap items-center gap-1 text-xs sm:text-sm\">\n      <div className=\"flex flex-1 flex-wrap items-center gap-1\">\n        {showGlobalSearch ? <GlobalSearch /> : null}\n        {children}\n      </div>\n      <div className=\"ml-auto flex w-full flex-wrap items-center justify-end gap-1 sm:w-auto\">\n        <details className=\"group relative flex-shrink-0\">\n          <summary className=\"cursor-pointer rounded-t-md rounded-b-none border border-b-0 border-gray-200 bg-white px-2 py-1 text-xs font-semibold leading-tight text-gray-700 shadow-sm transition-colors select-none hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 group-open:border-gray-200 sm:text-sm\">\n            {t('export')}\n          </summary>\n          <div className=\"absolute left-0 top-full z-10 w-32 min-w-full rounded-b-md border border-t border-gray-200 bg-white p-1 shadow-sm\">\n            <button\n              onClick={exportCsv}\n              className=\"block w-full rounded px-1.5 py-1 text-left text-xs font-medium transition-colors hover:bg-gray-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 sm:text-sm\"\n            >\n              CSV\n            </button>\n            <button\n              onClick={() => void exportPdf()}\n              className=\"mt-1 block w-full rounded px-1.5 py-1 text-left text-xs font-medium transition-colors hover:bg-gray-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 sm:text-sm\"\n            >\n              PDF\n            </button>\n          </div>\n        </details>\n        <details className=\"group relative flex-shrink-0\">\n          <summary className=\"cursor-pointer rounded-t-md rounded-b-none border border-b-0 border-gray-200 bg-white px-2 py-1 text-xs font-semibold leading-tight text-gray-700 shadow-sm transition-colors select-none hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 group-open:border-gray-200 sm:text-sm\">\n            {t('settings')}\n          </summary>\n          <div className=\"absolute left-0 top-full z-10 w-64 min-w-full space-y-1 rounded-b-md border border-t border-gray-200 bg-white p-1.5 shadow-sm\">\n            {showFilters ? <SearchFilters inline /> : null}\n            <div className=\"border-t pt-1\">\n              {columns.map((col) => (\n                <div\n                  key={col.id}\n                  className=\"flex items-center justify-between gap-1\"\n                >\n                  <label\n                    className=\"flex items-center gap-1 text-xs font-medium sm:text-sm\"\n                    htmlFor={`table-column-${col.id}`}\n                  >\n                    <input\n                      id={`table-column-${col.id}`}\n                      name={`column-${col.id}`}\n                      type=\"checkbox\"\n                      checked={col.getIsVisible()}\n                      onChange={() => toggleColumn(col.id)}\n                    />\n                    {col.columnDef.header as string}\n                  </label>\n                  <div className=\"flex gap-1\">\n                    <button\n                      onClick={() => moveColumn(col.id, -1)}\n                      className=\"rounded border border-gray-200 px-1 text-xs font-medium leading-none text-gray-700 transition-colors hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1\"\n                    >\n                      ←\n                    </button>\n                    <button\n                      onClick={() => moveColumn(col.id, 1)}\n                      className=\"rounded border border-gray-200 px-1 text-xs font-medium leading-none text-gray-700 transition-colors hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1\"\n                    >\n                      →\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </details>\n      </div>\n    </div>\n  );\n}\n","// Назначение файла: универсальная таблица на React Table с виртуализацией строк\n// Основные модули: React, @tanstack/react-table, TableToolbar\n\nimport React from 'react';\nimport {\n  ColumnDef,\n  flexRender,\n  getCoreRowModel,\n  useReactTable,\n  Table as TableType,\n} from '@tanstack/react-table';\n\nimport TableToolbar from './TableToolbar';\n\ninterface DataTableProps<T> {\n  columns: ColumnDef<T, unknown>[];\n  data: T[];\n  pageIndex: number;\n  pageSize: number;\n  pageCount?: number;\n  onPageChange: (page: number) => void;\n  onPageSizeChange?: (size: number) => void;\n  onRowClick?: (row: T) => void;\n  toolbarChildren?: React.ReactNode;\n  showGlobalSearch?: boolean;\n  showFilters?: boolean;\n  wrapCellsAsBadges?: boolean;\n  badgeClassName?: string;\n  badgeWrapperClassName?: string;\n  badgeEmptyPlaceholder?: string;\n  enableVirtualization?: boolean;\n  virtualizationOverscan?: number;\n  virtualizationThreshold?: number;\n  rowHeight?: number;\n  maxBodyHeight?: number;\n}\n\ninterface ColumnMeta {\n  minWidth?: string;\n  maxWidth?: string;\n  width?: string;\n  cellClassName?: string;\n  headerClassName?: string;\n  renderAsBadges?: boolean;\n}\n\nexport const defaultBadgeClassName = [\n  'inline-flex min-h-[1.65rem] max-w-full items-center justify-start gap-1',\n  'rounded-full px-2.5 py-0.5 text-[0.72rem] font-semibold leading-tight text-slate-900',\n  'ring-1 ring-slate-300/80 bg-slate-100/90 shadow-xs',\n  'dark:text-slate-100 dark:ring-slate-600/60 dark:bg-slate-800/80',\n  'truncate',\n].join(' ');\nexport const defaultBadgeWrapperClassName =\n  'flex flex-wrap items-center gap-1.5';\n\nconst sanitizeHtml = (html: string): string =>\n  html\n    .replace(/<[^>]+>/g, ' ')\n    .replace(/\\s+/g, ' ')\n    .trim();\n\nconst normalizeToText = (value: unknown): string => {\n  if (value === null || value === undefined) return '';\n  if (typeof value === 'string') {\n    return sanitizeHtml(value);\n  }\n  if (typeof value === 'number' || typeof value === 'boolean') {\n    return String(value).trim();\n  }\n  return '';\n};\n\nconst extractBadgeItems = (value: React.ReactNode): string[] => {\n  const items: string[] = [];\n  const pushItem = (text: string) => {\n    if (!text) return;\n    if (items.includes(text)) return;\n    items.push(text);\n  };\n  const visit = (node: React.ReactNode) => {\n    if (node === null || node === undefined || node === false) return;\n    if (typeof node === 'string' || typeof node === 'number') {\n      const text = String(node).trim();\n      if (!text) return;\n      const parts = text\n        .split(/[,\\n;]/)\n        .map((part) => part.trim())\n        .filter(Boolean);\n      if (parts.length) {\n        items.push(...parts);\n      } else {\n        items.push(text);\n      }\n      return;\n    }\n    if (Array.isArray(node)) {\n      node.forEach(visit);\n      return;\n    }\n    if (React.isValidElement(node)) {\n      const element = node as React.ReactElement<Record<string, unknown>>;\n      const beforeLength = items.length;\n      visit(element.props.children as React.ReactNode);\n      if (items.length === beforeLength) {\n        const props = element.props || {};\n        const fallbackCandidates: unknown[] = [\n          props['data-badge-label'],\n          props['data-label'],\n          props['aria-label'],\n          props.title,\n        ];\n        fallbackCandidates.forEach((candidate) => {\n          if (candidate === null || candidate === undefined) return;\n          const text = String(candidate).trim();\n          pushItem(text);\n        });\n        const html = props.dangerouslySetInnerHTML as\n          | { __html?: unknown }\n          | undefined;\n        const rawHtml =\n          html && typeof html.__html === 'string'\n            ? sanitizeHtml(html.__html)\n            : '';\n        if (rawHtml) {\n          pushItem(rawHtml);\n        }\n        const renderValue = props.renderValue;\n        if (typeof renderValue === 'function') {\n          const rendered = normalizeToText(renderValue());\n          pushItem(rendered);\n        }\n        const getValue = props.getValue;\n        if (typeof getValue === 'function') {\n          const rawValue = normalizeToText(getValue());\n          pushItem(rawValue);\n        }\n      }\n      return;\n    }\n    const fallback = String(node).trim();\n    pushItem(fallback);\n  };\n  visit(value);\n  return items;\n};\n\nconst renderBadgeContent = (\n  content: React.ReactNode,\n  badgeClassName: string,\n  wrapperClassName: string,\n  emptyPlaceholder: string,\n) => {\n  const items = extractBadgeItems(content);\n  if (!items.length) {\n    return (\n      <span className={badgeClassName} title={emptyPlaceholder}>\n        {emptyPlaceholder}\n      </span>\n    );\n  }\n  if (items.length === 1) {\n    return (\n      <span className={badgeClassName} title={items[0]}>\n        {items[0]}\n      </span>\n    );\n  }\n  return (\n    <div className={wrapperClassName}>\n      {items.map((item, index) => (\n        <span key={`${item}-${index}`} className={badgeClassName} title={item}>\n          {item}\n        </span>\n      ))}\n    </div>\n  );\n};\n\nconst containerClasses = [\n  // Важно: отдельно скроллим по X, отдельно по Y — таблица перестаёт “ломать” сетку на узких экранах\n  'relative w-full overflow-x-auto overflow-y-auto rounded-xl border border-border/70',\n  'bg-background shadow-sm dark:border-border/60',\n].join(' ');\n\nconst tableClasses = [\n  // w-max + min-w-full → на широких экранах заполняет контейнер,\n  // а на узких не “сжимает” колонки до нечитаемого состояния (включается горизонтальный скролл).\n  'w-max min-w-full table-fixed caption-bottom font-ui text-[12px] leading-tight',\n  'text-foreground dark:text-foreground sm:text-[13px]',\n].join(' ');\n\nconst headerCellClasses = [\n  // Sticky header: удобно в админке при скролле списка.\n  'sticky top-0 z-10 border-b border-border/70 px-1.5 py-2 text-left align-middle font-semibold',\n  'bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/70',\n  'text-[11px] leading-snug text-foreground sm:px-2 sm:text-[13px]',\n  // Ключевая часть “наведения порядка”: больше не рвём строки в заголовках.\n  'whitespace-nowrap',\n].join(' ');\n\nconst bodyCellClasses = [\n  'relative z-[1] px-1.5 py-2 align-top text-[12px] leading-snug',\n  'text-foreground sm:px-2 sm:text-sm',\n  // Ключевая часть: строки становятся компактными, а “длиннота” уходит в горизонтальный скролл.\n  'whitespace-nowrap',\n].join(' ');\n\nconst bodyRowClasses = [\n  'group relative isolate min-h-[2.5rem] cursor-pointer select-none',\n  'odd:bg-sky-50/70 even:bg-emerald-50/70 odd:text-slate-900 even:text-slate-900',\n  'hover:odd:bg-sky-100/80 hover:even:bg-emerald-100/80',\n  'dark:odd:bg-slate-800/70 dark:even:bg-slate-700/70 dark:text-slate-100',\n  'dark:hover:odd:bg-slate-700 dark:hover:even:bg-slate-600',\n].join(' ');\n\nconst headerRowClasses = ['text-foreground'].join(' ');\n\nexport default function DataTable<T>({\n  columns,\n  data,\n  pageIndex,\n  pageSize,\n  pageCount,\n  onPageChange,\n  onPageSizeChange,\n  onRowClick,\n  toolbarChildren,\n  showGlobalSearch = true,\n  showFilters = true,\n  wrapCellsAsBadges = false,\n  badgeClassName = defaultBadgeClassName,\n  badgeWrapperClassName = defaultBadgeWrapperClassName,\n  badgeEmptyPlaceholder = '—',\n  enableVirtualization = true,\n  virtualizationOverscan = 6,\n  virtualizationThreshold = 40,\n  rowHeight = 52,\n  maxBodyHeight = 520,\n}: DataTableProps<T>) {\n  const [columnVisibility, setColumnVisibility] = React.useState({});\n  const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\n\n  const table = useReactTable({\n    data,\n    columns,\n    state: {\n      columnVisibility,\n      columnOrder,\n      pagination: { pageIndex, pageSize },\n    },\n    onColumnVisibilityChange: setColumnVisibility,\n    onColumnOrderChange: setColumnOrder,\n    getCoreRowModel: getCoreRowModel(),\n    manualPagination: true,\n    pageCount,\n  });\n\n  const rows = table.getRowModel().rows;\n  const virtualizationContainerRef = React.useRef<HTMLDivElement>(null);\n  const [scrollTop, setScrollTop] = React.useState(0);\n  const [viewportHeight, setViewportHeight] = React.useState(maxBodyHeight);\n\n  const virtualizationActive =\n    enableVirtualization && rows.length > virtualizationThreshold;\n\n  React.useLayoutEffect(() => {\n    if (!virtualizationActive) return;\n    const element = virtualizationContainerRef.current;\n    if (!element) return;\n    const updateHeight = () => {\n      setViewportHeight(element.clientHeight || maxBodyHeight);\n    };\n    updateHeight();\n    if (typeof ResizeObserver !== 'undefined') {\n      const observer = new ResizeObserver(updateHeight);\n      observer.observe(element);\n      return () => observer.disconnect();\n    }\n    return undefined;\n  }, [virtualizationActive, maxBodyHeight]);\n\n  React.useEffect(() => {\n    if (!virtualizationContainerRef.current) return;\n    virtualizationContainerRef.current.scrollTop = 0;\n    setScrollTop(0);\n  }, [rows.length, virtualizationActive]);\n\n  const handleScroll = React.useCallback(\n    (event: React.UIEvent<HTMLDivElement>) => {\n      if (!virtualizationActive) return;\n      setScrollTop(event.currentTarget.scrollTop);\n    },\n    [virtualizationActive],\n  );\n\n  const totalHeight = rows.length * rowHeight;\n  const effectiveViewport = virtualizationActive\n    ? viewportHeight\n    : rows.length * rowHeight;\n  const startIndex = virtualizationActive\n    ? Math.max(0, Math.floor(scrollTop / rowHeight) - virtualizationOverscan)\n    : 0;\n  const endIndex = virtualizationActive\n    ? Math.min(\n        rows.length,\n        Math.ceil((scrollTop + effectiveViewport) / rowHeight) +\n          virtualizationOverscan,\n      )\n    : rows.length;\n\n  const visibleRows = virtualizationActive\n    ? rows.slice(startIndex, endIndex)\n    : rows;\n  const paddingTop = virtualizationActive ? startIndex * rowHeight : 0;\n  const paddingBottom = virtualizationActive\n    ? Math.max(totalHeight - endIndex * rowHeight, 0)\n    : 0;\n\n  const columnCount = Math.max(table.getVisibleLeafColumns().length, 1);\n\n  return (\n    <div className=\"w-full space-y-3 px-0 font-ui text-[13px] sm:px-1.5 sm:text-sm\">\n      <TableToolbar\n        table={table as TableType<T>}\n        showGlobalSearch={showGlobalSearch}\n        showFilters={showFilters}\n      >\n        {toolbarChildren}\n      </TableToolbar>\n      <div\n        ref={virtualizationContainerRef}\n        className={containerClasses}\n        style={{ maxHeight: virtualizationActive ? maxBodyHeight : undefined }}\n        onScroll={handleScroll}\n      >\n        <table className={tableClasses}>\n          <thead>\n            {table.getHeaderGroups().map((hg) => (\n              <tr key={hg.id} className={headerRowClasses}>\n                {hg.headers.map((header) => {\n                  const meta =\n                    (header.column.columnDef.meta as ColumnMeta | undefined) ||\n                    {};\n                  const baseSize = header.getSize();\n                  const computedWidth =\n                    typeof meta.width === 'string'\n                      ? meta.width\n                      : Number.isFinite(baseSize)\n                        ? `${baseSize}px`\n                        : undefined;\n                  const headerClassName = [headerCellClasses, meta.headerClassName]\n                    .filter(Boolean)\n                    .join(' ');\n                  return (\n                    <th\n                      key={header.id}\n                      style={{\n                        width: computedWidth,\n                        minWidth: meta.minWidth ?? '4rem',\n                        maxWidth: meta.maxWidth ?? '24rem',\n                      }}\n                      className={headerClassName}\n                    >\n                      {header.isPlaceholder\n                        ? null\n                        : flexRender(\n                            header.column.columnDef.header,\n                            header.getContext(),\n                          )}\n                    </th>\n                  );\n                })}\n              </tr>\n            ))}\n          </thead>\n          <tbody>\n            {paddingTop > 0 ? (\n              <tr aria-hidden style={{ height: paddingTop }}>\n                <td colSpan={columnCount} />\n              </tr>\n            ) : null}\n            {visibleRows.map((row) => (\n              <tr\n                key={row.id}\n                onClick={() => onRowClick?.(row.original)}\n                className={\n                  onRowClick\n                    ? bodyRowClasses\n                    : bodyRowClasses.replace('cursor-pointer', 'cursor-default')\n                }\n              >\n                {row.getVisibleCells().map((cell) => {\n                  const meta =\n                    (cell.column.columnDef.meta as ColumnMeta | undefined) || {};\n                  const baseSize = cell.column.getSize();\n                  const computedWidth =\n                    typeof meta.width === 'string'\n                      ? meta.width\n                      : Number.isFinite(baseSize)\n                        ? `${baseSize}px`\n                        : undefined;\n                  const cellClassName = [bodyCellClasses, meta.cellClassName]\n                    .filter(Boolean)\n                    .join(' ');\n                  const cellContent = flexRender(\n                    cell.column.columnDef.cell,\n                    cell.getContext(),\n                  );\n                  const shouldWrapWithBadges =\n                    wrapCellsAsBadges && meta.renderAsBadges !== false;\n                  return (\n                    <td\n                      key={cell.id}\n                      style={{\n                        width: computedWidth,\n                        minWidth: meta.minWidth ?? '4rem',\n                        maxWidth: meta.maxWidth ?? '24rem',\n                      }}\n                      className={cellClassName}\n                    >\n                      {shouldWrapWithBadges\n                        ? renderBadgeContent(\n                            cellContent,\n                            badgeClassName,\n                            badgeWrapperClassName,\n                            badgeEmptyPlaceholder,\n                          )\n                        : cellContent}\n                    </td>\n                  );\n                })}\n              </tr>\n            ))}\n            {paddingBottom > 0 ? (\n              <tr aria-hidden style={{ height: paddingBottom }}>\n                <td colSpan={columnCount} />\n              </tr>\n            ) : null}\n            {!rows.length ? (\n              <tr>\n                <td\n                  colSpan={columnCount}\n                  className=\"px-4 py-6 text-center text-sm text-muted-foreground\"\n                >\n                  Нет данных для отображения\n                </td>\n              </tr>\n            ) : null}\n          </tbody>\n        </table>\n      </div>\n      <div className=\"flex flex-col gap-2 text-xs sm:flex-row sm:items-center sm:justify-between sm:text-sm\">\n        <div className=\"flex flex-wrap items-center gap-1\">\n          <button\n            onClick={() => onPageChange(Math.max(0, pageIndex - 1))}\n            disabled={pageIndex === 0}\n            className=\"rounded border border-[color:var(--color-gray-300)] px-2 py-1 font-medium text-[color:var(--color-gray-700)] transition hover:bg-[color:var(--color-gray-50)] disabled:cursor-not-allowed disabled:opacity-50 dark:border-[color:var(--color-gray-700)] dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)]\"\n          >\n            Назад\n          </button>\n          <span className=\"px-1 text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\n            Стр. {pageIndex + 1}\n            {pageCount ? ` / ${pageCount}` : ''}\n          </span>\n          <button\n            onClick={() =>\n              onPageChange(\n                pageCount\n                  ? Math.min(pageCount - 1, pageIndex + 1)\n                  : pageIndex + 1,\n              )\n            }\n            disabled={pageCount ? pageIndex + 1 >= pageCount : false}\n            className=\"rounded border border-[color:var(--color-gray-300)] px-2 py-1 font-medium text-[color:var(--color-gray-700)] transition hover:bg-[color:var(--color-gray-50)] disabled:cursor-not-allowed disabled:opacity-50 dark:border-[color:var(--color-gray-700)] dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)]\"\n          >\n            Вперёд\n          </button>\n        </div>\n        {onPageSizeChange ? (\n          <select\n            value={pageSize}\n            onChange={(event) => onPageSizeChange(Number(event.target.value))}\n            className=\"h-8 min-w-[4rem] rounded border border-[color:var(--color-gray-300)] bg-white px-1.5 text-xs text-[color:var(--color-gray-700)] shadow-sm transition focus:border-[color:var(--color-brand-400)] focus:outline-none focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-[color:var(--color-gray-100)]\"\n          >\n            {[10, 25, 50].map((size) => (\n              <option key={size} value={size}>\n                {size}\n              </option>\n            ))}\n          </select>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n"],"names":["MagnifyingGlassIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","GlobalSearch","query","setQuery","useTasks","t","useTranslation","ref","React","value","setValue","clear","_a","search","onKey","e","jsxs","jsx","Input","XMarkIcon","SearchFilters","inline","filters","setFilters","filterUsers","local","setLocal","toFieldId","prefix","toggleString","key","prev","arr","next","v","toggleAssignee","id","renderAssigneeLabel","user","content","TASK_STATUSES","s","fieldId","PRIORITIES","p","TASK_TYPES","type","TableToolbar","table","children","showGlobalSearch","showFilters","columns","exportCsv","headers","rows","r","c","csv","blob","a","exportPdf","pdfEntry","autoTableEntry","jsPDF","doc","toggleColumn","col","moveColumn","dir","order","idx","newOrder","defaultBadgeClassName","defaultBadgeWrapperClassName","sanitizeHtml","html","normalizeToText","extractBadgeItems","items","pushItem","text","visit","node","parts","part","element","beforeLength","candidate","rawHtml","renderValue","rendered","getValue","rawValue","fallback","renderBadgeContent","badgeClassName","wrapperClassName","emptyPlaceholder","item","index","containerClasses","tableClasses","headerCellClasses","bodyCellClasses","bodyRowClasses","headerRowClasses","DataTable","data","pageIndex","pageSize","pageCount","onPageChange","onPageSizeChange","onRowClick","toolbarChildren","wrapCellsAsBadges","badgeWrapperClassName","badgeEmptyPlaceholder","enableVirtualization","virtualizationOverscan","virtualizationThreshold","rowHeight","maxBodyHeight","columnVisibility","setColumnVisibility","columnOrder","setColumnOrder","useReactTable","getCoreRowModel","virtualizationContainerRef","scrollTop","setScrollTop","viewportHeight","setViewportHeight","virtualizationActive","updateHeight","observer","handleScroll","event","totalHeight","effectiveViewport","startIndex","endIndex","visibleRows","paddingTop","paddingBottom","columnCount","hg","header","meta","baseSize","computedWidth","headerClassName","_b","flexRender","row","cell","cellClassName","cellContent","shouldWrapWithBadges","size"],"mappings":"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","x_google_ignoreList":[0]}