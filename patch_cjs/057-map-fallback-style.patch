diff --git a/apps/web/src/mapLibrary.ts b/apps/web/src/mapLibrary.ts
index 5a1803a..819b6ee 100644
--- a/apps/web/src/mapLibrary.ts
+++ b/apps/web/src/mapLibrary.ts
@@ -12,6 +12,7 @@ import maplibregl, {
   type GeoJSONSource,
   type LngLatBoundsLike,
   type Listener,
+  type StyleSpecification,
   type Map as MapInstance,
   type MapLayerMouseEvent,
   type MapMouseEvent,
@@ -20,7 +21,11 @@ import maplibregl, {
   type MapOptions,
 } from 'maplibre-gl';
 
-import { MAP_RASTER_STYLE_URL, MAP_STYLE_DEFAULT_URL } from './config/map';
+import {
+  MAP_ATTRIBUTION,
+  MAP_RASTER_STYLE_URL,
+  MAP_STYLE_DEFAULT_URL,
+} from './config/map';
 
 // Не импортируем pmtiles статически: const { Protocol } from 'pmtiles'; <- это ломает билд в некоторых средах.
 
@@ -149,11 +154,30 @@ type MapStyleImageMissingEvent = {
 
 type MapStyleFallbackOptions = {
   initialStyle?: MapOptions['style'];
-  fallbackUrl?: string;
-  vectorFallbackUrl?: string;
+  fallbackUrl?: MapOptions['style'];
+  vectorFallbackUrl?: MapOptions['style'];
   logger?: Pick<typeof console, 'warn'>;
 };
 
+const RASTER_FALLBACK_STYLE: StyleSpecification = {
+  version: 8,
+  sources: {
+    'osm-raster': {
+      type: 'raster',
+      tiles: [MAP_RASTER_STYLE_URL],
+      tileSize: 256,
+      attribution: MAP_ATTRIBUTION,
+    },
+  },
+  layers: [
+    {
+      id: 'osm-raster',
+      type: 'raster',
+      source: 'osm-raster',
+    },
+  ],
+};
+
 const noopDetach = () => {};
 
 /**
@@ -172,25 +196,31 @@ export const attachMapStyleFallback = (
   if (!map) {
     return noopDetach;
   }
-  const initialStyle =
-    typeof options.initialStyle === 'string' ? options.initialStyle : '';
-  const fallbackUrl =
-    typeof options.fallbackUrl === 'string' && options.fallbackUrl.trim() !== ''
-      ? options.fallbackUrl
-      : MAP_RASTER_STYLE_URL;
-  const vectorFallbackUrl =
-    typeof options.vectorFallbackUrl === 'string' &&
-    options.vectorFallbackUrl.trim() !== ''
-      ? options.vectorFallbackUrl
-      : MAP_STYLE_DEFAULT_URL;
-  const fallbackCandidates = Array.from(
-    new Set(
-      [fallbackUrl, vectorFallbackUrl].filter(
-        (urlCandidate): urlCandidate is string =>
-          Boolean(urlCandidate) && urlCandidate !== initialStyle,
-      ),
-    ),
-  );
+  const initialStyle = options.initialStyle;
+  const initialStyleAsString =
+    typeof initialStyle === 'string' ? initialStyle : '';
+  const fallbackStyle =
+    typeof options.fallbackUrl === 'string'
+      ? options.fallbackUrl.trim() || undefined
+      : options.fallbackUrl ?? RASTER_FALLBACK_STYLE;
+  const vectorFallbackStyle =
+    typeof options.vectorFallbackUrl === 'string'
+      ? options.vectorFallbackUrl.trim() || undefined
+      : options.vectorFallbackUrl ?? MAP_STYLE_DEFAULT_URL;
+  const fallbackCandidates: MapOptions['style'][] = [];
+  const seenStringCandidates = new Set<string>();
+  for (const candidate of [fallbackStyle, vectorFallbackStyle]) {
+    if (!candidate) {
+      continue;
+    }
+    if (typeof candidate === 'string') {
+      if (candidate === initialStyleAsString || seenStringCandidates.has(candidate)) {
+        continue;
+      }
+      seenStringCandidates.add(candidate);
+    }
+    fallbackCandidates.push(candidate);
+  }
   if (!initialStyle || fallbackCandidates.length === 0) {
     return noopDetach;
   }
@@ -233,7 +263,7 @@ export const attachMapStyleFallback = (
       return;
     }
     const url = typeof error.url === 'string' ? error.url : '';
-    if (url && initialStyle && url !== initialStyle) {
+    if (url && initialStyleAsString && url !== initialStyleAsString) {
       // если ошибка от другого URL — игнорируем
       return;
     }
@@ -248,7 +278,7 @@ export const attachMapStyleFallback = (
     const isStyleFailure =
       (message && message.toLowerCase().includes('style')) ||
       !url ||
-      url === initialStyle ||
+      url === initialStyleAsString ||
       (typeof status === 'number' && status >= 400);
     if (!isStyleFailure) {
       return;
