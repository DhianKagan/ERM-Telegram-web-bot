!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./index-legacy-CEOCQCnd.js","./vendor-legacy-B8gM1TaO.js","./App-legacy-QJVPl7Ns.js"],function(e,t){"use strict";var r,o,s,i,l;return{setters:[function(e){r=e.j,o=e._},function(e){s=e.b,i=e.R},function(e){l=e.h}],execute:function(){e("default",function(){return r.jsx("div",{className:"space-y-6 p-4",children:r.jsx(p,{})})});var c=new RegExp("".concat("","\\[[0-9;]*m"),"g");function u(e,t){var n=a(s.useState([]),2),r=n[0],o=n[1];return s.useEffect(function(){var n=new URLSearchParams;e.level&&n.set("level",e.level),e.message&&n.set("message",e.message),e.from&&n.set("from",e.from),e.to&&n.set("to",e.to),n.set("page",String(t)),n.set("limit","50"),l("/api/v1/logs?".concat(n.toString())).then(function(e){return e.ok?e.json():[]}).then(function(e){var t=e.map(function(e){return t="".concat(e.level," [").concat(e.createdAt,"] ").concat(e.message),r=t.replace(c,""),a=r.match(/^(\w+)\s+\[(.+?)\]\s+(.*)$/),o={level:a?a[1].toLowerCase():"info",time:a?a[2]:void 0,message:a?a[3]:r},s=o.message,(n=s.match(/API Ð·Ð°Ð¿Ñ€Ð¾Ñ (\w+) (\S+) token:([^ ]+) csrf:([^ ]+)/))||(n=s.match(/API Ð·Ð°Ð¿Ñ€Ð¾Ñ (\w+) (\S+) (\w+) (\w+)/))?(o.method=n[1],o.endpoint=n[2],o.csrf="no-csrf"!==n[4]):(n=s.match(/API Ð¾Ñ‚Ð²ÐµÑ‚ (\w+) (\S+) (\d+)/))&&(o.method=n[1],o.endpoint=n[2],o.status=Number(n[3])),o;var t,n,r,a,o,s});o(t)})},[e,t]),r.filter(function(t){return(!e.method||t.method===e.method)&&((!e.status||t.status===e.status)&&(!(e.endpoint&&!(t.endpoint||"").includes(e.endpoint))&&(!e.noCsrf||!1===t.csrf)))})}function f(e){var t=e.filters,a=e.onChange,o=i.useId();return r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("select",{className:"rounded border p-1","aria-label":"Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ",name:"level",value:t.level||"",onChange:function(e){return a(n(n({},t),{},{level:e.target.value}))},children:[r.jsx("option",{value:"",children:"Ð’ÑÐµ ÑƒÑ€Ð¾Ð²Ð½Ð¸"}),r.jsx("option",{value:"debug",children:"debug"}),r.jsx("option",{value:"info",children:"info"}),r.jsx("option",{value:"warn",children:"warn"}),r.jsx("option",{value:"error",children:"error"}),r.jsx("option",{value:"log",children:"log"})]}),r.jsx("input",{className:"rounded border p-1",placeholder:"ÐœÐµÑ‚Ð¾Ð´","aria-label":"ÐœÐµÑ‚Ð¾Ð´",name:"method",value:t.method||"",onChange:function(e){return a(n(n({},t),{},{method:e.target.value}))}}),r.jsx("input",{className:"rounded border p-1",placeholder:"Endpoint","aria-label":"Endpoint",name:"endpoint",value:t.endpoint||"",onChange:function(e){return a(n(n({},t),{},{endpoint:e.target.value}))}}),r.jsx("input",{className:"rounded border p-1",placeholder:"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ","aria-label":"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",name:"status",value:t.status||"",onChange:function(e){return a(n(n({},t),{},{status:Number(e.target.value)||void 0}))}}),r.jsx("input",{className:"rounded border p-1",placeholder:"Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ñ‚ÐµÐºÑÑ‚","aria-label":"Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ñ‚ÐµÐºÑÑ‚",name:"message",value:t.message||"",onChange:function(e){return a(n(n({},t),{},{message:e.target.value}))}}),r.jsx("input",{type:"date",className:"rounded border p-1","aria-label":"ÐžÑ‚",name:"from",value:t.from||"",onChange:function(e){return a(n(n({},t),{},{from:e.target.value}))}}),r.jsx("input",{type:"date",className:"rounded border p-1","aria-label":"Ð”Ð¾",name:"to",value:t.to||"",onChange:function(e){return a(n(n({},t),{},{to:e.target.value}))}}),r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx("input",{id:o,name:"noCsrf",type:"checkbox",checked:t.noCsrf||!1,onChange:function(e){return a(n(n({},t),{},{noCsrf:e.target.checked}))}}),r.jsx("label",{htmlFor:o,children:"no-csrf"})]})]})}var d=[{header:"Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ",accessorKey:"level"},{header:"Ð’Ñ€ÐµÐ¼Ñ",accessorKey:"time"},{header:"ÐœÐµÑ‚Ð¾Ð´",accessorKey:"method"},{header:"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",accessorKey:"status"},{header:"Endpoint",accessorKey:"endpoint"},{header:"Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ",accessorKey:"message"}],m=s.lazy(function(){return o(function(){return t.import("./DataTable-legacy-DnnK-37s.js")},void 0)});function p(){var e=a(i.useState({}),2),t=e[0],o=e[1],l=a(i.useState(!0),2),c=l[0],p=l[1],h=a(i.useState(0),2),g=h[0],v=h[1],b=u(t,g+1);return i.useEffect(function(){v(0)},[t]),i.useEffect(function(){if(c){var e=setInterval(function(){return o(function(e){return n({},e)})},5e3);return function(){return clearInterval(e)}}},[c]),r.jsxs("div",{className:"space-y-4 rounded-lg bg-white p-4 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Ð›Ð¾Ð³Ð¸"}),r.jsxs("label",{className:"flex items-center gap-1 text-sm",htmlFor:"log-live-toggle",children:[r.jsx("input",{id:"log-live-toggle",name:"liveUpdates",type:"checkbox",checked:c,onChange:function(e){return p(e.target.checked)}}),"Live"]})]}),r.jsx(f,{filters:t,onChange:o}),r.jsx(s.Suspense,{fallback:r.jsx("div",{children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹..."}),children:r.jsx(m,{columns:d,data:b,pageIndex:g,pageSize:50,onPageChange:v})})]})}}}})}();
//# sourceMappingURL=Logs-legacy-y_Hi1HXt.js.map
