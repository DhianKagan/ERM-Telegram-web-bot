!function(){var e=["title","titleId"];function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,l,s=[],c=!0,o=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(o)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./index-legacy-CEOCQCnd.js","./vendor-legacy-B8gM1TaO.js","./App-legacy-QJVPl7Ns.js","./EmployeeLink-legacy-ojmhKLCG.js"],function(n,r){"use strict";var a,i,l,s,c,o;return{setters:[function(e){a=e.j},function(e){i=e.b,l=e.R},function(e){s=e.P,c=e.o},function(e){o=e.E}],execute:function(){function r(t,n){var r=t.title,a=t.titleId,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,e);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},l),r?i.createElement("title",{id:a},r):null,i.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}n({D:ue,t:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"task";return[{header:"Номер",id:"number",accessorFn:function(e){var n="request"===te(e.kind,t)?e.request_id||e.task_number||e._id:e.task_number||e.request_id||e._id;return"string"==typeof n?n:null==n?"":String(n)},meta:{width:"clamp(4.25rem, 8vw, 6.25rem)",minWidth:"4rem",maxWidth:"6.5rem",cellClassName:"whitespace-nowrap text-center font-mono tabular-nums sm:text-left sm:pl-1.5",headerClassName:"whitespace-nowrap text-center sm:text-left"},cell:function(e){var n,r,i,l,s=e.row.original,c=te(s.kind,t),o=(e.getValue()||"").trim(),d="request"===c?null!==(n=null!==(r=s.request_id)&&void 0!==r?r:s.task_number)&&void 0!==n?n:String(s._id):null!==(i=null!==(l=s.task_number)&&void 0!==l?l:s.request_id)&&void 0!==i?i:String(s._id),u=o||d||"",m=u.match(/\d+/),g=m?m[0]:u;return a.jsx("span",{className:"".concat(b," justify-center"),title:u,children:a.jsx("span",{className:"truncate",children:g})})}},{header:"".concat(ee(t,"accusative")," создал"),accessorKey:"createdAt",meta:{width:"clamp(9rem, 18vw, 14rem)",minWidth:"8.5rem",maxWidth:"16rem",cellClassName:"whitespace-nowrap"},cell:function(t){var n,r,i=t.row,l=null!==(n=null!==(r=i.original.created_by)&&void 0!==r?r:i.original.createdBy)&&void 0!==n?n:i.original.creator,s="number"==typeof l?l:"string"==typeof l&&l.trim()?Number(l):NaN;if(!Number.isFinite(s))return a.jsx("span",{className:"text-muted-foreground",children:"—"});var c=s,d=e[c],u=(null==d?void 0:d.name)||(null==d?void 0:d.telegram_username)||(null==d?void 0:d.username)||String(c),m=u.trim()||String(c);return a.jsx(o,{employeeId:c,stopPropagation:!0,title:m,className:"".concat(w," ").concat(h," no-underline"),children:a.jsx("span",{className:"truncate",children:X(u,32)})})}},{header:"Название",accessorKey:"title",meta:{width:"clamp(8rem, 18vw, 18rem)",minWidth:"7rem",maxWidth:"18rem",cellClassName:"align-top"},cell:function(e){var t,n,r=e.getValue()||"",i=X(r,72),l=e.row.original,s=de(l.status,null!==(t=l.due_date)&&void 0!==t?t:void 0,null!==(n=l.completed_at)&&void 0!==n?n:void 0);return a.jsxs("div",{className:"flex flex-col items-start gap-1",children:[a.jsx("span",{title:r,className:"".concat(k," whitespace-normal"),children:a.jsx("span",{className:"block max-w-full break-words text-left leading-snug",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i})}),s?a.jsx("span",{className:A,children:s}):null]})}},{header:"Исполнители",accessorKey:"assignees",meta:{width:"clamp(7rem, 20vw, 13rem)",minWidth:"6rem",maxWidth:"13rem"},cell:function(t){var n=t.row,r=Array.isArray(n.original.assignees)?n.original.assignees:"number"==typeof n.original.assigned_user_id?[n.original.assigned_user_id]:[];if(!r.length)return a.jsx("span",{className:"text-muted-foreground",children:"—"});var i=r.map(function(t){var n,r,a;return{id:t,label:(null===(n=e[t])||void 0===n?void 0:n.name)||(null===(r=e[t])||void 0===r?void 0:r.telegram_username)||(null===(a=e[t])||void 0===a?void 0:a.username)||String(t)}}),l=i.map(function(e){return e.label}).join(", ");return a.jsx("div",{className:"flex w-full flex-wrap items-start gap-1 leading-tight",title:l,children:i.map(function(e){var t=e.id,n=e.label;return a.jsx(o,{employeeId:t,stopPropagation:!0,className:"".concat(y," ").concat(h," no-underline"),children:a.jsx("span",{className:"truncate",children:X(n,18)})},t)})})}},{header:"Статус",accessorKey:"status",meta:{width:"clamp(4.5rem, 8vw, 6.5rem)",minWidth:"4.5rem",maxWidth:"6.5rem",cellClassName:"whitespace-nowrap"},cell:function(e){var t=e.getValue()||"";if(!t)return"";var n=I(t);return n?a.jsx("span",{className:n,children:t}):a.jsx("span",{className:N,children:t})}},{header:"Приоритет",accessorKey:"priority",meta:{width:"clamp(8.5rem, 15vw, 12.5rem)",minWidth:"8.5rem",maxWidth:"12.5rem",cellClassName:"whitespace-nowrap"},cell:function(e){var t=e.getValue()||"";if(!t.trim())return"";var n=K(t),r=O(t)||"".concat(N," normal-case");return a.jsx("span",{className:r,title:n,children:n})}},{header:"Начало",accessorKey:"start_date",meta:{width:"clamp(6.75rem, 11vw, 8.75rem)",minWidth:"6.5rem",maxWidth:"9rem",cellClassName:"whitespace-nowrap text-xs sm:text-sm"},cell:function(e){return Q(e.getValue())}},{header:"Дедлайн",accessorKey:"due_date",meta:{width:"clamp(10.5rem, 20vw, 15.5rem)",minWidth:"10rem",maxWidth:"16.5rem",cellClassName:"whitespace-nowrap text-xs sm:text-sm"},cell:function(e){var t,n,r,i=e.getValue(),l=e.row.original,s=a.jsx(ue,{startValue:null!==(t=l.start_date)&&void 0!==t?t:void 0,dueValue:null!==(n=l.due_date)&&void 0!==n?n:void 0,rawDue:i,status:l.status,completedAt:null!==(r=l.completed_at)&&void 0!==r?r:void 0});if(!i)return s;var c=Q(i);return"string"==typeof c?c?a.jsxs("div",{className:"flex flex-col items-start gap-1",children:[c?a.jsx("span",{children:c}):null,s]}):s:a.jsxs("div",{className:"flex flex-col items-start gap-1",children:[c,s]})}},{header:"Время выполнения",accessorKey:"completed_at",meta:{width:"clamp(10.5rem, 20vw, 15.5rem)",minWidth:"10rem",maxWidth:"16.5rem",cellClassName:"whitespace-nowrap text-xs sm:text-sm"},cell:function(e){var n,r,i,l=e.row.original,s=te(l.kind,t);return a.jsx(pe,{progressStartValue:null!==(n=l.in_progress_at)&&void 0!==n?n:void 0,plannedStartValue:null!==(r=l.start_date)&&void 0!==r?r:void 0,completedValue:null!==(i=e.getValue())&&void 0!==i?i:void 0,status:l.status,entityKind:s})}},{header:"Тип",accessorKey:"task_type",meta:{width:"clamp(4.5rem, 8vw, 6.5rem)",minWidth:"4.5rem",maxWidth:"6.5rem",cellClassName:"whitespace-nowrap"},cell:function(e){var t=(e.getValue()||"").trim();if(!t)return"";var n=q(t)||"".concat(N," normal-case");return a.jsx("span",{className:n,title:t,children:t})}},{header:"Старт",accessorKey:"start_location",meta:{width:"clamp(5.5rem, 14vw, 9.5rem)",minWidth:"5rem",maxWidth:"9.5rem",cellClassName:"whitespace-nowrap"},cell:function(e){var t,n,r=e.row,i=null!==(t=r.original.start_location)&&void 0!==t?t:"",l=i.trim(),s=l.split(/[\s,;]+/).filter(Boolean)[0]||l,c=X(s,24),o=null!==(n=r.original.start_location_link)&&void 0!==n?n:void 0;return o?a.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:_,title:i,children:a.jsx("span",{className:"truncate",children:c})}):a.jsx("span",{title:i,className:j,children:a.jsx("span",{className:"truncate",children:c})})}},{header:"Финиш",accessorKey:"end_location",meta:{width:"clamp(5.5rem, 14vw, 9.5rem)",minWidth:"5rem",maxWidth:"9.5rem",cellClassName:"whitespace-nowrap"},cell:function(e){var t,n,r=e.row,i=null!==(t=r.original.end_location)&&void 0!==t?t:"",l=i.trim(),s=l.split(/[\s,;]+/).filter(Boolean)[0]||l,c=X(s,24),o=null!==(n=r.original.end_location_link)&&void 0!==n?n:void 0;return o?a.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:_,title:i,children:a.jsx("span",{className:"truncate",children:c})}):a.jsx("span",{title:i,className:j,children:a.jsx("span",{className:"truncate",children:c})})}},{header:"Км",accessorKey:"route_distance_km",meta:{width:"clamp(3.25rem, 6vw, 4.75rem)",minWidth:"3rem",maxWidth:"4.75rem",cellClassName:"whitespace-nowrap text-center sm:text-left",headerClassName:"text-center sm:text-left"},cell:function(e){var t=e.getValue();if(null==t||"string"==typeof t&&!t.trim())return"";var n=R(t);if(!n)return"";var r=U(t)||N;return a.jsx("span",{className:r,title:"".concat(n," км"),children:n})}}]}});var d=i.forwardRef(r),u=function(e){if(!e)return null;var t=new Date(e);return Number.isNaN(t.getTime())?null:t},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,r=u(t),a=u(e);if(!r)return{kind:"invalid",reason:t?"invalid":"missing",dueDate:null,startDate:a,remainingMs:null};var i=r.getTime()-n.getTime();if(i<0)return{kind:"overdue",dueDate:r,startDate:a,remainingMs:i};if(!a)return{kind:"pending",issue:"missing-start",dueDate:r,startDate:null,remainingMs:i};if(a.getTime()>=r.getTime())return{kind:"pending",issue:"invalid-range",dueDate:r,startDate:a,remainingMs:i};var l,s=r.getTime()-a.getTime(),c=(l=i/s,Number.isNaN(l)?0:l>1?1:l<0?0:l);return{kind:"countdown",ratio:c,level:c>.6?"safe":c>=.2?"warn":"danger",dueDate:r,startDate:a,remainingMs:i}},g="inline-flex min-w-0 items-center gap-0.5 whitespace-nowrap rounded-full px-1.5 py-0.5 text-center text-[0.66rem] font-semibold uppercase tracking-wide shadow-xs",f="text-black dark:text-white",p=function(e){return[g,"transition-colors",f,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e].filter(Boolean).join(" ")},h="focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",x="inline-flex max-w-full min-w-0 items-center gap-0.5 whitespace-nowrap rounded-full px-1.5 py-0.5 text-left text-[0.7rem] font-semibold leading-tight tracking-normal shadow-xs sm:px-1.5 sm:text-[0.76rem]",v="".concat(x," font-mono normal-case ").concat(f," ring-1 ring-slate-500/30 bg-slate-500/10 dark:bg-slate-500/20 dark:ring-slate-400/30"),b="".concat(x," justify-center font-mono uppercase tracking-[0.18em] text-[0.68rem] ").concat(f," ring-1 ring-slate-500/30 bg-slate-500/10 dark:bg-slate-500/20 dark:ring-slate-400/30"),k="".concat(x," justify-start normal-case ").concat(f," ring-1 ring-indigo-500/40 bg-indigo-500/15 dark:bg-indigo-400/25 dark:ring-indigo-300/45"),w=n("c","".concat(x," w-full max-w-full justify-start normal-case ").concat(f," ring-1 ring-blue-500/40 bg-blue-500/15 dark:bg-blue-400/20 dark:ring-blue-300/45")),y="".concat(x," normal-case ").concat(f," ring-1 ring-violet-500/35 bg-violet-500/20 dark:bg-violet-400/30 dark:ring-violet-300/45"),N=n("f",p("bg-muted/60 ring-1 ring-muted-foreground/30 dark:bg-slate-700/60 dark:ring-slate-500/35")),j="".concat(x," normal-case ").concat(f," ring-1 ring-emerald-500/30 bg-emerald-500/15 dark:bg-emerald-400/20 dark:ring-emerald-300/30"),_="".concat(j," ").concat(h," no-underline underline-offset-4 hover:underline"),M={"Новая":p("bg-sky-500/20 ring-1 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45"),"В работе":p("bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45"),"Выполнена":p("bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45"),"Отменена":p("bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45")},D=p("bg-accent/80 ring-1 ring-destructive/40 dark:bg-accent/60 dark:ring-destructive/40"),W=p("bg-accent/75 ring-1 ring-primary/40 dark:bg-accent/55 dark:ring-primary/40"),S=p("bg-accent/65 ring-1 ring-primary/30 dark:bg-accent/45 dark:ring-primary/30"),C=p("bg-accent/50 ring-1 ring-primary/20 dark:bg-accent/35 dark:ring-primary/20"),V={"срочно":p("bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45"),"в течение дня":p("bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45"),"до выполнения":p("bg-slate-500/25 ring-1 ring-slate-500/45 dark:bg-slate-400/25 dark:ring-slate-300/45","normal-case")},T=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},I=n("g",function(e){return T(M,e)?M[e]:null}),O=n("b",function(e){var t=e.trim().toLowerCase();return t?T(V,t)?V[t]:/сроч|urgent/.test(t)?D:/высок|повыш|high/.test(t)?W:/низк|бесср|без\s+срок|до\s+выполн|low|minor/.test(t)?C:/обыч|дня|сутк|norm|stand/.test(t)?S:null:null}),K=function(e){var t=e.trim();return t&&/^бессроч/i.test(t)?"До выполнения":t},A="text-[11px] font-medium text-slate-600 dark:text-slate-300",E={"доставить":p("bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45"),"купить":p("bg-violet-500/20 ring-1 ring-violet-500/40 dark:bg-violet-400/25 dark:ring-violet-300/45"),"выполнить":p("bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45"),"построить":p("bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45"),"починить":p("bg-orange-500/20 ring-1 ring-orange-500/40 dark:bg-orange-400/25 dark:ring-orange-300/45")},q=n("a",function(e){var t=e.trim().toLowerCase();return t?T(E,t)?E[t]:/стро|монтаж/.test(t)?E["построить"]:/ремонт|чин/.test(t)?E["починить"]:/закуп|покуп|приобр/.test(t)?E["купить"]:/достав|курьер/.test(t)?E["доставить"]:/исполн|выполн/.test(t)?E["выполнить"]:null:null}),F=function(e){if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e){var t=e.trim();if(!t)return null;var n=Number(t.replace(/\s+/g,"").replace(/,/g,"."));return Number.isFinite(n)?n:null}return null},R=function(e){var t=F(e);return null!==t?t.toLocaleString("ru-RU",{maximumFractionDigits:2,minimumFractionDigits:2}):"string"==typeof e?e.trim():"number"==typeof e?e.toString():""},L=p("bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45"),P=p("bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45"),B=p("bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45"),Z=p("bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45"),U=function(e){var t=F(e);return null===t?null:t<5?L:t<25?P:t<100?B:Z},H=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:c}),$=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",timeZone:c}),z=new Intl.DateTimeFormat("ru-RU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:c}),G=function(e){if(!e)return null;var t=new Date(e);return Number.isNaN(t.getTime())?null:t},J=function(e){var t=G(e);if(!t)return null;var n="".concat(H.format(t).replace(", "," ")," ").concat(s);return{full:n,date:$.format(t)||n,time:z.format(t)}},Q=function(e){var t=J(e);return t?a.jsx("span",{className:v,title:t.full,children:a.jsxs("time",{dateTime:e,className:"flex w-full items-baseline gap-1 truncate tabular-nums",children:[a.jsx("span",{className:"truncate",children:t.date}),t.time?a.jsx("span",{className:"text-[0.65rem] font-semibold text-slate-500 dark:text-slate-200",children:t.time}):null]})}):""},X=function(e,t){var n=e.trim();if(!n||t<2||n.length<=t)return n;var r=n.slice(0,t-1).trimEnd();return"".concat(r,"…")},Y={task:{nominative:"Задача",accusative:"Задачу",genitive:"задачи"},request:{nominative:"Заявка",accusative:"Заявку",genitive:"заявки"}},ee=function(e,t,n){var r=Y[e][t];return null!=n&&n.lower?r.toLowerCase():r},te=function(e,t){return"string"==typeof e&&"request"===e.trim().toLowerCase()?"request":t},ne="".concat(x," min-w-0 justify-start normal-case ").concat(f," tabular-nums ring-1"),re={safe:"".concat(ne," bg-emerald-500/25 ring-emerald-500/45 dark:bg-emerald-400/25 dark:ring-emerald-300/45"),warn:"".concat(ne," bg-amber-500/25 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45"),danger:"".concat(ne," bg-orange-500/25 ring-orange-500/45 dark:bg-orange-400/25 dark:ring-orange-300/45"),overdue:"".concat(ne," bg-rose-500/30 ring-rose-500/55 dark:bg-rose-400/30 dark:ring-rose-300/50"),pending:"".concat(ne," bg-sky-500/20 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45")},ae="".concat(ne," bg-slate-500/15 ring-slate-500/35 dark:bg-slate-500/25 dark:ring-slate-400/35"),ie=function(e){var t=Math.abs(e),n=Math.max(0,Math.floor(t/6e4)),r=Math.floor(n/1440),a=Math.floor(n%1440/60),i=n%60,l=function(e){return e.toString().padStart(2,"0")};return{days:r,hours:a,minutes:i,paddedDays:l(r),paddedHours:l(a),paddedMinutes:l(i)}},le=function(e,t){var n=Math.abs(e)%100;if(n>=11&&n<=14)return t[2];var r=n%10;return 1===r?t[0]:r>=2&&r<=4?t[1]:t[2]},se=function(e){return"overdue"===e.kind?"overdue":"pending"===e.kind?"pending":e.level},ce=function(e){var t=ie(e.remainingMs),n=t.days,r=t.hours,a=t.minutes;return"overdue"===e.kind?"Просрочено на ".concat(n," ").concat(le(n,["день","дня","дней"])," ").concat(r," ").concat(le(r,["час","часа","часов"])," ").concat(a," ").concat(le(a,["минута","минуты","минут"])):"pending"===e.kind?"Начало через ".concat(n," ").concat(le(n,["день","дня","дней"])," ").concat(r," ").concat(le(r,["час","часа","часов"])," ").concat(a," ").concat(le(a,["минута","минуты","минут"])):"До дедлайна ".concat(n," ").concat(le(n,["день","дня","дней"])," ").concat(r," ").concat(le(r,["час","часа","часов"])," ").concat(a," ").concat(le(a,["минута","минуты","минут"]))},oe=function(e,t,n){if(!t)return n?n.trim():void 0;if("overdue"===e.kind)return"Просрочено с ".concat(t.full);if("pending"===e.kind){var r="missing-start"===e.issue?"Не указана дата начала":"Диапазон дат некорректен";return"".concat(r,". Срок ").concat(t.full)}return"Выполнить до ".concat(t.full)},de=function(e,t,n){if("Выполнена"!==e)return null;var r=G(t),a=G(n);if(!r||!a)return null;var i=a.getTime()-r.getTime();if(!Number.isFinite(i))return null;if(Math.abs(i)<6e4)return"Выполнена точно в срок";var l=function(e){var t=Math.abs(e);if(t<6e4)return"менее минуты";var n=ie(t),r=n.days,a=n.hours,i=n.minutes,l=[];return r&&l.push("".concat(r," ").concat(le(r,["день","дня","дней"]))),a&&l.push("".concat(a," ").concat(le(a,["час","часа","часов"]))),i&&l.length<2&&l.push("".concat(i," ").concat(le(i,["минута","минуты","минут"]))),l.length?l.slice(0,2).join(" "):"менее минуты"}(i);return l?i<0?"Выполнена досрочно на ".concat(l):"Выполнена с опозданием на ".concat(l):"Выполнена точно в срок"};function ue(e){var n=e.startValue,r=e.dueValue,i=e.rawDue,s=e.status,c=e.completedAt,o=l.useMemo(function(){return G(c)},[c]),u="Выполнена"===s,g=t(l.useState(function(){return null!=o?o:new Date}),2),f=g[0],p=g[1];l.useEffect(function(){if(!u){var e=function(){return p(new Date)};e();var t=window.setInterval(e,6e4);return function(){return window.clearInterval(t)}}o&&p(o)},[u,o,n,r]);var h=null!=o?o:f,x=l.useMemo(function(){return m(n,r,h)},[n,r,h]),v=l.useMemo(function(){return J(r)},[r]),b=l.useMemo(function(){return de(s,r,c)},[s,r,c]);if("invalid"===x.kind)return a.jsxs("span",{className:"".concat(ae," inline-flex items-center gap-1.5"),title:"missing"===x.reason?"Срок не назначен":"Срок указан некорректно",children:[a.jsx(d,{className:"size-4 flex-shrink-0 text-black dark:text-white","aria-hidden":!0}),a.jsx("span",{className:"truncate",children:"Нет данных"})]});var k=se(x),w=re[k],y=ie(x.remainingMs),N=ce(x),j=b?"".concat(b,". ").concat(oe(x,v,i)):oe(x,v,i);return a.jsxs("span",{className:"".concat(w," inline-flex items-center gap-1.5"),title:j,children:[a.jsx("span",{className:"sr-only",children:N}),a.jsxs("span",{"aria-hidden":!0,className:"flex items-end gap-1 text-black dark:text-white",children:[a.jsxs("span",{className:"flex flex-col items-center leading-tight",children:[a.jsx("span",{className:"text-[0.8rem] font-semibold tabular-nums",children:y.paddedDays}),a.jsx("span",{className:"text-[9px] font-medium text-black/80 dark:text-white/80",children:le(y.days,["день","дня","дней"])})]}),a.jsxs("span",{className:"flex flex-col items-center leading-tight",children:[a.jsx("span",{className:"text-[0.8rem] font-semibold tabular-nums",children:y.paddedHours}),a.jsx("span",{className:"text-[9px] font-medium text-black/80 dark:text-white/80",children:le(y.hours,["час","часа","часов"])})]}),a.jsxs("span",{className:"flex flex-col items-center leading-tight",children:[a.jsx("span",{className:"text-[0.8rem] font-semibold tabular-nums",children:y.paddedMinutes}),a.jsx("span",{className:"text-[9px] font-medium text-black/80 dark:text-white/80",children:le(y.minutes,["минута","минуты","минут"])})]})]}),b?a.jsx("span",{className:"sr-only",children:b}):null]})}var me={completed:"".concat(ne," bg-emerald-500/25 ring-emerald-500/45 dark:bg-emerald-400/25 dark:ring-emerald-300/45"),cancelled:"".concat(ne," bg-rose-500/30 ring-rose-500/55 dark:bg-rose-400/30 dark:ring-rose-300/50"),active:"".concat(ne," bg-amber-500/25 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45"),planned:"".concat(ne," bg-sky-500/20 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45"),idle:ae},ge=function(e,t,n){var r=e.days,a=e.hours,i=e.minutes;if(!r&&!a&&!i)return"completed"===t?"".concat(ee(n,"nominative")," завершена менее чем за минуту"):"Затрачено менее минуты";var l="".concat(r," ").concat(le(r,["день","дня","дней"])),s="".concat(a," ").concat(le(a,["час","часа","часов"])),c="".concat(i," ").concat(le(i,["минута","минуты","минут"])),o="".concat(l," ").concat(s," ").concat(c);return"completed"===t?"".concat(ee(n,"nominative")," завершена за ").concat(o):"Затрачено ".concat(o)},fe=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"task",i=[],l=t?J(t):null,s=n?J(n):null;if(l&&i.push("Начало: ".concat(l.full)),s&&i.push("completed"===e?"Завершено: ".concat(s.full):"Текущее время: ".concat(s.full)),r){var c=ge(r,"completed"===e?"completed":"running",a),o="completed"===e?c.replace(new RegExp("^".concat("".concat(ee(a,"nominative")," завершена за ").replace(/[.*+?^${}()|[\\]\\]/g,"\\$&"))),"Продолжительность: "):c.replace(/^Затрачено\s/,"Продолжительность: ");i.push("idle"===e?"Продолжительность: ".concat(c):o)}return i.length?i.join("\n"):"idle"===e?"Продолжительность появится после указания даты начала":"Нет данных о продолжительности"};function pe(e){var n,r=e.progressStartValue,i=e.plannedStartValue,s=e.completedValue,c=e.status,o=e.entityKind,d=l.useMemo(function(){return G(i)},[i]),u=l.useMemo(function(){return G(r)},[r]),m=l.useMemo(function(){return G(s)},[s]),g="Выполнена"===c||"Отменена"===c,f="Отменена"===c,p="Новая"===c,h=l.useMemo(function(){var e;return p?null:null!==(e=null!=u?u:d)&&void 0!==e?e:null},[p,u,d]),x=t(l.useState(function(){return g&&m?m:new Date}),2),b=x[0],k=x[1];l.useEffect(function(){if(g)m&&k(m);else if(h){var e=function(){return k(new Date)};e();var t=window.setInterval(e,6e4);return function(){return window.clearInterval(t)}}},[g,m,h]);var w=g&&m?m:b,y=h?Math.max(0,w.getTime()-h.getTime()):null,N=l.useMemo(function(){return p?ie(0):null!==y?ie(y):null},[y,p]),j=l.useMemo(function(){return w.toISOString()},[w]),_=p||!h?"idle":g?"completed":"running",M=p||!h?"idle":g?f?"cancelled":"completed":"В работе"===c?"active":"planned",D=p?"".concat(ee(o,"nominative")," ещё не начата"):N?ge(N,"completed"===_?"completed":"running",o):"Продолжительность появится после начала",W=null!==(n=null!=r?r:i)&&void 0!==n?n:void 0,S=p?"Таймер запустится после перевода ".concat(ee(o,"genitive",{lower:!0})," в статус «В работе»"):fe(_,W,"completed"===_?null!=s?s:void 0:j,null!=N?N:void 0,o);return a.jsxs("div",{className:"flex flex-col items-start gap-1",children:[function(){if(g&&m&&s)return Q(s);if(g)return a.jsx("span",{className:v,title:"Нет отметки о завершении",children:a.jsx("span",{className:"truncate",children:"Нет данных"})});if(!h){var e="Новая"===c?"Не начата":"В работе"===c?"В работе":"В ожидании",t="Новая"===c?"".concat(ee(o,"nominative")," ещё не начата"):"В работе"===c?"Таймер запустится после фиксации начала":"Дата начала отсутствует";return a.jsx("span",{className:v,title:t,children:a.jsx("span",{className:"truncate",children:e})})}var n="В работе"===c?"В работе":"В ожидании";return a.jsx("span",{className:v,title:"".concat(ee(o,"nominative")," ещё не завершена"),children:a.jsx("span",{className:"truncate",children:n})})}(),a.jsxs("span",{className:"".concat(me[M]," inline-flex items-center gap-1.5"),title:S,children:[a.jsx("span",{className:"sr-only",children:D}),N?a.jsxs("span",{"aria-hidden":!0,className:"flex items-end gap-1 text-black dark:text-white",children:[a.jsxs("span",{className:"flex flex-col items-center leading-tight",children:[a.jsx("span",{className:"text-[0.8rem] font-semibold tabular-nums",children:N.paddedDays}),a.jsx("span",{className:"text-[9px] font-medium text-black/80 dark:text-white/80",children:le(N.days,["день","дня","дней"])})]}),a.jsxs("span",{className:"flex flex-col items-center leading-tight",children:[a.jsx("span",{className:"text-[0.8rem] font-semibold tabular-nums",children:N.paddedHours}),a.jsx("span",{className:"text-[9px] font-medium text-black/80 dark:text-white/80",children:le(N.hours,["час","часа","часов"])})]}),a.jsxs("span",{className:"flex flex-col items-center leading-tight",children:[a.jsx("span",{className:"text-[0.8rem] font-semibold tabular-nums",children:N.paddedMinutes}),a.jsx("span",{className:"text-[9px] font-medium text-black/80 dark:text-white/80",children:le(N.minutes,["минута","минуты","минут"])})]})]}):a.jsx("span",{className:"text-xs font-medium text-black dark:text-white",children:D})]})]})}}}})}();
//# sourceMappingURL=taskColumns-legacy-DEYfZPSc.js.map
