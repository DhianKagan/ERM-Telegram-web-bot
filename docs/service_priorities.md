# Критичные сервисы для отдельного развёртывания

Документ отвечает на вопрос, какие сервисы имеет смысл вынести в отдельное приложение (или модуль общей логики) в первую очередь. Список ограничен тремя пунктами, которые дают максимальную пользу по надёжности и производительности.

1. **Redis с персистентностью и фейловером.** Отдельный инстанс/кластер с AOF (или RDB для менее критичных данных), настроенными `maxmemory` и политикой вытеснения, репликой и Sentinel/Cluster для автоматического фейловера. Это предотвращает потерю кешей/очередей и непредсказуемые остановки из-за OOM.
2. **Очереди и воркеры на BullMQ.** Вынесенный сервис фоновых задач (геокодирование, маршрутизация и прочие длительные операции) с ретраями, DLQ и мониторингом длины очередей. Это разгружает API и стабилизирует работу при всплесках нагрузок или ограничениях внешних API.
3. **Прокси к OpenRouteService/OSRM.** Лёгкий сервис с кэшированием однотипных запросов, rate limiting, ретраями и circuit breaker, а также централизованными логами. Он защищает фронт и бэкенд от деградации внешнего маршрутизатора и экономит квоты.

Каждый из сервисов можно развернуть отдельно (отдельный контейнер или процесс) либо подключить как общую библиотеку внутри монорепозитория, но лучше отделять Redis и прокси для независимого масштабирования.
