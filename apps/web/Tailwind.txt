Унификация дизайна фронтенда с Tailwind CSS и DaisyUI
Цель

Привести все элементы пользовательского интерфейса к единому современному стилю с использованием Tailwind CSS и DaisyUI. В рамках этой задачи необходимо реализовать поддержку светлой и тёмной темы оформления с возможностью переключения, обеспечить консистентность дизайна для всех компонентов (кнопок, форм, таблиц, карточек, навигации, выпадающих списков и т.д.), и улучшить UX наиболее нагруженных страниц (особенно /cp/settings), не нарушив при этом текущий функционал приложения.

Ожидаемый результат

На всех страницах приложения элементы интерфейса оформлены в едином стиле. Кнопки, поля ввода, таблицы, карточки, меню навигации, выпадающие списки и прочие компоненты имеют согласованный дизайн, основанный на Tailwind/DaisyUI-классах и существующей цветовой палитре из tailwind.config.ts. Добавлена возможность переключения между светлой и тёмной темой – при смене темы цвета всех элементов меняются согласно заданной палитре. Страница /cp/settings переработана: элементы настроек сгруппированы и выровнены для визуальной сбалансированности, страница выглядит аккуратно и удобна в использовании, несмотря на большое количество настроек. При этом весь прежний функционал интерфейса (нажатия кнопок, работа форм, навигация и пр.) сохраняется, верстка не “ломается”.

Шаги выполнения

Настройка тем оформления (светлая и тёмная): Настроить систему тем в DaisyUI, опираясь на текущую цветовую палитру проекта. В файле настроек Tailwind (tailwind.config.ts) определить кастомную тему DaisyUI, указав цвета из уже существующей палитры для ключевых переменных (например, primary, secondary, accent, neutral, base-100 и т.д.). Подключить две версии темы – светлую и тёмную (либо через встроенные темы DaisyUI, либо определив отдельные палитры для тёмного режима с префиксом dark). Реализовать переключатель темы на фронтенде (например, иконка или тумблер в шапке сайта), который при клике будет менять атрибут data-theme на элементе <html> или <body> между значениями светлой и тёмной темы. Убедиться, что базовые элементы интерфейса (фон, текст, основные компоненты) автоматически меняют стили при переключении темы и соответствуют нужным цветам из палитры.

Унификация стилей компонентов интерфейса: Привести внешний вид всех UI-элементов к единому стандарту на основе Tailwind CSS и DaisyUI. Последовательно пройтись по каждому типу компонента – кнопки, текстовые поля и textarea, чекбоксы, радио-кнопки, выпадающие списки (<select>), теги, таблицы, карточки, панели навигации, модальные окна и пр. – и заменить разрозненные стили на унифицированные классы DaisyUI/Tailwind. Например: всем кнопкам присвоить класс btn с единым размером и скруглениями, используя модификаторы (btn-primary, btn-secondary и т.д.) для различия по значимости действий в рамках заданной палитры; для полей ввода и выпадающих списков использовать стили DaisyUI форм (например, классы input input-bordered для обычных текстовых полей, select select-bordered для выпадающих списков) чтобы они имели одинаковое оформление границ, фон и отступы; таблицы оформить классом table от DaisyUI, карточки – через класс card и единый шаблон компонента карточки, и т.д. Благодаря этому шрифты, цвета, отступы, тени и скругления будут стандартизированы по всему приложению и соответствовать дизайн-системе. Особое внимание уделить странице /cp/settings: переработать её верстку в процессе унификации стилей, чтобы сделать страницу более сбалансированной. Сгруппировать элементы настроек по смысловым блокам (например, обернуть группы настроек в компоненты карточек DaisyUI с заголовками секций или использовать collapsible-разделы), выровнять поля и подписи в сетку для аккуратности. Это позволит пользователю легче воспринимать большое количество настроек. Все изменения применять поэтапно, после правок каждого блока проверяя работоспособность: убедиться, что стилизованные кнопки по-прежнему выполняют свои действия, поля корректно принимают ввод, выпадающие списки открываются и т.д.

Создание переиспользуемых компонентов: Выявить повторяющиеся фрагменты интерфейса и вынести их в отдельные переиспользуемые компоненты, чтобы облегчить поддержку и гарантировать единообразие. Например, создать универсальный компонент Card (карточка) для отображения контентных блоков с заголовком – он будет использовать классы DaisyUI card и единый стиль, применимый ко всем карточкам в проекте. Аналогично, сформировать компонент FormGroup (например, для пары "лейбл + поле ввода") с общим оформлением через классы form-control DaisyUI, компонент Modal для модальных окон с преднастроенными стилями и анимациями DaisyUI, компонент Navbar для шапки навигации и т.д. После создания таких компонентов заменить прямое использование разметки на страницах на эти компоненты во всех соответствующих местах. Таким образом, все однотипные элементы (например, карточки на разных страницах, формы настроек, всплывающие окна) будут выглядеть и вести себя одинаково. В будущем это упростит правки: изменение стиля или логики в одном компоненте автоматически отразится во всех местах приложения, где он используется.

Обеспечение адаптивности интерфейса: После унификации стилей проверить, как обновлённый дизайн выглядит на разных устройствах и размерах экрана, и внести правки для полной адаптивности. Использовать утилиты responsive-дизайна Tailwind (например, префиксы sm:, md:, lg:) и возможности DaisyUI, чтобы компоненты корректно перестраивались под мобильные и планшетные разрешения. Убедиться, что навигационные элементы (меню, боковые панели) на малых экранах превращаются в бургер-меню или скрываются согласно лучшим практикам адаптивного дизайна (DaisyUI предоставляет готовые responsive-решения для Navbar и Drawer, их следует задействовать). Проверить страницу /cp/settings на узких экранах: если элементов очень много, возможно, реализовать табы или аккордеоны для разных секций настроек, чтобы не перегружать маленький экран сразу всеми опциями. Просмотреть ключевые страницы приложения на смартфоне, планшете и десктопе: ни один элемент не должен выходить за границы экрана или накладываться на другой. После этого этапа интерфейс будет выглядеть аккуратно и оставаться удобным в использовании на любых устройствах.

Тестирование и минимизация ломки верстки: Провести тщательное тестирование всего фронтенда после внесения изменений, чтобы выявить и исправить любые нарушения в работе или внешнем виде (регрессии). Проверить функциональность всех интерактивных элементов: формы должны отправляться и валидироваться, кнопки – реагировать на нажатия и вызывать свои действия, выпадающие списки – раскрываться, ссылки – работать корректно. Протестировать переключение тем: при смене на тёмную тему убедиться, что фон, текст и компоненты действительно меняют цвета на тёмные из палитры, и обратно на светлую тему – на светлые, без исчезающих или неправильно окрашенных элементов. Вручную пройтись по всем основным страницам приложения в обоих темах, обращая внимание на консистентность стилей: нигде не осталось старого оформления, все элементы выглядят согласно новому дизайну. Особое внимание уделить выравниванию и расположению блоков: убедиться, что после унификации ничего не “поехало” – элементы выровнены так же или лучше, чем раньше, тексты не обрезаны, поля не перекрываются. Проверить страницу /cp/settings с точки зрения UX: все ли настройки на месте, понятно ли их разделение на группы, не нарушена ли логика работы переключателей и вводов. При обнаружении любых недостатков (например, где-то сломалась верстка или стиль) оперативно внести исправления. Цель – завершить задачу только когда интерфейс во всем приложении выглядит цельно, аккуратно (в выбранной стилистике) и все функции работают без сбоев.

Что протестировать после выполнения

Переключение тем: Убедиться, что при нажатии на переключатель тема успешно меняется на тёмную и обратно на светлую на всех страницах. Проверьте, что цвета фона, текста и компонентов соответствуют выбранной теме, и нет ситуаций, где элемент остался в неправильной цветовой схеме.

Единый стиль компонентов: Просмотреть разные страницы и свериться, что все основные элементы (кнопки, поля ввода, таблицы, карточки, навигация, выпадающие списки и пр.) оформлены одинаково. Не должно остаться участков со старыми или несогласованными стилями – например, две похожие кнопки на разных страницах теперь выглядят идентично и соответствуют дизайну DaisyUI.

Страница /cp/settings: Проверить, что на этой странице все элементы настроек сгруппированы логично и выровнены аккуратно. Убедиться, что интерфейс не перегружен: если используются карточки или вкладки, они правильно разделяют контент. Все переключатели, поля и кнопки на странице должны работать как раньше (изменения настроек применяются, формы отправляются и т.д.), а визуально страница стала более читабельной.

Адаптивность: Открыть приложение на различных устройствах или используя инструменты разработчика для имитации мобильного экрана. Проверить, что дизайн корректно адаптируется: на узких экранах меню навигации сворачивается (например, появляется бургер-меню), элементы списка или таблицы перестраиваются под размер экрана (возможно, с прокруткой горизонтально для больших таблиц), текст остается читабельным. Ни на одной странице не должно быть горизонтального скролла из-за вылезающих блоков или налезающих друг на друга элементов.

Функциональные проверки: Повторно протестировать ключевые пользовательские сценарии: отправку форм (например, логин, настройки профиля), навигацию по меню, открытие модальных окон, работу интерактивных элементов (например, раскрытие выпадающих списков, переключение тумблеров). Убедиться, что после унификации стилей все эти сценарии работают без ошибок. Если какое-либо действие перестало работать (например, кнопка не отправляет форму из-за измененного класса), это нужно обнаружить и исправить прежде, чем считать задачу завершенной.



Title: feat(ui): унификация дизайна Tailwind/DaisyUI — тема, UI primitives, рефакторинг /cp/settings

Context / кратко:
Проект использует Tailwind CSS + DaisyUI (см. apps/web/tailwind.config.ts). Нужно унифицировать стиль фронтенда (все элементы: кнопки, формы, таблицы, карточки, навигация, модальные окна и т.д.), реализовать светлую/тёмную тему, вынести переиспользуемые UI-примитивы и аккуратно переработать страницу /cp/settings так, чтобы визуально она стала упорядоченной и функциональной. При этом НЕ МЕНЯЕМ UI-стек: оставляем Tailwind/DaisyUI и используем существующую палитру (primary, secondary, accent и т.д. в tailwind.config.ts). Все изменения должны быть минимально-инвазивными и не ломать бизнес-логику.

Goal / цель:
Единый дизайн по всему фронту: одинаковые размеры/радиусы/отступы/цвета кнопок и форм, адаптивная сетка, светлая/тёмная тема с переключателем, переиспользуемые UI-компоненты и аккуратный, читаемый /cp/settings.

Expected outcome:

tailwind.config.ts и DaisyUI темы донастроены (light/dark).

В apps/web/src/components/ui/ появится набор UI primitives: UiButton, UiCard, UiTable, UiFormGroup, UiModal, UiInput, ThemeToggle.

Главные страницы (особенно /cp/settings) используют эти компоненты.

Не нарушен существующий функционал; сборка и тесты зелёные.

PR содержит unified patch + полные файлы, DoD и инструкции ревьювера.

Детальные шаги (выполнение поэтапно)
ШАГ 0 — Подготовка

Отдельная ветка: feat/ui/unify-tailwind-daisyui.

Запустить локально:

pnpm -w -s install
pnpm --filter shared build
pnpm -r --filter '!shared' build
pnpm --filter apps/api exec tsc -b
pnpm -w test
pnpm -w lint


Создавать маленькие, проверяемые коммиты по этапам.

ШАГ 1 — Тема (light/dark) — minimal & global

tailwind.config.ts:

Добавить DaisyUI custom themes erm-light и erm-dark, использующие уже объявленные цвета (primary, accentPrimary/Secondary, neutral, success, error и т.д.). Пример: daisyui: { themes: [ { 'erm-light': { primary: '#465fff', 'base-100': '#FFFFFF', ... } }, { 'erm-dark': { primary: '#7a5af8', 'base-100': '#0F1724', ... } } ] }.

Убедиться, что darkMode: 'class' включён (в конфиге уже есть).

ThemeToggle компонент: apps/web/src/components/ui/ThemeToggle.tsx.

Сохраняет выбор в localStorage и ставит document.documentElement.classList/data-theme (или html.classList.toggle('dark')) для переключения.

Доступность: aria attributes.

В App.tsx / layout: подключить ThemeToggle в шапку. При загрузке читать localStorage и применять тему.

ШАГ 2 — UI-primitives (реализация)

Создать apps/web/src/components/ui/ с файлами:

UiButton.tsx

API: <UiButton variant="primary|secondary|ghost" size="sm|md|lg" .../>

Рендерит button с соответствующими Tailwind/DaisyUI классами (btn btn-primary, btn btn-outline, одинаковая высота/паддинг).

UiCard.tsx

Карточка с заголовком, действиями и телом. Использует card card-compact/shadow.

UiFormGroup.tsx

Label + control + helper text + error. Использует form-control, label, input input-bordered.

UiInput.tsx, UiSelect.tsx, UiCheckbox, UiRadio

Обёртки над стандартными полями, со стилями и aria.

UiTable.tsx

Обёртка над table DaisyUI: поддержка columns prop, rowKey, pagination. Предусмотреть empty и loading state.

UiModal.tsx

Модальное окно с заголовком, Actions slot. В основе dialog/modal DaisyUI.

Каждый компонент должен:

Принимать классы через className и style для override.

Быть документирован (PropTypes/tsdoc).

Иметь simple unit tests (Jest + RTL) проверяющие рендер и основные props.

ШАГ 3 — Глобальные утилиты стилей

CSS tokens / утилиты: добавить в apps/web/src/styles/ui.css набор CSS-переменных/утилит (если нужно) — но в основном пользоваться tailwind classes.

Соглашения: документ apps/web/docs/UI_GUIDELINES.md с правилами: кнопки, отступы (8px base), radius (8px), цвета primary/secondary, и т.д. Это нужно для Codex и команды.

ШАГ 4 — Рефакторинг страниц (по этапам)

Страница /cp/settings (high priority) — путь: apps/web/src/pages/cp/settings/* или где находится компонент:

Разбить секции на карточки UiCard с заголовками и подзаголовками.

Убрать длинную горизонтальную ленту и заменить её сеткой карточек (grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6).

Перенести фильтры/поиск в верхнюю панель Card: <Input.Search /> + UiButton справа.

Для таблиц в этой странице использовать UiTable с зеброй, пагинацией и compact mode.

Свернуть второстепенные панели в accordion/Collapse (DaisyUI collapse) при необходимости.

Форма TaskDialog и подобные:

Заменить inline-стили и локальные классы на UiFormGroup, UiInput, UiSelect и UiButton.

Навигация:

Проверить Navbar/Sidebar: использовать единый компонент UiNavbar/UiSidebar с одинаковыми отступами и шрифтами.

ШАГ 5 — Адаптивность и accessibility

Во всех компонентах применить responsive utilities (sm:, md:, lg:), touch targets >= 44px, контрастность текста для accessibility.

Проверить клавиатурную навигацию и aria labels у интерактивных элементов.

ШАГ 6 — Тестирование / QA

Unit тесты компонентов.

Smoke тесты: открыть TaskDialog, создать задачу, проверить формы. Открыть /cp/settings — проверить отображение карточек и работу поиска/фильтров.

Cross-theme тест: переключение темы, проверка видимости элементов в dark/light.

ШАГ 7 — PR / DoD

В PR включить:

unified patch и полные файлы для модифицированных компонентов;

чеклист:

pnpm -w -s install — OK

pnpm --filter shared build — OK

pnpm -r --filter '!shared' build — OK

pnpm --filter apps/api exec tsc -b — OK

pnpm -w test — OK

Visual review screenshots до/после (desktop / mobile / dark theme)

Инструкция ревьювера: проверить page /cp/settings, поиск, создание задачи, theme toggle.

Пример минимального патча (шаблон действий Codex)

tailwind.config.ts — добавить daisyui themes: erm-light/erm-dark (используя существующие цвета).

components/ui/UiButton.tsx — новый компонент.

components/ui/ThemeToggle.tsx — новый компонент.

pages/cp/SettingsPage.tsx — заменить layout на сетку карточек, таблицу на UiTable.

styles — добавить apps/web/src/styles/ui.css (опционально).

tests — добавить базовые тесты для UiButton и SettingsPage.

Оценка объёма работы (примерно)

Тема + UI primitives: 1–2 недели (1 dev) — создание компонентов, тесты, документация.

Рефакторинг ключевых страниц (включая /cp/settings): 1–3 недели в зависимости от количества страниц и сложности. Рефакторинг весь фронтенда — несколько месяцев, но постепенный, по странице/модулю.

Полный рефакторинг всего фронта: крупный проект; можно делать итерационно — сначала theme + primitives, затем migrate page-by-page.

Рекомендация по приоритету (iterative)

Настроить темы (light/dark) и ThemeToggle.

Создать UiButton / UiFormGroup / UiCard / UiTable.

Рефакторить страницу /cp/settings — сделать её эталоном.

Постепенно переносить другие страницы (Tasks, Collections, Kanban) на новые primitives.
