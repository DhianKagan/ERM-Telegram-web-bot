{"version":3,"mappings":"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CL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IA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","names":["AdjustmentsHorizontalIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","ArchiveBoxIcon","BuildingOffice2Icon","CheckIcon","DocumentDuplicateIcon","IdentificationIcon","KeyIcon","RectangleStackIcon","Squares2X2Icon","TruckIcon","UserGroupIcon","characterMap","chars","allAccents","firstAccent","matcher","match","removeAccents","string","hasAccents","removeAccentsModule","rankings","defaultBaseSortFn","a","b","matchSorter","items","value","options","keys","threshold","baseSort","sorter","matchedItems","sortRankedValues","reduceItemsToRanked","item","matches","index","rankingInfo","getHighestRanking","rank","keyThreshold","stringItem","getMatchRanking","getAllValuesToRank","rankedValue","keyIndex","itemValue","attributes","i","newRank","newRankedValue","minRanking","maxRanking","indexesOf","testString","stringToRank","prepareValueForComparison","indexesOfStringToRankInTestString","firstIndexOfStringToRankInTestStringResult","indexOfStringToRankInTestString","indexOfStringToRankInTestStringResult","getAcronym","getClosenessRanking","acronym","prev","ch","matchingInOrderCharCount","charNumber","findMatchingCharacter","matchChar","j","J","getRanking","spread","spreadPercentage","inOrderPercentage","firstIndex","I","aRank","aKeyIndex","bRank","bKeyIndex","keepDiacritics","getItemValues","key","getNestedValues","path","values","nestedKey","nestedValues","nestedItem","nestedValue","allValues","getKeyAttributes","itemValues","defaultKeyAttributes","TABS_NAME","createTabsContext","createTabsScope","createContextScope","createRovingFocusGroupScope","useRovingFocusGroupScope","TabsProvider","useTabsContext","Tabs","forwardedRef","__scopeTabs","valueProp","onValueChange","defaultValue","orientation","dir","activationMode","tabsProps","direction","useDirection","setValue","useControllableState","jsx","useId","Primitive","TAB_LIST_NAME","TabsList","loop","listProps","context","rovingFocusGroupScope","RovingFocusGroup.Root","TRIGGER_NAME","TabsTrigger","disabled","triggerProps","triggerId","makeTriggerId","contentId","makeContentId","isSelected","RovingFocusGroup.Item","composeEventHandlers","event","isAutomaticActivation","CONTENT_NAME","TabsContent","forceMount","children","contentProps","isMountAnimationPreventedRef","React.useRef","React.useEffect","rAF","Presence","present","baseId","Root2","List","Trigger","Content","className","TabsPrimitive.Root","cn","TabsPrimitive.List","TabsPrimitive.Trigger","TabsPrimitive.Content","ActionBar","breadcrumbs","description","toolbar","jsxs","CopyableId","displayValue","copyHint","copiedHint","onCopy","copied","setCopied","React","resetTimerRef","textToShow","defaultCopyHint","defaultCopiedHint","handleCopy","performCopy","_a","textarea","e","CollectionForm","form","onChange","onSubmit","onDelete","onReset","valueLabel","renderValueField","readonly","readonlyNotice","confirmDelete","setConfirmDelete","confirmSave","setConfirmSave","submit","Button","ConfirmDialog","emptyForm","parseTasks","FleetVehicleDialog","open","mode","vehicle","saving","onClose","setForm","useState","error","setError","useEffect","currentTasks","isUpdate","payload","useMemo","handleSubmit","handleConfirm","submitError","message","handleDelete","deleteError","stringify","fleetVehicleColumns","getValue","SETTINGS_BADGE_EMPTY","badgeBaseClass","SETTINGS_BADGE_CLASS","SETTINGS_BADGE_WRAPPER_CLASS","PAGE_LIMIT","transportHistoryFormatter","formatHistoryInstant","date","buildHistoryLabel","entry","assigned","removed","formatTransportHistory","history","vehicleCardFields","FleetVehiclesTab","setItems","total","setTotal","page","setPage","search","setSearch","appliedSearch","setAppliedSearch","loading","setLoading","modalOpen","setModalOpen","setMode","setSaving","selectedVehicle","setSelectedVehicle","totalPages","rows","badgeClassName","badgeWrapperClassName","load","useCallback","data","listFleetVehicles","loadError","openCreate","openEdit","closeModal","id","createFleetVehicle","showToast","updateFleetVehicle","remove","deleteFleetVehicle","handleSearchSubmit","handlePageChange","next","DataTable","row","Modal","label","render","CARD_CLASS","SECTION_GAP","FieldCard","onSave","deleting","localError","setLocalError","defaultLabel","_b","storedLabel","_c","trimmedValue","dirty","handleSave","err","handleReset","_d","_e","Input","Spinner","_f","TypeCard","url","photosUrl","onChangeLabel","onChangeUrl","onChangePhotosUrl","storedUrl","storedPhotosUrl","trimmedLabel","trimmedUrl","trimmedPhotosUrl","_g","_h","_i","_j","sortByOrder","left","right","useDraftMap","selector","draft","setDraft","changed","itemNames","TaskSettingsTab","fields","types","onSaveField","onDeleteField","onSaveType","onDeleteType","selectFieldDraft","selectTypeDraft","fieldDrafts","setFieldDrafts","typeDrafts","setTypeDrafts","savingField","setSavingField","savingType","setSavingType","deletingField","setDeletingField","deletingType","setDeletingType","fieldErrors","setFieldErrors","typeErrors","setTypeErrors","sortedFields","sortedTypes","handleFieldChange","name","handleTypeChange","patch","saveField","deleteField","revertFieldDraft","saveType","deleteType","revertTypeDraft","fetchRoutePlanAnalytics","params","query","response","authFetch","ReactApexChart","__vitePreload","n","DAY_MS","toDateInput","defaultTo","defaultFrom","statusOptions","percentFormatter","numberFormatter","loadFormatter","ensureParams","filters","mapMileageSeries","point","mapLoadSeries","mapSlaSeries","AnalyticsDashboard","t","useTranslation","setFilters","summary","setSummary","loadData","nextFilters","mileageSeries","loadSeries","slaSeries","option","collectionColumns","settingsUserColumns","formatRoleName","renderAccess","settingsEmployeeColumns","normalizeString","trimmed","normalizeNumber","normalizeStringArray","buildEmployeeRow","source","assignString","raw","normalized","assignNumber","permissions","UserForm","departments","setDepartments","divisions","setDivisions","positions","setPositions","roles","setRoles","fetchCollectionItems","d","fetchRoles","r","handleRoleChange","x","ROLE_OPTIONS","moduleTabs","ChartPieIcon","DocumentTextIcon","isValidModuleKey","module","createInitialQueries","acc","type","emptyUser","tabIcons","ClipboardDocumentListIcon","renderBadgeList","normalizeId","collectStringIds","result","KEY_LABEL_OVERRIDES","formatKeyLabel","override","formatSummaryValue","nested","formatted","summarizeRecord","record","tryParseJsonValue","formatCollectionRawValue","parsed","parts","part","IdsSchema","z.preprocess","input","z.array","z.string","safeParseIds","mergeById","current","incoming","merged","indexById","resolveReferenceName","map","fallbackName","directName","readValue","lowerCaseSource","lowerKey","pickString","fallback","pickNumber","pickStringArray","collectEmployeeDetails","rawValue","combined","details","telegramId","telegramUsername","username","firstName","lastName","middleName","phone","mobNumber","email","role","access","roleId","roleName","departmentId","departmentName","divisionId","divisionName","positionId","positionName","buildEmployeeDetailsIndex","mergeEmployeeDetails","user","TOKEN_SPLIT_REGEX","buildUserSearchTokens","tokens","addValue","text","_k","_l","permission","findEmployeeDetails","fallbackId","candidateId","direct","USERS_ERROR_HINT","DUPLICATE_DIVISION_HINT_PREFIX","TASK_SETTINGS_ERROR_HINT","TASK_FIELD_SAVE_ERROR","TASK_TYPE_SAVE_ERROR","TASK_SETTINGS_DELETE_ERROR","USER_DELETE_SUCCESS","USER_DELETE_ERROR","EMPLOYEE_DELETE_SUCCESS","EMPLOYEE_DELETE_ERROR","hasAccessorKey","column","CollectionsPage","searchParams","setSearchParams","useSearchParams","activeModule","setActiveModule","param","active","setActive","isLoading","setIsLoading","queries","setQueries","searchDrafts","setSearchDrafts","hint","setHint","allDepartments","setAllDepartments","allDivisions","setAllDivisions","allPositions","setAllPositions","allRoles","setAllRoles","limit","users","setUsers","userPage","setUserPage","userQuery","setUserQuery","userSearchDraft","setUserSearchDraft","userModalOpen","setUserModalOpen","userForm","setUserForm","collectionModalOpen","setCollectionModalOpen","selectedCollection","setSelectedCollection","collectionSearchTimer","useRef","selectedEmployeeId","setSelectedEmployeeId","isEmployeeModalOpen","setIsEmployeeModalOpen","employeeFormMode","setEmployeeFormMode","taskFieldItems","setTaskFieldItems","taskTypeItems","setTaskTypeItems","tasksLoading","setTasksLoading","currentUser","useAuth","confirmUserDelete","setConfirmUserDelete","confirmEmployeeDelete","setConfirmEmployeeDelete","canManageUsers","hasAccess","ACCESS_ADMIN","handleModuleChange","selectedCollectionInfo","meta","notice","currentQuery","currentSearchDraft","isCollectionSearchSupported","isUserSearchActive","isEmployeeSearchActive","applyCollectionSearch","list","fetchAllCollectionItems","loadUsers","fetchUsers","loadTaskSettings","saveTaskField","createCollectionItem","updateCollectionItem","deleteTaskField","removeCollectionItem","saveTaskType","buildMeta","deleteTaskType","departmentsResult","divisionsResult","positionsResult","applyResult","setter","fallbackMessage","reason","openCollectionModal","closeCollectionModal","mapUserToForm","openUserModal","closeUserModal","openEmployeeModal","updateCollectionSearchDraft","submitCollectionSearch","handleCollectionSearchKeyDown","resetCollectionSearch","submitUserSearch","handleUserSearchKeyDown","handleEmployeeSaved","updated","executeUserDelete","deleteUserApi","executeEmployeeDelete","trimmedName","valueToSave","saved","msg","submitUser","u","createUserApi","_telegramId","updateUserApi","departmentMap","divisionMap","positionMap","position","employeeDetailsIndex","enrichUserWithEmployeeDetails","enrichedUsers","roleMap","divisionOwners","duplicateDivisionIds","owners","duplicates","department","currentOwner","duplicateDivisionHint","names","division","suffix","getItemDisplayValue","ids","formatMetaSummary","copyIdLabel","copiedIdLabel","localizedCollectionColumns","safeValue","collectionSearchPlaceholder","collectionSearchHint","collectionSearchCta","collectionResetCta","collectionAddCta","collectionEmptyTitle","collectionEmptyDescription","collectionEmptyAction","userSearchPlaceholder","userAddCta","employeeSearchPlaceholder","employeeAddCta","buildCollectionColumns","excludedKeys","departmentColumns","divisionColumns","positionColumns","renderDepartmentValueField","currentForm","handleChange","selected","handleSelect","ownerId","renderDivisionValueField","renderPositionValueField","filteredUsers","userTotalPages","paginatedUsers","employeeRows","mergedUser","roleNameFromMap","roleLabel","selectedEmployee","base","fallbackDetails","fallbackUser","parsedId","selectedDepartmentDivisionNames","selectedDivisionDepartmentName","selectedDivisionPositionNames","selectedDivisionEmployeeNames","directoriesToolbar","isEmployee","placeholder","addLabel","handleAdd","Breadcrumbs","tab","Icon","labelId","isActiveTab","columnsForType","showEmpty","Fragment","_m","EmployeeCardForm","ArchivePage","LogsPage","StoragePage"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13],"sources":["../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/AdjustmentsHorizontalIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/ArchiveBoxIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/BuildingOffice2Icon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/CheckIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/DocumentDuplicateIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/IdentificationIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/KeyIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/RectangleStackIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/Squares2X2Icon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/TruckIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/UserGroupIcon.js","../../../../node_modules/.pnpm/remove-accents@0.5.0/node_modules/remove-accents/index.js","../../../../node_modules/.pnpm/match-sorter@8.1.0/node_modules/match-sorter/dist/match-sorter.esm.js","../../../../node_modules/.pnpm/@radix-ui+react-tabs@1.1.13_9a0a28c0fe72a405cc6b65427e0d242f/node_modules/@radix-ui/react-tabs/dist/index.mjs","../../../web/src/components/ui/tabs.tsx","../../../web/src/components/ActionBar.tsx","../../../web/src/components/CopyableId.tsx","../../../web/src/pages/Settings/CollectionForm.tsx","../../../web/src/pages/Settings/FleetVehicleDialog.tsx","../../../web/src/columns/fleetVehicleColumns.tsx","../../../web/src/pages/Settings/badgeStyles.ts","../../../web/src/pages/Settings/FleetVehiclesTab.tsx","../../../web/src/pages/Settings/TaskSettingsTab.tsx","../../../web/src/services/analytics.ts","../../../web/src/pages/AnalyticsDashboard.tsx","../../../web/src/columns/collectionColumns.tsx","../../../web/src/columns/settingsUserColumns.tsx","../../../web/src/columns/settingsEmployeeColumns.tsx","../../../web/src/utils/employeeRow.ts","../../../web/src/pages/Settings/UserForm.tsx","../../../web/src/pages/Settings/CollectionsPage.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction AdjustmentsHorizontalIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(AdjustmentsHorizontalIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArchiveBoxIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArchiveBoxIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction BuildingOffice2Icon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BuildingOffice2Icon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CheckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m4.5 12.75 6 6 9-13.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentDuplicateIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentDuplicateIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction IdentificationIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(IdentificationIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction KeyIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(KeyIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction RectangleStackIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(RectangleStackIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction Squares2X2Icon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(Squares2X2Icon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TruckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TruckIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction UserGroupIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserGroupIcon);\nexport default ForwardRef;","var characterMap = {\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"AE\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"C\",\n\t\"\": \"C\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"D\",\n\t\"\": \"N\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"Y\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"ae\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"c\",\n\t\"\": \"c\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"d\",\n\t\"\": \"n\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"y\",\n\t\"\": \"y\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"C\": \"C\",\n\t\"c\": \"c\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"G\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"IJ\",\n\t\"\": \"ij\",\n\t\"\": \"J\",\n\t\"\": \"j\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"K\": \"K\",\n\t\"k\": \"k\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"l\",\n\t\"\": \"l\",\n\t\"\": \"M\",\n\t\"\": \"m\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"n\",\n\t\"N\": \"N\",\n\t\"n\": \"n\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"OE\",\n\t\"\": \"oe\",\n\t\"P\": \"P\",\n\t\"p\": \"p\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"R\": \"R\",\n\t\"r\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"\": \"t\",\n\t\"\": \"T\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"T\": \"T\",\n\t\"t\": \"t\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"V\": \"V\",\n\t\"v\": \"v\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"\": \"Y\",\n\t\"\": \"y\",\n\t\"\": \"Y\",\n\t\"Y\": \"Y\",\n\t\"y\": \"y\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"s\",\n\t\"\": \"f\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"AE\",\n\t\"\": \"ae\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"TH\",\n\t\"\": \"th\",\n\t\"\": \"P\",\n\t\"\": \"p\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"A\": \"A\",\n\t\"a\": \"a\",\n\t\"E\": \"E\",\n\t\"e\": \"e\",\n\t\"I\": \"I\",\n\t\"i\": \"i\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"\": \"Y\",\n\t\"\": \"y\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"B\": \"B\",\n\t\"b\": \"b\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"F\": \"F\",\n\t\"f\": \"f\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"J\": \"J\",\n\t\"\": \"j\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"P\": \"P\",\n\t\"p\": \"p\",\n\t\"Q\": \"Q\",\n\t\"q\": \"q\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"V\": \"V\",\n\t\"v\": \"v\",\n\t\"W\": \"W\",\n\t\"w\": \"w\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"Y\": \"Y\",\n\t\"y\": \"y\",\n\t\"A\": \"A\",\n\t\"a\": \"a\",\n\t\"B\": \"B\",\n\t\"b\": \"b\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"I\": \"I\",\n\t\"i\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"O\": \"O\",\n\t\"o\": \"o\",\n\t\"Q\": \"Q\",\n\t\"q\": \"q\",\n\t\"U\": \"U\",\n\t\"u\": \"u\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"Z\": \"Z\",\n\t\"z\": \"z\",\n\t\"\":\"\",\n\t\"\":\"\",\n\t\"\":\"\",\n\t\"\":\"\",\n};\n\nvar chars = Object.keys(characterMap).join('|');\nvar allAccents = new RegExp(chars, 'g');\nvar firstAccent = new RegExp(chars, '');\n\nfunction matcher(match) {\n\treturn characterMap[match];\n}\n\nvar removeAccents = function(string) {\n\treturn string.replace(allAccents, matcher);\n};\n\nvar hasAccents = function(string) {\n\treturn !!string.match(firstAccent);\n};\n\nmodule.exports = removeAccents;\nmodule.exports.has = hasAccents;\nmodule.exports.remove = removeAccents;\n","import removeAccents from 'remove-accents';\n\n/**\n * @name match-sorter\n * @license MIT license.\n * @copyright (c) 2020 Kent C. Dodds\n * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)\n */\nconst rankings = {\n  CASE_SENSITIVE_EQUAL: 7,\n  EQUAL: 6,\n  STARTS_WITH: 5,\n  WORD_STARTS_WITH: 4,\n  CONTAINS: 3,\n  ACRONYM: 2,\n  MATCHES: 1,\n  NO_MATCH: 0\n};\nconst defaultBaseSortFn = (a, b) => String(a.rankedValue).localeCompare(String(b.rankedValue));\n\n/**\n * Takes an array of items and a value and returns a new array with the items that match the given value\n * @param {Array} items - the items to sort\n * @param {String} value - the value to use for ranking\n * @param {Object} options - Some options to configure the sorter\n * @return {Array} - the new sorted array\n */\nfunction matchSorter(items, value, options = {}) {\n  const {\n    keys,\n    threshold = rankings.MATCHES,\n    baseSort = defaultBaseSortFn,\n    sorter = matchedItems => matchedItems.sort((a, b) => sortRankedValues(a, b, baseSort))\n  } = options;\n  const matchedItems = items.reduce(reduceItemsToRanked, []);\n  return sorter(matchedItems).map(({\n    item\n  }) => item);\n  function reduceItemsToRanked(matches, item, index) {\n    const rankingInfo = getHighestRanking(item, keys, value, options);\n    const {\n      rank,\n      keyThreshold = threshold\n    } = rankingInfo;\n    if (rank >= keyThreshold) {\n      matches.push({\n        ...rankingInfo,\n        item,\n        index\n      });\n    }\n    return matches;\n  }\n}\nmatchSorter.rankings = rankings;\n\n/**\n * Gets the highest ranking for value for the given item based on its values for the given keys\n * @param {*} item - the item to rank\n * @param {Array} keys - the keys to get values from the item for the ranking\n * @param {String} value - the value to rank against\n * @param {Object} options - options to control the ranking\n * @return {{rank: Number, keyIndex: Number, keyThreshold: Number}} - the highest ranking\n */\nfunction getHighestRanking(item, keys, value, options) {\n  if (!keys) {\n    // if keys is not specified, then we assume the item given is ready to be matched\n    const stringItem = item;\n    return {\n      // ends up being duplicate of 'item' in matches but consistent\n      rankedValue: stringItem,\n      rank: getMatchRanking(stringItem, value, options),\n      keyIndex: -1,\n      keyThreshold: options.threshold\n    };\n  }\n  const valuesToRank = getAllValuesToRank(item, keys);\n  return valuesToRank.reduce(({\n    rank,\n    rankedValue,\n    keyIndex,\n    keyThreshold\n  }, {\n    itemValue,\n    attributes\n  }, i) => {\n    let newRank = getMatchRanking(itemValue, value, options);\n    let newRankedValue = rankedValue;\n    const {\n      minRanking,\n      maxRanking,\n      threshold\n    } = attributes;\n    if (newRank < minRanking && newRank >= rankings.MATCHES) {\n      newRank = minRanking;\n    } else if (newRank > maxRanking) {\n      newRank = maxRanking;\n    }\n    if (newRank > rank) {\n      rank = newRank;\n      keyIndex = i;\n      keyThreshold = threshold;\n      newRankedValue = itemValue;\n    }\n    return {\n      rankedValue: newRankedValue,\n      rank,\n      keyIndex,\n      keyThreshold\n    };\n  }, {\n    rankedValue: item,\n    rank: rankings.NO_MATCH,\n    keyIndex: -1,\n    keyThreshold: options.threshold\n  });\n}\nfunction* indexesOf(testString, stringToRank) {\n  let index = -1;\n  while ((index = testString.indexOf(stringToRank, index + 1)) > -1) {\n    yield index;\n  }\n  return -1;\n}\n\n/**\n * Gives a rankings score based on how well the two strings match.\n * @param {String} testString - the string to test against\n * @param {String} stringToRank - the string to rank\n * @param {Object} options - options for the match (like keepDiacritics for comparison)\n * @returns {Number} the ranking for how well stringToRank matches testString\n */\nfunction getMatchRanking(testString, stringToRank, options) {\n  testString = prepareValueForComparison(testString, options);\n  stringToRank = prepareValueForComparison(stringToRank, options);\n\n  // too long\n  if (stringToRank.length > testString.length) {\n    return rankings.NO_MATCH;\n  }\n\n  // case sensitive equals\n  if (testString === stringToRank) {\n    return rankings.CASE_SENSITIVE_EQUAL;\n  }\n\n  // Lower casing before further comparison\n  testString = testString.toLowerCase();\n  stringToRank = stringToRank.toLowerCase();\n\n  // Use indexOf to check for equality/includes\n  const indexesOfStringToRankInTestString = indexesOf(testString, stringToRank);\n  const firstIndexOfStringToRankInTestStringResult = indexesOfStringToRankInTestString.next();\n  const indexOfStringToRankInTestString = firstIndexOfStringToRankInTestStringResult.value;\n\n  // case insensitive equals\n  if (testString.length === stringToRank.length && indexOfStringToRankInTestString === 0) {\n    return rankings.EQUAL;\n  }\n\n  // starts with\n  if (indexOfStringToRankInTestString === 0) {\n    return rankings.STARTS_WITH;\n  }\n\n  // word starts with\n  let indexOfStringToRankInTestStringResult = firstIndexOfStringToRankInTestStringResult;\n  while (!indexOfStringToRankInTestStringResult.done) {\n    if (indexOfStringToRankInTestStringResult.value > 0 && testString[indexOfStringToRankInTestStringResult.value - 1] === ' ') {\n      return rankings.WORD_STARTS_WITH;\n    }\n    indexOfStringToRankInTestStringResult = indexesOfStringToRankInTestString.next();\n  }\n\n  // contains\n  if (indexOfStringToRankInTestString > 0) {\n    return rankings.CONTAINS;\n  } else if (stringToRank.length === 1) {\n    // If the only character in the given stringToRank\n    //   isn't even contained in the testString, then\n    //   it's definitely not a match.\n    return rankings.NO_MATCH;\n  }\n\n  // acronym\n  if (getAcronym(testString).includes(stringToRank)) {\n    return rankings.ACRONYM;\n  }\n\n  // will return a number between rankings.MATCHES and\n  // rankings.MATCHES + 1 depending  on how close of a match it is.\n  return getClosenessRanking(testString, stringToRank);\n}\n\n/**\n * Generates an acronym for a string.\n *\n * Segment starts  at the beginning of the phrase, after a **space**, or after a **hyphen**.\n * We capture the first non-delimiter character of every segment and skip runs of delimiters.\n *\n * @example\n *   getAcronym('The Tail-spin Test')  //  \"TTsT\"\n *   getAcronym('edge-case')           //  \"ec\"\n *   getAcronym('multiple  spaces')    //  \"ms\"\n *\n * @param {String} string the string for which to produce the acronym\n * @returns {String} the acronym\n */\nfunction getAcronym(string) {\n  let acronym = '';\n  let prev = ' '; // virtual delimiter so the very first char qualifies\n\n  for (let i = 0; i < string.length; i++) {\n    const ch = string.charAt(i);\n    const prevWasDelimiter = prev === ' ' || prev === '-';\n    const currIsDelimiter = ch === ' ' || ch === '-';\n    if (prevWasDelimiter && !currIsDelimiter) {\n      acronym += ch;\n    }\n    prev = ch;\n  }\n  return acronym;\n}\n\n/**\n * Returns a score based on how spread apart the\n * characters from the stringToRank are within the testString.\n * A number close to rankings.MATCHES represents a loose match. A number close\n * to rankings.MATCHES + 1 represents a tighter match.\n * @param {String} testString - the string to test against\n * @param {String} stringToRank - the string to rank\n * @returns {Number} the number between rankings.MATCHES and\n * rankings.MATCHES + 1 for how well stringToRank matches testString\n */\nfunction getClosenessRanking(testString, stringToRank) {\n  let matchingInOrderCharCount = 0;\n  let charNumber = 0;\n  function findMatchingCharacter(matchChar, string, index) {\n    for (let j = index, J = string.length; j < J; j++) {\n      const stringChar = string[j];\n      if (stringChar === matchChar) {\n        matchingInOrderCharCount += 1;\n        return j + 1;\n      }\n    }\n    return -1;\n  }\n  function getRanking(spread) {\n    const spreadPercentage = 1 / spread;\n    const inOrderPercentage = matchingInOrderCharCount / stringToRank.length;\n    const ranking = rankings.MATCHES + inOrderPercentage * spreadPercentage;\n    return ranking;\n  }\n  const firstIndex = findMatchingCharacter(stringToRank[0], testString, 0);\n  if (firstIndex < 0) {\n    return rankings.NO_MATCH;\n  }\n  charNumber = firstIndex;\n  for (let i = 1, I = stringToRank.length; i < I; i++) {\n    const matchChar = stringToRank[i];\n    charNumber = findMatchingCharacter(matchChar, testString, charNumber);\n    const found = charNumber > -1;\n    if (!found) {\n      return rankings.NO_MATCH;\n    }\n  }\n  const spread = charNumber - firstIndex;\n  return getRanking(spread);\n}\n\n/**\n * Sorts items that have a rank, index, and keyIndex\n * @param {Object} a - the first item to sort\n * @param {Object} b - the second item to sort\n * @return {Number} -1 if a should come first, 1 if b should come first, 0 if equal\n */\nfunction sortRankedValues(a, b, baseSort) {\n  const aFirst = -1;\n  const bFirst = 1;\n  const {\n    rank: aRank,\n    keyIndex: aKeyIndex\n  } = a;\n  const {\n    rank: bRank,\n    keyIndex: bKeyIndex\n  } = b;\n  const same = aRank === bRank;\n  if (same) {\n    if (aKeyIndex === bKeyIndex) {\n      // use the base sort function as a tie-breaker\n      return baseSort(a, b);\n    } else {\n      return aKeyIndex < bKeyIndex ? aFirst : bFirst;\n    }\n  } else {\n    return aRank > bRank ? aFirst : bFirst;\n  }\n}\n\n/**\n * Prepares value for comparison by stringifying it, removing diacritics (if specified)\n * @param {String} value - the value to clean\n * @param {Object} options - {keepDiacritics: whether to remove diacritics}\n * @return {String} the prepared value\n */\nfunction prepareValueForComparison(value, {\n  keepDiacritics\n}) {\n  // value might not actually be a string at this point (we don't get to choose)\n  // so part of preparing the value for comparison is ensure that it is a string\n  value = `${value}`; // toString\n  if (!keepDiacritics) {\n    value = removeAccents(value);\n  }\n  return value;\n}\n\n/**\n * Gets value for key in item at arbitrarily nested keypath\n * @param {Object} item - the item\n * @param {Object|Function} key - the potentially nested keypath or property callback\n * @return {Array} - an array containing the value(s) at the nested keypath\n */\nfunction getItemValues(item, key) {\n  if (typeof key === 'object') {\n    key = key.key;\n  }\n  let value;\n  if (typeof key === 'function') {\n    value = key(item);\n  } else if (item == null) {\n    value = null;\n  } else if (Object.hasOwnProperty.call(item, key)) {\n    value = item[key];\n  } else if (key.includes('.')) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    return getNestedValues(key, item);\n  } else {\n    value = null;\n  }\n\n  // because `value` can also be undefined\n  if (value == null) {\n    return [];\n  }\n  if (Array.isArray(value)) {\n    return value;\n  }\n  return [String(value)];\n}\n\n/**\n * Given path: \"foo.bar.baz\"\n * And item: {foo: {bar: {baz: 'buzz'}}}\n *   -> 'buzz'\n * @param path a dot-separated set of keys\n * @param item the item to get the value from\n */\nfunction getNestedValues(path, item) {\n  const keys = path.split('.');\n  let values = [item];\n  for (let i = 0, I = keys.length; i < I; i++) {\n    const nestedKey = keys[i];\n    let nestedValues = [];\n    for (let j = 0, J = values.length; j < J; j++) {\n      const nestedItem = values[j];\n      if (nestedItem == null) continue;\n      if (Object.hasOwnProperty.call(nestedItem, nestedKey)) {\n        const nestedValue = nestedItem[nestedKey];\n        if (nestedValue != null) {\n          nestedValues.push(nestedValue);\n        }\n      } else if (nestedKey === '*') {\n        // ensure that values is an array\n        nestedValues = nestedValues.concat(nestedItem);\n      }\n    }\n    values = nestedValues;\n  }\n  if (Array.isArray(values[0])) {\n    // keep allowing the implicit wildcard for an array of strings at the end of\n    // the path; don't use `.flat()` because that's not available in node.js v10\n    const result = [];\n    return result.concat(...values);\n  }\n  // Based on our logic it should be an array of strings by now...\n  // assuming the user's path terminated in strings\n  return values;\n}\n\n/**\n * Gets all the values for the given keys in the given item and returns an array of those values\n * @param item - the item from which the values will be retrieved\n * @param keys - the keys to use to retrieve the values\n * @return objects with {itemValue, attributes}\n */\nfunction getAllValuesToRank(item, keys) {\n  const allValues = [];\n  for (let j = 0, J = keys.length; j < J; j++) {\n    const key = keys[j];\n    const attributes = getKeyAttributes(key);\n    const itemValues = getItemValues(item, key);\n    for (let i = 0, I = itemValues.length; i < I; i++) {\n      allValues.push({\n        itemValue: itemValues[i],\n        attributes\n      });\n    }\n  }\n  return allValues;\n}\nconst defaultKeyAttributes = {\n  maxRanking: Infinity,\n  minRanking: -Infinity\n};\n/**\n * Gets all the attributes for the given key\n * @param key - the key from which the attributes will be retrieved\n * @return object containing the key's attributes\n */\nfunction getKeyAttributes(key) {\n  if (typeof key === 'string') {\n    return defaultKeyAttributes;\n  }\n  return {\n    ...defaultKeyAttributes,\n    ...key\n  };\n}\n\n/*\neslint\n  no-continue: \"off\",\n*/\n\nexport { defaultBaseSortFn, matchSorter, rankings };\n","\"use client\";\n\n// src/tabs.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { jsx } from \"react/jsx-runtime\";\nvar TABS_NAME = \"Tabs\";\nvar [createTabsContext, createTabsScope] = createContextScope(TABS_NAME, [\n  createRovingFocusGroupScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar [TabsProvider, useTabsContext] = createTabsContext(TABS_NAME);\nvar Tabs = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTabs,\n      value: valueProp,\n      onValueChange,\n      defaultValue,\n      orientation = \"horizontal\",\n      dir,\n      activationMode = \"automatic\",\n      ...tabsProps\n    } = props;\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      onChange: onValueChange,\n      defaultProp: defaultValue ?? \"\",\n      caller: TABS_NAME\n    });\n    return /* @__PURE__ */ jsx(\n      TabsProvider,\n      {\n        scope: __scopeTabs,\n        baseId: useId(),\n        value,\n        onValueChange: setValue,\n        orientation,\n        dir: direction,\n        activationMode,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            dir: direction,\n            \"data-orientation\": orientation,\n            ...tabsProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabs.displayName = TABS_NAME;\nvar TAB_LIST_NAME = \"TabsList\";\nvar TabsList = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, loop = true, ...listProps } = props;\n    const context = useTabsContext(TAB_LIST_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Root,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        orientation: context.orientation,\n        dir: context.dir,\n        loop,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            role: \"tablist\",\n            \"aria-orientation\": context.orientation,\n            ...listProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabsList.displayName = TAB_LIST_NAME;\nvar TRIGGER_NAME = \"TabsTrigger\";\nvar TabsTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, disabled = false, ...triggerProps } = props;\n    const context = useTabsContext(TRIGGER_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !disabled,\n        active: isSelected,\n        children: /* @__PURE__ */ jsx(\n          Primitive.button,\n          {\n            type: \"button\",\n            role: \"tab\",\n            \"aria-selected\": isSelected,\n            \"aria-controls\": contentId,\n            \"data-state\": isSelected ? \"active\" : \"inactive\",\n            \"data-disabled\": disabled ? \"\" : void 0,\n            disabled,\n            id: triggerId,\n            ...triggerProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!disabled && event.button === 0 && event.ctrlKey === false) {\n                context.onValueChange(value);\n              } else {\n                event.preventDefault();\n              }\n            }),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if ([\" \", \"Enter\"].includes(event.key)) context.onValueChange(value);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => {\n              const isAutomaticActivation = context.activationMode !== \"manual\";\n              if (!isSelected && !disabled && isAutomaticActivation) {\n                context.onValueChange(value);\n              }\n            })\n          }\n        )\n      }\n    );\n  }\n);\nTabsTrigger.displayName = TRIGGER_NAME;\nvar CONTENT_NAME = \"TabsContent\";\nvar TabsContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, forceMount, children, ...contentProps } = props;\n    const context = useTabsContext(CONTENT_NAME, __scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    const isMountAnimationPreventedRef = React.useRef(isSelected);\n    React.useEffect(() => {\n      const rAF = requestAnimationFrame(() => isMountAnimationPreventedRef.current = false);\n      return () => cancelAnimationFrame(rAF);\n    }, []);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || isSelected, children: ({ present }) => /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": isSelected ? \"active\" : \"inactive\",\n        \"data-orientation\": context.orientation,\n        role: \"tabpanel\",\n        \"aria-labelledby\": triggerId,\n        hidden: !present,\n        id: contentId,\n        tabIndex: 0,\n        ...contentProps,\n        ref: forwardedRef,\n        style: {\n          ...props.style,\n          animationDuration: isMountAnimationPreventedRef.current ? \"0s\" : void 0\n        },\n        children: present && children\n      }\n    ) });\n  }\n);\nTabsContent.displayName = CONTENT_NAME;\nfunction makeTriggerId(baseId, value) {\n  return `${baseId}-trigger-${value}`;\n}\nfunction makeContentId(baseId, value) {\n  return `${baseId}-content-${value}`;\n}\nvar Root2 = Tabs;\nvar List = TabsList;\nvar Trigger = TabsTrigger;\nvar Content = TabsContent;\nexport {\n  Content,\n  List,\n  Root2 as Root,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n  Trigger,\n  createTabsScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn(\"flex flex-col gap-2\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn(\"flex-1 outline-none\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\r\n","//  :      ,   \r\n//  : React, cn util\r\nimport React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface ActionBarProps {\r\n  breadcrumbs?: React.ReactNode;\r\n  title?: React.ReactNode;\r\n  description?: React.ReactNode;\r\n  toolbar?: React.ReactNode;\r\n  children?: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport default function ActionBar({\r\n  breadcrumbs,\r\n  title,\r\n  description,\r\n  toolbar,\r\n  children,\r\n  className,\r\n}: ActionBarProps) {\r\n  return (\r\n    <section\r\n      className={cn(\r\n        \"flex flex-col gap-3 rounded-3xl border border-[color:var(--color-gray-200)]\",\r\n        \"bg-[color:var(--color-gray-25)] p-4 shadow-[var(--shadow-theme-sm)] sm:p-6\",\r\n        \"dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\",\r\n        className,\r\n      )}\r\n    >\r\n      {breadcrumbs ? (\r\n        <div className=\"text-xs font-semibold uppercase tracking-wide text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\">\r\n          {breadcrumbs}\r\n        </div>\r\n      ) : null}\r\n      {(title || description || toolbar) ? (\r\n        <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between\">\r\n          <div className=\"min-w-0 space-y-1\">\r\n            {title ? (\r\n              <h1 className=\"text-lg font-semibold text-[color:var(--color-gray-900)] dark:text-white sm:text-xl\">\r\n                {title}\r\n              </h1>\r\n            ) : null}\r\n            {description ? (\r\n              <p className=\"text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n                {description}\r\n              </p>\r\n            ) : null}\r\n          </div>\r\n          {toolbar ? (\r\n            <div className=\"flex flex-wrap items-center justify-end gap-2\">\r\n              {toolbar}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      ) : null}\r\n      {children ? <div className=\"space-y-3 sm:space-y-4\">{children}</div> : null}\r\n    </section>\r\n  );\r\n}\r\n","//  :  -   \r\n//  : React, heroicons, cn util\r\nimport React from \"react\";\r\nimport { CheckIcon, DocumentDuplicateIcon } from \"@heroicons/react/24/outline\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface CopyableIdProps extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"value\"> {\r\n  value: string;\r\n  displayValue?: string;\r\n  copyHint?: string;\r\n  copiedHint?: string;\r\n  onCopy?: (payload: { value: string }) => void;\r\n}\r\n\r\nexport default function CopyableId({\r\n  value,\r\n  displayValue,\r\n  copyHint,\r\n  copiedHint,\r\n  onCopy,\r\n  className,\r\n  disabled,\r\n  ...props\r\n}: CopyableIdProps) {\r\n  const [copied, setCopied] = React.useState(false);\r\n  const resetTimerRef = React.useRef<number>();\r\n\r\n  const textToShow = displayValue ?? value;\r\n  const defaultCopyHint = copyHint ?? \"Copy\";\r\n  const defaultCopiedHint = copiedHint ?? \"Copied\";\r\n\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (resetTimerRef.current) {\r\n        window.clearTimeout(resetTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (!copied) return;\r\n    resetTimerRef.current = window.setTimeout(() => setCopied(false), 1600);\r\n    return () => {\r\n      if (resetTimerRef.current) {\r\n        window.clearTimeout(resetTimerRef.current);\r\n      }\r\n    };\r\n  }, [copied]);\r\n\r\n  const handleCopy = async () => {\r\n    if (!value || disabled) return;\r\n    const performCopy = async () => {\r\n      if (typeof navigator !== \"undefined\" && navigator.clipboard?.writeText) {\r\n        await navigator.clipboard.writeText(value);\r\n        return true;\r\n      }\r\n      if (typeof document === \"undefined\") {\r\n        return false;\r\n      }\r\n      const textarea = document.createElement(\"textarea\");\r\n      textarea.value = value;\r\n      textarea.setAttribute(\"readonly\", \"\");\r\n      textarea.style.position = \"absolute\";\r\n      textarea.style.left = \"-9999px\";\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n      try {\r\n        const result = document.execCommand(\"copy\");\r\n        return result;\r\n      } catch {\r\n        return false;\r\n      } finally {\r\n        document.body.removeChild(textarea);\r\n      }\r\n    };\r\n\r\n    try {\r\n      const success = await performCopy();\r\n      if (success) {\r\n        setCopied(true);\r\n      }\r\n    } finally {\r\n      onCopy?.({ value });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      className={cn(\r\n        \"inline-flex items-center gap-1.5 rounded-full border border-[color:var(--color-gray-300)]\",\r\n        \"bg-[color:var(--color-gray-25)] px-3 py-1 text-[11px] font-semibold tracking-wide text-[color:var(--color-gray-700)]\",\r\n        \"transition-colors duration-150 ease-out hover:border-[color:var(--color-brand-400)] hover:bg-[color:var(--color-brand-50)]\",\r\n        \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-500)] focus-visible:ring-offset-2\",\r\n        \"disabled:cursor-not-allowed disabled:border-[color:var(--color-gray-200)] disabled:text-[color:var(--color-gray-400)]\",\r\n        \"dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-[color:var(--color-gray-100)]\",\r\n        \"dark:hover:border-[color:var(--color-brand-400)] dark:hover:bg-[color:var(--color-gray-800)]\",\r\n        className,\r\n      )}\r\n      onClick={handleCopy}\r\n      title={copied ? defaultCopiedHint : defaultCopyHint}\r\n      aria-pressed={copied}\r\n      aria-live=\"polite\"\r\n      disabled={disabled}\r\n      {...props}\r\n    >\r\n      <span className=\"inline-flex items-center gap-1\">\r\n        {copied ? (\r\n          <CheckIcon className=\"h-4 w-4 text-[color:var(--color-brand-500)] dark:text-[color:var(--color-brand-400)]\" aria-hidden=\"true\" />\r\n        ) : (\r\n          <DocumentDuplicateIcon className=\"h-4 w-4 text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\" aria-hidden=\"true\" />\r\n        )}\r\n        <span className=\"truncate text-left\">{textToShow}</span>\r\n      </span>\r\n      <span className=\"sr-only\">{copied ? defaultCopiedHint : defaultCopyHint}</span>\r\n    </button>\r\n  );\r\n}\r\n","// :      \r\n//  : React, ConfirmDialog\r\nimport React from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport ConfirmDialog from \"../../components/ConfirmDialog\";\r\n\r\ninterface ItemForm {\r\n  _id?: string;\r\n  name: string;\r\n  value: string;\r\n}\r\n\r\ninterface Props {\r\n  form: ItemForm;\r\n  onChange: (form: ItemForm) => void;\r\n  onSubmit: () => void;\r\n  onDelete: () => void;\r\n  onReset: () => void;\r\n  valueLabel?: string;\r\n  renderValueField?: (\r\n    form: ItemForm,\r\n    onChange: (form: ItemForm) => void,\r\n    options?: { readonly?: boolean },\r\n  ) => React.ReactNode;\r\n  readonly?: boolean;\r\n  readonlyNotice?: string;\r\n}\r\n\r\nexport default function CollectionForm({\r\n  form,\r\n  onChange,\r\n  onSubmit,\r\n  onDelete,\r\n  onReset,\r\n  valueLabel = \"\",\r\n  renderValueField,\r\n  readonly = false,\r\n  readonlyNotice,\r\n}: Props) {\r\n  const [confirmDelete, setConfirmDelete] = React.useState(false);\r\n  const [confirmSave, setConfirmSave] = React.useState(false);\r\n\r\n  const submit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (readonly) return;\r\n    setConfirmSave(true);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={submit} className=\"space-y-2\">\r\n      <div>\r\n        <label className=\"block text-sm font-medium\"></label>\r\n        <input\r\n          id=\"collection-form-name\"\r\n          name=\"collectionName\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.name}\r\n          onChange={(e) => onChange({ ...form, name: e.target.value })}\r\n          required\r\n          disabled={readonly}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">{valueLabel}</label>\r\n        {renderValueField ? (\r\n          renderValueField(form, readonly ? () => undefined : onChange, {\r\n            readonly,\r\n          })\r\n        ) : (\r\n          <input\r\n            id=\"collection-form-value\"\r\n            name=\"collectionValue\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.value}\r\n            onChange={(e) => onChange({ ...form, value: e.target.value })}\r\n            required\r\n            disabled={readonly}\r\n          />\r\n        )}\r\n      </div>\r\n      {readonly ? (\r\n        <p className=\"rounded border border-amber-200 bg-amber-50 p-2 text-sm text-amber-900\">\r\n          {readonlyNotice ?? '    .'}\r\n        </p>\r\n      ) : null}\r\n      <div className=\"flex gap-2\">\r\n        <Button type=\"submit\" disabled={readonly}>\r\n          \r\n        </Button>\r\n        {form._id ? (\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"destructive\"\r\n            disabled={readonly}\r\n            onClick={() => {\r\n              if (readonly) return;\r\n              setConfirmDelete(true);\r\n            }}\r\n          >\r\n            \r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={onReset}\r\n            disabled={readonly}\r\n          >\r\n            \r\n          </Button>\r\n        )}\r\n      </div>\r\n      <ConfirmDialog\r\n        open={confirmSave}\r\n        message=\" ?\"\r\n        onConfirm={() => {\r\n          setConfirmSave(false);\r\n          onSubmit();\r\n        }}\r\n        onCancel={() => setConfirmSave(false)}\r\n        confirmText=\"\"\r\n      />\r\n      <ConfirmDialog\r\n        open={confirmDelete}\r\n        message=\" ?\"\r\n        onConfirm={() => {\r\n          setConfirmDelete(false);\r\n          onDelete();\r\n        }}\r\n        onCancel={() => setConfirmDelete(false)}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","// :      \r\n//  : React, ConfirmDialog, services/fleets\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport ConfirmDialog from \"../../components/ConfirmDialog\";\r\nimport type { FleetVehicleDto } from \"shared\";\r\nimport type { FleetVehiclePayload } from \"../../services/fleets\";\r\n\r\ninterface FleetVehicleDialogProps {\r\n  open: boolean;\r\n  mode: \"create\" | \"update\";\r\n  vehicle: FleetVehicleDto | null;\r\n  saving: boolean;\r\n  onSubmit: (payload: FleetVehiclePayload, id?: string) => Promise<void>;\r\n  onDelete?: (id: string) => Promise<void>;\r\n  onClose: () => void;\r\n}\r\n\r\ninterface FormState {\r\n  name: string;\r\n  registrationNumber: string;\r\n  odometerInitial: string;\r\n  odometerCurrent: string;\r\n  mileageTotal: string;\r\n  transportType: \"\" | \"\";\r\n  fuelType: \"\" | \"\" | \"\";\r\n  fuelRefilled: string;\r\n  fuelAverageConsumption: string;\r\n  fuelSpentTotal: string;\r\n  currentTasks: string;\r\n}\r\n\r\nconst emptyForm: FormState = {\r\n  name: \"\",\r\n  registrationNumber: \"\",\r\n  odometerInitial: \"0\",\r\n  odometerCurrent: \"0\",\r\n  mileageTotal: \"0\",\r\n  transportType: \"\",\r\n  fuelType: \"\",\r\n  fuelRefilled: \"0\",\r\n  fuelAverageConsumption: \"0\",\r\n  fuelSpentTotal: \"0\",\r\n  currentTasks: \"\",\r\n};\r\n\r\nconst parseTasks = (value: string): string[] =>\r\n  value\r\n    .split(/[\\n,]/)\r\n    .map((item) => item.trim())\r\n    .filter(Boolean);\r\n\r\nexport default function FleetVehicleDialog({\r\n  open,\r\n  mode,\r\n  vehicle,\r\n  saving,\r\n  onSubmit,\r\n  onDelete,\r\n  onClose,\r\n}: FleetVehicleDialogProps) {\r\n  const [form, setForm] = useState<FormState>(emptyForm);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [confirmSave, setConfirmSave] = useState(false);\r\n  const [confirmDelete, setConfirmDelete] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open && vehicle) {\r\n      const currentTasks = Array.isArray(vehicle.currentTasks)\r\n        ? vehicle.currentTasks.filter(Boolean)\r\n        : [];\r\n      setForm({\r\n        name: vehicle.name,\r\n        registrationNumber: vehicle.registrationNumber,\r\n        odometerInitial: String(vehicle.odometerInitial),\r\n        odometerCurrent: String(vehicle.odometerCurrent),\r\n        mileageTotal: String(vehicle.mileageTotal),\r\n        transportType: vehicle.transportType,\r\n        fuelType: vehicle.fuelType,\r\n        fuelRefilled: String(vehicle.fuelRefilled),\r\n        fuelAverageConsumption: String(vehicle.fuelAverageConsumption),\r\n        fuelSpentTotal: String(vehicle.fuelSpentTotal),\r\n        currentTasks: currentTasks.join(\"\\n\"),\r\n      });\r\n      setError(null);\r\n      setConfirmSave(false);\r\n      setConfirmDelete(false);\r\n      return;\r\n    }\r\n    if (open && mode === \"create\") {\r\n      setForm(emptyForm);\r\n      setError(null);\r\n      setConfirmSave(false);\r\n      setConfirmDelete(false);\r\n    }\r\n    if (!open) {\r\n      setForm(emptyForm);\r\n      setError(null);\r\n      setConfirmSave(false);\r\n      setConfirmDelete(false);\r\n    }\r\n  }, [open, mode, vehicle]);\r\n\r\n  const isUpdate = mode === \"update\" && vehicle;\r\n\r\n  const payload = useMemo(() => {\r\n    const base: FleetVehiclePayload = {\r\n      name: form.name.trim(),\r\n      registrationNumber: form.registrationNumber.trim().toUpperCase(),\r\n      odometerInitial: Number(form.odometerInitial || \"0\"),\r\n      odometerCurrent: Number(form.odometerCurrent || \"0\"),\r\n      mileageTotal: Number(form.mileageTotal || \"0\"),\r\n      transportType: form.transportType,\r\n      fuelType: form.fuelType,\r\n      fuelRefilled: Number(form.fuelRefilled || \"0\"),\r\n      fuelAverageConsumption: Number(form.fuelAverageConsumption || \"0\"),\r\n      fuelSpentTotal: Number(form.fuelSpentTotal || \"0\"),\r\n      currentTasks: parseTasks(form.currentTasks),\r\n    };\r\n    return base;\r\n  }, [form]);\r\n\r\n  const handleSubmit = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    if (!form.name.trim()) {\r\n      setError(\" \");\r\n      return;\r\n    }\r\n    if (!/^[A-Z-]{2} \\d{4} [A-Z-]{2}$/u.test(payload.registrationNumber)) {\r\n      setError(\"      XX 0000 XX\");\r\n      return;\r\n    }\r\n    setError(null);\r\n    setConfirmSave(true);\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    try {\r\n      await onSubmit(payload, vehicle?.id);\r\n      setConfirmSave(false);\r\n      onClose();\r\n    } catch (submitError) {\r\n      const message =\r\n        submitError instanceof Error\r\n          ? submitError.message\r\n          : \"   \";\r\n      setError(message);\r\n      setConfirmSave(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!vehicle || !onDelete) return;\r\n    try {\r\n      await onDelete(vehicle.id);\r\n      setConfirmDelete(false);\r\n      onClose();\r\n    } catch (deleteError) {\r\n      const message =\r\n        deleteError instanceof Error\r\n          ? deleteError.message\r\n          : \"   \";\r\n      setError(message);\r\n      setConfirmDelete(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-3\">\r\n      <div className=\"grid gap-3 md:grid-cols-2\">\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"></span>\r\n          <input\r\n            id=\"fleet-vehicle-name\"\r\n            name=\"name\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.name}\r\n            onChange={(event) => setForm((prev) => ({ ...prev, name: event.target.value }))}\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"> </span>\r\n          <input\r\n            id=\"fleet-vehicle-registration\"\r\n            name=\"registrationNumber\"\r\n            className=\"h-10 w-full rounded border px-3 uppercase\"\r\n            value={form.registrationNumber}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, registrationNumber: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n            placeholder=\"AA 1234 BB\"\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"> </span>\r\n          <select\r\n            id=\"fleet-vehicle-transport-type\"\r\n            name=\"transportType\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.transportType}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, transportType: event.target.value as FormState[\"transportType\"] }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          >\r\n            <option value=\"\"></option>\r\n            <option value=\"\"></option>\r\n          </select>\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"> , </span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-odometer-initial\"\r\n            name=\"odometerInitial\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.odometerInitial}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, odometerInitial: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"> , </span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-odometer-current\"\r\n            name=\"odometerCurrent\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.odometerCurrent}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, odometerCurrent: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"> , </span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-mileage-total\"\r\n            name=\"mileageTotal\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.mileageTotal}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, mileageTotal: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"> </span>\r\n          <select\r\n            id=\"fleet-vehicle-fuel-type\"\r\n            name=\"fuelType\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.fuelType}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, fuelType: event.target.value as FormState[\"fuelType\"] }))\r\n            }\r\n            disabled={saving}\r\n          >\r\n            <option value=\"\"></option>\r\n            <option value=\"\"></option>\r\n            <option value=\"\"></option>\r\n          </select>\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"> </span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-fuel-refilled\"\r\n            name=\"fuelRefilled\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.fuelRefilled}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, fuelRefilled: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\"> , /</span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            id=\"fleet-vehicle-fuel-average\"\r\n            name=\"fuelAverageConsumption\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.fuelAverageConsumption}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, fuelAverageConsumption: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">  , </span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-fuel-spent\"\r\n            name=\"fuelSpentTotal\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.fuelSpentTotal}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, fuelSpentTotal: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n      </div>\r\n      <label className=\"flex flex-col gap-1\">\r\n        <span className=\"text-sm font-medium\">  (ID     )</span>\r\n        <textarea\r\n          id=\"fleet-vehicle-current-tasks\"\r\n          name=\"currentTasks\"\r\n          className=\"min-h-[5rem] w-full rounded border px-3 py-2\"\r\n          value={form.currentTasks}\r\n          onChange={(event) =>\r\n            setForm((prev) => ({ ...prev, currentTasks: event.target.value }))\r\n          }\r\n          disabled={saving}\r\n        />\r\n      </label>\r\n      {error ? <p className=\"text-sm text-red-600\">{error}</p> : null}\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        <Button type=\"submit\" disabled={saving}>\r\n          \r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={onClose}\r\n          disabled={saving}\r\n        >\r\n          \r\n        </Button>\r\n        {isUpdate && onDelete ? (\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"destructive\"\r\n            onClick={() => setConfirmDelete(true)}\r\n            disabled={saving}\r\n          >\r\n            \r\n          </Button>\r\n        ) : null}\r\n      </div>\r\n      <ConfirmDialog\r\n        open={confirmSave}\r\n        message=\" ?\"\r\n        confirmText=\"\"\r\n        onConfirm={handleConfirm}\r\n        onCancel={() => setConfirmSave(false)}\r\n      />\r\n      <ConfirmDialog\r\n        open={confirmDelete}\r\n        message=\" ?\"\r\n        confirmText=\"\"\r\n        status=\"danger\"\r\n        onConfirm={handleDelete}\r\n        onCancel={() => setConfirmDelete(false)}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","//  :      \r\n//  : @tanstack/react-table, shared/types\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport type { FleetVehicleDto } from \"shared\";\r\n\r\nconst stringify = (value: unknown) => {\r\n  if (value === undefined || value === null) return \"\";\r\n  if (Array.isArray(value)) {\r\n    return value.length ? value.join(\", \") : \"\";\r\n  }\r\n  if (typeof value === \"object\") {\r\n    try {\r\n      return JSON.stringify(value);\r\n    } catch {\r\n      return String(value);\r\n    }\r\n  }\r\n  return String(value);\r\n};\r\n\r\nexport type FleetVehicleRow = FleetVehicleDto & {\r\n  transportHistoryInfo: string;\r\n};\r\n\r\nexport const fleetVehicleColumns: ColumnDef<FleetVehicleRow>[] = [\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"registrationNumber\",\r\n    header: \". \",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"odometerInitial\",\r\n    header: \" \",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"14rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"odometerCurrent\",\r\n    header: \" \",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"14rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"mileageTotal\",\r\n    header: \"\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"transportType\",\r\n    header: \" \",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"14rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"fuelType\",\r\n    header: \" \",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"fuelRefilled\",\r\n    header: \"\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"fuelAverageConsumption\",\r\n    header: \"\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"fuelSpentTotal\",\r\n    header: \"\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"currentTasks\",\r\n    header: \" \",\r\n    cell: ({ getValue }) => stringify(getValue<string[] | undefined>()),\r\n    meta: { minWidth: \"10rem\", maxWidth: \"24rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"transportHistoryInfo\",\r\n    header: \" \",\r\n    cell: ({ getValue }) => stringify(getValue<string | undefined>()),\r\n    meta: { minWidth: \"12rem\", maxWidth: \"28rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"createdAt\",\r\n    header: \"\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"updatedAt\",\r\n    header: \"\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"unitId\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"remoteName\",\r\n    header: \" \",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"notes\",\r\n    header: \"\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"20rem\" },\r\n  },\r\n];\r\n\r\n","//  :      \r\n//  : DataTable badge helpers\r\n\r\nexport const SETTINGS_BADGE_EMPTY = \" \";\r\n\r\nconst badgeBaseClass = [\r\n  \"inline-flex min-h-[1.65rem] min-w-0 max-w-full items-center justify-start gap-1\",\r\n  \"rounded-full px-2.5 py-0.5 text-[0.72rem] font-semibold leading-tight text-slate-900\",\r\n  \"ring-1 ring-slate-300/80 bg-slate-100/95 shadow-xs\",\r\n  \"dark:text-slate-100 dark:ring-slate-600/60 dark:bg-slate-800/80\",\r\n  \"truncate\",\r\n].join(\" \");\r\n\r\nexport const SETTINGS_BADGE_CLASS = `${badgeBaseClass}`;\r\n\r\nexport const SETTINGS_BADGE_WRAPPER_CLASS =\r\n  \"flex flex-wrap items-center gap-1.5\";\r\n\r\n","// :      \r\n//  : React, services/fleets, FleetVehicleDialog, Modal, DataTable\r\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport DataTable from \"../../components/DataTable\";\r\nimport Modal from \"../../components/Modal\";\r\nimport { showToast } from \"../../utils/toast\";\r\nimport {\r\n  listFleetVehicles,\r\n  createFleetVehicle,\r\n  updateFleetVehicle,\r\n  deleteFleetVehicle,\r\n  type FleetVehiclePayload,\r\n} from \"../../services/fleets\";\r\nimport type { FleetVehicleDto } from \"shared\";\r\nimport FleetVehicleDialog from \"./FleetVehicleDialog\";\r\nimport {\r\n  fleetVehicleColumns,\r\n  type FleetVehicleRow,\r\n} from \"../../columns/fleetVehicleColumns\";\r\nimport {\r\n  SETTINGS_BADGE_CLASS,\r\n  SETTINGS_BADGE_EMPTY,\r\n  SETTINGS_BADGE_WRAPPER_CLASS,\r\n} from \"./badgeStyles\";\r\n\r\nconst PAGE_LIMIT = 10;\r\n\r\nconst transportHistoryFormatter = new Intl.DateTimeFormat(\"ru-RU\", {\r\n  day: \"2-digit\",\r\n  month: \"2-digit\",\r\n  year: \"numeric\",\r\n  hour: \"2-digit\",\r\n  minute: \"2-digit\",\r\n});\r\n\r\nconst formatHistoryInstant = (value?: string): string => {\r\n  if (!value) {\r\n    return \"\";\r\n  }\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return \"\";\r\n  }\r\n  return transportHistoryFormatter.format(date);\r\n};\r\n\r\nconst buildHistoryLabel = (\r\n  entry: NonNullable<FleetVehicleDto[\"transportHistory\"]>[number],\r\n): string => {\r\n  const assigned = formatHistoryInstant(entry.assignedAt);\r\n  const removed = formatHistoryInstant(entry.removedAt);\r\n  const title = entry.taskTitle && entry.taskTitle.trim().length\r\n    ? entry.taskTitle.trim()\r\n    : entry.taskId;\r\n  if (assigned && removed) {\r\n    return `${assigned}  ${title} ( ${removed})`;\r\n  }\r\n  if (assigned) {\r\n    return `${assigned}  ${title}`;\r\n  }\r\n  if (removed) {\r\n    return `${title} ( ${removed})`;\r\n  }\r\n  return title;\r\n};\r\n\r\nconst formatTransportHistory = (\r\n  history?: FleetVehicleDto[\"transportHistory\"],\r\n): string => {\r\n  if (!history?.length) {\r\n    return \"\";\r\n  }\r\n  return history.map(buildHistoryLabel).join(\"; \");\r\n};\r\n\r\ntype VehicleCardField = {\r\n  id: string;\r\n  label: string;\r\n  render: (vehicle: FleetVehicleDto) => React.ReactNode;\r\n};\r\n\r\nconst vehicleCardFields: VehicleCardField[] = [\r\n  {\r\n    id: \"id\",\r\n    label: \"ID\",\r\n    render: (vehicle) => vehicle.id,\r\n  },\r\n  {\r\n    id: \"name\",\r\n    label: \"\",\r\n    render: (vehicle) => vehicle.name,\r\n  },\r\n  {\r\n    id: \"registrationNumber\",\r\n    label: \" \",\r\n    render: (vehicle) => vehicle.registrationNumber,\r\n  },\r\n  {\r\n    id: \"odometerInitial\",\r\n    label: \" \",\r\n    render: (vehicle) => vehicle.odometerInitial,\r\n  },\r\n  {\r\n    id: \"odometerCurrent\",\r\n    label: \" \",\r\n    render: (vehicle) => vehicle.odometerCurrent,\r\n  },\r\n  {\r\n    id: \"mileageTotal\",\r\n    label: \"\",\r\n    render: (vehicle) => vehicle.mileageTotal,\r\n  },\r\n  {\r\n    id: \"transportType\",\r\n    label: \" \",\r\n    render: (vehicle) => vehicle.transportType,\r\n  },\r\n  {\r\n    id: \"fuelType\",\r\n    label: \" \",\r\n    render: (vehicle) => vehicle.fuelType,\r\n  },\r\n  {\r\n    id: \"fuelRefilled\",\r\n    label: \"\",\r\n    render: (vehicle) => vehicle.fuelRefilled,\r\n  },\r\n  {\r\n    id: \"fuelAverageConsumption\",\r\n    label: \"\",\r\n    render: (vehicle) => vehicle.fuelAverageConsumption,\r\n  },\r\n  {\r\n    id: \"fuelSpentTotal\",\r\n    label: \"\",\r\n    render: (vehicle) => vehicle.fuelSpentTotal,\r\n  },\r\n  {\r\n    id: \"currentTasks\",\r\n    label: \"\",\r\n    render: (vehicle) =>\r\n      vehicle.currentTasks.length ? vehicle.currentTasks.join(\", \") : \"\",\r\n  },\r\n  {\r\n    id: \"transportHistory\",\r\n    label: \" \",\r\n    render: (vehicle) =>\r\n      vehicle.transportHistory?.length ? (\r\n        <ul className=\"space-y-1 text-sm\">\r\n          {vehicle.transportHistory.map((entry) => (\r\n            <li\r\n              key={`${entry.taskId}-${entry.assignedAt}`}\r\n              className=\"leading-snug\"\r\n            >\r\n              {buildHistoryLabel(entry)}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        \"\"\r\n      ),\r\n  },\r\n  {\r\n    id: \"createdAt\",\r\n    label: \"\",\r\n    render: (vehicle) => vehicle.createdAt || \"\",\r\n  },\r\n  {\r\n    id: \"updatedAt\",\r\n    label: \"\",\r\n    render: (vehicle) => vehicle.updatedAt || \"\",\r\n  },\r\n  {\r\n    id: \"unitId\",\r\n    label: \"\",\r\n    render: (vehicle) =>\r\n      vehicle.unitId !== undefined && vehicle.unitId !== null\r\n        ? vehicle.unitId\r\n        : \"\",\r\n  },\r\n  {\r\n    id: \"remoteName\",\r\n    label: \" \",\r\n    render: (vehicle) => vehicle.remoteName || \"\",\r\n  },\r\n  {\r\n    id: \"notes\",\r\n    label: \"\",\r\n    render: (vehicle) => vehicle.notes || \"\",\r\n  },\r\n];\r\n\r\nexport default function FleetVehiclesTab() {\r\n  const [items, setItems] = useState<FleetVehicleDto[]>([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [appliedSearch, setAppliedSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [mode, setMode] = useState<\"create\" | \"update\">(\"create\");\r\n  const [saving, setSaving] = useState(false);\r\n  const [selectedVehicle, setSelectedVehicle] = useState<FleetVehicleDto | null>(\r\n    null,\r\n  );\r\n\r\n  const totalPages = useMemo(() => Math.max(1, Math.ceil(total / PAGE_LIMIT)), [total]);\r\n  const rows = useMemo<FleetVehicleRow[]>(\r\n    () =>\r\n      items.map((item) => ({\r\n        ...item,\r\n        transportHistoryInfo: formatTransportHistory(item.transportHistory),\r\n      })),\r\n    [items],\r\n  );\r\n\r\n  const badgeClassName = useMemo(\r\n    () => `${SETTINGS_BADGE_CLASS} whitespace-nowrap sm:text-sm`,\r\n    [],\r\n  );\r\n  const badgeWrapperClassName = useMemo(\r\n    () => `${SETTINGS_BADGE_WRAPPER_CLASS} justify-start`,\r\n    [],\r\n  );\r\n\r\n  const load = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      const data = await listFleetVehicles(appliedSearch, page, PAGE_LIMIT);\r\n      setItems(data.items);\r\n      setTotal(data.total);\r\n    } catch (loadError) {\r\n      const message =\r\n        loadError instanceof Error ? loadError.message : \"   \";\r\n      setError(message);\r\n      setItems([]);\r\n      setTotal(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [appliedSearch, page]);\r\n\r\n  useEffect(() => {\r\n    void load();\r\n  }, [load]);\r\n\r\n  const openCreate = () => {\r\n    setMode(\"create\");\r\n    setSelectedVehicle(null);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const openEdit = (item: FleetVehicleDto) => {\r\n    setMode(\"update\");\r\n    setSelectedVehicle(item);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    if (saving) return;\r\n    setModalOpen(false);\r\n    setSelectedVehicle(null);\r\n  };\r\n\r\n  const submit = async (payload: FleetVehiclePayload, id?: string) => {\r\n    setSaving(true);\r\n    try {\r\n      if (mode === \"create\" || !id) {\r\n        await createFleetVehicle(payload);\r\n        showToast(\" \", \"success\");\r\n      } else {\r\n        await updateFleetVehicle(id, payload);\r\n        showToast(\" \", \"success\");\r\n      }\r\n      await load();\r\n      setSelectedVehicle(null);\r\n      setModalOpen(false);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const remove = async (id: string) => {\r\n    setSaving(true);\r\n    try {\r\n      await deleteFleetVehicle(id);\r\n      showToast(\" \", \"success\");\r\n      await load();\r\n      setSelectedVehicle(null);\r\n      setModalOpen(false);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchSubmit = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    setPage(1);\r\n    setAppliedSearch(search.trim());\r\n  };\r\n\r\n  const handlePageChange = (next: number) => {\r\n    if (next < 1 || next > totalPages) return;\r\n    setPage(next);\r\n  };\r\n\r\n  return (\r\n    <section className=\"space-y-4\">\r\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-start sm:gap-3 lg:items-center lg:gap-3\">\r\n        <form\r\n          onSubmit={handleSearchSubmit}\r\n          className=\"mt-2 flex w-full flex-col gap-2 sm:flex-row sm:flex-wrap sm:items-center sm:gap-2 lg:grid lg:flex-1 lg:grid-cols-[minmax(0,18rem)_auto] lg:items-center lg:gap-3\"\r\n        >\r\n          <label className=\"flex w-full flex-col gap-1 sm:w-64 lg:w-full lg:min-w-0\">\r\n            <span className=\"text-sm font-medium\"></span>\r\n            <input\r\n              id=\"fleet-vehicles-search\"\r\n              name=\"fleetVehicleSearch\"\r\n              className=\"h-10 w-full rounded border px-3 text-sm lg:h-9 lg:text-xs\"\r\n              value={search}\r\n              onChange={(event) => setSearch(event.target.value)}\r\n              placeholder=\"  \"\r\n            />\r\n          </label>\r\n          <Button\r\n            type=\"submit\"\r\n            className=\"h-10 w-full max-w-[11rem] px-3 text-sm font-semibold sm:h-10 sm:w-auto sm:px-3 lg:h-8 lg:text-xs\"\r\n          >\r\n            \r\n          </Button>\r\n        </form>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"success\"\r\n          className=\"h-10 w-full max-w-[11rem] px-3 text-sm font-semibold sm:w-auto lg:h-8 lg:text-xs\"\r\n          onClick={openCreate}\r\n        >\r\n          \r\n        </Button>\r\n      </div>\r\n      {loading ? <p className=\"text-sm text-gray-500\"> </p> : null}\r\n      {error ? (\r\n        <p className=\"rounded border border-red-200 bg-red-50 p-3 text-sm text-red-700\">{error}</p>\r\n      ) : null}\r\n      {!loading && !error && !items.length ? (\r\n        <p className=\"text-sm text-gray-500\">  .</p>\r\n      ) : null}\r\n      <DataTable\r\n        columns={fleetVehicleColumns}\r\n        data={rows}\r\n        pageIndex={page - 1}\r\n        pageSize={PAGE_LIMIT}\r\n        pageCount={totalPages}\r\n        onPageChange={(index) => handlePageChange(index + 1)}\r\n        showGlobalSearch={false}\r\n        showFilters={false}\r\n        onRowClick={(row) => openEdit(row)}\r\n        wrapCellsAsBadges\r\n        badgeClassName={badgeClassName}\r\n        badgeWrapperClassName={badgeWrapperClassName}\r\n        badgeEmptyPlaceholder={SETTINGS_BADGE_EMPTY}\r\n      />\r\n      <Modal\r\n        open={modalOpen}\r\n        onClose={closeModal}\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {selectedVehicle ? (\r\n            <article className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm\">\r\n              <h3 className=\"text-base font-semibold\"> </h3>\r\n              <dl className=\"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2\">\r\n                {vehicleCardFields.map(({ id, label, render }) => (\r\n                  <div key={id}>\r\n                    <dt className=\"font-medium text-slate-500\">{label}</dt>\r\n                    <dd className=\"text-slate-900\">{render(selectedVehicle)}</dd>\r\n                  </div>\r\n                ))}\r\n              </dl>\r\n            </article>\r\n          ) : null}\r\n          <FleetVehicleDialog\r\n            open={modalOpen}\r\n            mode={mode}\r\n            vehicle={selectedVehicle}\r\n            saving={saving}\r\n            onSubmit={submit}\r\n            onDelete={mode === \"update\" ? remove : undefined}\r\n            onClose={closeModal}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    </section>\r\n  );\r\n}\r\n","//  :      .\r\n//  : React, Spinner, Button, Input.\r\n\r\nimport React from \"react\";\r\n\r\nimport Spinner from \"../../components/Spinner\";\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { Input } from \"../../components/ui/input\";\r\nimport type { CollectionItem } from \"../../services/collections\";\r\n\r\ntype TaskFieldItem = CollectionItem & {\r\n  meta?: CollectionItem[\"meta\"] & {\r\n    defaultLabel?: string;\r\n    fieldType?: string;\r\n    required?: boolean;\r\n    order?: number;\r\n    virtual?: boolean;\r\n  };\r\n};\r\n\r\ntype TaskTypeItem = CollectionItem & {\r\n  meta?: CollectionItem[\"meta\"] & {\r\n    defaultLabel?: string;\r\n    order?: number;\r\n    virtual?: boolean;\r\n    tg_theme_url?: string;\r\n    tg_chat_id?: string;\r\n    tg_topic_id?: number;\r\n    tg_photos_url?: string;\r\n    tg_photos_chat_id?: string;\r\n    tg_photos_topic_id?: number;\r\n  };\r\n};\r\n\r\ninterface TaskSettingsTabProps {\r\n  fields: TaskFieldItem[];\r\n  types: TaskTypeItem[];\r\n  loading: boolean;\r\n  onSaveField: (item: TaskFieldItem, label: string) => Promise<void>;\r\n  onDeleteField: (item: TaskFieldItem) => Promise<void>;\r\n  onSaveType: (\r\n    item: TaskTypeItem,\r\n    payload: { label: string; tg_theme_url: string; tg_photos_url: string },\r\n  ) => Promise<void>;\r\n  onDeleteType: (item: TaskTypeItem) => Promise<void>;\r\n}\r\n\r\nconst CARD_CLASS =\r\n  \"rounded-lg border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\";\r\n\r\nconst SECTION_GAP = \"space-y-4\";\r\n\r\nconst FieldCard: React.FC<{\r\n  item: TaskFieldItem;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSave: () => Promise<void>;\r\n  onReset: () => void;\r\n  onDelete?: () => Promise<void>;\r\n  saving: boolean;\r\n  deleting?: boolean;\r\n  error?: string;\r\n}> = ({\r\n  item,\r\n  value,\r\n  onChange,\r\n  onSave,\r\n  onReset,\r\n  onDelete,\r\n  saving,\r\n  deleting,\r\n  error,\r\n}) => {\r\n  const [localError, setLocalError] = React.useState<string | undefined>(\r\n    error,\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    setLocalError(error);\r\n  }, [error]);\r\n\r\n  const defaultLabel = item.meta?.defaultLabel ?? item.name;\r\n  const storedLabel = item.value?.trim() || defaultLabel;\r\n  const trimmedValue = value.trim();\r\n  const dirty = trimmedValue !== storedLabel;\r\n\r\n  const handleSave = async () => {\r\n    setLocalError(undefined);\r\n    try {\r\n      await onSave();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setLocalError(message);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setLocalError(undefined);\r\n    onReset();\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!onDelete) return;\r\n    setLocalError(undefined);\r\n    try {\r\n      await onDelete();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setLocalError(message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <article className={CARD_CLASS}>\r\n      <div className=\"flex flex-col gap-2\">\r\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n          <div>\r\n            <h4 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\r\n              {defaultLabel}\r\n              {item.meta?.required ? \" *\" : \"\"}\r\n            </h4>\r\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n              : <span className=\"font-mono\">{item.name}</span>\r\n              {item.meta?.fieldType ? `  : ${item.meta.fieldType}` : \"\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n             \r\n          </span>\r\n          <Input\r\n            value={value}\r\n            onChange={(event) => onChange(event.target.value)}\r\n            placeholder={defaultLabel}\r\n            aria-label={`  ${defaultLabel}`}\r\n          />\r\n        </label>\r\n        {localError ? (\r\n          <p className=\"text-sm text-rose-600\" role=\"alert\">\r\n            {localError}\r\n          </p>\r\n        ) : null}\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <Button\r\n            type=\"button\"\r\n            size=\"sm\"\r\n            onClick={handleSave}\r\n            disabled={saving || deleting || !dirty || !trimmedValue}\r\n          >\r\n            {saving ? <Spinner /> : \"\"}\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            onClick={handleReset}\r\n            disabled={saving || deleting}\r\n          >\r\n            \r\n          </Button>\r\n          {onDelete && !item.meta?.virtual ? (\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant=\"destructive\"\r\n              onClick={handleDelete}\r\n              disabled={saving || deleting}\r\n            >\r\n              {deleting ? <Spinner /> : \"\"}\r\n            </Button>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nconst TypeCard: React.FC<{\r\n  item: TaskTypeItem;\r\n  label: string;\r\n  url: string;\r\n  photosUrl: string;\r\n  onChangeLabel: (value: string) => void;\r\n  onChangeUrl: (value: string) => void;\r\n  onChangePhotosUrl: (value: string) => void;\r\n  onSave: () => Promise<void>;\r\n  onReset: () => void;\r\n  onDelete?: () => Promise<void>;\r\n  saving: boolean;\r\n  deleting?: boolean;\r\n  error?: string;\r\n}> = ({\r\n  item,\r\n  label,\r\n  url,\r\n  photosUrl,\r\n  onChangeLabel,\r\n  onChangeUrl,\r\n  onChangePhotosUrl,\r\n  onSave,\r\n  onReset,\r\n  onDelete,\r\n  saving,\r\n  deleting,\r\n  error,\r\n}) => {\r\n  const [localError, setLocalError] = React.useState<string | undefined>(\r\n    error,\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    setLocalError(error);\r\n  }, [error]);\r\n\r\n  const defaultLabel = item.meta?.defaultLabel ?? item.name;\r\n  const storedLabel = item.value?.trim() || defaultLabel;\r\n  const storedUrl = typeof item.meta?.tg_theme_url === \"string\"\r\n    ? item.meta.tg_theme_url\r\n    : \"\";\r\n  const storedPhotosUrl =\r\n    typeof item.meta?.tg_photos_url === \"string\"\r\n      ? item.meta.tg_photos_url\r\n      : \"\";\r\n  const trimmedLabel = label.trim();\r\n  const trimmedUrl = url.trim();\r\n  const trimmedPhotosUrl = photosUrl.trim();\r\n  const dirty =\r\n    trimmedLabel !== storedLabel ||\r\n    trimmedUrl !== (storedUrl || \"\") ||\r\n    trimmedPhotosUrl !== (storedPhotosUrl || \"\");\r\n\r\n  const handleSave = async () => {\r\n    setLocalError(undefined);\r\n    try {\r\n      await onSave();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setLocalError(message);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setLocalError(undefined);\r\n    onReset();\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!onDelete) return;\r\n    setLocalError(undefined);\r\n    try {\r\n      await onDelete();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setLocalError(message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <article className={CARD_CLASS}>\r\n      <div className=\"flex flex-col gap-2\">\r\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n          <div>\r\n            <h4 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\r\n              {defaultLabel}\r\n            </h4>\r\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n               : <span className=\"font-mono\">{item.name}</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"grid gap-3 sm:grid-cols-2\">\r\n          <label className=\"flex flex-col gap-1\">\r\n            <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n               \r\n            </span>\r\n            <Input\r\n              value={label}\r\n              onChange={(event) => onChangeLabel(event.target.value)}\r\n              placeholder={defaultLabel}\r\n              aria-label={`  ${defaultLabel}`}\r\n            />\r\n          </label>\r\n          <label className=\"flex flex-col gap-1\">\r\n            <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n                 Telegram\r\n            </span>\r\n            <Input\r\n              value={url}\r\n              onChange={(event) => onChangeUrl(event.target.value)}\r\n              placeholder=\"https://t.me/c/...\"\r\n              aria-label={`    ${defaultLabel}`}\r\n            />\r\n          </label>\r\n          <label className=\"flex flex-col gap-1\">\r\n            <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n                \r\n            </span>\r\n            <Input\r\n              value={photosUrl}\r\n              onChange={(event) => onChangePhotosUrl(event.target.value)}\r\n              placeholder=\"https://t.me/c/...\"\r\n              aria-label={`    ${defaultLabel}`}\r\n            />\r\n          </label>\r\n        </div>\r\n        {item.meta?.tg_chat_id ? (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            : {item.meta.tg_chat_id}\r\n          </p>\r\n        ) : null}\r\n        {item.meta?.tg_topic_id ? (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            : {item.meta.tg_topic_id}\r\n          </p>\r\n        ) : null}\r\n        {item.meta?.tg_photos_chat_id ? (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n             : {item.meta.tg_photos_chat_id}\r\n          </p>\r\n        ) : null}\r\n        {item.meta?.tg_photos_topic_id ? (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n             : {item.meta.tg_photos_topic_id}\r\n          </p>\r\n        ) : null}\r\n        {localError ? (\r\n          <p className=\"text-sm text-rose-600\" role=\"alert\">\r\n            {localError}\r\n          </p>\r\n        ) : null}\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <Button\r\n            type=\"button\"\r\n            size=\"sm\"\r\n            onClick={handleSave}\r\n            disabled={saving || deleting || !trimmedLabel || !dirty}\r\n          >\r\n            {saving ? <Spinner /> : \"\"}\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            onClick={handleReset}\r\n            disabled={saving || deleting}\r\n          >\r\n            \r\n          </Button>\r\n          {onDelete && !item.meta?.virtual ? (\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant=\"destructive\"\r\n              onClick={handleDelete}\r\n              disabled={saving || deleting}\r\n            >\r\n              {deleting ? <Spinner /> : \"\"}\r\n            </Button>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nconst sortByOrder = <T extends { meta?: { order?: number } }>(items: T[]): T[] =>\r\n  [...items].sort((a, b) => {\r\n    const left = typeof a.meta?.order === \"number\" ? a.meta.order : 0;\r\n    const right = typeof b.meta?.order === \"number\" ? b.meta.order : 0;\r\n    return left - right;\r\n  });\r\n\r\nconst useDraftMap = <TItem extends CollectionItem, TDraft>(\r\n  items: TItem[],\r\n  selector: (item: TItem) => TDraft,\r\n) => {\r\n  const [draft, setDraft] = React.useState<Record<string, TDraft>>({});\r\n\r\n  React.useEffect(() => {\r\n    setDraft((prev) => {\r\n      let changed = false;\r\n      const next: Record<string, TDraft> = { ...prev };\r\n      const itemNames = new Set(items.map((item) => item.name));\r\n\r\n      items.forEach((item) => {\r\n        const key = item.name;\r\n        if (!(key in prev)) {\r\n          next[key] = selector(item);\r\n          changed = true;\r\n        }\r\n      });\r\n\r\n      Object.keys(prev).forEach((key) => {\r\n        if (!itemNames.has(key)) {\r\n          delete next[key];\r\n          changed = true;\r\n        }\r\n      });\r\n\r\n      return changed ? next : prev;\r\n    });\r\n  }, [items, selector]);\r\n\r\n  return [draft, setDraft] as const;\r\n};\r\n\r\nconst TaskSettingsTab: React.FC<TaskSettingsTabProps> = ({\r\n  fields,\r\n  types,\r\n  loading,\r\n  onSaveField,\r\n  onDeleteField,\r\n  onSaveType,\r\n  onDeleteType,\r\n}) => {\r\n  const selectFieldDraft = React.useCallback(\r\n    (item: TaskFieldItem) =>\r\n      item.value?.trim() || item.meta?.defaultLabel || item.name,\r\n    [],\r\n  );\r\n  const selectTypeDraft = React.useCallback(\r\n    (item: TaskTypeItem) => ({\r\n      label: item.value?.trim() || item.meta?.defaultLabel || item.name,\r\n      url:\r\n        typeof item.meta?.tg_theme_url === \"string\"\r\n          ? item.meta.tg_theme_url\r\n          : \"\",\r\n      photosUrl:\r\n        typeof item.meta?.tg_photos_url === \"string\"\r\n          ? item.meta.tg_photos_url\r\n          : \"\",\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const [fieldDrafts, setFieldDrafts] = useDraftMap(fields, selectFieldDraft);\r\n  const [typeDrafts, setTypeDrafts] = useDraftMap(types, selectTypeDraft);\r\n  const [savingField, setSavingField] = React.useState<string | null>(null);\r\n  const [savingType, setSavingType] = React.useState<string | null>(null);\r\n  const [deletingField, setDeletingField] = React.useState<string | null>(null);\r\n  const [deletingType, setDeletingType] = React.useState<string | null>(null);\r\n  const [fieldErrors, setFieldErrors] = React.useState<Record<string, string>>({});\r\n  const [typeErrors, setTypeErrors] = React.useState<Record<string, string>>({});\r\n\r\n  const sortedFields = React.useMemo(() => sortByOrder(fields), [fields]);\r\n  const sortedTypes = React.useMemo(() => sortByOrder(types), [types]);\r\n\r\n  const handleFieldChange = (name: string, value: string) => {\r\n    setFieldDrafts((prev) => ({ ...prev, [name]: value }));\r\n    setFieldErrors((prev) => ({ ...prev, [name]: \"\" }));\r\n  };\r\n\r\n  const handleTypeChange = (\r\n    name: string,\r\n    patch: Partial<{ label: string; url: string; photosUrl: string }>,\r\n  ) => {\r\n    setTypeDrafts((prev) => ({\r\n      ...prev,\r\n      [name]: {\r\n        label: prev[name]?.label ?? \"\",\r\n        url: prev[name]?.url ?? \"\",\r\n        photosUrl: prev[name]?.photosUrl ?? \"\",\r\n        ...patch,\r\n      },\r\n    }));\r\n    setTypeErrors((prev) => ({ ...prev, [name]: \"\" }));\r\n  };\r\n\r\n  const saveField = async (item: TaskFieldItem) => {\r\n    const value = fieldDrafts[item.name] ?? \"\";\r\n    setSavingField(item.name);\r\n    setFieldErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n    try {\r\n      await onSaveField(item, value);\r\n      setFieldDrafts((prev) => ({\r\n        ...prev,\r\n        [item.name]: value,\r\n      }));\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setFieldErrors((prev) => ({ ...prev, [item.name]: message }));\r\n      throw err;\r\n    } finally {\r\n      setSavingField((prev) => (prev === item.name ? null : prev));\r\n    }\r\n  };\r\n\r\n  const deleteField = async (item: TaskFieldItem) => {\r\n    if (item.meta?.virtual) {\r\n      return;\r\n    }\r\n    setDeletingField(item.name);\r\n    setFieldErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n    try {\r\n      await onDeleteField(item);\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setFieldErrors((prev) => ({ ...prev, [item.name]: message }));\r\n      throw err;\r\n    } finally {\r\n      setDeletingField((prev) => (prev === item.name ? null : prev));\r\n    }\r\n  };\r\n\r\n  const revertFieldDraft = (item: TaskFieldItem) => {\r\n    setFieldDrafts((prev) => ({\r\n      ...prev,\r\n      [item.name]: selectFieldDraft(item),\r\n    }));\r\n    setFieldErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n  };\r\n\r\n  const saveType = async (item: TaskTypeItem) => {\r\n    const draft = typeDrafts[item.name] ?? {\r\n      label: \"\",\r\n      url: \"\",\r\n      photosUrl: \"\",\r\n    };\r\n    setSavingType(item.name);\r\n    setTypeErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n    try {\r\n      await onSaveType(item, {\r\n        label: draft.label,\r\n        tg_theme_url: draft.url,\r\n        tg_photos_url: draft.photosUrl,\r\n      });\r\n      setTypeDrafts((prev) => ({\r\n        ...prev,\r\n        [item.name]: {\r\n          label: draft.label,\r\n          url: draft.url,\r\n          photosUrl: draft.photosUrl,\r\n        },\r\n      }));\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setTypeErrors((prev) => ({ ...prev, [item.name]: message }));\r\n      throw err;\r\n    } finally {\r\n      setSavingType((prev) => (prev === item.name ? null : prev));\r\n    }\r\n  };\r\n\r\n  const deleteType = async (item: TaskTypeItem) => {\r\n    if (item.meta?.virtual) {\r\n      return;\r\n    }\r\n    setDeletingType(item.name);\r\n    setTypeErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n    try {\r\n      await onDeleteType(item);\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setTypeErrors((prev) => ({ ...prev, [item.name]: message }));\r\n      throw err;\r\n    } finally {\r\n      setDeletingType((prev) => (prev === item.name ? null : prev));\r\n    }\r\n  };\r\n\r\n  const revertTypeDraft = (item: TaskTypeItem) => {\r\n    setTypeDrafts((prev) => ({\r\n      ...prev,\r\n      [item.name]: selectTypeDraft(item),\r\n    }));\r\n    setTypeErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <section className={SECTION_GAP}>\r\n        <header className=\"space-y-1\">\r\n          <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\r\n             \r\n          </h3>\r\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n              ,     \r\n            .\r\n          </p>\r\n        </header>\r\n        {loading && !sortedFields.length ? (\r\n          <div className=\"flex items-center justify-center py-6\">\r\n            <Spinner />\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-4 lg:grid-cols-2\">\r\n            {sortedFields.map((item) => (\r\n              <FieldCard\r\n                key={item._id}\r\n                item={item}\r\n                value={fieldDrafts[item.name] ?? \"\"}\r\n                onChange={(value) => handleFieldChange(item.name, value)}\r\n                onSave={() => saveField(item)}\r\n                onReset={() => revertFieldDraft(item)}\r\n                onDelete={\r\n                  item.meta?.virtual ? undefined : () => deleteField(item)\r\n                }\r\n                saving={savingField === item.name}\r\n                deleting={deletingField === item.name}\r\n                error={fieldErrors[item.name]}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </section>\r\n      <section className={SECTION_GAP}>\r\n        <header className=\"space-y-1\">\r\n          <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\r\n                Telegram\r\n          </h3>\r\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n                   ,\r\n               Telegram      .\r\n          </p>\r\n        </header>\r\n        {loading && !sortedTypes.length ? (\r\n          <div className=\"flex items-center justify-center py-6\">\r\n            <Spinner />\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-4 lg:grid-cols-2\">\r\n            {sortedTypes.map((item) => (\r\n              <TypeCard\r\n                key={item._id}\r\n                item={item}\r\n                label={typeDrafts[item.name]?.label ?? \"\"}\r\n                url={typeDrafts[item.name]?.url ?? \"\"}\r\n                photosUrl={typeDrafts[item.name]?.photosUrl ?? \"\"}\r\n                onChangeLabel={(value) =>\r\n                  handleTypeChange(item.name, { label: value })\r\n                }\r\n                onChangeUrl={(value) =>\r\n                  handleTypeChange(item.name, { url: value })\r\n                }\r\n                onChangePhotosUrl={(value) =>\r\n                  handleTypeChange(item.name, { photosUrl: value })\r\n                }\r\n                onSave={() => saveType(item)}\r\n                onReset={() => revertTypeDraft(item)}\r\n                onDelete={\r\n                  item.meta?.virtual ? undefined : () => deleteType(item)\r\n                }\r\n                saving={savingType === item.name}\r\n                deleting={deletingType === item.name}\r\n                error={typeErrors[item.name]}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskSettingsTab;\r\n","// : HTTP-   .\r\n//  : authFetch, shared\r\n\r\nimport type {\r\n  RoutePlanAnalyticsSummary,\r\n  RoutePlanStatus,\r\n} from \"shared\";\r\nimport authFetch from \"../utils/authFetch\";\r\n\r\nexport interface RoutePlanAnalyticsParams {\r\n  from?: string;\r\n  to?: string;\r\n  status?: RoutePlanStatus;\r\n}\r\n\r\nexport async function fetchRoutePlanAnalytics(\r\n  params: RoutePlanAnalyticsParams = {},\r\n): Promise<RoutePlanAnalyticsSummary> {\r\n  const search = new URLSearchParams();\r\n  if (params.from) search.set(\"from\", params.from);\r\n  if (params.to) search.set(\"to\", params.to);\r\n  if (params.status) search.set(\"status\", params.status);\r\n  const query = search.toString();\r\n  const response = await authFetch(\r\n    `/api/v1/analytics/route-plans/summary${query ? `?${query}` : \"\"}`,\r\n  );\r\n  if (!response.ok) {\r\n    throw new Error(\"     \");\r\n  }\r\n  return (await response.json()) as RoutePlanAnalyticsSummary;\r\n}\r\n\r\nexport default { fetchRoutePlanAnalytics };\r\n","// :        .\r\n//  : React, react-apexcharts, services/analytics\r\n\r\nimport React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport type {\r\n  RoutePlanAnalyticsSummary,\r\n  RoutePlanStatus,\r\n} from \"shared\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { fetchRoutePlanAnalytics } from \"../services/analytics\";\r\n\r\nconst ReactApexChart = React.lazy(() => import(\"react-apexcharts\"));\r\n\r\nconst DAY_MS = 24 * 60 * 60 * 1000;\r\n\r\nconst toDateInput = (date: Date): string => {\r\n  const iso = new Date(date.getTime() - date.getTimezoneOffset() * 60000)\r\n    .toISOString()\r\n    .slice(0, 10);\r\n  return iso;\r\n};\r\n\r\nconst defaultTo = toDateInput(new Date());\r\nconst defaultFrom = toDateInput(new Date(Date.now() - (DAY_MS * 29)));\r\n\r\ntype DashboardFilters = {\r\n  from: string;\r\n  to: string;\r\n  status: RoutePlanStatus | \"all\";\r\n};\r\n\r\nconst statusOptions: Array<{ value: RoutePlanStatus | \"all\"; label: string }> = [\r\n  { value: \"all\", label: \" \" },\r\n  { value: \"draft\", label: \"\" },\r\n  { value: \"approved\", label: \"\" },\r\n  { value: \"completed\", label: \"\" },\r\n];\r\n\r\nconst percentFormatter = new Intl.NumberFormat(\"ru-RU\", {\r\n  style: \"percent\",\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 1,\r\n});\r\n\r\nconst numberFormatter = new Intl.NumberFormat(\"ru-RU\", {\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 1,\r\n});\r\n\r\nconst loadFormatter = new Intl.NumberFormat(\"ru-RU\", {\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\nconst ensureParams = (filters: DashboardFilters) => {\r\n  const params: Record<string, string> = {};\r\n  if (filters.from) params.from = filters.from;\r\n  if (filters.to) params.to = filters.to;\r\n  if (filters.status !== \"all\") params.status = filters.status;\r\n  return params;\r\n};\r\n\r\nconst mapMileageSeries = (data?: RoutePlanAnalyticsSummary | null) =>\r\n  data?.mileage.byPeriod.map((point) => ({\r\n    x: point.date,\r\n    y: typeof point.value === \"number\" ? point.value : 0,\r\n  })) ?? [];\r\n\r\nconst mapLoadSeries = (data?: RoutePlanAnalyticsSummary | null) =>\r\n  data?.load.byPeriod.map((point) => ({\r\n    x: point.date,\r\n    y: typeof point.value === \"number\" ? point.value : null,\r\n  })) ?? [];\r\n\r\nconst mapSlaSeries = (data?: RoutePlanAnalyticsSummary | null) =>\r\n  data?.sla.byPeriod.map((point) => ({\r\n    x: point.date,\r\n    y:\r\n      typeof point.rate === \"number\"\r\n        ? Number((point.rate * 100).toFixed(2))\r\n        : null,\r\n  })) ?? [];\r\n\r\nexport default function AnalyticsDashboard(): React.ReactElement {\r\n  const { t } = useTranslation();\r\n  const [filters, setFilters] = React.useState<DashboardFilters>({\r\n    from: defaultFrom,\r\n    to: defaultTo,\r\n    status: \"completed\",\r\n  });\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState<string | null>(null);\r\n  const [summary, setSummary] = React.useState<RoutePlanAnalyticsSummary | null>(\r\n    null,\r\n  );\r\n\r\n  const loadData = React.useCallback(async (params: DashboardFilters) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetchRoutePlanAnalytics(ensureParams(params));\r\n      setSummary(response);\r\n    } catch (err) {\r\n      console.error(\"     \", err);\r\n      setError(t(\"analytics.loadError\"));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [t]);\r\n\r\n  React.useEffect(() => {\r\n    void loadData(filters);\r\n  }, [filters, loadData]);\r\n\r\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const form = new FormData(event.currentTarget);\r\n    const nextFilters: DashboardFilters = {\r\n      from: String(form.get(\"from\") || \"\"),\r\n      to: String(form.get(\"to\") || \"\"),\r\n      status: (form.get(\"status\") as DashboardFilters[\"status\"]) || \"all\",\r\n    };\r\n    setFilters(nextFilters);\r\n  };\r\n\r\n  const handleReset = () => {\r\n    const initial: DashboardFilters = {\r\n      from: defaultFrom,\r\n      to: defaultTo,\r\n      status: \"completed\",\r\n    };\r\n    setFilters(initial);\r\n  };\r\n\r\n  const mileageSeries = React.useMemo(() => mapMileageSeries(summary), [summary]);\r\n  const loadSeries = React.useMemo(() => mapLoadSeries(summary), [summary]);\r\n  const slaSeries = React.useMemo(() => mapSlaSeries(summary), [summary]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-3\">\r\n        <h1 className=\"text-2xl font-semibold\">{t(\"analytics.title\")}</h1>\r\n        <p className=\"text-sm text-slate-600 dark:text-slate-300\">\r\n          {t(\"analytics.description\")}\r\n        </p>\r\n      </div>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"flex flex-wrap items-end gap-3 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\"\r\n      >\r\n        <label className=\"flex flex-col text-sm text-slate-700 dark:text-slate-200\">\r\n          {t(\"analytics.filters.from\")}\r\n          <Input type=\"date\" name=\"from\" defaultValue={filters.from} />\r\n        </label>\r\n        <label className=\"flex flex-col text-sm text-slate-700 dark:text-slate-200\">\r\n          {t(\"analytics.filters.to\")}\r\n          <Input type=\"date\" name=\"to\" defaultValue={filters.to} />\r\n        </label>\r\n        <label className=\"flex flex-col text-sm text-slate-700 dark:text-slate-200\">\r\n          {t(\"analytics.filters.status\")}\r\n          <select\r\n            name=\"status\"\r\n            defaultValue={filters.status}\r\n            className=\"mt-1 w-48 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-primary/60 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100\"\r\n          >\r\n            {statusOptions.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {t(`analytics.status.${option.value}`)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <Button type=\"submit\" disabled={loading}>\r\n            {loading ? t(\"analytics.loading\") : t(\"analytics.apply\")}\r\n          </Button>\r\n          <Button type=\"button\" variant=\"outline\" onClick={handleReset}>\r\n            {t(\"analytics.reset\")}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      {error ? (\r\n        <div className=\"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-600 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200\">\r\n          {error}\r\n        </div>\r\n      ) : null}\r\n      <section className=\"grid gap-4 md:grid-cols-3\">\r\n        <article className=\"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h2 className=\"text-sm font-medium text-slate-500 dark:text-slate-300\">\r\n            {t(\"analytics.cards.mileage\")}\r\n          </h2>\r\n          <p className=\"mt-2 text-2xl font-semibold\">\r\n            {numberFormatter.format(summary?.mileage.total ?? 0)} \r\n          </p>\r\n          <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\r\n            {t(\"analytics.cards.period\", {\r\n              from: summary?.period.from ?? filters.from,\r\n              to: summary?.period.to ?? filters.to,\r\n            })}\r\n          </p>\r\n        </article>\r\n        <article className=\"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h2 className=\"text-sm font-medium text-slate-500 dark:text-slate-300\">\r\n            {t(\"analytics.cards.load\")}\r\n          </h2>\r\n          <p className=\"mt-2 text-2xl font-semibold\">\r\n            {typeof summary?.load.average === \"number\"\r\n              ? `${loadFormatter.format(summary.load.average)} `\r\n              : t(\"analytics.noData\")}\r\n          </p>\r\n          <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\r\n            {t(\"analytics.cards.loadHint\")}\r\n          </p>\r\n        </article>\r\n        <article className=\"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h2 className=\"text-sm font-medium text-slate-500 dark:text-slate-300\">\r\n            SLA\r\n          </h2>\r\n          <p className=\"mt-2 text-2xl font-semibold\">\r\n            {typeof summary?.sla.average === \"number\"\r\n              ? percentFormatter.format(summary.sla.average)\r\n              : t(\"analytics.noData\")}\r\n          </p>\r\n          <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\r\n            {t(\"analytics.cards.slaHint\")}\r\n          </p>\r\n        </article>\r\n      </section>\r\n      <section className=\"grid gap-4 lg:grid-cols-3\">\r\n        <div className=\"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900 lg:col-span-3\">\r\n          <h3 className=\"text-base font-semibold text-slate-700 dark:text-slate-200\">\r\n            {t(\"analytics.charts.mileage\")}\r\n          </h3>\r\n          <React.Suspense fallback={<div>{t(\"analytics.loading\")}</div>}>\r\n            <ReactApexChart\r\n              type=\"area\"\r\n              height={280}\r\n              series={[{ name: t(\"analytics.cards.mileage\"), data: mileageSeries }]}\r\n              options={{\r\n                chart: { id: \"analytics-mileage\", animations: { enabled: false } },\r\n                dataLabels: { enabled: false },\r\n                stroke: { curve: \"smooth\", width: 2 },\r\n                xaxis: { type: \"category\" },\r\n                yaxis: { labels: { formatter: (value: number) => numberFormatter.format(value) } },\r\n                tooltip: {\r\n                  y: {\r\n                    formatter: (value: number) => `${numberFormatter.format(value)} `,\r\n                  },\r\n                },\r\n              }}\r\n            />\r\n          </React.Suspense>\r\n        </div>\r\n        <div className=\"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h3 className=\"text-base font-semibold text-slate-700 dark:text-slate-200\">\r\n            {t(\"analytics.charts.load\")}\r\n          </h3>\r\n          <React.Suspense fallback={<div>{t(\"analytics.loading\")}</div>}>\r\n            <ReactApexChart\r\n              type=\"bar\"\r\n              height={280}\r\n              series={[{ name: t(\"analytics.cards.load\"), data: loadSeries }]}\r\n              options={{\r\n                chart: { id: \"analytics-load\", animations: { enabled: false } },\r\n                dataLabels: { enabled: false },\r\n                xaxis: { type: \"category\" },\r\n                yaxis: {\r\n                  labels: {\r\n                    formatter: (value: number) => `${loadFormatter.format(value)} `,\r\n                  },\r\n                },\r\n                tooltip: {\r\n                  y: {\r\n                    formatter: (value: number) => `${loadFormatter.format(value)} `,\r\n                  },\r\n                },\r\n              }}\r\n            />\r\n          </React.Suspense>\r\n        </div>\r\n        <div className=\"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h3 className=\"text-base font-semibold text-slate-700 dark:text-slate-200\">\r\n            {t(\"analytics.charts.sla\")}\r\n          </h3>\r\n          <React.Suspense fallback={<div>{t(\"analytics.loading\")}</div>}>\r\n            <ReactApexChart\r\n              type=\"line\"\r\n              height={280}\r\n              series={[{ name: \"SLA\", data: slaSeries }]}\r\n              options={{\r\n                chart: { id: \"analytics-sla\", animations: { enabled: false } },\r\n                dataLabels: { enabled: false },\r\n                stroke: { curve: \"straight\", width: 2 },\r\n                markers: { size: 4 },\r\n                xaxis: { type: \"category\" },\r\n                yaxis: {\r\n                  min: 0,\r\n                  max: 100,\r\n                  tickAmount: 5,\r\n                  labels: {\r\n                    formatter: (value: number) =>\r\n                      percentFormatter.format(value / 100),\r\n                  },\r\n                },\r\n                tooltip: {\r\n                  y: {\r\n                    formatter: (value: number) => percentFormatter.format(value / 100),\r\n                  },\r\n                },\r\n              }}\r\n            />\r\n          </React.Suspense>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n","//  :     \r\n//  : @tanstack/react-table, services/collections\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport type { CollectionItem } from \"../services/collections\";\r\n\r\nexport interface CollectionTableRow extends CollectionItem {\r\n  displayValue: string;\r\n  metaSummary: string;\r\n}\r\n\r\nexport const collectionColumns: ColumnDef<CollectionTableRow>[] = [\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"value\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"20rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"displayValue\",\r\n    header: \" \",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"24rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"type\",\r\n    header: \"\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"_id\",\r\n    header: \"\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"metaSummary\",\r\n    header: \". \",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"24rem\" },\r\n  },\r\n];\r\n\r\n","//  :     \r\n//  : @tanstack/react-table, types/user\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport type { User } from \"../types/user\";\r\nimport { formatRoleName } from \"../utils/roleDisplay\";\r\n\r\nexport const settingsUserColumns: ColumnDef<User>[] = [\r\n  {\r\n    accessorKey: \"telegram_id\",\r\n    header: \"Telegram ID\",\r\n    meta: { minWidth: \"8rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"username\",\r\n    header: \"\",\r\n    cell: ({ row }) => row.original.telegram_username ?? row.original.username ?? \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"phone\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"mobNumber\",\r\n    header: \". \",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"email\",\r\n    header: \"E-mail\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"20rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"role\",\r\n    header: \"\",\r\n    cell: ({ getValue }) => formatRoleName(getValue<string | undefined>()),\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"access\",\r\n    header: \"\",\r\n    cell: ({ getValue }) => String(getValue<number | undefined>() ?? \"\"),\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"roleId\",\r\n    header: \" ID\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"departmentId\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"divisionId\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"positionId\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n];\r\n\r\n","//  :       \r\n//  : @tanstack/react-table, types/user\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport type { User } from \"../types/user\";\r\nimport { formatRoleName } from \"../utils/roleDisplay\";\r\n\r\nexport interface EmployeeRow extends User {\r\n  roleName: string;\r\n  departmentName: string;\r\n  divisionName: string;\r\n  positionName: string;\r\n}\r\n\r\nconst renderAccess = (value: number | undefined) =>\r\n  value === undefined || value === null ? \"\" : String(value);\r\n\r\nexport const settingsEmployeeColumns: ColumnDef<EmployeeRow>[] = [\r\n  {\r\n    accessorKey: \"telegram_id\",\r\n    header: \"Telegram ID\",\r\n    meta: { minWidth: \"8rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"username\",\r\n    header: \"\",\r\n    cell: ({ row }) => row.original.telegram_username ?? row.original.username ?? \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"phone\",\r\n    header: \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"mobNumber\",\r\n    header: \". \",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"email\",\r\n    header: \"E-mail\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"20rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"role\",\r\n    header: \"\",\r\n    cell: ({ getValue }) => formatRoleName(getValue<string | undefined>()),\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"access\",\r\n    header: \"\",\r\n    cell: ({ getValue }) => renderAccess(getValue<number | undefined>()),\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"roleId\",\r\n    header: \" ID\",\r\n    cell: ({ row }) => formatRoleName(row.original.roleName),\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"departmentId\",\r\n    header: \"\",\r\n    cell: ({ row }) => row.original.departmentName || \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"divisionId\",\r\n    header: \"\",\r\n    cell: ({ row }) => row.original.divisionName || \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"positionId\",\r\n    header: \"\",\r\n    cell: ({ row }) => row.original.positionName || \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n];\r\n","// :       EmployeeRow\r\n//  : types/user\r\nimport type { EmployeeRow } from \"../columns/settingsEmployeeColumns\";\r\nimport type { User } from \"../types/user\";\r\n\r\nconst normalizeString = (value: unknown): string | undefined => {\r\n  if (typeof value !== \"string\") return undefined;\r\n  const trimmed = value.trim();\r\n  return trimmed.length ? trimmed : undefined;\r\n};\r\n\r\nconst normalizeNumber = (value: unknown): number | undefined =>\r\n  typeof value === \"number\" && Number.isFinite(value) ? value : undefined;\r\n\r\nconst normalizeStringArray = (value: unknown): string[] | undefined => {\r\n  if (!Array.isArray(value)) return undefined;\r\n  return value\r\n    .filter((item): item is string => typeof item === \"string\")\r\n    .map((item) => item.trim())\r\n    .filter((item) => item.length > 0);\r\n};\r\n\r\nexport type EmployeeRowSource = User & {\r\n  roleName?: string | null;\r\n  departmentName?: string | null;\r\n  divisionName?: string | null;\r\n  positionName?: string | null;\r\n};\r\n\r\nexport const buildEmployeeRow = (source: EmployeeRowSource): EmployeeRow => {\r\n  const row: Partial<EmployeeRow> = {\r\n    roleName: normalizeString(source.roleName) ?? \"\",\r\n    departmentName: normalizeString(source.departmentName) ?? \"\",\r\n    divisionName: normalizeString(source.divisionName) ?? \"\",\r\n    positionName: normalizeString(source.positionName) ?? \"\",\r\n  };\r\n\r\n  const assignString = <K extends keyof EmployeeRow>(key: K, raw: unknown) => {\r\n    const normalized = normalizeString(raw);\r\n    if (normalized !== undefined) {\r\n      row[key] = normalized as EmployeeRow[K];\r\n    }\r\n  };\r\n\r\n  const assignNumber = <K extends keyof EmployeeRow>(key: K, raw: unknown) => {\r\n    const normalized = normalizeNumber(raw);\r\n    if (normalized !== undefined) {\r\n      row[key] = normalized as EmployeeRow[K];\r\n    }\r\n  };\r\n\r\n  assignString(\"id\", source.id);\r\n  assignNumber(\"telegram_id\", source.telegram_id);\r\n  assignString(\"telegram_username\", source.telegram_username);\r\n  assignString(\"username\", source.username);\r\n  assignString(\"name\", source.name);\r\n  assignString(\"phone\", source.phone);\r\n  assignString(\"mobNumber\", source.mobNumber);\r\n  assignString(\"email\", source.email);\r\n  assignString(\"role\", source.role);\r\n  assignNumber(\"access\", source.access);\r\n  const permissions = normalizeStringArray(source.permissions);\r\n  if (permissions !== undefined) {\r\n    row.permissions = permissions;\r\n  }\r\n  assignString(\"roleId\", source.roleId);\r\n  assignString(\"roleName\", row.roleName);\r\n  assignString(\"departmentId\", source.departmentId);\r\n  assignString(\"departmentName\", row.departmentName);\r\n  assignString(\"divisionId\", source.divisionId);\r\n  assignString(\"divisionName\", row.divisionName);\r\n  assignString(\"positionId\", source.positionId);\r\n  assignString(\"positionName\", row.positionName);\r\n\r\n  return row as EmployeeRow;\r\n};\r\n","// :   \r\n//  : React, ConfirmDialog\r\nimport React from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport ConfirmDialog from \"../../components/ConfirmDialog\";\r\nimport {\r\n  fetchCollectionItems,\r\n  type CollectionItem,\r\n} from \"../../services/collections\";\r\nimport { fetchRoles } from \"../../services/roles\";\r\nimport { ROLE_OPTIONS } from \"../../utils/roleDisplay\";\r\n\r\nexport interface UserFormData {\r\n  telegram_id?: number;\r\n  username: string;\r\n  name?: string;\r\n  phone?: string;\r\n  mobNumber?: string;\r\n  email?: string;\r\n  role?: string;\r\n  access?: number;\r\n  roleId?: string;\r\n  departmentId?: string;\r\n  divisionId?: string;\r\n  positionId?: string;\r\n}\r\n\r\ninterface Props {\r\n  form: UserFormData;\r\n  onChange: (form: UserFormData) => void;\r\n  onSubmit: () => void;\r\n  onReset: () => void;\r\n}\r\n\r\ninterface Role {\r\n  _id: string;\r\n  name: string;\r\n  access: number;\r\n}\r\n\r\nexport default function UserForm({ form, onChange, onSubmit, onReset }: Props) {\r\n  const [confirmSave, setConfirmSave] = React.useState(false);\r\n  const [departments, setDepartments] = React.useState<CollectionItem[]>([]);\r\n  const [divisions, setDivisions] = React.useState<CollectionItem[]>([]);\r\n  const [positions, setPositions] = React.useState<CollectionItem[]>([]);\r\n  const [roles, setRoles] = React.useState<Role[]>([]);\r\n\r\n  React.useEffect(() => {\r\n    fetchCollectionItems(\"departments\", \"\", 1, 100).then((d) =>\r\n      setDepartments(d.items),\r\n    ).catch(() => setDepartments([]));\r\n    fetchCollectionItems(\"divisions\", \"\", 1, 100).then((d) =>\r\n      setDivisions(d.items),\r\n    ).catch(() => setDivisions([]));\r\n    fetchCollectionItems(\"positions\", \"\", 1, 100).then((d) =>\r\n      setPositions(d.items),\r\n    ).catch(() => setPositions([]));\r\n    fetchRoles().then((r) => setRoles(r));\r\n  }, []);\r\n\r\n  const handleRoleChange = (value: string) => {\r\n    const r = roles.find((x) => x.name === value);\r\n    onChange({\r\n      ...form,\r\n      role: value,\r\n      roleId: r?._id,\r\n      access: r?.access ?? 1,\r\n    });\r\n  };\r\n\r\n  const submit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setConfirmSave(true);\r\n  };\r\n  return (\r\n    <form onSubmit={submit} className=\"space-y-2\">\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">ID</label>\r\n        <input\r\n          id=\"settings-user-telegram-id\"\r\n          name=\"telegramId\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.telegram_id ?? \"\"}\r\n          onChange={(e) =>\r\n            onChange({\r\n              ...form,\r\n              telegram_id: e.target.value ? Number(e.target.value) : undefined,\r\n            })\r\n          }\r\n          readOnly={!!form.telegram_id}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Username</label>\r\n        <input\r\n          id=\"settings-user-username\"\r\n          name=\"username\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.username || \"\"}\r\n          onChange={(e) => onChange({ ...form, username: e.target.value })}\r\n          readOnly={!!form.telegram_id}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\"></label>\r\n        <input\r\n          id=\"settings-user-name\"\r\n          name=\"name\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.name || \"\"}\r\n          onChange={(e) => onChange({ ...form, name: e.target.value })}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\"></label>\r\n        <input\r\n          id=\"settings-user-phone\"\r\n          name=\"phone\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.phone || \"\"}\r\n          onChange={(e) => onChange({ ...form, phone: e.target.value })}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">. </label>\r\n        <input\r\n          id=\"settings-user-mob\"\r\n          name=\"mobNumber\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.mobNumber || \"\"}\r\n          onChange={(e) => onChange({ ...form, mobNumber: e.target.value })}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Email</label>\r\n        <input\r\n          id=\"settings-user-email\"\r\n          name=\"email\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.email || \"\"}\r\n          onChange={(e) => onChange({ ...form, email: e.target.value })}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\"></label>\r\n        <select\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.role || \"user\"}\r\n          onChange={(e) => handleRoleChange(e.target.value)}\r\n        >\r\n          {ROLE_OPTIONS.map((option) => (\r\n            <option key={option.value} value={option.value}>\r\n              {option.label}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\"></label>\r\n        <select\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.departmentId || \"\"}\r\n          onChange={(e) => onChange({ ...form, departmentId: e.target.value })}\r\n        >\r\n          <option value=\"\"></option>\r\n          {departments.map((d) => (\r\n            <option key={d._id} value={d._id}>\r\n              {d.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\"></label>\r\n        <select\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.divisionId || \"\"}\r\n          onChange={(e) => onChange({ ...form, divisionId: e.target.value })}\r\n        >\r\n          <option value=\"\"></option>\r\n          {divisions.map((d) => (\r\n            <option key={d._id} value={d._id}>\r\n              {d.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\"></label>\r\n        <select\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.positionId || \"\"}\r\n          onChange={(e) => onChange({ ...form, positionId: e.target.value })}\r\n        >\r\n          <option value=\"\"></option>\r\n          {positions.map((p) => (\r\n            <option key={p._id} value={p._id}>\r\n              {p.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <Button type=\"submit\"></Button>\r\n        <Button type=\"button\" variant=\"outline\" onClick={onReset}>\r\n          \r\n        </Button>\r\n      </div>\r\n      <ConfirmDialog\r\n        open={confirmSave}\r\n        message=\" ?\"\r\n        onConfirm={() => {\r\n          setConfirmSave(false);\r\n          onSubmit();\r\n        }}\r\n        onCancel={() => setConfirmSave(false)}\r\n        confirmText=\"\"\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","// :    \r\n//  : React, match-sorter, Tabs, services/collections\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport { matchSorter, rankings } from \"match-sorter\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { z } from \"zod\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n} from \"../../components/Tabs\";\r\nimport ActionBar from \"../../components/ActionBar\";\r\nimport Breadcrumbs from \"../../components/Breadcrumbs\";\r\nimport CopyableId from \"../../components/CopyableId\";\r\nimport DataTable from \"../../components/DataTable\";\r\nimport Spinner from \"../../components/Spinner\";\r\nimport {\r\n  fetchCollectionItems,\r\n  fetchAllCollectionItems,\r\n  createCollectionItem,\r\n  updateCollectionItem,\r\n  removeCollectionItem,\r\n  CollectionItem,\r\n} from \"../../services/collections\";\r\nimport CollectionForm from \"./CollectionForm\";\r\nimport ConfirmDialog from \"../../components/ConfirmDialog\";\r\nimport EmployeeCardForm from \"../../components/EmployeeCardForm\";\r\nimport Modal from \"../../components/Modal\";\r\nimport FleetVehiclesTab from \"./FleetVehiclesTab\";\r\nimport TaskSettingsTab from \"./TaskSettingsTab\";\r\nimport AnalyticsDashboard from \"../AnalyticsDashboard\";\r\nimport ArchivePage from \"../Archive\";\r\nimport LogsPage from \"../Logs\";\r\nimport StoragePage from \"../Storage\";\r\nimport {\r\n  collectionColumns,\r\n  type CollectionTableRow,\r\n} from \"../../columns/collectionColumns\";\r\nimport { settingsUserColumns } from \"../../columns/settingsUserColumns\";\r\nimport {\r\n  settingsEmployeeColumns,\r\n  type EmployeeRow,\r\n} from \"../../columns/settingsEmployeeColumns\";\r\nimport {\r\n  fetchUsers,\r\n  createUser as createUserApi,\r\n  updateUser as updateUserApi,\r\n  deleteUser as deleteUserApi,\r\n  type UserDetails,\r\n} from \"../../services/users\";\r\nimport { fetchRoles, type Role } from \"../../services/roles\";\r\nimport { formatRoleName } from \"../../utils/roleDisplay\";\r\nimport { buildEmployeeRow } from \"../../utils/employeeRow\";\r\nimport UserForm, { UserFormData } from \"./UserForm\";\r\nimport type { User } from \"../../types/user\";\r\nimport { useAuth } from \"../../context/useAuth\";\r\nimport {\r\n  SETTINGS_BADGE_CLASS,\r\n  SETTINGS_BADGE_EMPTY,\r\n  SETTINGS_BADGE_WRAPPER_CLASS,\r\n} from \"./badgeStyles\";\r\nimport { hasAccess, ACCESS_ADMIN } from \"../../utils/access\";\r\nimport { showToast } from \"../../utils/toast\";\r\nimport {\r\n  BuildingOffice2Icon,\r\n  Squares2X2Icon,\r\n  IdentificationIcon,\r\n  UserGroupIcon,\r\n  TruckIcon,\r\n  KeyIcon,\r\n  ClipboardDocumentListIcon,\r\n  AdjustmentsHorizontalIcon,\r\n  ChartPieIcon,\r\n  ArchiveBoxIcon,\r\n  DocumentTextIcon,\r\n  RectangleStackIcon,\r\n} from \"@heroicons/react/24/outline\";\r\n\r\nconst moduleTabs = [\r\n  {\r\n    key: \"directories\",\r\n    label: \"\",\r\n    description: \"   \",\r\n    icon: AdjustmentsHorizontalIcon,\r\n  },\r\n  {\r\n    key: \"reports\",\r\n    label: \"\",\r\n    description: \"   KPI\",\r\n    icon: ChartPieIcon,\r\n  },\r\n  {\r\n    key: \"archive\",\r\n    label: \"\",\r\n    description: \"   \",\r\n    icon: ArchiveBoxIcon,\r\n  },\r\n  {\r\n    key: \"logs\",\r\n    label: \"\",\r\n    description: \"   \",\r\n    icon: DocumentTextIcon,\r\n  },\r\n  {\r\n    key: \"storage\",\r\n    label: \"\",\r\n    description: \" \",\r\n    icon: RectangleStackIcon,\r\n  },\r\n] as const;\r\n\r\ntype SettingsModuleKey = (typeof moduleTabs)[number][\"key\"];\r\n\r\nconst isValidModuleKey = (\r\n  value: string | null,\r\n): value is SettingsModuleKey =>\r\n  moduleTabs.some((module) => module.key === value);\r\n\r\nconst types = [\r\n  {\r\n    key: \"departments\",\r\n    label: \"\",\r\n    description: \"   \",\r\n  },\r\n  {\r\n    key: \"divisions\",\r\n    label: \"\",\r\n    description: \"  \",\r\n  },\r\n  {\r\n    key: \"positions\",\r\n    label: \"\",\r\n    description: \"   \",\r\n  },\r\n  {\r\n    key: \"employees\",\r\n    label: \"\",\r\n    description: \"   \",\r\n  },\r\n  {\r\n    key: \"fleets\",\r\n    label: \"\",\r\n    description: \"   \",\r\n  },\r\n  {\r\n    key: \"users\",\r\n    label: \"\",\r\n    description: \"   \",\r\n  },\r\n  {\r\n    key: \"tasks\",\r\n    label: \"\",\r\n    description: \"    \",\r\n  },\r\n] as const;\r\n\r\ntype CollectionKey = (typeof types)[number][\"key\"];\r\n\r\nconst createInitialQueries = (): Record<CollectionKey, string> =>\r\n  types.reduce(\r\n    (acc, type) => {\r\n      acc[type.key as CollectionKey] = \"\";\r\n      return acc;\r\n    },\r\n    {} as Record<CollectionKey, string>,\r\n  );\r\n\r\nconst emptyUser: UserFormData = {\r\n  telegram_id: undefined,\r\n  username: \"\",\r\n  name: \"\",\r\n  phone: \"\",\r\n  mobNumber: \"\",\r\n  email: \"\",\r\n  role: \"user\",\r\n  access: 1,\r\n  roleId: \"\",\r\n  departmentId: \"\",\r\n  divisionId: \"\",\r\n  positionId: \"\",\r\n};\r\n\r\nconst tabIcons: Record<\r\n  CollectionKey,\r\n  React.ComponentType<React.SVGProps<SVGSVGElement>>\r\n> = {\r\n  departments: BuildingOffice2Icon,\r\n  divisions: Squares2X2Icon,\r\n  positions: IdentificationIcon,\r\n  employees: UserGroupIcon,\r\n  fleets: TruckIcon,\r\n  users: KeyIcon,\r\n  tasks: ClipboardDocumentListIcon,\r\n};\r\n\r\nconst renderBadgeList = (items: string[]) => {\r\n  if (!items.length) {\r\n    return (\r\n      <span className={SETTINGS_BADGE_CLASS} title={SETTINGS_BADGE_EMPTY}>\r\n        {SETTINGS_BADGE_EMPTY}\r\n      </span>\r\n    );\r\n  }\r\n  return (\r\n    <div className={SETTINGS_BADGE_WRAPPER_CLASS}>\r\n      {items.map((item, index) => (\r\n        <span\r\n          key={`${item}-${index}`}\r\n          className={SETTINGS_BADGE_CLASS}\r\n          title={item}\r\n        >\r\n          {item}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface ItemForm {\r\n  _id?: string;\r\n  name: string;\r\n  value: string;\r\n}\r\n\r\nconst normalizeId = (value: string) => {\r\n  const trimmed = value.trim();\r\n  if (!trimmed) return \"\";\r\n  const withoutQuotes = trimmed.replace(/^['\"]+|['\"]+$/g, \"\");\r\n  const withoutBrackets = withoutQuotes.replace(/^\\[+|\\]+$/g, \"\");\r\n  const withoutBraces = withoutBrackets.replace(/^[{}]+|[{}]+$/g, \"\");\r\n  const withoutTrailingComma = withoutBraces.replace(/,+$/g, \"\");\r\n  return withoutTrailingComma.trim();\r\n};\r\n\r\nconst collectStringIds = (value: unknown): string[] => {\r\n  if (typeof value === \"string\") {\r\n    return [value];\r\n  }\r\n  if (Array.isArray(value)) {\r\n    return value.flatMap(collectStringIds);\r\n  }\r\n  if (value && typeof value === \"object\") {\r\n    const result: string[] = [];\r\n    Object.entries(value as Record<string, unknown>).forEach(([key, entry]) => {\r\n      if (Array.isArray(entry) || (entry && typeof entry === \"object\")) {\r\n        result.push(...collectStringIds(entry));\r\n        return;\r\n      }\r\n      if (typeof entry === \"string\") {\r\n        const trimmed = entry.trim();\r\n        if (!trimmed) return;\r\n        const lowerKey = key.toLowerCase();\r\n        if (lowerKey.includes(\"id\") || !/\\s/.test(trimmed)) {\r\n          result.push(trimmed);\r\n        }\r\n        return;\r\n      }\r\n      if (typeof entry === \"boolean\" || typeof entry === \"number\") {\r\n        if (entry) {\r\n          result.push(key);\r\n        }\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n  return [];\r\n};\r\n\r\nconst KEY_LABEL_OVERRIDES: Record<string, string> = {\r\n  telegram_id: \"Telegram ID\",\r\n  telegram_username: \" Telegram\",\r\n  username: \"\",\r\n  name: \"\",\r\n  phone: \"\",\r\n  mobNumber: \". \",\r\n  email: \"E-mail\",\r\n  role: \"\",\r\n  access: \"\",\r\n  roleId: \" ID\",\r\n  departmentId: \"\",\r\n  departmentName: \"\",\r\n  divisionId: \"\",\r\n  divisionName: \"\",\r\n  positionId: \"\",\r\n  positionName: \"\",\r\n  permissions: \"\",\r\n  fleetId: \"\",\r\n  source: \"\",\r\n  sourceId: \"ID \",\r\n  readonly: \" \",\r\n  readonlyReason: \" \",\r\n  invalid: \"\",\r\n  invalidReason: \" \",\r\n  invalidCode: \" \",\r\n  invalidAt: \" \",\r\n  syncPending: \" \",\r\n  syncWarning: \"\",\r\n  syncError: \" \",\r\n  syncFailedAt: \" \",\r\n  defaultLabel: \"  \",\r\n  fieldType: \" \",\r\n  required: \"\",\r\n  order: \"\",\r\n  virtual: \" \",\r\n  tg_theme_url: \" Telegram\",\r\n  tg_chat_id: \"ID \",\r\n  tg_topic_id: \"ID \",\r\n  tg_photos_url: \"  \",\r\n  tg_photos_chat_id: \"ID  \",\r\n  tg_photos_topic_id: \"ID  \",\r\n};\r\n\r\nconst formatKeyLabel = (key: string): string => {\r\n  const override = KEY_LABEL_OVERRIDES[key];\r\n  if (override) return override;\r\n  const normalized = key\r\n    .replace(/[_-]+/g, \" \")\r\n    .replace(/([a-z])([A-Z])/g, \"$1 $2\")\r\n    .trim();\r\n  if (!normalized) return key;\r\n  return normalized.charAt(0).toUpperCase() + normalized.slice(1);\r\n};\r\n\r\nconst formatSummaryValue = (value: unknown): string => {\r\n  if (value === null || value === undefined) return \"\";\r\n  if (typeof value === \"boolean\") {\r\n    return value ? \"\" : \"\";\r\n  }\r\n  if (typeof value === \"number\") {\r\n    return Number.isFinite(value) ? String(value) : \"\";\r\n  }\r\n  if (typeof value === \"string\") {\r\n    const trimmed = value.trim();\r\n    return trimmed;\r\n  }\r\n  if (Array.isArray(value)) {\r\n    const formatted = value\r\n      .map((item) => formatSummaryValue(item))\r\n      .filter(Boolean);\r\n    return formatted.join(\", \");\r\n  }\r\n  if (value instanceof Date) {\r\n    return value.toISOString();\r\n  }\r\n  if (typeof value === \"object\") {\r\n    const entries = Object.entries(value as Record<string, unknown>)\r\n      .map(([key, nested]) => {\r\n        const formatted = formatSummaryValue(nested);\r\n        if (!formatted) return \"\";\r\n        return `${formatKeyLabel(key)}=${formatted}`;\r\n      })\r\n      .filter(Boolean);\r\n    return entries.join(\"; \");\r\n  }\r\n  return \"\";\r\n};\r\n\r\nconst summarizeRecord = (record?: Record<string, unknown>): string => {\r\n  if (!record) return \"\";\r\n  const entries = Object.entries(record)\r\n    .map(([key, value]) => {\r\n      const formatted = formatSummaryValue(value);\r\n      if (!formatted) return \"\";\r\n      return `${formatKeyLabel(key)}: ${formatted}`;\r\n    })\r\n    .filter(Boolean);\r\n  return entries.join(\"\\n\");\r\n};\r\n\r\nconst tryParseJsonValue = (raw: string): unknown => {\r\n  try {\r\n    return JSON.parse(raw);\r\n  } catch {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nconst formatCollectionRawValue = (raw: string): string => {\r\n  const trimmed = raw.trim();\r\n  if (!trimmed) return \"\";\r\n  const parsed =\r\n    trimmed.startsWith(\"{\") || trimmed.startsWith(\"[\")\r\n      ? tryParseJsonValue(trimmed)\r\n      : undefined;\r\n  if (Array.isArray(parsed)) {\r\n    const formatted = parsed\r\n      .map((item) => formatSummaryValue(item))\r\n      .filter(Boolean);\r\n    if (formatted.length) {\r\n      return formatted.join(\"\\n\");\r\n    }\r\n  } else if (parsed && typeof parsed === \"object\") {\r\n    const summary = summarizeRecord(parsed as Record<string, unknown>);\r\n    if (summary) {\r\n      return summary;\r\n    }\r\n  }\r\n  if (trimmed.includes(\",\")) {\r\n    const parts = trimmed\r\n      .split(\",\")\r\n      .map((part) => part.trim())\r\n      .filter(Boolean);\r\n    if (parts.length > 1) {\r\n      return parts.join(\"\\n\");\r\n    }\r\n  }\r\n  return trimmed;\r\n};\r\n\r\nconst IdsSchema = z\r\n  .preprocess((input) => {\r\n    if (input === null || input === undefined) {\r\n      return [];\r\n    }\r\n    if (typeof input === \"string\") {\r\n      const trimmed = input.trim();\r\n      if (!trimmed) {\r\n        return [];\r\n      }\r\n      if (trimmed.startsWith(\"{\") || trimmed.startsWith(\"[\")) {\r\n        try {\r\n          const parsed = JSON.parse(trimmed);\r\n          return collectStringIds(parsed);\r\n        } catch {\r\n          //         \r\n        }\r\n      }\r\n      return trimmed\r\n        .split(\",\")\r\n        .map((part) => part.trim())\r\n        .filter(Boolean);\r\n    }\r\n    if (Array.isArray(input) || (input && typeof input === \"object\")) {\r\n      return collectStringIds(input);\r\n    }\r\n    return [String(input)];\r\n  }, z.array(z.string()))\r\n  .transform((values) => {\r\n    const normalized = values\r\n      .map((value) => normalizeId(String(value)))\r\n      .filter((value) => value.length > 0);\r\n    return Array.from(new Set(normalized));\r\n  });\r\n\r\nconst safeParseIds = (value: unknown): string[] => {\r\n  const result = IdsSchema.safeParse(value);\r\n  return result.success ? result.data : [];\r\n};\r\n\r\nconst mergeById = <T extends { _id: string }>(\r\n  current: T[],\r\n  incoming: T[],\r\n): T[] => {\r\n  if (!incoming.length) {\r\n    return current;\r\n  }\r\n  const merged = current.slice();\r\n  const indexById = new Map<string, number>();\r\n  merged.forEach((item, index) => {\r\n    indexById.set(item._id, index);\r\n  });\r\n  let changed = false;\r\n  incoming.forEach((item) => {\r\n    const index = indexById.get(item._id);\r\n    if (typeof index === \"number\") {\r\n      if (merged[index] !== item) {\r\n        merged[index] = item;\r\n        changed = true;\r\n      }\r\n      return;\r\n    }\r\n    indexById.set(item._id, merged.length);\r\n    merged.push(item);\r\n    changed = true;\r\n  });\r\n  return changed ? merged : current;\r\n};\r\n\r\nconst resolveReferenceName = (\r\n  map: Map<string, string>,\r\n  id?: string | null,\r\n  fallbackName?: string | null,\r\n): string => {\r\n  const directName =\r\n    typeof fallbackName === \"string\" && fallbackName.trim().length\r\n      ? fallbackName.trim()\r\n      : \"\";\r\n  if (directName) return directName;\r\n  if (typeof id !== \"string\") return \"\";\r\n  const trimmed = id.trim();\r\n  if (!trimmed) return \"\";\r\n  return map.get(trimmed) ?? trimmed;\r\n};\r\n\r\ntype EmployeeDetailsIndex = {\r\n  byId: Map<string, Partial<User>>;\r\n  byTelegramUsername: Map<string, Partial<User>>;\r\n  byUsername: Map<string, Partial<User>>;\r\n};\r\n\r\nconst readValue = (\r\n  source: Record<string, unknown>,\r\n  keys: string[],\r\n): unknown => {\r\n  for (const key of keys) {\r\n    if (key in source) return source[key];\r\n  }\r\n  const lowerCaseSource: Record<string, unknown> = {};\r\n  Object.entries(source).forEach(([key, value]) => {\r\n    lowerCaseSource[key.toLowerCase()] = value;\r\n  });\r\n  for (const key of keys) {\r\n    const lowerKey = key.toLowerCase();\r\n    if (lowerKey in lowerCaseSource) return lowerCaseSource[lowerKey];\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst pickString = (\r\n  source: Record<string, unknown>,\r\n  keys: string[],\r\n  fallback?: string,\r\n): string | undefined => {\r\n  const raw = readValue(source, keys);\r\n  if (typeof raw === \"string\") {\r\n    const trimmed = raw.trim();\r\n    if (trimmed.length) return trimmed;\r\n  }\r\n  if (typeof raw === \"number\" && Number.isFinite(raw)) {\r\n    return String(raw);\r\n  }\r\n  if (typeof fallback === \"string\") {\r\n    const trimmed = fallback.trim();\r\n    if (trimmed.length) return trimmed;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst pickNumber = (\r\n  source: Record<string, unknown>,\r\n  keys: string[],\r\n): number | undefined => {\r\n  const raw = readValue(source, keys);\r\n  if (typeof raw === \"number\" && Number.isFinite(raw)) {\r\n    return raw;\r\n  }\r\n  if (typeof raw === \"string\") {\r\n    const trimmed = raw.trim();\r\n    if (!trimmed) return undefined;\r\n    const parsed = Number(trimmed);\r\n    if (Number.isFinite(parsed)) {\r\n      return parsed;\r\n    }\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst pickStringArray = (\r\n  source: Record<string, unknown>,\r\n  keys: string[],\r\n): string[] | undefined => {\r\n  const raw = readValue(source, keys);\r\n  if (!Array.isArray(raw)) return undefined;\r\n  const normalized = raw\r\n    .filter((item): item is string => typeof item === \"string\")\r\n    .map((item) => item.trim())\r\n    .filter((item) => item.length > 0);\r\n  return normalized.length ? normalized : undefined;\r\n};\r\n\r\nconst collectEmployeeDetails = (\r\n  item: CollectionItem,\r\n): Partial<User> | undefined => {\r\n  if (item.type !== \"employees\") return undefined;\r\n  const parts: Record<string, unknown>[] = [];\r\n  if (item.meta && typeof item.meta === \"object\") {\r\n    parts.push(item.meta as Record<string, unknown>);\r\n  }\r\n  const rawValue = item.value;\r\n  if (typeof rawValue === \"string\") {\r\n    const trimmed = rawValue.trim();\r\n    if (trimmed) {\r\n      try {\r\n        const parsed = JSON.parse(trimmed);\r\n        if (parsed && typeof parsed === \"object\" && !Array.isArray(parsed)) {\r\n          parts.push(parsed as Record<string, unknown>);\r\n        }\r\n      } catch {\r\n        //  ,    JSON\r\n      }\r\n    }\r\n  } else if (rawValue && typeof rawValue === \"object\" && !Array.isArray(rawValue)) {\r\n    parts.push(rawValue as Record<string, unknown>);\r\n  }\r\n\r\n  if (!parts.length) {\r\n    const name = item.name?.trim();\r\n    return name ? { name } : undefined;\r\n  }\r\n\r\n  const combined = parts.reduce<Record<string, unknown>>(\r\n    (acc, part) => ({ ...acc, ...part }),\r\n    {},\r\n  );\r\n\r\n  const details: Partial<User> = {};\r\n  const telegramId = pickNumber(combined, [\"telegram_id\", \"telegramId\", \"id\"]);\r\n  if (typeof telegramId === \"number\") {\r\n    details.telegram_id = telegramId;\r\n  }\r\n  const telegramUsername = pickString(combined, [\r\n    \"telegram_username\",\r\n    \"telegramUsername\",\r\n    \"telegram_login\",\r\n    \"telegramLogin\",\r\n  ]);\r\n  if (telegramUsername) {\r\n    details.telegram_username = telegramUsername;\r\n  }\r\n  const username = pickString(combined, [\"username\", \"login\"]);\r\n  if (username) {\r\n    details.username = username;\r\n  }\r\n  const name = pickString(combined, [\"name\", \"fullName\"], item.name);\r\n  const firstName = pickString(combined, [\"firstName\", \"first_name\"]);\r\n  const lastName = pickString(combined, [\r\n    \"lastName\",\r\n    \"last_name\",\r\n    \"surname\",\r\n    \"familyName\",\r\n  ]);\r\n  const middleName = pickString(combined, [\r\n    \"middleName\",\r\n    \"middle_name\",\r\n    \"patronymic\",\r\n  ]);\r\n  if (name) {\r\n    details.name = name;\r\n  } else {\r\n    const parts = [lastName, firstName, middleName].filter(\r\n      (part): part is string => typeof part === \"string\" && part.trim().length > 0,\r\n    );\r\n    if (parts.length) {\r\n      details.name = parts.join(\" \");\r\n    }\r\n  }\r\n  const phone = pickString(combined, [\"phone\", \"phone_number\", \"phoneNumber\"]);\r\n  if (phone) {\r\n    details.phone = phone;\r\n  }\r\n  const mobNumber = pickString(combined, [\r\n    \"mobNumber\",\r\n    \"mobile\",\r\n    \"mobile_phone\",\r\n    \"mobilePhone\",\r\n  ]);\r\n  if (mobNumber) {\r\n    details.mobNumber = mobNumber;\r\n  }\r\n  const email = pickString(combined, [\"email\", \"mail\"]);\r\n  if (email) {\r\n    details.email = email;\r\n  }\r\n  const role = pickString(combined, [\"role\", \"roleName\"]);\r\n  if (role) {\r\n    details.role = role;\r\n  }\r\n  const access = pickNumber(combined, [\"access\", \"access_level\", \"accessLevel\"]);\r\n  if (typeof access === \"number\") {\r\n    details.access = access;\r\n  }\r\n  const roleId = pickString(combined, [\"roleId\", \"role_id\"]);\r\n  if (roleId) {\r\n    details.roleId = roleId;\r\n  }\r\n  const roleName = pickString(combined, [\"roleName\"]);\r\n  if (roleName) {\r\n    details.roleName = roleName;\r\n  }\r\n  const departmentId = pickString(combined, [\"departmentId\", \"department_id\"]);\r\n  if (departmentId) {\r\n    details.departmentId = departmentId;\r\n  }\r\n  const departmentName = pickString(combined, [\"departmentName\"]);\r\n  if (departmentName) {\r\n    details.departmentName = departmentName;\r\n  }\r\n  const divisionId = pickString(combined, [\"divisionId\", \"division_id\"]);\r\n  if (divisionId) {\r\n    details.divisionId = divisionId;\r\n  }\r\n  const divisionName = pickString(combined, [\"divisionName\"]);\r\n  if (divisionName) {\r\n    details.divisionName = divisionName;\r\n  }\r\n  const positionId = pickString(combined, [\"positionId\", \"position_id\"]);\r\n  if (positionId) {\r\n    details.positionId = positionId;\r\n  }\r\n  const positionName = pickString(combined, [\"positionName\"]);\r\n  if (positionName) {\r\n    details.positionName = positionName;\r\n  }\r\n  const permissions = pickStringArray(combined, [\"permissions\"]);\r\n  if (permissions) {\r\n    details.permissions = permissions;\r\n  }\r\n\r\n  return Object.keys(details).length ? details : undefined;\r\n};\r\n\r\nconst buildEmployeeDetailsIndex = (\r\n  items: CollectionItem[],\r\n): EmployeeDetailsIndex => {\r\n  const index: EmployeeDetailsIndex = {\r\n    byId: new Map(),\r\n    byTelegramUsername: new Map(),\r\n    byUsername: new Map(),\r\n  };\r\n  items.forEach((item) => {\r\n    const details = collectEmployeeDetails(item);\r\n    if (!details) return;\r\n    if (typeof details.telegram_id === \"number\") {\r\n      index.byId.set(String(details.telegram_id), details);\r\n    }\r\n    if (typeof details.telegram_username === \"string\") {\r\n      index.byTelegramUsername.set(details.telegram_username.toLowerCase(), details);\r\n    }\r\n    if (typeof details.username === \"string\") {\r\n      index.byUsername.set(details.username.toLowerCase(), details);\r\n    }\r\n  });\r\n  return index;\r\n};\r\n\r\nconst mergeEmployeeDetails = (\r\n  user: User,\r\n  details?: Partial<User>,\r\n): User => {\r\n  if (!details) return user;\r\n  const result: User = { ...user };\r\n  const assignNumber = <K extends keyof User>(key: K) => {\r\n    const next = details[key];\r\n    if (typeof next !== \"number\" || !Number.isFinite(next)) return;\r\n    const current = result[key];\r\n    if (typeof current === \"number\" && Number.isFinite(current)) return;\r\n    result[key] = next as User[K];\r\n  };\r\n  const assignString = <K extends keyof User>(key: K) => {\r\n    const next = details[key];\r\n    if (next === undefined || next === null) return;\r\n    const normalized =\r\n      typeof next === \"string\"\r\n        ? next.trim()\r\n        : typeof next === \"number\" && Number.isFinite(next)\r\n          ? String(next)\r\n          : \"\";\r\n    if (!normalized) return;\r\n    const current = result[key];\r\n    if (\r\n      current === undefined ||\r\n      current === null ||\r\n      (typeof current === \"string\" && !current.trim())\r\n    ) {\r\n      result[key] = normalized as User[K];\r\n    }\r\n  };\r\n\r\n  assignNumber(\"telegram_id\");\r\n  assignString(\"telegram_username\");\r\n  assignString(\"username\");\r\n  assignString(\"name\");\r\n  assignString(\"phone\");\r\n  assignString(\"mobNumber\");\r\n  assignString(\"email\");\r\n  assignString(\"role\");\r\n  assignNumber(\"access\");\r\n  assignString(\"roleId\");\r\n  assignString(\"roleName\");\r\n  assignString(\"departmentId\");\r\n  assignString(\"departmentName\");\r\n  assignString(\"divisionId\");\r\n  assignString(\"divisionName\");\r\n  assignString(\"positionId\");\r\n  assignString(\"positionName\");\r\n  if (\r\n    (!result.permissions || !result.permissions.length) &&\r\n    Array.isArray(details.permissions) &&\r\n    details.permissions.length\r\n  ) {\r\n    result.permissions = details.permissions.slice();\r\n  }\r\n  return result;\r\n};\r\n\r\nconst TOKEN_SPLIT_REGEX = /[\\s,.;:/\\\\|_-]+/u;\r\n\r\nconst buildUserSearchTokens = (user: User): string[] => {\r\n  const tokens = new Set<string>();\r\n  const addValue = (value?: string | number | null) => {\r\n    if (value === undefined || value === null) return;\r\n    let text: string;\r\n    if (typeof value === \"number\") {\r\n      if (!Number.isFinite(value)) return;\r\n      text = String(value);\r\n    } else if (typeof value === \"string\") {\r\n      text = value.trim();\r\n    } else {\r\n      return;\r\n    }\r\n    if (!text) return;\r\n    tokens.add(text);\r\n    text\r\n      .split(TOKEN_SPLIT_REGEX)\r\n      .map((part) => part.trim())\r\n      .filter((part) => part.length > 0)\r\n      .forEach((part) => tokens.add(part));\r\n  };\r\n\r\n  addValue(user.username ?? undefined);\r\n  addValue(user.telegram_username ?? undefined);\r\n  addValue(user.telegram_id ?? undefined);\r\n  addValue(user.name ?? undefined);\r\n  addValue(user.phone ?? undefined);\r\n  addValue(user.mobNumber ?? undefined);\r\n  addValue(user.email ?? undefined);\r\n  addValue(user.role ?? undefined);\r\n  addValue(user.roleName ?? undefined);\r\n  addValue(user.departmentName ?? undefined);\r\n  addValue(user.divisionName ?? undefined);\r\n  addValue(user.positionName ?? undefined);\r\n  if (Array.isArray(user.permissions)) {\r\n    user.permissions.forEach((permission) => addValue(permission));\r\n  }\r\n\r\n  return Array.from(tokens);\r\n};\r\n\r\nconst findEmployeeDetails = (\r\n  user: User | undefined,\r\n  index: EmployeeDetailsIndex,\r\n  fallbackId?: string,\r\n): Partial<User> | undefined => {\r\n  const candidateId = fallbackId\r\n    ? fallbackId.trim()\r\n    : typeof user?.telegram_id === \"number\"\r\n      ? String(user.telegram_id)\r\n      : undefined;\r\n  if (candidateId) {\r\n    const direct = index.byId.get(candidateId);\r\n    if (direct) return direct;\r\n  }\r\n  const telegramUsername =\r\n    typeof user?.telegram_username === \"string\"\r\n      ? user.telegram_username.trim().toLowerCase()\r\n      : undefined;\r\n  if (telegramUsername) {\r\n    const direct = index.byTelegramUsername.get(telegramUsername);\r\n    if (direct) return direct;\r\n  }\r\n  const username =\r\n    typeof user?.username === \"string\"\r\n      ? user.username.trim().toLowerCase()\r\n      : undefined;\r\n  if (username) {\r\n    const direct = index.byUsername.get(username);\r\n    if (direct) return direct;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst USERS_ERROR_HINT = \"   \";\r\nconst DUPLICATE_DIVISION_HINT_PREFIX = \"  \";\r\nconst TASK_SETTINGS_ERROR_HINT = \"    \";\r\nconst TASK_FIELD_SAVE_ERROR = \"    \";\r\nconst TASK_TYPE_SAVE_ERROR = \"    \";\r\nconst TASK_SETTINGS_DELETE_ERROR = \"    \";\r\nconst USER_DELETE_SUCCESS = \" \";\r\nconst USER_DELETE_ERROR = \"   \";\r\nconst EMPLOYEE_DELETE_SUCCESS = \" \";\r\nconst EMPLOYEE_DELETE_ERROR = \"   \";\r\n\r\ntype CollectionColumn = (typeof collectionColumns)[number];\r\n\r\nconst hasAccessorKey = (\r\n  column: CollectionColumn,\r\n): column is CollectionColumn & { accessorKey: string } =>\r\n  typeof (column as { accessorKey?: unknown }).accessorKey === \"string\";\r\n\r\nexport default function CollectionsPage() {\r\n  const { t } = useTranslation();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [activeModule, setActiveModule] = useState<SettingsModuleKey>(() => {\r\n    const param = searchParams.get(\"module\");\r\n    return isValidModuleKey(param) ? param : \"directories\";\r\n  });\r\n  const [active, setActive] = useState<CollectionKey>(\"departments\");\r\n  const [items, setItems] = useState<CollectionItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [total, setTotal] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [queries, setQueries] = useState<Record<CollectionKey, string>>(() =>\r\n    createInitialQueries(),\r\n  );\r\n  const [searchDrafts, setSearchDrafts] = useState<Record<CollectionKey, string>>(\r\n    () => createInitialQueries(),\r\n  );\r\n  const [form, setForm] = useState<ItemForm>({ name: \"\", value: \"\" });\r\n  const [hint, setHint] = useState(\"\");\r\n  const [allDepartments, setAllDepartments] = useState<CollectionItem[]>([]);\r\n  const [allDivisions, setAllDivisions] = useState<CollectionItem[]>([]);\r\n  const [allPositions, setAllPositions] = useState<CollectionItem[]>([]);\r\n  const [allRoles, setAllRoles] = useState<Role[]>([]);\r\n  const limit = 10;\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [userPage, setUserPage] = useState(1);\r\n  const [userQuery, setUserQuery] = useState(\"\");\r\n  const [userSearchDraft, setUserSearchDraft] = useState(\"\");\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [userForm, setUserForm] = useState<UserFormData>(emptyUser);\r\n  const [collectionModalOpen, setCollectionModalOpen] = useState(false);\r\n  const [selectedCollection, setSelectedCollection] = useState<\r\n    CollectionItem | null\r\n  >(null);\r\n  const collectionSearchTimer = useRef<number>();\r\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState<\r\n    string | undefined\r\n  >(undefined);\r\n  const [isEmployeeModalOpen, setIsEmployeeModalOpen] = useState(false);\r\n  const [employeeFormMode, setEmployeeFormMode] = useState<\"create\" | \"update\">(\r\n    \"create\",\r\n  );\r\n  const [taskFieldItems, setTaskFieldItems] = useState<CollectionItem[]>([]);\r\n  const [taskTypeItems, setTaskTypeItems] = useState<CollectionItem[]>([]);\r\n  const [tasksLoading, setTasksLoading] = useState(false);\r\n  const { user: currentUser } = useAuth();\r\n  const [confirmUserDelete, setConfirmUserDelete] = useState(false);\r\n  const [confirmEmployeeDelete, setConfirmEmployeeDelete] = useState(false);\r\n  const canManageUsers = hasAccess(currentUser?.access, ACCESS_ADMIN);\r\n  const actionButtonClass =\r\n    \"h-10 w-full max-w-[11rem] px-3 text-sm font-semibold sm:w-auto lg:h-8 lg:text-xs\";\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (collectionSearchTimer.current) {\r\n        window.clearTimeout(collectionSearchTimer.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const param = searchParams.get(\"module\");\r\n    const next = isValidModuleKey(param) ? param : \"directories\";\r\n    if (next !== activeModule) {\r\n      setActiveModule(next);\r\n    }\r\n  }, [searchParams, activeModule]);\r\n\r\n  const handleModuleChange = useCallback(\r\n    (value: SettingsModuleKey) => {\r\n      setActiveModule(value);\r\n      const next = new URLSearchParams(searchParams.toString());\r\n      if (value === \"directories\") {\r\n        next.delete(\"module\");\r\n      } else {\r\n        next.set(\"module\", value);\r\n      }\r\n      setSearchParams(next, { replace: true });\r\n    },\r\n    [searchParams, setSearchParams],\r\n  );\r\n  const selectedCollectionInfo = useMemo(() => {\r\n    if (!selectedCollection?.meta || typeof selectedCollection.meta !== \"object\") {\r\n      return { readonly: false, notice: undefined as string | undefined };\r\n    }\r\n    const meta = selectedCollection.meta as {\r\n      readonly?: unknown;\r\n      legacy?: unknown;\r\n      readonlyReason?: unknown;\r\n    };\r\n    const readonly = Boolean(meta.readonly ?? meta.legacy);\r\n    const notice = readonly\r\n      ? typeof meta.readonlyReason === \"string\"\r\n        ? meta.readonlyReason\r\n        : meta.legacy\r\n          ? \"         .\"\r\n          : undefined\r\n      : undefined;\r\n    return { readonly, notice };\r\n  }, [selectedCollection]);\r\n\r\n  const breadcrumbs = useMemo(\r\n    () => [\r\n      { label: t(\"nav.settings\"), href: \"/settings\" },\r\n      { label: t(\"collections.page.title\") },\r\n    ],\r\n    [t],\r\n  );\r\n\r\n  const currentQuery = queries[active] ?? \"\";\r\n  const currentSearchDraft = searchDrafts[active] ?? \"\";\r\n  const isCollectionSearchSupported =\r\n    activeModule === \"directories\" &&\r\n    active !== \"users\" &&\r\n    active !== \"fleets\" &&\r\n    active !== \"tasks\";\r\n  const isUserSearchActive =\r\n    activeModule === \"directories\" && active === \"users\";\r\n  const isEmployeeSearchActive =\r\n    activeModule === \"directories\" && active === \"employees\";\r\n\r\n  const applyCollectionSearch = useCallback(\r\n    (raw: string) => {\r\n      const normalized = raw.trim();\r\n      setPage(1);\r\n      setQueries((prev) => {\r\n        if (prev[active] === normalized) {\r\n          return prev;\r\n        }\r\n        return { ...prev, [active]: normalized };\r\n      });\r\n    },\r\n    [active],\r\n  );\r\n\r\n  useEffect(() => {\r\n    setSearchDrafts((prev) => ({ ...prev, [active]: currentQuery }));\r\n  }, [active, currentQuery]);\r\n\r\n  useEffect(() => {\r\n    if (!isCollectionSearchSupported) {\r\n      return;\r\n    }\r\n    if (collectionSearchTimer.current) {\r\n      window.clearTimeout(collectionSearchTimer.current);\r\n    }\r\n    collectionSearchTimer.current = window.setTimeout(() => {\r\n      applyCollectionSearch(currentSearchDraft);\r\n    }, 400);\r\n    return () => {\r\n      if (collectionSearchTimer.current) {\r\n        window.clearTimeout(collectionSearchTimer.current);\r\n      }\r\n    };\r\n  }, [\r\n    applyCollectionSearch,\r\n    currentSearchDraft,\r\n    isCollectionSearchSupported,\r\n  ]);\r\n\r\n  const load = useCallback(async () => {\r\n    if (active === \"users\" || active === \"tasks\") {\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    try {\r\n      if (active === \"fleets\") {\r\n        setItems([]);\r\n        setTotal(0);\r\n        setHint(\"\");\r\n        return;\r\n      }\r\n      if (active === \"employees\") {\r\n        const list = await fetchAllCollectionItems(\"employees\");\r\n        setItems(list);\r\n        setTotal(list.length);\r\n        setHint(\"\");\r\n        return;\r\n      }\r\n      const d = (await fetchCollectionItems(\r\n        active,\r\n        currentQuery,\r\n        page,\r\n        limit,\r\n      )) as { items: CollectionItem[]; total: number };\r\n      setItems(d.items);\r\n      setTotal(d.total);\r\n      if (active === \"departments\") {\r\n        setAllDepartments((prev) => mergeById(prev, d.items));\r\n      }\r\n      if (active === \"divisions\") {\r\n        setAllDivisions((prev) => mergeById(prev, d.items));\r\n      }\r\n      if (active === \"positions\") {\r\n        setAllPositions((prev) => mergeById(prev, d.items));\r\n      }\r\n      setHint(\"\");\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error\r\n          ? error.message\r\n          : \"   \";\r\n      setItems([]);\r\n      setTotal(0);\r\n      setHint(message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [active, currentQuery, page]);\r\n\r\n  const loadUsers = useCallback(async () => {\r\n    try {\r\n      const list = await fetchUsers();\r\n      setUsers(list);\r\n      setHint((prev) => (prev === USERS_ERROR_HINT ? \"\" : prev));\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : USERS_ERROR_HINT;\r\n      setUsers([]);\r\n      setHint(message || USERS_ERROR_HINT);\r\n    }\r\n  }, []);\r\n\r\n  const loadTaskSettings = useCallback(async () => {\r\n    setTasksLoading(true);\r\n    try {\r\n      const [fields, types] = await Promise.all([\r\n        fetchAllCollectionItems(\"task_fields\"),\r\n        fetchAllCollectionItems(\"task_types\"),\r\n      ]);\r\n      setTaskFieldItems(fields);\r\n      setTaskTypeItems(types);\r\n      setHint((prev) => (prev === TASK_SETTINGS_ERROR_HINT ? \"\" : prev));\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : TASK_SETTINGS_ERROR_HINT;\r\n      setTaskFieldItems([]);\r\n      setTaskTypeItems([]);\r\n      setHint(message || TASK_SETTINGS_ERROR_HINT);\r\n    } finally {\r\n      setTasksLoading(false);\r\n    }\r\n  }, [setHint]);\r\n\r\n  useEffect(() => {\r\n    if (active === \"tasks\") {\r\n      void loadTaskSettings();\r\n    }\r\n  }, [active, loadTaskSettings]);\r\n\r\n  const saveTaskField = useCallback(\r\n    async (item: CollectionItem, label: string) => {\r\n      const trimmed = label.trim();\r\n      if (!trimmed) {\r\n        throw new Error(\"    \");\r\n      }\r\n      try {\r\n        if (item.meta?.virtual) {\r\n          await createCollectionItem(\"task_fields\", {\r\n            name: item.name,\r\n            value: trimmed,\r\n          });\r\n        } else {\r\n          await updateCollectionItem(\r\n            item._id,\r\n            { name: item.name, value: trimmed },\r\n            { collectionType: \"task_fields\" },\r\n          );\r\n        }\r\n        await loadTaskSettings();\r\n      } catch (error) {\r\n        const message =\r\n          error instanceof Error ? error.message : TASK_FIELD_SAVE_ERROR;\r\n        throw new Error(message || TASK_FIELD_SAVE_ERROR);\r\n      }\r\n    },\r\n    [loadTaskSettings],\r\n  );\r\n\r\n  const deleteTaskField = useCallback(\r\n    async (item: CollectionItem) => {\r\n      if (item.meta?.virtual) {\r\n        return;\r\n      }\r\n      try {\r\n        await removeCollectionItem(item._id);\r\n        await loadTaskSettings();\r\n      } catch (error) {\r\n        const message =\r\n          error instanceof Error ? error.message : TASK_SETTINGS_DELETE_ERROR;\r\n        throw new Error(message || TASK_SETTINGS_DELETE_ERROR);\r\n      }\r\n    },\r\n    [loadTaskSettings],\r\n  );\r\n\r\n  const saveTaskType = useCallback(\r\n    async (\r\n      item: CollectionItem,\r\n      payload: { label: string; tg_theme_url: string; tg_photos_url: string },\r\n    ) => {\r\n      const trimmedLabel = payload.label.trim();\r\n      if (!trimmedLabel) {\r\n        throw new Error(\"    \");\r\n      }\r\n      const trimmedUrl = payload.tg_theme_url.trim();\r\n      const trimmedPhotosUrl = payload.tg_photos_url.trim();\r\n      try {\r\n        const buildMeta = () => {\r\n          const meta: Record<string, string> = {};\r\n          if (trimmedUrl) meta.tg_theme_url = trimmedUrl;\r\n          if (trimmedPhotosUrl) meta.tg_photos_url = trimmedPhotosUrl;\r\n          return meta;\r\n        };\r\n        if (item.meta?.virtual) {\r\n          const meta = buildMeta();\r\n          await createCollectionItem(\"task_types\", {\r\n            name: item.name,\r\n            value: trimmedLabel,\r\n            ...(Object.keys(meta).length ? { meta } : {}),\r\n          });\r\n        } else {\r\n          const meta = buildMeta();\r\n          if (!trimmedUrl) {\r\n            meta.tg_theme_url = \"\";\r\n          }\r\n          if (!trimmedPhotosUrl) {\r\n            meta.tg_photos_url = \"\";\r\n          }\r\n          await updateCollectionItem(\r\n            item._id,\r\n            {\r\n              name: item.name,\r\n              value: trimmedLabel,\r\n              meta,\r\n            },\r\n            { collectionType: \"task_types\" },\r\n          );\r\n        }\r\n        await loadTaskSettings();\r\n      } catch (error) {\r\n        const message =\r\n          error instanceof Error ? error.message : TASK_TYPE_SAVE_ERROR;\r\n        throw new Error(message || TASK_TYPE_SAVE_ERROR);\r\n      }\r\n    },\r\n    [loadTaskSettings],\r\n  );\r\n\r\n  const deleteTaskType = useCallback(\r\n    async (item: CollectionItem) => {\r\n      if (item.meta?.virtual) {\r\n        return;\r\n      }\r\n      try {\r\n        await removeCollectionItem(item._id);\r\n        await loadTaskSettings();\r\n      } catch (error) {\r\n        const message =\r\n          error instanceof Error ? error.message : TASK_SETTINGS_DELETE_ERROR;\r\n        throw new Error(message || TASK_SETTINGS_DELETE_ERROR);\r\n      }\r\n    },\r\n    [loadTaskSettings],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (active === \"users\" || active === \"employees\") {\r\n      setUserSearchDraft(userQuery);\r\n    }\r\n  }, [active, userQuery]);\r\n\r\n  useEffect(() => {\r\n    if (collectionModalOpen && selectedCollection?.type === \"divisions\") {\r\n      void loadUsers();\r\n    }\r\n  }, [collectionModalOpen, selectedCollection, loadUsers]);\r\n\r\n  useEffect(() => {\r\n    const loadReferenceCollections = async () => {\r\n      const [departmentsResult, divisionsResult, positionsResult] =\r\n        await Promise.allSettled([\r\n          fetchAllCollectionItems(\"departments\"),\r\n          fetchAllCollectionItems(\"divisions\"),\r\n          fetchAllCollectionItems(\"positions\"),\r\n        ]);\r\n\r\n      const applyResult = (\r\n        result: PromiseSettledResult<CollectionItem[]>,\r\n        setter: React.Dispatch<React.SetStateAction<CollectionItem[]>>,\r\n        fallbackMessage: string,\r\n      ) => {\r\n        if (result.status === \"fulfilled\") {\r\n          setter(result.value);\r\n          return;\r\n        }\r\n        const reason = result.reason;\r\n        const message =\r\n          reason instanceof Error && reason.message\r\n            ? reason.message\r\n            : fallbackMessage;\r\n        setHint((prev) => prev || message);\r\n      };\r\n\r\n      applyResult(\r\n        departmentsResult,\r\n        setAllDepartments,\r\n        \"   \",\r\n      );\r\n      applyResult(\r\n        divisionsResult,\r\n        setAllDivisions,\r\n        \"   \",\r\n      );\r\n      applyResult(\r\n        positionsResult,\r\n        setAllPositions,\r\n        \"   \",\r\n      );\r\n    };\r\n\r\n    void loadReferenceCollections();\r\n    fetchRoles()\r\n      .then((list) => setAllRoles(list))\r\n      .catch((error) => {\r\n        setAllRoles([]);\r\n        const message =\r\n          error instanceof Error\r\n            ? error.message\r\n            : \"   \";\r\n        setHint((prev) => prev || message);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (active !== \"users\" && active !== \"tasks\") {\r\n      void load();\r\n      if (active !== \"fleets\") {\r\n        setForm({ name: \"\", value: \"\" });\r\n      }\r\n    } else {\r\n      setHint(\"\");\r\n    }\r\n  }, [load, active]);\r\n\r\n  useEffect(() => {\r\n    if (active === \"users\") {\r\n      void loadUsers();\r\n      setUserForm(emptyUser);\r\n      setSelectedEmployeeId(undefined);\r\n    }\r\n    if (active === \"employees\") {\r\n      void loadUsers();\r\n      setSelectedEmployeeId(undefined);\r\n      setEmployeeFormMode(\"create\");\r\n      setIsEmployeeModalOpen(false);\r\n    }\r\n    if (active !== \"employees\") {\r\n      setIsEmployeeModalOpen(false);\r\n    }\r\n    if (\r\n      active === \"users\" ||\r\n      active === \"employees\" ||\r\n      active === \"fleets\" ||\r\n      active === \"tasks\"\r\n    ) {\r\n      setCollectionModalOpen(false);\r\n    }\r\n    if (active !== \"users\") {\r\n      setUserModalOpen(false);\r\n      setUserForm(emptyUser);\r\n    }\r\n  }, [active, loadUsers]);\r\n\r\n  const openCollectionModal = (item?: CollectionItem) => {\r\n    if (item) {\r\n      setForm({ _id: item._id, name: item.name, value: item.value });\r\n      setSelectedCollection(item);\r\n    } else {\r\n      setForm({ name: \"\", value: \"\" });\r\n      setSelectedCollection(null);\r\n    }\r\n    setCollectionModalOpen(true);\r\n  };\r\n\r\n  const closeCollectionModal = () => {\r\n    setCollectionModalOpen(false);\r\n    setSelectedCollection(null);\r\n    setForm({ name: \"\", value: \"\" });\r\n  };\r\n\r\n  const mapUserToForm = (user?: User): UserFormData => ({\r\n    telegram_id: user?.telegram_id,\r\n    username: user?.telegram_username ?? user?.username ?? \"\",\r\n    name: user?.name ?? \"\",\r\n    phone: user?.phone ?? \"\",\r\n    mobNumber: user?.mobNumber ?? \"\",\r\n    email: user?.email ?? \"\",\r\n    role: user?.role ?? \"user\",\r\n    access: user?.access ?? 1,\r\n    roleId: user?.roleId ?? \"\",\r\n    departmentId: user?.departmentId ?? \"\",\r\n    divisionId: user?.divisionId ?? \"\",\r\n    positionId: user?.positionId ?? \"\",\r\n  });\r\n\r\n  const openUserModal = (user?: User) => {\r\n    setUserForm(user ? mapUserToForm(user) : emptyUser);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const closeUserModal = useCallback(() => {\r\n    setUserModalOpen(false);\r\n    setUserForm(emptyUser);\r\n  }, []);\r\n\r\n  const openEmployeeModal = (user?: User) => {\r\n    if (user) {\r\n      setSelectedEmployeeId(String(user.telegram_id));\r\n      setEmployeeFormMode(\"update\");\r\n    } else {\r\n      setSelectedEmployeeId(undefined);\r\n      setEmployeeFormMode(\"create\");\r\n    }\r\n    setIsEmployeeModalOpen(true);\r\n  };\r\n\r\n  const updateCollectionSearchDraft = useCallback(\r\n    (value: string) => {\r\n      setSearchDrafts((prev) => ({ ...prev, [active]: value }));\r\n    },\r\n    [active],\r\n  );\r\n\r\n  const submitCollectionSearch = useCallback(\r\n    (value?: string) => {\r\n      if (collectionSearchTimer.current) {\r\n        window.clearTimeout(collectionSearchTimer.current);\r\n      }\r\n      applyCollectionSearch(value ?? currentSearchDraft);\r\n    },\r\n    [applyCollectionSearch, currentSearchDraft],\r\n  );\r\n\r\n  const handleCollectionSearchKeyDown = useCallback(\r\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (!isCollectionSearchSupported) {\r\n        return;\r\n      }\r\n      if (event.key === \"Enter\") {\r\n        event.preventDefault();\r\n        submitCollectionSearch(event.currentTarget.value);\r\n      }\r\n      if (event.key === \"Escape\") {\r\n        event.preventDefault();\r\n        updateCollectionSearchDraft(\"\");\r\n        submitCollectionSearch(\"\");\r\n      }\r\n    },\r\n    [\r\n      isCollectionSearchSupported,\r\n      submitCollectionSearch,\r\n      updateCollectionSearchDraft,\r\n    ],\r\n  );\r\n\r\n  const resetCollectionSearch = useCallback(() => {\r\n    updateCollectionSearchDraft(\"\");\r\n    submitCollectionSearch(\"\");\r\n  }, [submitCollectionSearch, updateCollectionSearchDraft]);\r\n\r\n  const submitUserSearch = useCallback(\r\n    (event?: React.FormEvent) => {\r\n      event?.preventDefault();\r\n      setUserPage(1);\r\n      setUserQuery(userSearchDraft.trim());\r\n      setSelectedEmployeeId(undefined);\r\n    },\r\n    [userSearchDraft],\r\n  );\r\n\r\n  const handleUserSearchKeyDown = useCallback(\r\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (!isUserSearchActive) {\r\n        return;\r\n      }\r\n      if (event.key === \"Enter\") {\r\n        event.preventDefault();\r\n        submitUserSearch();\r\n      }\r\n      if (event.key === \"Escape\") {\r\n        event.preventDefault();\r\n        setUserSearchDraft(\"\");\r\n        submitUserSearch();\r\n      }\r\n    },\r\n    [isUserSearchActive, submitUserSearch],\r\n  );\r\n\r\n  const handleEmployeeSaved = (updated: UserDetails) => {\r\n    void loadUsers();\r\n    if (updated.telegram_id !== undefined) {\r\n      setSelectedEmployeeId(String(updated.telegram_id));\r\n      setEmployeeFormMode(\"update\");\r\n    }\r\n  };\r\n\r\n  const executeUserDelete = useCallback(async () => {\r\n    if (!userForm.telegram_id) {\r\n      setConfirmUserDelete(false);\r\n      return;\r\n    }\r\n    try {\r\n      await deleteUserApi(userForm.telegram_id);\r\n      showToast(USER_DELETE_SUCCESS, \"success\");\r\n      setSelectedEmployeeId((prev) =>\r\n        prev === String(userForm.telegram_id) ? undefined : prev,\r\n      );\r\n      closeUserModal();\r\n      await loadUsers();\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : USER_DELETE_ERROR;\r\n      showToast(message || USER_DELETE_ERROR, \"error\");\r\n    } finally {\r\n      setConfirmUserDelete(false);\r\n    }\r\n  }, [\r\n    userForm.telegram_id,\r\n    closeUserModal,\r\n    loadUsers,\r\n    setSelectedEmployeeId,\r\n  ]);\r\n\r\n  const executeEmployeeDelete = useCallback(async () => {\r\n    if (!selectedEmployeeId) {\r\n      setConfirmEmployeeDelete(false);\r\n      return;\r\n    }\r\n    try {\r\n      await deleteUserApi(selectedEmployeeId);\r\n      showToast(EMPLOYEE_DELETE_SUCCESS, \"success\");\r\n      setIsEmployeeModalOpen(false);\r\n      setSelectedEmployeeId(undefined);\r\n      setEmployeeFormMode(\"create\");\r\n      await loadUsers();\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : EMPLOYEE_DELETE_ERROR;\r\n      showToast(message || EMPLOYEE_DELETE_ERROR, \"error\");\r\n    } finally {\r\n      setConfirmEmployeeDelete(false);\r\n    }\r\n  }, [\r\n    selectedEmployeeId,\r\n    loadUsers,\r\n  ]);\r\n\r\n  const submit = async () => {\r\n    if (active === \"fleets\") return;\r\n    const trimmedName = form.name.trim();\r\n    if (!trimmedName) return;\r\n    if (form._id && selectedCollectionInfo.readonly) {\r\n      setHint(\r\n        selectedCollectionInfo.notice ??\r\n          \"         .\",\r\n      );\r\n      return;\r\n    }\r\n    let valueToSave = form.value;\r\n    if (active === \"departments\") {\r\n      valueToSave = safeParseIds(form.value).join(\",\");\r\n    } else {\r\n      valueToSave = form.value.trim();\r\n      if (!valueToSave) {\r\n        setHint(\"  .\");\r\n        return;\r\n      }\r\n    }\r\n    try {\r\n      let saved: CollectionItem | null = null;\r\n      if (form._id) {\r\n        saved = await updateCollectionItem(form._id, {\r\n          name: trimmedName,\r\n          value: valueToSave,\r\n        }, { collectionType: active });\r\n      } else {\r\n        saved = await createCollectionItem(active, {\r\n          name: trimmedName,\r\n          value: valueToSave,\r\n        });\r\n      }\r\n      if (!saved) {\r\n        throw new Error(\"    \");\r\n      }\r\n      setHint(\"\");\r\n      await load();\r\n      closeCollectionModal();\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : \"   \";\r\n      setHint(message);\r\n    }\r\n  };\r\n\r\n  const remove = async () => {\r\n    if (!form._id) return;\r\n    if (selectedCollectionInfo.readonly) {\r\n      setHint(\r\n        selectedCollectionInfo.notice ??\r\n          \"         .\",\r\n      );\r\n      return;\r\n    }\r\n    try {\r\n      await removeCollectionItem(form._id);\r\n      setHint(\"\");\r\n      await load();\r\n      closeCollectionModal();\r\n    } catch (e) {\r\n      const msg = e instanceof Error ? e.message : \"\";\r\n      setHint(msg);\r\n    }\r\n  };\r\n\r\n  const submitUser = async () => {\r\n    if (!userForm.telegram_id) return;\r\n    const id = userForm.telegram_id;\r\n    if (!users.find((u) => u.telegram_id === id)) {\r\n      await createUserApi(id, userForm.username, userForm.roleId);\r\n    }\r\n    const { telegram_id: _telegramId, ...data } = userForm;\r\n    await updateUserApi(id, data);\r\n    void loadUsers();\r\n    closeUserModal();\r\n  };\r\n\r\n  const departmentMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    allDepartments.forEach((d) => map.set(d._id, d.name));\r\n    return map;\r\n  }, [allDepartments]);\r\n\r\n  const divisionMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    allDivisions.forEach((d) => map.set(d._id, d.name));\r\n    return map;\r\n  }, [allDivisions]);\r\n\r\n  const positionMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    allPositions.forEach((position) => map.set(position._id, position.name));\r\n    return map;\r\n  }, [allPositions]);\r\n\r\n  const employeeDetailsIndex = useMemo(\r\n    () => buildEmployeeDetailsIndex(items),\r\n    [items],\r\n  );\r\n\r\n  const enrichUserWithEmployeeDetails = useCallback(\r\n    (user: User) =>\r\n      mergeEmployeeDetails(user, findEmployeeDetails(user, employeeDetailsIndex)),\r\n    [employeeDetailsIndex],\r\n  );\r\n\r\n  const enrichedUsers = useMemo(\r\n    () => users.map((user) => enrichUserWithEmployeeDetails(user)),\r\n    [users, enrichUserWithEmployeeDetails],\r\n  );\r\n\r\n  const roleMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    allRoles.forEach((role) => map.set(role._id, role.name));\r\n    return map;\r\n  }, [allRoles]);\r\n\r\n  const { divisionOwners, duplicateDivisionIds } = useMemo(() => {\r\n    const owners = new Map<string, string>();\r\n    const duplicates = new Set<string>();\r\n    allDepartments.forEach((department) => {\r\n      safeParseIds(department.value).forEach((divisionId) => {\r\n        const currentOwner = owners.get(divisionId);\r\n        if (currentOwner && currentOwner !== department._id) {\r\n          duplicates.add(divisionId);\r\n          return;\r\n        }\r\n        if (!currentOwner) {\r\n          owners.set(divisionId, department._id);\r\n        }\r\n      });\r\n    });\r\n    return { divisionOwners: owners, duplicateDivisionIds: Array.from(duplicates) };\r\n  }, [allDepartments]);\r\n\r\n  const duplicateDivisionHint = useMemo(() => {\r\n    if (!duplicateDivisionIds.length) return \"\";\r\n    const names = duplicateDivisionIds\r\n      .map(\r\n        (id) =>\r\n          divisionMap.get(id) ??\r\n          allDivisions.find((division) => division._id === id)?.name ??\r\n          id,\r\n      )\r\n      .filter((name): name is string => Boolean(name));\r\n    const suffix = names.length ? `: ${names.join(\", \")}.` : \".\";\r\n    return `${DUPLICATE_DIVISION_HINT_PREFIX}${suffix}`;\r\n  }, [duplicateDivisionIds, divisionMap, allDivisions]);\r\n\r\n  useEffect(() => {\r\n    if (duplicateDivisionHint) {\r\n      setHint((prev) => (prev ? prev : duplicateDivisionHint));\r\n      return;\r\n    }\r\n    setHint((prev) =>\r\n      prev && prev.startsWith(DUPLICATE_DIVISION_HINT_PREFIX) ? \"\" : prev,\r\n    );\r\n  }, [duplicateDivisionHint]);\r\n\r\n  const getItemDisplayValue = useCallback(\r\n    (item: CollectionItem, type: CollectionKey) => {\r\n      if (type === \"departments\") {\r\n        const ids = safeParseIds(item.value);\r\n        if (!ids.length) return SETTINGS_BADGE_EMPTY;\r\n        const names = ids\r\n          .map(\r\n            (id) =>\r\n              divisionMap.get(id) ??\r\n              allDivisions.find((division) => division._id === id)?.name ??\r\n              id,\r\n          )\r\n          .filter((name): name is string => Boolean(name));\r\n        return names.length ? names.join(\"\\n\") : SETTINGS_BADGE_EMPTY;\r\n      }\r\n      if (type === \"divisions\") {\r\n        const departmentName =\r\n          departmentMap.get(item.value) ??\r\n          allDepartments.find((department) => department._id === item.value)?.name ??\r\n          item.value;\r\n        return departmentName ? formatCollectionRawValue(departmentName) : SETTINGS_BADGE_EMPTY;\r\n      }\r\n      if (type === \"positions\") {\r\n        const divisionName =\r\n          divisionMap.get(item.value) ??\r\n          allDivisions.find((division) => division._id === item.value)?.name ??\r\n          item.value;\r\n        return divisionName ? formatCollectionRawValue(divisionName) : SETTINGS_BADGE_EMPTY;\r\n      }\r\n      const formatted = formatCollectionRawValue(item.value ?? \"\");\r\n      return formatted || SETTINGS_BADGE_EMPTY;\r\n    },\r\n    [\r\n      allDepartments,\r\n      allDivisions,\r\n      departmentMap,\r\n      divisionMap,\r\n    ],\r\n  );\r\n\r\n  const formatMetaSummary = useCallback((meta?: CollectionItem[\"meta\"]) => {\r\n    if (!meta) return SETTINGS_BADGE_EMPTY;\r\n    const summary = summarizeRecord(meta as Record<string, unknown>);\r\n    return summary || SETTINGS_BADGE_EMPTY;\r\n  }, []);\r\n\r\n  const copyIdLabel = t(\"collections.actions.copyId\");\r\n  const copiedIdLabel = t(\"collections.actions.copiedId\");\r\n\r\n  const localizedCollectionColumns = useMemo(\r\n    () =>\r\n      collectionColumns.map((column) => {\r\n        if (!hasAccessorKey(column)) {\r\n          return column;\r\n        }\r\n        switch (column.accessorKey) {\r\n          case \"name\":\r\n            return { ...column, header: t(\"collections.table.columns.name\") };\r\n          case \"value\":\r\n            return { ...column, header: t(\"collections.table.columns.value\") };\r\n          case \"displayValue\":\r\n            return {\r\n              ...column,\r\n              header: t(\"collections.table.columns.relations\"),\r\n            };\r\n          case \"type\":\r\n            return { ...column, header: t(\"collections.table.columns.type\") };\r\n          case \"_id\":\r\n            return {\r\n              ...column,\r\n              header: t(\"collections.table.columns.id\"),\r\n              cell: ({ getValue }) => {\r\n                const raw = getValue<string>();\r\n                const safeValue = typeof raw === \"string\" ? raw : \"\";\r\n                if (!safeValue) {\r\n                  return (\r\n                    <span className=\"text-xs text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\">\r\n                      {SETTINGS_BADGE_EMPTY}\r\n                    </span>\r\n                  );\r\n                }\r\n                return (\r\n                  <CopyableId\r\n                    value={safeValue}\r\n                    copyHint={copyIdLabel}\r\n                    copiedHint={copiedIdLabel}\r\n                  />\r\n                );\r\n              },\r\n            };\r\n          case \"metaSummary\":\r\n            return {\r\n              ...column,\r\n              header: t(\"collections.table.columns.meta\"),\r\n            };\r\n          default:\r\n            return column;\r\n        }\r\n      }),\r\n    [copiedIdLabel, copyIdLabel, t],\r\n  );\r\n\r\n  const collectionSearchPlaceholder = t(\"collections.search.placeholder\");\r\n  const collectionSearchHint = t(\"collections.search.hint\");\r\n  const collectionSearchCta = t(\"collections.actions.search\");\r\n  const collectionResetCta = t(\"collections.actions.reset\");\r\n  const collectionAddCta = t(\"collections.actions.add\");\r\n  const collectionEmptyTitle = t(\"collections.table.empty.title\");\r\n  const collectionEmptyDescription = t(\"collections.table.empty.description\");\r\n  const collectionEmptyAction = t(\"collections.table.empty.action\");\r\n  const userSearchPlaceholder = t(\"collections.users.searchPlaceholder\");\r\n  const userAddCta = t(\"collections.users.add\");\r\n  const employeeSearchPlaceholder = t(\"collections.employees.searchPlaceholder\");\r\n  const employeeAddCta = t(\"collections.employees.add\");\r\n\r\n  const buildCollectionColumns = useCallback(\r\n    (excludedKeys: string[]) =>\r\n      localizedCollectionColumns.filter(\r\n        (column) =>\r\n          !hasAccessorKey(column) ||\r\n          !excludedKeys.includes(column.accessorKey),\r\n      ),\r\n    [localizedCollectionColumns],\r\n  );\r\n\r\n  const departmentColumns = useMemo(\r\n    () => buildCollectionColumns([\"value\", \"type\", \"metaSummary\"]),\r\n    [buildCollectionColumns],\r\n  );\r\n\r\n  const divisionColumns = useMemo(\r\n    () => buildCollectionColumns([\"type\", \"metaSummary\"]),\r\n    [buildCollectionColumns],\r\n  );\r\n\r\n  const positionColumns = useMemo(\r\n    () => buildCollectionColumns([\"type\", \"metaSummary\"]),\r\n    [buildCollectionColumns],\r\n  );\r\n\r\n  const renderDepartmentValueField = useCallback(\r\n    (\r\n      currentForm: ItemForm,\r\n      handleChange: (next: ItemForm) => void,\r\n      options?: { readonly?: boolean },\r\n    ) => {\r\n      const selected = safeParseIds(currentForm.value);\r\n      const handleSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const values = Array.from(event.target.selectedOptions).map(\r\n          (option) => option.value,\r\n        );\r\n        handleChange({ ...currentForm, value: values.join(\",\") });\r\n      };\r\n      return (\r\n        <select\r\n          multiple\r\n          className=\"min-h-[8rem] w-full rounded border px-3 py-2\"\r\n          value={selected}\r\n          onChange={handleSelect}\r\n          disabled={options?.readonly}\r\n        >\r\n          {allDivisions\r\n            .filter((division) => {\r\n              const ownerId = divisionOwners.get(division._id);\r\n              if (!ownerId) return true;\r\n              const isSelected = selected.includes(division._id);\r\n              if (isSelected) return true;\r\n              if (!currentForm._id) return false;\r\n              return ownerId === currentForm._id;\r\n            })\r\n            .map((division) => (\r\n              <option key={division._id} value={division._id}>\r\n                {division.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      );\r\n    },\r\n    [allDivisions, divisionOwners],\r\n  );\r\n\r\n  const renderDivisionValueField = useCallback(\r\n    (\r\n      currentForm: ItemForm,\r\n      handleChange: (next: ItemForm) => void,\r\n      options?: { readonly?: boolean },\r\n    ) => (\r\n      <select\r\n        className=\"h-10 w-full rounded border px-3\"\r\n        value={currentForm.value}\r\n        onChange={(event) =>\r\n          handleChange({ ...currentForm, value: event.target.value })\r\n        }\r\n        required\r\n        disabled={options?.readonly}\r\n      >\r\n        <option value=\"\" disabled>\r\n           \r\n        </option>\r\n        {allDepartments.map((department) => (\r\n          <option key={department._id} value={department._id}>\r\n            {department.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    ),\r\n    [allDepartments],\r\n  );\r\n\r\n  const renderPositionValueField = useCallback(\r\n    (\r\n      currentForm: ItemForm,\r\n      handleChange: (next: ItemForm) => void,\r\n      options?: { readonly?: boolean },\r\n    ) => (\r\n      <select\r\n        className=\"h-10 w-full rounded border px-3\"\r\n        value={currentForm.value}\r\n        onChange={(event) =>\r\n          handleChange({ ...currentForm, value: event.target.value })\r\n        }\r\n        required\r\n        disabled={options?.readonly}\r\n      >\r\n        <option value=\"\" disabled>\r\n           \r\n        </option>\r\n        {allDivisions.map((division) => (\r\n          <option key={division._id} value={division._id}>\r\n            {division.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    ),\r\n    [allDivisions],\r\n  );\r\n\r\n  const totalPages = Math.ceil(total / limit) || 1;\r\n  const filteredUsers = useMemo(() => {\r\n    const trimmed = userQuery.trim();\r\n    if (!trimmed) {\r\n      return enrichedUsers;\r\n    }\r\n    return matchSorter<User>(enrichedUsers, trimmed, {\r\n      keys: [\r\n        {\r\n          key: (item: User) => item.username ?? \"\",\r\n          threshold: rankings.STARTS_WITH,\r\n        },\r\n        {\r\n          key: (item: User) => item.telegram_username ?? \"\",\r\n          threshold: rankings.STARTS_WITH,\r\n        },\r\n        {\r\n          key: (item: User) =>\r\n            item.telegram_id !== undefined && item.telegram_id !== null\r\n              ? String(item.telegram_id)\r\n              : \"\",\r\n          threshold: rankings.STARTS_WITH,\r\n        },\r\n        {\r\n          key: (item: User) => buildUserSearchTokens(item),\r\n          threshold: rankings.CONTAINS,\r\n        },\r\n      ],\r\n    });\r\n  }, [userQuery, enrichedUsers]);\r\n  const userTotalPages = Math.ceil(filteredUsers.length / limit) || 1;\r\n  const paginatedUsers = filteredUsers.slice(\r\n    (userPage - 1) * limit,\r\n    userPage * limit,\r\n  );\r\n\r\n\r\n  const employeeRows = useMemo<EmployeeRow[]>(\r\n    () =>\r\n      paginatedUsers.map((user) => {\r\n        const mergedUser = enrichUserWithEmployeeDetails(user);\r\n        const roleId =\r\n          typeof mergedUser.roleId === \"string\"\r\n            ? mergedUser.roleId.trim()\r\n            : \"\";\r\n        const departmentId =\r\n          typeof mergedUser.departmentId === \"string\"\r\n            ? mergedUser.departmentId.trim()\r\n            : \"\";\r\n        const divisionId =\r\n          typeof mergedUser.divisionId === \"string\"\r\n            ? mergedUser.divisionId.trim()\r\n            : \"\";\r\n        const positionId =\r\n          typeof mergedUser.positionId === \"string\"\r\n            ? mergedUser.positionId.trim()\r\n            : \"\";\r\n        const roleNameFromMap = resolveReferenceName(\r\n          roleMap,\r\n          roleId,\r\n          mergedUser.roleName,\r\n        );\r\n        const departmentName = resolveReferenceName(\r\n          departmentMap,\r\n          departmentId,\r\n          mergedUser.departmentName,\r\n        );\r\n        const divisionName = resolveReferenceName(\r\n          divisionMap,\r\n          divisionId,\r\n          mergedUser.divisionName,\r\n        );\r\n        const positionName = resolveReferenceName(\r\n          positionMap,\r\n          positionId,\r\n          mergedUser.positionName,\r\n        );\r\n        const roleLabel =\r\n          roleNameFromMap ||\r\n          (mergedUser.role ? formatRoleName(mergedUser.role) : \"\");\r\n        return buildEmployeeRow({\r\n          ...mergedUser,\r\n          roleId,\r\n          departmentId,\r\n          divisionId,\r\n          positionId,\r\n          roleName: roleLabel,\r\n          departmentName,\r\n          divisionName,\r\n          positionName,\r\n        });\r\n      }),\r\n    [\r\n      paginatedUsers,\r\n      roleMap,\r\n      departmentMap,\r\n      divisionMap,\r\n      positionMap,\r\n      enrichUserWithEmployeeDetails,\r\n    ],\r\n  );\r\n\r\n  const selectedEmployee = useMemo(() => {\r\n    if (!selectedEmployeeId) return undefined;\r\n    const base = enrichedUsers.find(\r\n      (u) => String(u.telegram_id) === selectedEmployeeId,\r\n    );\r\n    if (base) {\r\n      return base;\r\n    }\r\n    const fallbackDetails = findEmployeeDetails(\r\n      undefined,\r\n      employeeDetailsIndex,\r\n      selectedEmployeeId,\r\n    );\r\n    if (!fallbackDetails) return undefined;\r\n    const fallbackUser: User = {};\r\n    if (typeof fallbackDetails.telegram_id === \"number\") {\r\n      fallbackUser.telegram_id = fallbackDetails.telegram_id;\r\n    } else {\r\n      const parsedId = Number(selectedEmployeeId);\r\n      if (Number.isFinite(parsedId)) {\r\n        fallbackUser.telegram_id = parsedId;\r\n      }\r\n    }\r\n    if (fallbackDetails.username) {\r\n      fallbackUser.username = fallbackDetails.username;\r\n    }\r\n    if (fallbackDetails.telegram_username) {\r\n      fallbackUser.telegram_username = fallbackDetails.telegram_username;\r\n    }\r\n    return mergeEmployeeDetails(fallbackUser, fallbackDetails);\r\n  }, [employeeDetailsIndex, enrichedUsers, selectedEmployeeId]);\r\n\r\n  const selectedDepartmentDivisionNames = useMemo(() => {\r\n    if (!selectedCollection || selectedCollection.type !== \"departments\") {\r\n      return [] as string[];\r\n    }\r\n    const ids = safeParseIds(selectedCollection.value);\r\n    return ids\r\n      .map(\r\n        (id) =>\r\n          divisionMap.get(id) ??\r\n          allDivisions.find((division) => division._id === id)?.name ??\r\n          id,\r\n      )\r\n      .filter((name): name is string => Boolean(name));\r\n  }, [selectedCollection, divisionMap, allDivisions]);\r\n\r\n  const selectedDivisionDepartmentName = useMemo(() => {\r\n    if (!selectedCollection || selectedCollection.type !== \"divisions\") {\r\n      return SETTINGS_BADGE_EMPTY;\r\n    }\r\n    const departmentId = selectedCollection.value;\r\n    if (!departmentId) return SETTINGS_BADGE_EMPTY;\r\n    return (\r\n      departmentMap.get(departmentId) ??\r\n      allDepartments.find((department) => department._id === departmentId)?.name ??\r\n      departmentId\r\n    );\r\n  }, [selectedCollection, departmentMap, allDepartments]);\r\n\r\n  const selectedDivisionPositionNames = useMemo(() => {\r\n    if (!selectedCollection || selectedCollection.type !== \"divisions\") {\r\n      return [] as string[];\r\n    }\r\n    return allPositions\r\n      .filter((position) => position.value === selectedCollection._id)\r\n      .map((position) => position.name)\r\n      .filter((name): name is string => Boolean(name));\r\n  }, [selectedCollection, allPositions]);\r\n\r\n  const selectedDivisionEmployeeNames = useMemo(() => {\r\n    if (!selectedCollection || selectedCollection.type !== \"divisions\") {\r\n      return [] as string[];\r\n    }\r\n    return enrichedUsers\r\n      .filter((user) => user.divisionId === selectedCollection._id)\r\n      .map((user) => {\r\n        if (user.name && user.name.trim()) return user.name.trim();\r\n        if (user.username && user.username.trim()) return user.username.trim();\r\n        if (user.telegram_id !== undefined && user.telegram_id !== null)\r\n          return `ID ${user.telegram_id}`;\r\n        return \" \";\r\n      });\r\n  }, [selectedCollection, enrichedUsers]);\r\n\r\n  const directoriesToolbar = (() => {\r\n    if (activeModule !== \"directories\") {\r\n      return null;\r\n    }\r\n    if (isUserSearchActive || isEmployeeSearchActive) {\r\n      const isEmployee = isEmployeeSearchActive;\r\n      const placeholder = isEmployee\r\n        ? employeeSearchPlaceholder\r\n        : userSearchPlaceholder;\r\n      const addLabel = isEmployee ? employeeAddCta : userAddCta;\r\n      const handleAdd = isEmployee\r\n        ? () => openEmployeeModal()\r\n        : () => openUserModal();\r\n      return (\r\n        <div className=\"flex w-full flex-col gap-2 sm:flex-row sm:items-end sm:justify-between\">\r\n          <div className=\"flex w-full flex-col gap-1 sm:w-72\">\r\n            <label htmlFor=\"settings-users-search\" className=\"sr-only\">\r\n              {collectionSearchCta}\r\n            </label>\r\n            <input\r\n              id=\"settings-users-search\"\r\n              className=\"h-10 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm text-[color:var(--color-gray-900)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white\"\r\n              value={userSearchDraft}\r\n              onChange={(event) => setUserSearchDraft(event.target.value)}\r\n              onKeyDown={handleUserSearchKeyDown}\r\n              placeholder={placeholder}\r\n            />\r\n            <span className=\"text-[11px] text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\">\r\n              {collectionSearchHint}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            <Button size=\"sm\" onClick={() => submitUserSearch()}>\r\n              {collectionSearchCta}\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setUserSearchDraft(\"\");\r\n                submitUserSearch();\r\n              }}\r\n            >\r\n              {collectionResetCta}\r\n            </Button>\r\n            <Button size=\"sm\" variant=\"success\" onClick={handleAdd}>\r\n              {addLabel}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (isCollectionSearchSupported) {\r\n      return (\r\n        <div className=\"flex w-full flex-col gap-2 sm:flex-row sm:items-end sm:justify-between\">\r\n          <div className=\"flex w-full flex-col gap-1 sm:w-72\">\r\n            <label htmlFor=\"settings-collections-search\" className=\"sr-only\">\r\n              {collectionSearchCta}\r\n            </label>\r\n            <input\r\n              id=\"settings-collections-search\"\r\n              className=\"h-10 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm text-[color:var(--color-gray-900)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white\"\r\n              value={currentSearchDraft}\r\n              onChange={(event) => updateCollectionSearchDraft(event.target.value)}\r\n              onKeyDown={handleCollectionSearchKeyDown}\r\n              placeholder={collectionSearchPlaceholder}\r\n            />\r\n            <span className=\"text-[11px] text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\">\r\n              {collectionSearchHint}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            <Button size=\"sm\" onClick={() => submitCollectionSearch()}>\r\n              {collectionSearchCta}\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={resetCollectionSearch}\r\n            >\r\n              {collectionResetCta}\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"success\"\r\n              onClick={() => openCollectionModal()}\r\n            >\r\n              {collectionAddCta}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"flex flex-wrap items-center gap-2\">\r\n        <Button\r\n          size=\"sm\"\r\n          variant=\"success\"\r\n          onClick={() => openCollectionModal()}\r\n        >\r\n          {collectionAddCta}\r\n        </Button>\r\n      </div>\r\n    );\r\n  })();\r\n\r\n  return (\r\n    <div className=\"mx-auto flex w-full max-w-screen-2xl flex-col gap-6 px-3 pb-12 pt-4 sm:px-4 lg:px-8\">\r\n      <Tabs\r\n        value={activeModule}\r\n        onValueChange={(value) => handleModuleChange(value as SettingsModuleKey)}\r\n        className=\"space-y-6\"\r\n      >\r\n        <ActionBar\r\n          breadcrumbs={<Breadcrumbs items={breadcrumbs} />}\r\n          title={t(\"collections.page.title\")}\r\n          description={t(\"collections.page.description\")}\r\n          toolbar={directoriesToolbar}\r\n        >\r\n          <div className=\"flex flex-col gap-3\">\r\n            <div className=\"sm:hidden\">\r\n              <label htmlFor=\"settings-module-select\" className=\"sr-only\">\r\n                {t(\"collections.moduleSelectLabel\")}\r\n              </label>\r\n              <select\r\n                id=\"settings-module-select\"\r\n                className=\"h-11 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm font-semibold text-[color:var(--color-gray-800)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white\"\r\n                value={activeModule}\r\n                onChange={(event) => handleModuleChange(event.target.value as SettingsModuleKey)}\r\n              >\r\n                {moduleTabs.map((tab) => (\r\n                  <option key={tab.key} value={tab.key}>\r\n                    {tab.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <TabsList className=\"hidden h-auto gap-2 bg-transparent p-0 sm:grid sm:gap-2 sm:p-1 sm:[grid-template-columns:repeat(5,minmax(11rem,1fr))]\">\r\n              {moduleTabs.map((tab) => {\r\n                const Icon = tab.icon;\r\n                const labelId = `${tab.key}-module-tab-label`;\r\n                return (\r\n                  <TabsTrigger\r\n                    key={tab.key}\r\n                    value={tab.key}\r\n                    aria-labelledby={labelId}\r\n                    className=\"group flex h-full min-h-[3.4rem] w-full flex-col items-center justify-center gap-1.5 rounded-xl border border-transparent px-3 py-2 text-sm font-semibold text-[color:var(--color-gray-700)] transition-colors duration-200 ease-out hover:bg-[color:var(--color-gray-50)] focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-400)] focus-visible:ring-offset-2 dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)] data-[state=active]:border-[color:var(--color-gray-200)] data-[state=active]:bg-white data-[state=active]:text-[color:var(--color-brand-600)] data-[state=active]:shadow-sm dark:data-[state=active]:border-[color:var(--color-gray-700)] dark:data-[state=active]:bg-[color:var(--color-gray-dark)] dark:data-[state=active]:text-[color:var(--color-brand-300)]\"\r\n                  >\r\n                    <Icon className=\"size-5 flex-shrink-0 text-[color:var(--color-gray-500)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-300)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)] sm:size-6\" />\r\n                    <span\r\n                      id={labelId}\r\n                      className=\"truncate text-sm font-semibold leading-5 text-[color:var(--color-gray-800)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-100)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)]\"\r\n                    >\r\n                      {tab.label}\r\n                    </span>\r\n                    {tab.description ? (\r\n                      <span className=\"hidden text-xs font-medium text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-400)] sm:block\">\r\n                        {tab.description}\r\n                      </span>\r\n                    ) : null}\r\n                  </TabsTrigger>\r\n                );\r\n              })}\r\n            </TabsList>\r\n          </div>\r\n        </ActionBar>\r\n        <TabsContent value=\"directories\" className=\"mt-0 space-y-6\">\r\n          {hint ? (\r\n            <div className=\"rounded-2xl border border-[color:var(--color-error-200)] bg-[color:var(--color-error-25)] p-4 text-sm text-[color:var(--color-error-600)] dark:border-[color:var(--color-error-700)] dark:bg-[color:var(--color-error-900)]/40 dark:text-[color:var(--color-error-200)]\">\r\n              {hint}\r\n            </div>\r\n          ) : null}\r\n          <Tabs\r\n            value={active}\r\n            onValueChange={(value) => {\r\n              setActive(value as CollectionKey);\r\n              setPage(1);\r\n            }}\r\n            className=\"space-y-5\"\r\n          >\r\n            <div className=\"sm:hidden\">\r\n              <label htmlFor=\"settings-section-select\" className=\"sr-only\">\r\n                {t(\"collections.directorySelectLabel\")}\r\n              </label>\r\n              <select\r\n                id=\"settings-section-select\"\r\n                className=\"h-11 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm font-semibold text-[color:var(--color-gray-800)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white\"\r\n                value={active}\r\n                onChange={(event) => {\r\n                  setActive(event.target.value as CollectionKey);\r\n                  setPage(1);\r\n                }}\r\n              >\r\n                {types.map((type) => (\r\n                  <option key={type.key} value={type.key}>\r\n                    {type.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <TabsList className=\"hidden gap-2 sm:grid sm:gap-2 sm:overflow-visible sm:p-1 sm:[grid-template-columns:repeat(7,minmax(9.5rem,1fr))]\">\r\n              {types.map((type) => {\r\n                const Icon = tabIcons[type.key as CollectionKey];\r\n                const labelId = `${type.key}-tab-label`;\r\n                return (\r\n                  <TabsTrigger\r\n                    key={type.key}\r\n                    value={type.key}\r\n                    aria-labelledby={labelId}\r\n                    className=\"group flex h-full min-h-[3.1rem] w-full flex-col items-center justify-center gap-1.5 rounded-xl border border-transparent px-3 py-2 text-sm font-semibold text-[color:var(--color-gray-700)] transition-colors duration-200 ease-out hover:bg-[color:var(--color-gray-50)] focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-400)] focus-visible:ring-offset-2 dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)] data-[state=active]:border-[color:var(--color-gray-200)] data-[state=active]:bg-white data-[state=active]:text-[color:var(--color-brand-600)] data-[state=active]:shadow-sm dark:data-[state=active]:border-[color:var(--color-gray-700)] dark:data-[state=active]:bg-[color:var(--color-gray-dark)] dark:data-[state=active]:text-[color:var(--color-brand-300)]\"\r\n                  >\r\n                    {Icon ? (\r\n                      <Icon className=\"size-5 flex-shrink-0 text-[color:var(--color-gray-500)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-300)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)] sm:size-6\" />\r\n                    ) : null}\r\n                    <span\r\n                      id={labelId}\r\n                      className=\"truncate text-sm font-semibold leading-5 text-[color:var(--color-gray-800)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-100)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)]\"\r\n                    >\r\n                      {type.label}\r\n                    </span>\r\n                    {type.description ? (\r\n                      <span\r\n                        aria-hidden=\"true\"\r\n                        className=\"hidden text-xs font-medium text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-400)] sm:block\"\r\n                      >\r\n                        {type.description}\r\n                      </span>\r\n                    ) : null}\r\n                  </TabsTrigger>\r\n                );\r\n              })}\r\n            </TabsList>\r\n            {types.map((type) => {\r\n              const isActiveTab = type.key === active;\r\n              const rows: CollectionTableRow[] = isActiveTab\r\n                ? items.map((item) => ({\r\n                    ...item,\r\n                    displayValue: getItemDisplayValue(item, type.key as CollectionKey),\r\n                    metaSummary: formatMetaSummary(item.meta),\r\n                  }))\r\n                : [];\r\n              const columnsForType =\r\n                type.key === \"departments\"\r\n                  ? departmentColumns\r\n                  : type.key === \"divisions\"\r\n                    ? divisionColumns\r\n                    : type.key === \"positions\"\r\n                      ? positionColumns\r\n                      : localizedCollectionColumns;\r\n\r\n              if (type.key === \"users\") {\r\n                const showEmpty = paginatedUsers.length === 0;\r\n                return (\r\n                  <TabsContent key={type.key} value={type.key} className=\"mt-0 flex flex-col gap-4\">\r\n                    {showEmpty ? (\r\n                      <div className=\"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\">\r\n                        <h3 className=\"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white\">\r\n                          {collectionEmptyTitle}\r\n                        </h3>\r\n                        <p className=\"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n                          {collectionEmptyDescription}\r\n                        </p>\r\n                        <Button variant=\"success\" onClick={() => openUserModal()}>\r\n                          {userAddCta}\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <DataTable\r\n                        columns={settingsUserColumns}\r\n                        data={paginatedUsers}\r\n                        pageIndex={userPage - 1}\r\n                        pageSize={limit}\r\n                        pageCount={userTotalPages}\r\n                        onPageChange={(index) => setUserPage(index + 1)}\r\n                        showGlobalSearch={false}\r\n                        showFilters={false}\r\n                        onRowClick={(row) => openUserModal(row)}\r\n                        wrapCellsAsBadges\r\n                        badgeClassName={SETTINGS_BADGE_CLASS}\r\n                        badgeWrapperClassName={SETTINGS_BADGE_WRAPPER_CLASS}\r\n                        badgeEmptyPlaceholder={SETTINGS_BADGE_EMPTY}\r\n                      />\r\n                    )}\r\n                  </TabsContent>\r\n                );\r\n              }\r\n\r\n              if (type.key === \"employees\") {\r\n                const showEmpty = employeeRows.length === 0;\r\n                return (\r\n                  <TabsContent key={type.key} value={type.key} className=\"mt-0 flex flex-col gap-4\">\r\n                    {showEmpty ? (\r\n                      <div className=\"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\">\r\n                        <h3 className=\"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white\">\r\n                          {collectionEmptyTitle}\r\n                        </h3>\r\n                        <p className=\"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n                          {collectionEmptyDescription}\r\n                        </p>\r\n                        <Button variant=\"success\" onClick={() => openEmployeeModal()}>\r\n                          {employeeAddCta}\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <DataTable\r\n                        columns={settingsEmployeeColumns}\r\n                        data={employeeRows}\r\n                        pageIndex={userPage - 1}\r\n                        pageSize={limit}\r\n                        pageCount={userTotalPages}\r\n                        onPageChange={(index) => setUserPage(index + 1)}\r\n                        showGlobalSearch={false}\r\n                        showFilters={false}\r\n                        onRowClick={(row) => openEmployeeModal(row)}\r\n                        wrapCellsAsBadges\r\n                        badgeClassName={SETTINGS_BADGE_CLASS}\r\n                        badgeWrapperClassName={SETTINGS_BADGE_WRAPPER_CLASS}\r\n                        badgeEmptyPlaceholder={SETTINGS_BADGE_EMPTY}\r\n                      />\r\n                    )}\r\n                  </TabsContent>\r\n                );\r\n              }\r\n\r\n              if (type.key === \"tasks\") {\r\n                return (\r\n                  <TabsContent key={type.key} value={type.key} className=\"mt-0\">\r\n                    <TaskSettingsTab\r\n                      fields={taskFieldItems}\r\n                      types={taskTypeItems}\r\n                      loading={tasksLoading}\r\n                      onSaveField={saveTaskField}\r\n                      onDeleteField={deleteTaskField}\r\n                      onSaveType={saveTaskType}\r\n                      onDeleteType={deleteTaskType}\r\n                    />\r\n                  </TabsContent>\r\n                );\r\n              }\r\n\r\n              if (type.key === \"fleets\") {\r\n                return (\r\n                  <TabsContent key={type.key} value={type.key} className=\"mt-0\">\r\n                    <FleetVehiclesTab />\r\n                  </TabsContent>\r\n                );\r\n              }\r\n\r\n              const showEmpty = rows.length === 0;\r\n              return (\r\n                <TabsContent key={type.key} value={type.key} className=\"mt-0 flex flex-col gap-4\">\r\n                  {isActiveTab && isLoading ? (\r\n                    <div className=\"flex min-h-[12rem] items-center justify-center rounded-2xl border border-[color:var(--color-gray-200)] bg-white shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\">\r\n                      <Spinner className=\"h-6 w-6 text-[color:var(--color-brand-500)]\" />\r\n                    </div>\r\n                  ) : showEmpty ? (\r\n                    <div className=\"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\">\r\n                      <h3 className=\"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white\">\r\n                        {collectionEmptyTitle}\r\n                      </h3>\r\n                      <p className=\"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n                        {collectionEmptyDescription}\r\n                      </p>\r\n                      <Button variant=\"success\" onClick={() => openCollectionModal()}>\r\n                        {collectionEmptyAction}\r\n                      </Button>\r\n                    </div>\r\n                  ) : (\r\n                    <DataTable\r\n                      columns={columnsForType}\r\n                      data={rows}\r\n                      pageIndex={page - 1}\r\n                      pageSize={limit}\r\n                      pageCount={totalPages}\r\n                      onPageChange={(index) => setPage(index + 1)}\r\n                      showGlobalSearch={false}\r\n                      showFilters={false}\r\n                      onRowClick={(row) => openCollectionModal(row)}\r\n                      wrapCellsAsBadges\r\n                      badgeClassName={SETTINGS_BADGE_CLASS}\r\n                      badgeWrapperClassName={SETTINGS_BADGE_WRAPPER_CLASS}\r\n                      badgeEmptyPlaceholder={SETTINGS_BADGE_EMPTY}\r\n                    />\r\n                  )}\r\n                </TabsContent>\r\n              );\r\n            })}\r\n          </Tabs>\r\n        </TabsContent>\r\n        <Modal open={collectionModalOpen} onClose={closeCollectionModal}>\r\n          <div className=\"space-y-4\">\r\n            {selectedCollection ? (\r\n              <article className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm\">\r\n                {selectedCollection.type === \"departments\" ? (\r\n                  <>\r\n                    <h3 className=\"text-base font-semibold\">  </h3>\r\n                    <dl className=\"mt-2 space-y-3 text-sm\">\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">ID</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection._id}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\"></dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection.name}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\"> </dt>\r\n                        <dd className=\"mt-2\">\r\n                          {renderBadgeList(selectedDepartmentDivisionNames)}\r\n                        </dd>\r\n                      </div>\r\n                    </dl>\r\n                  </>\r\n                ) : selectedCollection.type === \"divisions\" ? (\r\n                  <>\r\n                    <h3 className=\"text-base font-semibold\">  </h3>\r\n                    <dl className=\"mt-2 space-y-3 text-sm\">\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">ID</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection._id}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\"></dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection.name}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\"></dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedDivisionDepartmentName || \"\"}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\"> </dt>\r\n                        <dd className=\"mt-2\">\r\n                          {renderBadgeList(selectedDivisionPositionNames)}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\"> </dt>\r\n                        <dd className=\"mt-2\">\r\n                          {renderBadgeList(selectedDivisionEmployeeNames)}\r\n                        </dd>\r\n                      </div>\r\n                    </dl>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <h3 className=\"text-base font-semibold\"> </h3>\r\n                    <dl className=\"mt-2 space-y-1 text-sm\">\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">ID</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection._id}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\"></dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection.name}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\"></dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection.type}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\"></dt>\r\n                        <dd className=\"mt-1 rounded bg-white p-2 font-mono text-xs text-slate-900\">\r\n                          {selectedCollection.value || \"\"}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\">Meta</dt>\r\n                        <dd className=\"mt-1\">\r\n                          <pre className=\"max-h-48 overflow-auto rounded bg-white p-2 text-xs text-slate-800\">\r\n                            {selectedCollection.meta\r\n                              ? JSON.stringify(selectedCollection.meta, null, 2)\r\n                              : \"{}\"}\r\n                          </pre>\r\n                        </dd>\r\n                      </div>\r\n                    </dl>\r\n                  </>\r\n                )}\r\n              </article>\r\n            ) : null}\r\n            <CollectionForm\r\n              form={form}\r\n              onChange={setForm}\r\n              onSubmit={submit}\r\n              onDelete={remove}\r\n              onReset={() => setForm({ name: \"\", value: \"\" })}\r\n              valueLabel={\r\n                active === \"departments\"\r\n                  ? \"\"\r\n                  : active === \"divisions\"\r\n                    ? \"\"\r\n                    : active === \"positions\"\r\n                      ? \"\"\r\n                      : undefined\r\n              }\r\n              renderValueField={\r\n                active === \"departments\"\r\n                  ? renderDepartmentValueField\r\n                  : active === \"divisions\"\r\n                    ? renderDivisionValueField\r\n                    : active === \"positions\"\r\n                      ? renderPositionValueField\r\n                      : undefined\r\n              }\r\n              readonly={selectedCollectionInfo.readonly}\r\n              readonlyNotice={selectedCollectionInfo.notice}\r\n            />\r\n          </div>\r\n        </Modal>\r\n        <Modal open={userModalOpen} onClose={closeUserModal}>\r\n          <div className=\"space-y-4\">\r\n            <article className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm\">\r\n              <header className=\"flex items-start justify-between gap-3\">\r\n                <div>\r\n                  <h3 className=\"text-base font-semibold\"> </h3>\r\n                  <p className=\"text-sm text-slate-500\">\r\n                    Telegram ID: {userForm.telegram_id ?? \"\"}\r\n                  </p>\r\n                </div>\r\n                {canManageUsers && userForm.telegram_id ? (\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"destructive\"\r\n                    className=\"h-9 px-3 text-sm\"\r\n                    onClick={() => setConfirmUserDelete(true)}\r\n                  >\r\n                    \r\n                  </Button>\r\n                ) : null}\r\n              </header>\r\n              <dl className=\"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2\">\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">{userForm.username || \"\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">{userForm.name || \"\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">{userForm.phone || \"\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">{userForm.mobNumber || \"\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Email</dt>\r\n                  <dd className=\"text-slate-900\">{userForm.email || \"\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">{formatRoleName(userForm.role)}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">{userForm.access}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"> ID</dt>\r\n                  <dd className=\"text-slate-900\">\r\n                    {userForm.roleId\r\n                      ? formatRoleName(roleMap.get(userForm.roleId) ?? userForm.roleId)\r\n                      : \"\"}\r\n                  </dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">\r\n                    {userForm.departmentId\r\n                      ? departmentMap.get(userForm.departmentId) ?? userForm.departmentId\r\n                      : \"\"}\r\n                  </dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">\r\n                    {userForm.divisionId\r\n                      ? divisionMap.get(userForm.divisionId) ?? userForm.divisionId\r\n                      : \"\"}\r\n                  </dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\"></dt>\r\n                  <dd className=\"text-slate-900\">\r\n                    {userForm.positionId\r\n                      ? positionMap.get(userForm.positionId) ?? userForm.positionId\r\n                      : \"\"}\r\n                  </dd>\r\n                </div>\r\n              </dl>\r\n            </article>\r\n            <UserForm\r\n              form={userForm}\r\n              onChange={setUserForm}\r\n              onSubmit={submitUser}\r\n              onReset={() => setUserForm(emptyUser)}\r\n            />\r\n          </div>\r\n        </Modal>\r\n        <Modal\r\n          open={isEmployeeModalOpen}\r\n          onClose={() => setIsEmployeeModalOpen(false)}\r\n        >\r\n          <div className=\"space-y-4\">\r\n            {selectedEmployee ? (\r\n              <article className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm\">\r\n                <header className=\"flex items-start justify-between gap-3\">\r\n                  <div>\r\n                    <h3 className=\"text-base font-semibold\"> </h3>\r\n                    <p className=\"text-sm text-slate-500\">\r\n                      ID: {selectedEmployee.telegram_id ?? \"\"}\r\n                    </p>\r\n                  </div>\r\n                  {canManageUsers && selectedEmployee.telegram_id ? (\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"destructive\"\r\n                      className=\"h-9 px-3 text-sm\"\r\n                      onClick={() => setConfirmEmployeeDelete(true)}\r\n                    >\r\n                      \r\n                    </Button>\r\n                  ) : null}\r\n                </header>\r\n                <dl className=\"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2\">\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Telegram ID</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.telegram_id}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.username || \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.name || \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.phone || \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.mobNumber || \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Email</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.email || \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {formatRoleName(selectedEmployee.role)}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.access ?? \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"> ID</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.roleId\r\n                        ? formatRoleName(\r\n                            roleMap.get(selectedEmployee.roleId) ??\r\n                              selectedEmployee.roleId,\r\n                          )\r\n                        : \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.departmentId\r\n                        ? departmentMap.get(selectedEmployee.departmentId) ??\r\n                          selectedEmployee.departmentId\r\n                        : \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.divisionId\r\n                        ? divisionMap.get(selectedEmployee.divisionId) ??\r\n                          selectedEmployee.divisionId\r\n                        : \"\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\"></dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.positionId\r\n                        ? positionMap.get(selectedEmployee.positionId) ??\r\n                          selectedEmployee.positionId\r\n                        : \"\"}\r\n                    </dd>\r\n                  </div>\r\n                </dl>\r\n              </article>\r\n            ) : null}\r\n            <EmployeeCardForm\r\n              telegramId={\r\n                employeeFormMode === \"update\" ? selectedEmployeeId : undefined\r\n              }\r\n              mode={employeeFormMode}\r\n              onSaved={handleEmployeeSaved}\r\n            />\r\n          </div>\r\n        </Modal>\r\n        <ConfirmDialog\r\n          open={confirmUserDelete}\r\n          message=\" ?    .\"\r\n          onConfirm={executeUserDelete}\r\n          onCancel={() => setConfirmUserDelete(false)}\r\n          confirmText=\"\"\r\n        />\r\n        <ConfirmDialog\r\n          open={confirmEmployeeDelete}\r\n          message=\" ?    .\"\r\n          onConfirm={executeEmployeeDelete}\r\n          onCancel={() => setConfirmEmployeeDelete(false)}\r\n          confirmText=\"\"\r\n        />\r\n        <TabsContent value=\"reports\" className=\"mt-0\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\">\r\n            <AnalyticsDashboard />\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"archive\" className=\"mt-0\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\">\r\n            <ArchivePage />\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"logs\" className=\"mt-0\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\">\r\n            <LogsPage />\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"storage\" className=\"mt-0\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\">\r\n            <StoragePage />\r\n          </div>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n"],"file":"js/index-CXGZyCct.js"}