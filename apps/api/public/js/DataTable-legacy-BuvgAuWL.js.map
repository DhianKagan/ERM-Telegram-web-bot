{"version":3,"file":"DataTable-legacy-BuvgAuWL.js","sources":["../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/MagnifyingGlassIcon.js","../../../web/src/components/DataTable.tsx","../../../web/src/components/GlobalSearch.tsx","../../../web/src/components/SearchFilters.tsx","../../../web/src/components/TableToolbar.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction MagnifyingGlassIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(MagnifyingGlassIcon);\nexport default ForwardRef;","// Назначение файла: универсальная таблица на React Table с виртуализацией строк\r\n// Основные модули: React, @tanstack/react-table, TableToolbar\r\n/* eslint-disable react-refresh/only-export-components */\r\nimport React from \"react\";\r\nimport {\r\n  ColumnDef,\r\n  flexRender,\r\n  getCoreRowModel,\r\n  useReactTable,\r\n  Table as TableType,\r\n} from \"@tanstack/react-table\";\r\n\r\nimport TableToolbar from \"./TableToolbar\";\r\n\r\ninterface DataTableProps<T> {\r\n  columns: ColumnDef<T, unknown>[];\r\n  data: T[];\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  pageCount?: number;\r\n  onPageChange: (page: number) => void;\r\n  onPageSizeChange?: (size: number) => void;\r\n  onRowClick?: (row: T) => void;\r\n  toolbarChildren?: React.ReactNode;\r\n  showGlobalSearch?: boolean;\r\n  showFilters?: boolean;\r\n  wrapCellsAsBadges?: boolean;\r\n  badgeClassName?: string;\r\n  badgeWrapperClassName?: string;\r\n  badgeEmptyPlaceholder?: string;\r\n  enableVirtualization?: boolean;\r\n  virtualizationOverscan?: number;\r\n  virtualizationThreshold?: number;\r\n  rowHeight?: number;\r\n  maxBodyHeight?: number;\r\n}\r\n\r\ninterface ColumnMeta {\r\n  minWidth?: string;\r\n  maxWidth?: string;\r\n  width?: string;\r\n  cellClassName?: string;\r\n  headerClassName?: string;\r\n  renderAsBadges?: boolean;\r\n}\r\n\r\nexport const defaultBadgeClassName = [\r\n  \"inline-flex min-h-[1.65rem] max-w-full items-center justify-start gap-1\",\r\n  \"rounded-full px-2.5 py-0.5 text-[0.72rem] font-semibold leading-tight text-slate-900\",\r\n  \"ring-1 ring-slate-300/80 bg-slate-100/90 shadow-xs\",\r\n  \"dark:text-slate-100 dark:ring-slate-600/60 dark:bg-slate-800/80\",\r\n  \"truncate\",\r\n].join(\" \");\r\nexport const defaultBadgeWrapperClassName =\r\n  \"flex flex-wrap items-center gap-1.5\";\r\n\r\nconst sanitizeHtml = (html: string): string =>\r\n  html.replace(/<[^>]+>/g, \" \").replace(/\\s+/g, \" \").trim();\r\n\r\nconst normalizeToText = (value: unknown): string => {\r\n  if (value === null || value === undefined) return \"\";\r\n  if (typeof value === \"string\") {\r\n    return sanitizeHtml(value);\r\n  }\r\n  if (typeof value === \"number\" || typeof value === \"boolean\") {\r\n    return String(value).trim();\r\n  }\r\n  return \"\";\r\n};\r\n\r\nconst extractBadgeItems = (value: React.ReactNode): string[] => {\r\n  const items: string[] = [];\r\n  const pushItem = (text: string) => {\r\n    if (!text) return;\r\n    if (items.includes(text)) return;\r\n    items.push(text);\r\n  };\r\n  const visit = (node: React.ReactNode) => {\r\n    if (node === null || node === undefined || node === false) return;\r\n    if (typeof node === \"string\" || typeof node === \"number\") {\r\n      const text = String(node).trim();\r\n      if (!text) return;\r\n      const parts = text\r\n        .split(/[,\\n;]/)\r\n        .map((part) => part.trim())\r\n        .filter(Boolean);\r\n      if (parts.length) {\r\n        items.push(...parts);\r\n      } else {\r\n        items.push(text);\r\n      }\r\n      return;\r\n    }\r\n    if (Array.isArray(node)) {\r\n      node.forEach(visit);\r\n      return;\r\n    }\r\n    if (React.isValidElement(node)) {\r\n      const element = node as React.ReactElement<Record<string, unknown>>;\r\n      const beforeLength = items.length;\r\n      visit(element.props.children as React.ReactNode);\r\n      if (items.length === beforeLength) {\r\n        const props = element.props || {};\r\n        const fallbackCandidates: unknown[] = [\r\n          props[\"data-badge-label\"],\r\n          props[\"data-label\"],\r\n          props[\"aria-label\"],\r\n          props.title,\r\n        ];\r\n        fallbackCandidates.forEach((candidate) => {\r\n          if (candidate === null || candidate === undefined) return;\r\n          const text = String(candidate).trim();\r\n          pushItem(text);\r\n        });\r\n        const html = props.dangerouslySetInnerHTML as\r\n          | { __html?: unknown }\r\n          | undefined;\r\n        const rawHtml =\r\n          html && typeof html.__html === \"string\"\r\n            ? sanitizeHtml(html.__html)\r\n            : \"\";\r\n        if (rawHtml) {\r\n          pushItem(rawHtml);\r\n        }\r\n        const renderValue = props.renderValue;\r\n        if (typeof renderValue === \"function\") {\r\n          const rendered = normalizeToText(renderValue());\r\n          pushItem(rendered);\r\n        }\r\n        const getValue = props.getValue;\r\n        if (typeof getValue === \"function\") {\r\n          const rawValue = normalizeToText(getValue());\r\n          pushItem(rawValue);\r\n        }\r\n      }\r\n      return;\r\n    }\r\n    const fallback = String(node).trim();\r\n    pushItem(fallback);\r\n  };\r\n  visit(value);\r\n  return items;\r\n};\r\n\r\nconst renderBadgeContent = (\r\n  content: React.ReactNode,\r\n  badgeClassName: string,\r\n  wrapperClassName: string,\r\n  emptyPlaceholder: string,\r\n) => {\r\n  const items = extractBadgeItems(content);\r\n  if (!items.length) {\r\n    return (\r\n      <span className={badgeClassName} title={emptyPlaceholder}>\r\n        {emptyPlaceholder}\r\n      </span>\r\n    );\r\n  }\r\n  if (items.length === 1) {\r\n    return (\r\n      <span className={badgeClassName} title={items[0]}>\r\n        {items[0]}\r\n      </span>\r\n    );\r\n  }\r\n  return (\r\n    <div className={wrapperClassName}>\r\n      {items.map((item, index) => (\r\n        <span key={`${item}-${index}`} className={badgeClassName} title={item}>\r\n          {item}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst containerClasses = [\r\n  \"relative w-full overflow-auto rounded-xl border border-border/70\",\r\n  \"bg-background shadow-sm dark:border-border/60\",\r\n].join(\" \");\r\n\r\nconst tableClasses = [\r\n  \"min-w-full table-auto caption-bottom font-ui text-[12px] leading-tight\",\r\n  \"text-foreground dark:text-foreground sm:text-[13px]\",\r\n].join(\" \");\r\n\r\nconst headerCellClasses = [\r\n  \"border-b border-border/70 px-1.5 py-1.5 text-left align-middle font-semibold\",\r\n  \"text-[11px] leading-snug text-foreground sm:px-2 sm:text-[13px]\",\r\n  \"whitespace-normal\",\r\n].join(\" \");\r\n\r\nconst bodyCellClasses = [\r\n  \"relative z-[1] px-1.5 py-1.5 align-top text-[12px] leading-snug\",\r\n  \"text-foreground sm:px-2 sm:text-sm\",\r\n  \"whitespace-normal\",\r\n].join(\" \");\r\n\r\nconst bodyRowClasses = [\r\n  \"group relative isolate min-h-[2.5rem] cursor-pointer select-none\",\r\n  \"odd:bg-sky-50/70 even:bg-emerald-50/70 odd:text-slate-900 even:text-slate-900\",\r\n  \"hover:odd:bg-sky-100/80 hover:even:bg-emerald-100/80\",\r\n  \"dark:odd:bg-slate-800/70 dark:even:bg-slate-700/70 dark:text-slate-100\",\r\n  \"dark:hover:odd:bg-slate-700 dark:hover:even:bg-slate-600\",\r\n].join(\" \");\r\n\r\nconst headerRowClasses = [\r\n  \"bg-muted/20 text-foreground\",\r\n].join(\" \");\r\n\r\nexport default function DataTable<T>({\r\n  columns,\r\n  data,\r\n  pageIndex,\r\n  pageSize,\r\n  pageCount,\r\n  onPageChange,\r\n  onPageSizeChange,\r\n  onRowClick,\r\n  toolbarChildren,\r\n  showGlobalSearch = true,\r\n  showFilters = true,\r\n  wrapCellsAsBadges = false,\r\n  badgeClassName = defaultBadgeClassName,\r\n  badgeWrapperClassName = defaultBadgeWrapperClassName,\r\n  badgeEmptyPlaceholder = \"—\",\r\n  enableVirtualization = true,\r\n  virtualizationOverscan = 6,\r\n  virtualizationThreshold = 40,\r\n  rowHeight = 52,\r\n  maxBodyHeight = 520,\r\n}: DataTableProps<T>) {\r\n  const [columnVisibility, setColumnVisibility] = React.useState({});\r\n  const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\r\n\r\n  const table = useReactTable({\r\n    data,\r\n    columns,\r\n    state: {\r\n      columnVisibility,\r\n      columnOrder,\r\n      pagination: { pageIndex, pageSize },\r\n    },\r\n    onColumnVisibilityChange: setColumnVisibility,\r\n    onColumnOrderChange: setColumnOrder,\r\n    getCoreRowModel: getCoreRowModel(),\r\n    manualPagination: true,\r\n    pageCount,\r\n  });\r\n\r\n  const rows = table.getRowModel().rows;\r\n  const virtualizationContainerRef = React.useRef<HTMLDivElement>(null);\r\n  const [scrollTop, setScrollTop] = React.useState(0);\r\n  const [viewportHeight, setViewportHeight] = React.useState(maxBodyHeight);\r\n\r\n  const virtualizationActive =\r\n    enableVirtualization && rows.length > virtualizationThreshold;\r\n\r\n  React.useLayoutEffect(() => {\r\n    if (!virtualizationActive) return;\r\n    const element = virtualizationContainerRef.current;\r\n    if (!element) return;\r\n    const updateHeight = () => {\r\n      setViewportHeight(element.clientHeight || maxBodyHeight);\r\n    };\r\n    updateHeight();\r\n    if (typeof ResizeObserver !== \"undefined\") {\r\n      const observer = new ResizeObserver(updateHeight);\r\n      observer.observe(element);\r\n      return () => observer.disconnect();\r\n    }\r\n    return undefined;\r\n  }, [virtualizationActive, maxBodyHeight]);\r\n\r\n  React.useEffect(() => {\r\n    if (!virtualizationContainerRef.current) return;\r\n    virtualizationContainerRef.current.scrollTop = 0;\r\n    setScrollTop(0);\r\n  }, [rows.length, virtualizationActive]);\r\n\r\n  const handleScroll = React.useCallback(\r\n    (event: React.UIEvent<HTMLDivElement>) => {\r\n      if (!virtualizationActive) return;\r\n      setScrollTop(event.currentTarget.scrollTop);\r\n    },\r\n    [virtualizationActive],\r\n  );\r\n\r\n  const totalHeight = rows.length * rowHeight;\r\n  const effectiveViewport = virtualizationActive\r\n    ? viewportHeight\r\n    : rows.length * rowHeight;\r\n  const startIndex = virtualizationActive\r\n    ? Math.max(0, Math.floor(scrollTop / rowHeight) - virtualizationOverscan)\r\n    : 0;\r\n  const endIndex = virtualizationActive\r\n    ? Math.min(\r\n        rows.length,\r\n        Math.ceil((scrollTop + effectiveViewport) / rowHeight) +\r\n          virtualizationOverscan,\r\n      )\r\n    : rows.length;\r\n\r\n  const visibleRows = virtualizationActive\r\n    ? rows.slice(startIndex, endIndex)\r\n    : rows;\r\n  const paddingTop = virtualizationActive ? startIndex * rowHeight : 0;\r\n  const paddingBottom = virtualizationActive\r\n    ? Math.max(totalHeight - endIndex * rowHeight, 0)\r\n    : 0;\r\n\r\n  const columnCount = Math.max(table.getVisibleLeafColumns().length, 1);\r\n\r\n  return (\r\n    <div className=\"w-full space-y-3 px-0 font-ui text-[13px] sm:px-1.5 sm:text-sm\">\r\n      <TableToolbar\r\n        table={table as TableType<T>}\r\n        showGlobalSearch={showGlobalSearch}\r\n        showFilters={showFilters}\r\n      >\r\n        {toolbarChildren}\r\n      </TableToolbar>\r\n      <div\r\n        ref={virtualizationContainerRef}\r\n        className={containerClasses}\r\n        style={{ maxHeight: virtualizationActive ? maxBodyHeight : undefined }}\r\n        onScroll={handleScroll}\r\n      >\r\n        <table className={tableClasses}>\r\n          <thead>\r\n            {table.getHeaderGroups().map((hg) => (\r\n              <tr key={hg.id} className={headerRowClasses}>\r\n                {hg.headers.map((header) => {\r\n                  const meta =\r\n                    (header.column.columnDef.meta as ColumnMeta | undefined) || {};\r\n                  const baseSize = header.getSize();\r\n                  const computedWidth =\r\n                    typeof meta.width === \"string\"\r\n                      ? meta.width\r\n                      : Number.isFinite(baseSize)\r\n                        ? `${baseSize}px`\r\n                        : undefined;\r\n                  const headerClassName = [\r\n                    headerCellClasses,\r\n                    meta.headerClassName,\r\n                  ]\r\n                    .filter(Boolean)\r\n                    .join(\" \");\r\n                  return (\r\n                    <th\r\n                      key={header.id}\r\n                      style={{\r\n                        width: computedWidth,\r\n                        minWidth: meta.minWidth ?? \"4rem\",\r\n                        maxWidth: meta.maxWidth ?? \"24rem\",\r\n                      }}\r\n                      className={headerClassName}\r\n                    >\r\n                      {header.isPlaceholder\r\n                        ? null\r\n                        : flexRender(\r\n                            header.column.columnDef.header,\r\n                            header.getContext(),\r\n                          )}\r\n                    </th>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n          </thead>\r\n          <tbody>\r\n            {paddingTop > 0 ? (\r\n              <tr aria-hidden style={{ height: paddingTop }}>\r\n                <td colSpan={columnCount} />\r\n              </tr>\r\n            ) : null}\r\n            {visibleRows.map((row) => (\r\n              <tr\r\n                key={row.id}\r\n                onClick={() => onRowClick?.(row.original)}\r\n                className={onRowClick ? bodyRowClasses : bodyRowClasses.replace(\"cursor-pointer\", \"cursor-default\")}\r\n              >\r\n                {row.getVisibleCells().map((cell) => {\r\n                  const meta =\r\n                    (cell.column.columnDef.meta as ColumnMeta | undefined) || {};\r\n                  const baseSize = cell.column.getSize();\r\n                  const computedWidth =\r\n                    typeof meta.width === \"string\"\r\n                      ? meta.width\r\n                      : Number.isFinite(baseSize)\r\n                        ? `${baseSize}px`\r\n                        : undefined;\r\n                  const cellClassName = [\r\n                    bodyCellClasses,\r\n                    meta.cellClassName,\r\n                  ]\r\n                    .filter(Boolean)\r\n                    .join(\" \");\r\n                  const cellContent = flexRender(\r\n                    cell.column.columnDef.cell,\r\n                    cell.getContext(),\r\n                  );\r\n                  const shouldWrapWithBadges =\r\n                    wrapCellsAsBadges && meta.renderAsBadges !== false;\r\n                  return (\r\n                    <td\r\n                      key={cell.id}\r\n                      style={{\r\n                        width: computedWidth,\r\n                        minWidth: meta.minWidth ?? \"4rem\",\r\n                        maxWidth: meta.maxWidth ?? \"24rem\",\r\n                      }}\r\n                      className={cellClassName}\r\n                    >\r\n                      {shouldWrapWithBadges\r\n                        ? renderBadgeContent(\r\n                            cellContent,\r\n                            badgeClassName,\r\n                            badgeWrapperClassName,\r\n                            badgeEmptyPlaceholder,\r\n                          )\r\n                        : cellContent}\r\n                    </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n            {paddingBottom > 0 ? (\r\n              <tr aria-hidden style={{ height: paddingBottom }}>\r\n                <td colSpan={columnCount} />\r\n              </tr>\r\n            ) : null}\r\n            {!rows.length ? (\r\n              <tr>\r\n                <td colSpan={columnCount} className=\"px-4 py-6 text-center text-sm text-muted-foreground\">\r\n                  Нет данных для отображения\r\n                </td>\r\n              </tr>\r\n            ) : null}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div className=\"flex flex-col gap-2 text-xs sm:flex-row sm:items-center sm:justify-between sm:text-sm\">\r\n        <div className=\"flex flex-wrap items-center gap-1\">\r\n          <button\r\n            onClick={() => onPageChange(Math.max(0, pageIndex - 1))}\r\n            disabled={pageIndex === 0}\r\n            className=\"rounded border border-[color:var(--color-gray-300)] px-2 py-1 font-medium text-[color:var(--color-gray-700)] transition hover:bg-[color:var(--color-gray-50)] disabled:cursor-not-allowed disabled:opacity-50 dark:border-[color:var(--color-gray-700)] dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)]\"\r\n          >\r\n            Назад\r\n          </button>\r\n          <span className=\"px-1 text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n            Стр. {pageIndex + 1}\r\n            {pageCount ? ` / ${pageCount}` : \"\"}\r\n          </span>\r\n          <button\r\n            onClick={() =>\r\n              onPageChange(\r\n                pageCount\r\n                  ? Math.min(pageCount - 1, pageIndex + 1)\r\n                  : pageIndex + 1,\r\n              )\r\n            }\r\n            disabled={pageCount ? pageIndex + 1 >= pageCount : false}\r\n            className=\"rounded border border-[color:var(--color-gray-300)] px-2 py-1 font-medium text-[color:var(--color-gray-700)] transition hover:bg-[color:var(--color-gray-50)] disabled:cursor-not-allowed disabled:opacity-50 dark:border-[color:var(--color-gray-700)] dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)]\"\r\n          >\r\n            Вперёд\r\n          </button>\r\n        </div>\r\n        {onPageSizeChange ? (\r\n          <select\r\n            value={pageSize}\r\n            onChange={(event) => onPageSizeChange(Number(event.target.value))}\r\n            className=\"h-8 min-w-[4rem] rounded border border-[color:var(--color-gray-300)] bg-white px-1.5 text-xs text-[color:var(--color-gray-700)] shadow-sm transition focus:border-[color:var(--color-brand-400)] focus:outline-none focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-[color:var(--color-gray-100)]\"\r\n          >\r\n            {[10, 25, 50].map((size) => (\r\n              <option key={size} value={size}>\r\n                {size}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// Глобальный модуль поиска\r\n// Модули: React, heroicons, i18next, ui\r\nimport React from \"react\";\r\nimport { MagnifyingGlassIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport useTasks from \"../context/useTasks\";\r\n\r\nexport default function GlobalSearch() {\r\n  const { query, setQuery } = useTasks();\r\n  const { t } = useTranslation();\r\n  const ref = React.useRef<HTMLInputElement>(null);\r\n  const [value, setValue] = React.useState(query);\r\n\r\n  const clear = () => {\r\n    setValue(\"\");\r\n    setQuery(\"\");\r\n    ref.current?.focus();\r\n  };\r\n\r\n  const search = () => {\r\n    setQuery(value);\r\n  };\r\n\r\n  const onKey = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Escape\") {\r\n      e.stopPropagation();\r\n      clear();\r\n      ref.current?.blur();\r\n    }\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      search();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-1.5\">\r\n      <div className=\"relative\">\r\n        <MagnifyingGlassIcon className=\"pointer-events-none absolute top-1/2 left-2 size-4 -translate-y-1/2 text-gray-400\" />\r\n        <Input\r\n          ref={ref}\r\n          value={value}\r\n          onChange={(e) => setValue(e.target.value)}\r\n          onKeyDown={onKey}\r\n          placeholder={t(\"search\")}\r\n          aria-label={t(\"search\")}\r\n          className=\"h-8 w-48 pr-8 pl-8\"\r\n        />\r\n        {value && (\r\n          <button\r\n            onClick={clear}\r\n            aria-label=\"Очистить\"\r\n            className=\"absolute top-1/2 right-2 -translate-y-1/2 text-gray-400 hover:text-black\"\r\n          >\r\n            <XMarkIcon className=\"size-4\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n      <button onClick={search} className=\"rounded border px-1.5 py-1\">\r\n        {t(\"find\")}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","// Фильтры поиска задач\r\n// Модули: React, shared, useTasks\r\nimport React from \"react\";\r\nimport { TASK_STATUSES, PRIORITIES, TASK_TYPES } from \"shared\";\r\nimport useTasks from \"../context/useTasks\";\r\nimport type { TaskFilterUser } from \"../context/TasksContext\";\r\n\r\ninterface Props {\r\n  inline?: boolean;\r\n}\r\n\r\nexport default function SearchFilters({ inline = false }: Props) {\r\n  const { filters, setFilters, filterUsers } = useTasks();\r\n  const [local, setLocal] = React.useState(filters);\r\n\r\n  React.useEffect(() => {\r\n    setLocal(filters);\r\n  }, [filters]);\r\n\r\n  const toFieldId = React.useCallback(\r\n    (prefix: string, value: string) =>\r\n      `${prefix}-${value}`\r\n        .toLowerCase()\r\n        .replace(/[^a-z0-9а-яё]+/gi, \"-\")\r\n        .replace(/-+/g, \"-\")\r\n        .replace(/^-|-$/g, \"\"),\r\n    [],\r\n  );\r\n\r\n  const toggleString = (\r\n    key: \"status\" | \"priority\" | \"taskTypes\",\r\n    value: string,\r\n  ) => {\r\n    setLocal((prev) => {\r\n      const arr = prev[key];\r\n      const exists = arr.includes(value);\r\n      const next = exists ? arr.filter((v) => v !== value) : [...arr, value];\r\n      return { ...prev, [key]: next };\r\n    });\r\n  };\r\n\r\n  const toggleAssignee = (id: number) => {\r\n    setLocal((prev) => {\r\n      const exists = prev.assignees.includes(id);\r\n      const next = exists\r\n        ? prev.assignees.filter((value) => value !== id)\r\n        : [...prev.assignees, id];\r\n      return { ...prev, assignees: next };\r\n    });\r\n  };\r\n\r\n  const renderAssigneeLabel = (user: TaskFilterUser) => {\r\n    if (user.username) {\r\n      return `${user.name} (@${user.username})`;\r\n    }\r\n    return user.name;\r\n  };\r\n\r\n  const content = (\r\n    <div className=\"flex w-52 flex-col gap-1.5 text-sm\">\r\n      <div>\r\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\r\n          Статус\r\n        </span>\r\n        {TASK_STATUSES.map((s) => {\r\n          const fieldId = toFieldId(\"status\", s);\r\n          return (\r\n            <label\r\n              key={s}\r\n              className=\"flex items-center gap-1 text-[13px]\"\r\n              htmlFor={fieldId}\r\n            >\r\n              <input\r\n                id={fieldId}\r\n                name=\"status[]\"\r\n                type=\"checkbox\"\r\n                checked={local.status.includes(s)}\r\n                onChange={() => toggleString(\"status\", s)}\r\n              />\r\n              {s}\r\n            </label>\r\n          );\r\n        })}\r\n      </div>\r\n      <div>\r\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\r\n          Приоритет\r\n        </span>\r\n        {PRIORITIES.map((p) => {\r\n          const fieldId = toFieldId(\"priority\", p);\r\n          return (\r\n            <label\r\n              key={p}\r\n              className=\"flex items-center gap-1 text-[13px]\"\r\n              htmlFor={fieldId}\r\n            >\r\n              <input\r\n                id={fieldId}\r\n                name=\"priority[]\"\r\n                type=\"checkbox\"\r\n                checked={local.priority.includes(p)}\r\n                onChange={() => toggleString(\"priority\", p)}\r\n              />\r\n              {p}\r\n            </label>\r\n          );\r\n        })}\r\n      </div>\r\n      <div>\r\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\r\n          Тип задачи\r\n        </span>\r\n        {TASK_TYPES.map((type) => {\r\n          const fieldId = toFieldId(\"task-type\", type);\r\n          return (\r\n            <label\r\n              key={type}\r\n              className=\"flex items-center gap-1 text-[13px]\"\r\n              htmlFor={fieldId}\r\n            >\r\n              <input\r\n                id={fieldId}\r\n                name=\"taskTypes[]\"\r\n                type=\"checkbox\"\r\n                checked={local.taskTypes.includes(type)}\r\n                onChange={() => toggleString(\"taskTypes\", type)}\r\n              />\r\n              {type}\r\n            </label>\r\n          );\r\n        })}\r\n      </div>\r\n      <div>\r\n        <span className=\"block text-xs font-semibold uppercase tracking-wide text-gray-600\">\r\n          Исполнители\r\n        </span>\r\n        <div className=\"max-h-28 overflow-y-auto pr-1\">\r\n          {filterUsers.map((user) => {\r\n            const fieldId = toFieldId(\"assignee\", String(user.id));\r\n            return (\r\n              <label\r\n                key={user.id}\r\n                className=\"flex items-center gap-1 text-[13px]\"\r\n                htmlFor={fieldId}\r\n              >\r\n                <input\r\n                  id={fieldId}\r\n                  name=\"assignees[]\"\r\n                  type=\"checkbox\"\r\n                  checked={local.assignees.includes(user.id)}\r\n                  onChange={() => toggleAssignee(user.id)}\r\n                />\r\n                {renderAssigneeLabel(user)}\r\n              </label>\r\n            );\r\n          })}\r\n          {filterUsers.length === 0 ? (\r\n            <span className=\"block text-[13px] text-muted-foreground\">\r\n              Нет доступных исполнителей\r\n            </span>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex items-center gap-1.5\">\r\n        <input\r\n          type=\"date\"\r\n          className=\"rounded border px-1.5 py-1 text-[13px]\"\r\n          name=\"from\"\r\n          value={local.from}\r\n          onChange={(e) => setLocal({ ...local, from: e.target.value })}\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          className=\"rounded border px-1.5 py-1 text-[13px]\"\r\n          name=\"to\"\r\n          value={local.to}\r\n          onChange={(e) => setLocal({ ...local, to: e.target.value })}\r\n        />\r\n      </div>\r\n      <button\r\n        onClick={() => setFilters(local)}\r\n        className=\"mt-1.5 rounded border px-1.5 py-1 text-[13px]\"\r\n      >\r\n        Искать\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  if (inline) return content;\r\n\r\n  return (\r\n    <details className=\"relative\">\r\n      <summary className=\"cursor-pointer rounded border px-1.5 py-0.5 select-none text-sm\">\r\n        Фильтры\r\n      </summary>\r\n      <div className=\"absolute z-10 mt-1 rounded border bg-white p-1.5 shadow\">\r\n        {content}\r\n      </div>\r\n    </details>\r\n  );\r\n}\r\n","// Назначение файла: общий тулбар таблицы с экспортом, поиском и фильтрацией\r\n// Модули: React, @tanstack/react-table, jspdf\r\nimport React from \"react\";\r\nimport type { Table } from \"@tanstack/react-table\";\r\nimport type JsPDFClass from \"jspdf\";\r\nimport type { UserOptions as AutoTableOptions } from \"jspdf-autotable\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport GlobalSearch from \"./GlobalSearch\";\r\nimport SearchFilters from \"./SearchFilters\";\r\n\r\ninterface Props<T> {\r\n  table: Table<T>;\r\n  children?: React.ReactNode;\r\n  showGlobalSearch?: boolean;\r\n  showFilters?: boolean;\r\n}\r\n\r\ntype JsPdfWithAutoTable = InstanceType<typeof JsPDFClass> & {\r\n  autoTable: (options: AutoTableOptions) => void;\r\n};\r\n\r\nexport default function TableToolbar<T>({\r\n  table,\r\n  children,\r\n  showGlobalSearch = true,\r\n  showFilters = true,\r\n}: Props<T>) {\r\n  const columns = table.getAllLeafColumns();\r\n  const { t } = useTranslation();\r\n\r\n  const exportCsv = () => {\r\n    const headers = columns\r\n      .filter((c) => c.getIsVisible())\r\n      .map((c) => c.columnDef.header as string);\r\n    const rows = table\r\n      .getRowModel()\r\n      .rows.map((r) =>\r\n        r.getVisibleCells().map((c) => String(c.getValue() ?? \"\")),\r\n      );\r\n    const csv = [headers.join(\",\"), ...rows.map((r) => r.join(\",\"))].join(\"\\n\");\r\n    const blob = new Blob([csv], { type: \"text/csv\" });\r\n    const a = document.createElement(\"a\");\r\n    a.href = URL.createObjectURL(blob);\r\n    a.download = \"table.csv\";\r\n    a.click();\r\n  };\r\n\r\n  const exportPdf = async () => {\r\n    const pdfEntry = \"jspdf\";\r\n    const autoTableEntry = \"jspdf-autotable\";\r\n    const { default: jsPDF } = await import(/* @vite-ignore */ pdfEntry);\r\n    await import(/* @vite-ignore */ autoTableEntry);\r\n    const headers = columns\r\n      .filter((c) => c.getIsVisible())\r\n      .map((c) => c.columnDef.header as string);\r\n    const rows = table\r\n      .getRowModel()\r\n      .rows.map((r) =>\r\n        r.getVisibleCells().map((c) => String(c.getValue() ?? \"\")),\r\n      );\r\n    const doc = new jsPDF() as JsPdfWithAutoTable;\r\n    doc.autoTable({ head: [headers], body: rows });\r\n    doc.save(\"table.pdf\");\r\n  };\r\n\r\n  const toggleColumn = (id: string) => {\r\n    const col = table.getColumn(id);\r\n    if (col) col.toggleVisibility();\r\n  };\r\n\r\n  const moveColumn = (id: string, dir: number) => {\r\n    const order = table.getState().columnOrder;\r\n    const idx = order.indexOf(id);\r\n    if (idx === -1) return;\r\n    const next = idx + dir;\r\n    if (next < 0 || next >= order.length) return;\r\n    const newOrder = [...order];\r\n    [newOrder[idx], newOrder[next]] = [newOrder[next], newOrder[idx]];\r\n    table.setColumnOrder(newOrder);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex w-full flex-wrap items-center gap-1 text-xs sm:text-sm\">\r\n      <div className=\"flex flex-1 flex-wrap items-center gap-1\">\r\n        {showGlobalSearch ? <GlobalSearch /> : null}\r\n        {children}\r\n      </div>\r\n      <div className=\"ml-auto flex w-full flex-wrap items-center justify-end gap-1 sm:w-auto\">\r\n        <details className=\"group relative flex-shrink-0\">\r\n          <summary\r\n            className=\"cursor-pointer rounded-t-md rounded-b-none border border-b-0 border-gray-200 bg-white px-2 py-1 text-xs font-semibold leading-tight text-gray-700 shadow-sm transition-colors select-none hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 group-open:border-gray-200 sm:text-sm\"\r\n          >\r\n            {t(\"export\")}\r\n          </summary>\r\n          <div\r\n            className=\"absolute left-0 top-full z-10 w-32 min-w-full rounded-b-md border border-t border-gray-200 bg-white p-1 shadow-sm\"\r\n          >\r\n            <button\r\n              onClick={exportCsv}\r\n              className=\"block w-full rounded px-1.5 py-1 text-left text-xs font-medium transition-colors hover:bg-gray-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 sm:text-sm\"\r\n            >\r\n              CSV\r\n            </button>\r\n            <button\r\n              onClick={() => void exportPdf()}\r\n              className=\"mt-1 block w-full rounded px-1.5 py-1 text-left text-xs font-medium transition-colors hover:bg-gray-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 sm:text-sm\"\r\n            >\r\n              PDF\r\n            </button>\r\n          </div>\r\n        </details>\r\n        <details className=\"group relative flex-shrink-0\">\r\n          <summary\r\n            className=\"cursor-pointer rounded-t-md rounded-b-none border border-b-0 border-gray-200 bg-white px-2 py-1 text-xs font-semibold leading-tight text-gray-700 shadow-sm transition-colors select-none hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1 group-open:border-gray-200 sm:text-sm\"\r\n          >\r\n            {t(\"settings\")}\r\n          </summary>\r\n          <div\r\n            className=\"absolute left-0 top-full z-10 w-64 min-w-full space-y-1 rounded-b-md border border-t border-gray-200 bg-white p-1.5 shadow-sm\"\r\n          >\r\n            {showFilters ? <SearchFilters inline /> : null}\r\n            <div className=\"border-t pt-1\">\r\n              {columns.map((col) => (\r\n                <div\r\n                  key={col.id}\r\n                  className=\"flex items-center justify-between gap-1\"\r\n                >\r\n                  <label\r\n                    className=\"flex items-center gap-1 text-xs font-medium sm:text-sm\"\r\n                    htmlFor={`table-column-${col.id}`}\r\n                  >\r\n                    <input\r\n                      id={`table-column-${col.id}`}\r\n                      name={`column-${col.id}`}\r\n                      type=\"checkbox\"\r\n                      checked={col.getIsVisible()}\r\n                      onChange={() => toggleColumn(col.id)}\r\n                    />\r\n                    {col.columnDef.header as string}\r\n                  </label>\r\n                  <div className=\"flex gap-1\">\r\n                    <button\r\n                      onClick={() => moveColumn(col.id, -1)}\r\n                      className=\"rounded border border-gray-200 px-1 text-xs font-medium leading-none text-gray-700 transition-colors hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1\"\r\n                    >\r\n                      ←\r\n                    </button>\r\n                    <button\r\n                      onClick={() => moveColumn(col.id, 1)}\r\n                      className=\"rounded border border-gray-200 px-1 text-xs font-medium leading-none text-gray-700 transition-colors hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1\"\r\n                    >\r\n                      →\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </details>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["MagnifyingGlassIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React.createElement","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","_ref6","columns","data","pageIndex","pageSize","pageCount","onPageChange","onPageSizeChange","onRowClick","toolbarChildren","_ref6$showGlobalSearc","showGlobalSearch","_ref6$showFilters","showFilters","_ref6$wrapCellsAsBadg","wrapCellsAsBadges","_ref6$badgeClassName","badgeClassName","defaultBadgeClassName","_ref6$badgeWrapperCla","badgeWrapperClassName","defaultBadgeWrapperClassName","_ref6$badgeEmptyPlace","badgeEmptyPlaceholder","_ref6$enableVirtualiz","enableVirtualization","_ref6$virtualizationO","virtualizationOverscan","_ref6$virtualizationT","virtualizationThreshold","_ref6$rowHeight","rowHeight","_ref6$maxBodyHeight","maxBodyHeight","_React$useState6","_slicedToArray","React","useState","columnVisibility","setColumnVisibility","_React$useState8","columnOrder","setColumnOrder","table","useReactTable","state","pagination","onColumnVisibilityChange","onColumnOrderChange","getCoreRowModel","manualPagination","rows","getRowModel","virtualizationContainerRef","useRef","_React$useState0","scrollTop","setScrollTop","_React$useState10","viewportHeight","setViewportHeight","virtualizationActive","length","useLayoutEffect","element","current","updateHeight","clientHeight","ResizeObserver","observer","observe","disconnect","useEffect","handleScroll","useCallback","event","currentTarget","totalHeight","effectiveViewport","startIndex","Math","max","floor","endIndex","min","ceil","visibleRows","slice","paddingTop","paddingBottom","columnCount","getVisibleLeafColumns","jsxs","className","children","jsx","TableToolbar","containerClasses","style","maxHeight","onScroll","tableClasses","getHeaderGroups","map","hg","headerRowClasses","headers","header","_meta$minWidth","_meta$maxWidth","meta","column","columnDef","baseSize","getSize","computedWidth","width","Number","isFinite","concat","headerClassName","headerCellClasses","filter","Boolean","join","minWidth","maxWidth","isPlaceholder","flexRender","getContext","height","colSpan","row","onClick","original","bodyRowClasses","replace","getVisibleCells","cell","_meta$minWidth2","_meta$maxWidth2","cellClassName","bodyCellClasses","cellContent","shouldWrapWithBadges","renderAsBadges","renderBadgeContent","disabled","value","onChange","target","size","ForwardRef","React.forwardRef","GlobalSearch","_useTasks","useTasks","query","setQuery","t","useTranslation","_React$useState2","setValue","clear","_ref$current","focus","search","Input","e","onKeyDown","_ref$current2","key","stopPropagation","blur","preventDefault","placeholder","XMarkIcon","SearchFilters","_ref2","_ref2$inline","inline","_useTasks2","filters","setFilters","filterUsers","_React$useState4","local","setLocal","toFieldId","prefix","toLowerCase","toggleString","prev","arr","next","includes","v","_toConsumableArray","_objectSpread","_defineProperty","renderAssigneeLabel","user","username","name","content","TASK_STATUSES","s","fieldId","htmlFor","type","checked","status","PRIORITIES","p","priority","TASK_TYPES","taskTypes","String","assignees","from","to","_ref3","_ref3$showGlobalSearc","_ref3$showFilters","getAllLeafColumns","exportPdf","_callee","autoTableEntry","_yield$module$import","jsPDF","doc","_regenerator","w","_context","n","module","import","default","c","getIsVisible","r","_c$getValue2","getValue","autoTable","head","body","save","a","moveColumn","dir","order","getState","idx","indexOf","newOrder","_ref5","_c$getValue","csv","blob","Blob","document","createElement","href","URL","createObjectURL","download","click","col","getColumn","toggleVisibility","toggleColumn","exports","sanitizeHtml","html","trim","normalizeToText","wrapperClassName","emptyPlaceholder","items","pushItem","text","push","visit","node","Array","isArray","forEach","isValidElement","beforeLength","candidate","dangerouslySetInnerHTML","rawHtml","__html","renderValue","rendered","rawValue","fallback","parts","split","part","apply","extractBadgeItems","item","index"],"mappings":"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","x_google_ignoreList":[0]}