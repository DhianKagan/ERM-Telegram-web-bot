const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/AuthenticatedApp-DKm_nmXg.js","js/index-DAGCYRZX.js","js/vendor-DBLHOZWC.js","js/index-C9GJ36QG.css","js/CodeLogin-BDyjYYX3.js","js/useToast-BwdJaj6R.js","js/AttachmentMenu-4mhBf5dw.js","js/Toasts-CCoYErBB.js"])))=>i.map(i=>d[i]);
var It=Object.defineProperty;var Ct=(e,t,r)=>t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var P=(e,t,r)=>Ct(e,typeof t!="symbol"?t+"":t,r);import{g as Nt,a as Rt,j as g,i as st,E as Ge,_ as he}from"./index-DAGCYRZX.js";import{b as m,c as Mt,d as Pt,e as Ot,R as Lt,B as Dt,u as Gt,f as Ft}from"./vendor-DBLHOZWC.js";const Bt=(e,t,r,s)=>{var n,a,l,i;const o=[r,{code:t,...s||{}}];if((a=(n=e==null?void 0:e.services)==null?void 0:n.logger)!=null&&a.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);H(o[0])&&(o[0]="react-i18next:: ".concat(o[0])),(i=(l=e==null?void 0:e.services)==null?void 0:l.logger)!=null&&i.warn?e.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},Fe={},Ae=(e,t,r,s)=>{H(r)&&Fe[r]||(H(r)&&(Fe[r]=new Date),Bt(e,t,r,s))},ot=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},Ee=(e,t,r)=>{e.loadNamespaces(t,ot(e,r))},Be=(e,t,r,s)=>{if(H(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Ee(e,r,s);r.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,ot(e,s))},$t=(e,t,r={})=>!t.languages||!t.languages.length?(Ae(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(s,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,e))return!1}}),H=e=>typeof e=="string",Vt=e=>typeof e=="object"&&e!==null,nt=m.createContext();class Ut{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const qt=(e,t)=>{const r=m.useRef();return m.useEffect(()=>{r.current=e},[e,t]),r.current},at=(e,t,r,s)=>e.getFixedT(t,r,s),Wt=(e,t,r,s)=>m.useCallback(at(e,t,r,s),[e,t,r,s]),it=(e,t={})=>{var L,D,O,B;const{i18n:r}=t,{i18n:s,defaultNS:o}=m.useContext(nt)||{},n=r||s||Nt();if(n&&!n.reportNamespaces&&(n.reportNamespaces=new Ut),!n){Ae(n,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const f=(R,M)=>H(M)?M:Vt(M)&&H(M.defaultValue)?M.defaultValue:Array.isArray(R)?R[R.length-1]:R,S=[f,{},!1];return S.t=f,S.i18n={},S.ready=!1,S}(L=n.options.react)!=null&&L.wait&&Ae(n,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...Rt(),...n.options.react,...t},{useSuspense:l,keyPrefix:i}=a;let c=o||((D=n.options)==null?void 0:D.defaultNS);c=H(c)?[c]:c||["translation"],(B=(O=n.reportNamespaces).addUsedNamespaces)==null||B.call(O,c);const p=(n.isInitialized||n.initializedStoreOnce)&&c.every(f=>$t(f,n,a)),w=Wt(n,t.lng||null,a.nsMode==="fallback"?c:c[0],i),k=()=>w,v=()=>at(n,t.lng||null,a.nsMode==="fallback"?c:c[0],i),[b,x]=m.useState(k);let A=c.join();t.lng&&(A="".concat(t.lng).concat(A));const j=qt(A),_=m.useRef(!0);m.useEffect(()=>{const{bindI18n:f,bindI18nStore:S}=a;_.current=!0,!p&&!l&&(t.lng?Be(n,t.lng,c,()=>{_.current&&x(v)}):Ee(n,c,()=>{_.current&&x(v)})),p&&j&&j!==A&&_.current&&x(v);const R=()=>{_.current&&x(v)};return f&&(n==null||n.on(f,R)),S&&(n==null||n.store.on(S,R)),()=>{_.current=!1,n&&f&&(f==null||f.split(" ").forEach(M=>n.off(M,R))),S&&n&&S.split(" ").forEach(M=>n.store.off(M,R))}},[n,A]),m.useEffect(()=>{_.current&&p&&x(k)},[n,i,p]);const C=[b,n,p];if(C.t=b,C.i18n=n,C.ready=p,p||!p&&!l)return C;throw new Promise(f=>{t.lng?Be(n,t.lng,c,()=>f()):Ee(n,c,()=>f())})};function Ht({i18n:e,defaultNS:t,children:r}){const s=m.useMemo(()=>({i18n:e,defaultNS:t}),[e,t]);return m.createElement(nt.Provider,{value:s},r)}function $e(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function lt(...e){return t=>{let r=!1;const s=e.map(o=>{const n=$e(o,t);return!r&&typeof n=="function"&&(r=!0),n});if(r)return()=>{for(let o=0;o<s.length;o++){const n=s[o];typeof n=="function"?n():$e(e[o],null)}}}}function Ts(...e){return m.useCallback(lt(...e),e)}function Jt(e){const t=Kt(e),r=m.forwardRef((s,o)=>{const{children:n,...a}=s,l=m.Children.toArray(n),i=l.find(Zt);if(i){const c=i.props.children,p=l.map(w=>w===i?m.Children.count(c)>1?m.Children.only(null):m.isValidElement(c)?c.props.children:null:w);return g.jsx(t,{...a,ref:o,children:m.isValidElement(c)?m.cloneElement(c,void 0,p):null})}return g.jsx(t,{...a,ref:o,children:n})});return r.displayName="".concat(e,".Slot"),r}var Xt=Jt("Slot");function Kt(e){const t=m.forwardRef((r,s)=>{const{children:o,...n}=r;if(m.isValidElement(o)){const a=er(o),l=Qt(n,o.props);return o.type!==m.Fragment&&(l.ref=s?lt(s,a):a),m.cloneElement(o,l)}return m.Children.count(o)>1?m.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var Yt=Symbol("radix.slottable");function Zt(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Yt}function Qt(e,t){const r={...t};for(const s in t){const o=e[s],n=t[s];/^on[A-Z]/.test(s)?o&&n?r[s]=(...l)=>{const i=n(...l);return o(...l),i}:o&&(r[s]=o):s==="style"?r[s]={...o,...n}:s==="className"&&(r[s]=[o,n].filter(Boolean).join(" "))}return{...e,...r}}function er(e){var s,o;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const Ce="-",tr=e=>{const t=sr(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const l=a.split(Ce);return l[0]===""&&l.length!==1&&l.shift(),ct(l,t)||rr(a)},getConflictingClassGroupIds:(a,l)=>{const i=r[a]||[];return l&&s[a]?[...i,...s[a]]:i}}},ct=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),o=s?ct(e.slice(1),s):void 0;if(o)return o;if(t.validators.length===0)return;const n=e.join(Ce);return(a=t.validators.find(({validator:l})=>l(n)))==null?void 0:a.classGroupId},Ve=/^\[(.+)\]$/,rr=e=>{if(Ve.test(e)){const t=Ve.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},sr=e=>{const{theme:t,classGroups:r}=e,s={nextPart:new Map,validators:[]};for(const o in r)je(r[o],s,o,t);return s},je=(e,t,r,s)=>{e.forEach(o=>{if(typeof o=="string"){const n=o===""?t:Ue(t,o);n.classGroupId=r;return}if(typeof o=="function"){if(or(o)){je(o(s),t,r,s);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([n,a])=>{je(a,Ue(t,n),r,s)})})},Ue=(e,t)=>{let r=e;return t.split(Ce).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},or=e=>e.isThemeGetter,nr=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const o=(n,a)=>{r.set(n,a),t++,t>e&&(t=0,s=r,r=new Map)};return{get(n){let a=r.get(n);if(a!==void 0)return a;if((a=s.get(n))!==void 0)return o(n,a),a},set(n,a){r.has(n)?r.set(n,a):o(n,a)}}},_e="!",ze=":",ar=ze.length,ir=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=o=>{const n=[];let a=0,l=0,i=0,c;for(let b=0;b<o.length;b++){let x=o[b];if(a===0&&l===0){if(x===ze){n.push(o.slice(i,b)),i=b+ar;continue}if(x==="/"){c=b;continue}}x==="["?a++:x==="]"?a--:x==="("?l++:x===")"&&l--}const p=n.length===0?o:o.substring(i),w=lr(p),k=w!==p,v=c&&c>i?c-i:void 0;return{modifiers:n,hasImportantModifier:k,baseClassName:w,maybePostfixModifierPosition:v}};if(t){const o=t+ze,n=s;s=a=>a.startsWith(o)?n(a.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(r){const o=s;s=n=>r({className:n,parseClassName:o})}return s},lr=e=>e.endsWith(_e)?e.substring(0,e.length-1):e.startsWith(_e)?e.substring(1):e,cr=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const o=[];let n=[];return s.forEach(a=>{a[0]==="["||t[a]?(o.push(...n.sort(),a),n=[]):n.push(a)}),o.push(...n.sort()),o}},dr=e=>({cache:nr(e.cacheSize),parseClassName:ir(e),sortModifiers:cr(e),...tr(e)}),ur=/\s+/,fr=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:o,sortModifiers:n}=t,a=[],l=e.trim().split(ur);let i="";for(let c=l.length-1;c>=0;c-=1){const p=l[c],{isExternal:w,modifiers:k,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:x}=r(p);if(w){i=p+(i.length>0?" "+i:i);continue}let A=!!x,j=s(A?b.substring(0,x):b);if(!j){if(!A){i=p+(i.length>0?" "+i:i);continue}if(j=s(b),!j){i=p+(i.length>0?" "+i:i);continue}A=!1}const _=n(k).join(":"),C=v?_+_e:_,L=C+j;if(a.includes(L))continue;a.push(L);const D=o(j,A);for(let O=0;O<D.length;++O){const B=D[O];a.push(C+B)}i=p+(i.length>0?" "+i:i)}return i};function mr(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=dt(t))&&(s&&(s+=" "),s+=r);return s}const dt=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=dt(e[s]))&&(r&&(r+=" "),r+=t);return r};function pr(e,...t){let r,s,o,n=a;function a(i){const c=t.reduce((p,w)=>w(p),e());return r=dr(c),s=r.cache.get,o=r.cache.set,n=l,l(i)}function l(i){const c=s(i);if(c)return c;const p=fr(i,r);return o(i,p),p}return function(){return n(mr.apply(null,arguments))}}const T=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},ut=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ft=/^\((?:(\w[\w-]*):)?(.+)\)$/i,gr=/^\d+\/\d+$/,hr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,br=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,xr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,X=e=>gr.test(e),y=e=>!!e&&!Number.isNaN(Number(e)),$=e=>!!e&&Number.isInteger(Number(e)),we=e=>e.endsWith("%")&&y(e.slice(0,-1)),F=e=>hr.test(e),kr=()=>!0,vr=e=>br.test(e)&&!yr.test(e),mt=()=>!1,Sr=e=>xr.test(e),Tr=e=>wr.test(e),Ar=e=>!d(e)&&!u(e),Er=e=>Y(e,ht,mt),d=e=>ut.test(e),q=e=>Y(e,bt,vr),ke=e=>Y(e,Cr,y),qe=e=>Y(e,pt,mt),jr=e=>Y(e,gt,Tr),le=e=>Y(e,yt,Sr),u=e=>ft.test(e),Q=e=>Z(e,bt),_r=e=>Z(e,Nr),We=e=>Z(e,pt),zr=e=>Z(e,ht),Ir=e=>Z(e,gt),ce=e=>Z(e,yt,!0),Y=(e,t,r)=>{const s=ut.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},Z=(e,t,r=!1)=>{const s=ft.exec(e);return s?s[1]?t(s[1]):r:!1},pt=e=>e==="position"||e==="percentage",gt=e=>e==="image"||e==="url",ht=e=>e==="length"||e==="size"||e==="bg-size",bt=e=>e==="length",Cr=e=>e==="number",Nr=e=>e==="family-name",yt=e=>e==="shadow",Rr=()=>{const e=T("color"),t=T("font"),r=T("text"),s=T("font-weight"),o=T("tracking"),n=T("leading"),a=T("breakpoint"),l=T("container"),i=T("spacing"),c=T("radius"),p=T("shadow"),w=T("inset-shadow"),k=T("text-shadow"),v=T("drop-shadow"),b=T("blur"),x=T("perspective"),A=T("aspect"),j=T("ease"),_=T("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...L(),u,d],O=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],f=()=>[u,d,i],S=()=>[X,"full","auto",...f()],R=()=>[$,"none","subgrid",u,d],M=()=>["auto",{span:["full",$,u,d]},$,u,d],se=()=>[$,"auto",u,d],Re=()=>["auto","min","max","fr",u,d],be=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...f()],U=()=>[X,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...f()],h=()=>[e,u,d],Me=()=>[...L(),We,qe,{position:[u,d]}],Pe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Oe=()=>["auto","cover","contain",zr,Er,{size:[u,d]}],ye=()=>[we,Q,q],z=()=>["","none","full",c,u,d],N=()=>["",y,Q,q],oe=()=>["solid","dashed","dotted","double"],Le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>[y,we,We,qe],De=()=>["","none",b,u,d],ne=()=>["none",y,u,d],ae=()=>["none",y,u,d],xe=()=>[y,u,d],ie=()=>[X,"full",...f()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[F],breakpoint:[F],color:[kr],container:[F],"drop-shadow":[F],ease:["in","out","in-out"],font:[Ar],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[F],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[F],shadow:[F],spacing:["px",y],text:[F],"text-shadow":[F],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",X,d,u,A]}],container:["container"],columns:[{columns:[y,d,u,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:S()}],"inset-x":[{"inset-x":S()}],"inset-y":[{"inset-y":S()}],start:[{start:S()}],end:[{end:S()}],top:[{top:S()}],right:[{right:S()}],bottom:[{bottom:S()}],left:[{left:S()}],visibility:["visible","invisible","collapse"],z:[{z:[$,"auto",u,d]}],basis:[{basis:[X,"full","auto",l,...f()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[y,X,"auto","initial","none",d]}],grow:[{grow:["",y,u,d]}],shrink:[{shrink:["",y,u,d]}],order:[{order:[$,"first","last","none",u,d]}],"grid-cols":[{"grid-cols":R()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":se()}],"col-end":[{"col-end":se()}],"grid-rows":[{"grid-rows":R()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":se()}],"row-end":[{"row-end":se()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Re()}],"auto-rows":[{"auto-rows":Re()}],gap:[{gap:f()}],"gap-x":[{"gap-x":f()}],"gap-y":[{"gap-y":f()}],"justify-content":[{justify:[...be(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...be()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":be()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:f()}],px:[{px:f()}],py:[{py:f()}],ps:[{ps:f()}],pe:[{pe:f()}],pt:[{pt:f()}],pr:[{pr:f()}],pb:[{pb:f()}],pl:[{pl:f()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":f()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":f()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[l,"screen",...U()]}],"min-w":[{"min-w":[l,"screen","none",...U()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",r,Q,q]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,u,ke]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",we,d]}],"font-family":[{font:[_r,d,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,u,d]}],"line-clamp":[{"line-clamp":[y,"none",u,ke]}],leading:[{leading:[n,...f()]}],"list-image":[{"list-image":["none",u,d]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",u,d]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:h()}],"text-color":[{text:h()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[y,"from-font","auto",u,q]}],"text-decoration-color":[{decoration:h()}],"underline-offset":[{"underline-offset":[y,"auto",u,d]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:f()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",u,d]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",u,d]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Me()}],"bg-repeat":[{bg:Pe()}],"bg-size":[{bg:Oe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$,u,d],radial:["",u,d],conic:[$,u,d]},Ir,jr]}],"bg-color":[{bg:h()}],"gradient-from-pos":[{from:ye()}],"gradient-via-pos":[{via:ye()}],"gradient-to-pos":[{to:ye()}],"gradient-from":[{from:h()}],"gradient-via":[{via:h()}],"gradient-to":[{to:h()}],rounded:[{rounded:z()}],"rounded-s":[{"rounded-s":z()}],"rounded-e":[{"rounded-e":z()}],"rounded-t":[{"rounded-t":z()}],"rounded-r":[{"rounded-r":z()}],"rounded-b":[{"rounded-b":z()}],"rounded-l":[{"rounded-l":z()}],"rounded-ss":[{"rounded-ss":z()}],"rounded-se":[{"rounded-se":z()}],"rounded-ee":[{"rounded-ee":z()}],"rounded-es":[{"rounded-es":z()}],"rounded-tl":[{"rounded-tl":z()}],"rounded-tr":[{"rounded-tr":z()}],"rounded-br":[{"rounded-br":z()}],"rounded-bl":[{"rounded-bl":z()}],"border-w":[{border:N()}],"border-w-x":[{"border-x":N()}],"border-w-y":[{"border-y":N()}],"border-w-s":[{"border-s":N()}],"border-w-e":[{"border-e":N()}],"border-w-t":[{"border-t":N()}],"border-w-r":[{"border-r":N()}],"border-w-b":[{"border-b":N()}],"border-w-l":[{"border-l":N()}],"divide-x":[{"divide-x":N()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":N()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:h()}],"border-color-x":[{"border-x":h()}],"border-color-y":[{"border-y":h()}],"border-color-s":[{"border-s":h()}],"border-color-e":[{"border-e":h()}],"border-color-t":[{"border-t":h()}],"border-color-r":[{"border-r":h()}],"border-color-b":[{"border-b":h()}],"border-color-l":[{"border-l":h()}],"divide-color":[{divide:h()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[y,u,d]}],"outline-w":[{outline:["",y,Q,q]}],"outline-color":[{outline:h()}],shadow:[{shadow:["","none",p,ce,le]}],"shadow-color":[{shadow:h()}],"inset-shadow":[{"inset-shadow":["none",w,ce,le]}],"inset-shadow-color":[{"inset-shadow":h()}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:h()}],"ring-offset-w":[{"ring-offset":[y,q]}],"ring-offset-color":[{"ring-offset":h()}],"inset-ring-w":[{"inset-ring":N()}],"inset-ring-color":[{"inset-ring":h()}],"text-shadow":[{"text-shadow":["none",k,ce,le]}],"text-shadow-color":[{"text-shadow":h()}],opacity:[{opacity:[y,u,d]}],"mix-blend":[{"mix-blend":[...Le(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Le()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[y]}],"mask-image-linear-from-pos":[{"mask-linear-from":E()}],"mask-image-linear-to-pos":[{"mask-linear-to":E()}],"mask-image-linear-from-color":[{"mask-linear-from":h()}],"mask-image-linear-to-color":[{"mask-linear-to":h()}],"mask-image-t-from-pos":[{"mask-t-from":E()}],"mask-image-t-to-pos":[{"mask-t-to":E()}],"mask-image-t-from-color":[{"mask-t-from":h()}],"mask-image-t-to-color":[{"mask-t-to":h()}],"mask-image-r-from-pos":[{"mask-r-from":E()}],"mask-image-r-to-pos":[{"mask-r-to":E()}],"mask-image-r-from-color":[{"mask-r-from":h()}],"mask-image-r-to-color":[{"mask-r-to":h()}],"mask-image-b-from-pos":[{"mask-b-from":E()}],"mask-image-b-to-pos":[{"mask-b-to":E()}],"mask-image-b-from-color":[{"mask-b-from":h()}],"mask-image-b-to-color":[{"mask-b-to":h()}],"mask-image-l-from-pos":[{"mask-l-from":E()}],"mask-image-l-to-pos":[{"mask-l-to":E()}],"mask-image-l-from-color":[{"mask-l-from":h()}],"mask-image-l-to-color":[{"mask-l-to":h()}],"mask-image-x-from-pos":[{"mask-x-from":E()}],"mask-image-x-to-pos":[{"mask-x-to":E()}],"mask-image-x-from-color":[{"mask-x-from":h()}],"mask-image-x-to-color":[{"mask-x-to":h()}],"mask-image-y-from-pos":[{"mask-y-from":E()}],"mask-image-y-to-pos":[{"mask-y-to":E()}],"mask-image-y-from-color":[{"mask-y-from":h()}],"mask-image-y-to-color":[{"mask-y-to":h()}],"mask-image-radial":[{"mask-radial":[u,d]}],"mask-image-radial-from-pos":[{"mask-radial-from":E()}],"mask-image-radial-to-pos":[{"mask-radial-to":E()}],"mask-image-radial-from-color":[{"mask-radial-from":h()}],"mask-image-radial-to-color":[{"mask-radial-to":h()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[y]}],"mask-image-conic-from-pos":[{"mask-conic-from":E()}],"mask-image-conic-to-pos":[{"mask-conic-to":E()}],"mask-image-conic-from-color":[{"mask-conic-from":h()}],"mask-image-conic-to-color":[{"mask-conic-to":h()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Me()}],"mask-repeat":[{mask:Pe()}],"mask-size":[{mask:Oe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",u,d]}],filter:[{filter:["","none",u,d]}],blur:[{blur:De()}],brightness:[{brightness:[y,u,d]}],contrast:[{contrast:[y,u,d]}],"drop-shadow":[{"drop-shadow":["","none",v,ce,le]}],"drop-shadow-color":[{"drop-shadow":h()}],grayscale:[{grayscale:["",y,u,d]}],"hue-rotate":[{"hue-rotate":[y,u,d]}],invert:[{invert:["",y,u,d]}],saturate:[{saturate:[y,u,d]}],sepia:[{sepia:["",y,u,d]}],"backdrop-filter":[{"backdrop-filter":["","none",u,d]}],"backdrop-blur":[{"backdrop-blur":De()}],"backdrop-brightness":[{"backdrop-brightness":[y,u,d]}],"backdrop-contrast":[{"backdrop-contrast":[y,u,d]}],"backdrop-grayscale":[{"backdrop-grayscale":["",y,u,d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[y,u,d]}],"backdrop-invert":[{"backdrop-invert":["",y,u,d]}],"backdrop-opacity":[{"backdrop-opacity":[y,u,d]}],"backdrop-saturate":[{"backdrop-saturate":[y,u,d]}],"backdrop-sepia":[{"backdrop-sepia":["",y,u,d]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":f()}],"border-spacing-x":[{"border-spacing-x":f()}],"border-spacing-y":[{"border-spacing-y":f()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",u,d]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[y,"initial",u,d]}],ease:[{ease:["linear","initial",j,u,d]}],delay:[{delay:[y,u,d]}],animate:[{animate:["none",_,u,d]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,u,d]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:ae()}],"scale-x":[{"scale-x":ae()}],"scale-y":[{"scale-y":ae()}],"scale-z":[{"scale-z":ae()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[u,d,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ie()}],"translate-x":[{"translate-x":ie()}],"translate-y":[{"translate-y":ie()}],"translate-z":[{"translate-z":ie()}],"translate-none":["translate-none"],accent:[{accent:h()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:h()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",u,d]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":f()}],"scroll-mx":[{"scroll-mx":f()}],"scroll-my":[{"scroll-my":f()}],"scroll-ms":[{"scroll-ms":f()}],"scroll-me":[{"scroll-me":f()}],"scroll-mt":[{"scroll-mt":f()}],"scroll-mr":[{"scroll-mr":f()}],"scroll-mb":[{"scroll-mb":f()}],"scroll-ml":[{"scroll-ml":f()}],"scroll-p":[{"scroll-p":f()}],"scroll-px":[{"scroll-px":f()}],"scroll-py":[{"scroll-py":f()}],"scroll-ps":[{"scroll-ps":f()}],"scroll-pe":[{"scroll-pe":f()}],"scroll-pt":[{"scroll-pt":f()}],"scroll-pr":[{"scroll-pr":f()}],"scroll-pb":[{"scroll-pb":f()}],"scroll-pl":[{"scroll-pl":f()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",u,d]}],fill:[{fill:["none",...h()]}],"stroke-w":[{stroke:[y,Q,q,ke]}],stroke:[{stroke:["none",...h()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Mr=pr(Rr);function Pr(...e){return Mr(Mt(e))}const Or=Pt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md border border-transparent text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40",{variants:{variant:{default:"bg-indigo-600 text-white hover:bg-indigo-700 focus-visible:ring-indigo-200",destructive:"bg-rose-600 text-white hover:bg-rose-700 focus-visible:ring-rose-200",outline:"border-slate-200 bg-white text-slate-600 hover:bg-slate-100 focus-visible:ring-slate-200",secondary:"bg-slate-100 text-slate-700 hover:bg-slate-200 focus-visible:ring-slate-200",ghost:"bg-transparent text-slate-600 hover:bg-slate-100 focus-visible:ring-slate-200",link:"text-indigo-600 underline-offset-4 hover:underline",success:"bg-emerald-600 text-white hover:bg-emerald-700 focus-visible:ring-emerald-200",pill:"rounded-full border border-slate-200/80 bg-white/70 text-xs font-semibold uppercase tracking-wide text-slate-700 shadow-sm hover:border-slate-300 hover:bg-white focus-visible:ring-primary/60 focus-visible:ring-offset-0 dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-100 dark:hover:border-slate-500 dark:hover:bg-slate-800"},size:{default:"px-4 py-2 has-[>svg]:px-3",sm:"px-3 py-1.5 has-[>svg]:px-2.5 text-sm",lg:"px-5 py-2.5 has-[>svg]:px-4 text-base",xs:"px-2.5 py-1 text-xs font-medium",pill:"px-3 py-1 has-[>svg]:px-2",icon:"p-2 rounded-full","icon-lg":"h-10 w-10 rounded-full p-0"}},defaultVariants:{variant:"default",size:"default"}}),xt=m.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...o},n)=>{const a=s?Xt:"button";return g.jsx(a,{"data-slot":"button",className:Pr(Or({variant:t,size:r,className:e})),ref:n,...o})});xt.displayName="Button";function Lr({title:e,titleId:t,...r},s){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?m.createElement("title",{id:t},e):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Dr=m.forwardRef(Lr);function Gr({open:e,onClose:t,children:r}){return!e||typeof document>"u"?null:Ot.createPortal(g.jsxs("div",{className:"fixed inset-0 z-[1000]",role:"dialog","aria-modal":"true",children:[g.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),g.jsx("div",{className:"pointer-events-none fixed inset-0 flex items-center justify-center",children:g.jsxs("div",{className:"pointer-events-auto max-h-[90vh] w-[min(900px,90vw)] overflow-auto rounded-2xl bg-white p-6 shadow-xl",children:[g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{type:"button",onClick:t,"aria-label":"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ Ð´Ð¸Ð°Ð»Ð¾Ð³",className:"inline-flex h-9 w-9 items-center justify-center rounded-full text-slate-500 transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/60 dark:text-slate-200 dark:hover:bg-slate-800",children:g.jsx(Dr,{className:"h-5 w-5"})})}),g.jsx("div",{className:"mt-2",children:r})]})})]}),document.body)}function Fr({open:e,message:t,onClose:r,closeText:s="Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ"}){return g.jsxs(Gr,{open:e,onClose:r,children:[g.jsx("p",{children:t}),g.jsx("div",{className:"mt-4 flex justify-end",children:g.jsx(xt,{variant:"default",size:"pill",onClick:r,children:s})})]})}let K;function Br(){if(typeof localStorage<"u")try{return localStorage.getItem("csrfToken")||K||null}catch(e){return K||null}return K||null}function wt(e){if(typeof localStorage<"u")try{localStorage.setItem("csrfToken",e),K=e;return}catch(t){K=e;return}K=e}function $r(e,t="error"){window.dispatchEvent(new CustomEvent("toast",{detail:{message:e,type:t}}))}const W=new Set;function Vr(e){try{const t=typeof window<"u"&&window.location?window.location.origin:"http://localhost";return new URL(e,t).pathname}catch(t){return e}}const de="/api/v1/csrf",ue="/api/v1/auth/profile",Ur=e=>typeof Document<"u"&&e instanceof Document,qr=e=>typeof FormData<"u"&&e instanceof FormData,Wr=e=>typeof URLSearchParams<"u"&&e instanceof URLSearchParams,Hr=e=>typeof Blob<"u"&&e instanceof Blob,He=e=>typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer,Jr=e=>typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer,Xr=e=>typeof DataView<"u"&&e instanceof DataView,Kr=e=>typeof ArrayBuffer<"u"&&typeof e=="object"&&e!==null&&ArrayBuffer.isView(e)&&!(e instanceof DataView),ve=(e,t,r)=>{const s=Math.max(0,Math.min(r,e.byteLength-t)),o=new Uint8Array(s);return o.set(new Uint8Array(e,t,s)),o.buffer},Yr=e=>e==null||typeof ReadableStream<"u"&&e instanceof ReadableStream?null:typeof e=="string"||Ur(e)||Hr(e)||qr(e)||Wr(e)?e:Jr(e)?ve(e,0,e.byteLength):He(e)?e:Xr(e)?ve(e.buffer,e.byteOffset,e.byteLength):Kr(e)?He(e.buffer)?e:ve(e.buffer,e.byteOffset,e.byteLength):e;async function Se(e,t,r){return r&&typeof XMLHttpRequest<"u"?new Promise((s,o)=>{var l;const n=new XMLHttpRequest;n.open(t.method||"GET",e),n.withCredentials=t.credentials==="include",Object.entries(t.headers||{}).forEach(([i,c])=>n.setRequestHeader(i,c)),n.upload.onprogress=r,n.onload=()=>{const i=n.getAllResponseHeaders(),c=new Headers;typeof i=="string"&&i.trim()&&i.trim().split(/\r?\n/).forEach(p=>{const[w,k]=p.split(": ");w&&c.append(w,k)}),s(new Response(n.response,{status:n.status,statusText:n.statusText,headers:c}))},n.onerror=()=>o(new TypeError("Network request failed")),n.onabort=()=>o(new DOMException("Aborted","AbortError"));const a=(l=t.body)!=null?l:null;a&&typeof ReadableStream<"u"&&a instanceof ReadableStream?n.send():n.send(Yr(a))}):fetch(e,t)}async function I(e,t={}){const{noRedirect:r,onProgress:s,confirmed:o,...n}=t,a=Br,l=wt,i={...n.headers||{}},p=Vr(e)===ue;o&&!i["X-Confirmed-Action"]&&(i["X-Confirmed-Action"]="true");let w=a();if(p&&W.has(ue))return new Response(null,{status:404,statusText:"Not Found"});if(!w&&!W.has(de))try{const b=await fetch("/api/v1/csrf",{credentials:"include"});if(b.status===404)W.add(de);else if(b.ok){const x=await b.json().catch(()=>({}));x.csrfToken&&(w=x.csrfToken,l(w),W.delete(de))}}catch(b){}w&&(i["X-XSRF-TOKEN"]=w);const k={...n,credentials:"include",headers:i};let v=await Se(e,k,s);if(v.status===404&&p?W.add(ue):p&&v.ok&&W.delete(ue),v.status===403&&!W.has(de)){if(k.body)try{(typeof k.body=="string"||typeof k.body=="object"&&k.body!==null&&!(k.body instanceof FormData))&&localStorage.setItem("csrf_payload",JSON.stringify(k.body))}catch(b){console.error(b)}try{const b=await fetch("/api/v1/csrf",{credentials:"include"});if(b.ok){const x=await b.json().catch(()=>({}));x.csrfToken&&(l(x.csrfToken),i["X-XSRF-TOKEN"]=x.csrfToken)}}catch(b){}if(v=await Se(e,k,s),v.ok)try{localStorage.removeItem("csrf_payload")}catch(b){console.error(b)}}if(v.status===401)try{(await fetch("/api/v1/auth/refresh",{method:"POST",credentials:"include"})).ok&&(v=await Se(e,k,s))}catch(b){}return v.status===403&&$r("ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¿Ñ€Ð°Ð²","error"),v.status===401&&!r&&(window.location.href="/login?expired=1"),v}const ee=e=>{if(typeof e!="string")return;const t=e.trim();return t.length>0?t:void 0},fe=e=>{if(!e)return;if(typeof e=="string")return ee(e);if(typeof e!="object")return;const t=e;return ee(t._id)||ee(t.id)},me=e=>{if(!e||typeof e=="string"||typeof e!="object")return;const t=e;return ee(t.name)||ee(t.label)},Ne=e=>{const t=e,r=fe(t.roleId)||typeof e.roleId=="string"&&e.roleId.trim()||void 0,s=me(t.roleId)||typeof e.roleName=="string"&&e.roleName.trim()||void 0,o=fe(t.departmentId)||typeof e.departmentId=="string"&&e.departmentId.trim()||void 0,n=me(t.departmentId)||typeof e.departmentName=="string"&&e.departmentName.trim()||void 0,a=fe(t.divisionId)||typeof e.divisionId=="string"&&e.divisionId.trim()||void 0,l=me(t.divisionId)||typeof e.divisionName=="string"&&e.divisionName.trim()||void 0,i=fe(t.positionId)||typeof e.positionId=="string"&&e.positionId.trim()||void 0,c=me(t.positionId)||typeof e.positionName=="string"&&e.positionName.trim()||void 0;return{...e,roleId:r,roleName:s,departmentId:o,departmentName:n,divisionId:a,divisionName:l,positionId:i,positionName:c}},As=e=>e.map(t=>Ne(t)),Zr=async e=>{var o;const t=await I("/api/v1/auth/profile",e);if(!t.ok)throw new Error("unauthorized");const r=await t.json(),s=Ne(r);return{...s,id:String((o=s.telegram_id)!=null?o:"")}},Es=async e=>{var o;const t=await I("/api/v1/auth/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text().catch(()=>"");if(n)try{const a=JSON.parse(n),l=typeof a.detail=="string"&&a.detail||typeof a.error=="string"&&a.error||typeof a.message=="string"&&a.message||"";if(l)throw new Error(l)}catch(a){}throw new Error(n||"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ")}const r=await t.json(),s=Ne(r);return{...s,id:String((o=s.telegram_id)!=null?o:"")}},Qr=()=>I("/api/v1/auth/logout",{method:"POST"}).then(()=>{}),es=()=>I("/api/v1/auth/refresh",{method:"POST",noRedirect:!0}).then(()=>{}),Je=["Ð”Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ","ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ","Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ","ÐŸÐ¾ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ","ÐŸÐ¾Ñ‡Ð¸Ð½Ð¸Ñ‚ÑŒ","Ð—Ð°ÑÐ²ÐºÐ°"],Xe=["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Ð’ Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð½Ñ","Ð”Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ"],Ke=["Ð‘ÐµÐ· Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð°","Ð›ÐµÐ³ÐºÐ¾Ð²Ð¾Ð¹","Ð“Ñ€ÑƒÐ·Ð¾Ð²Ð¾Ð¹"],Te=["ÐÐ°Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ","ÐšÐ°Ñ€Ñ‚Ð°","Ð‘ÐµÐ·Ð½Ð°Ð»","Ð‘ÐµÐ· Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹"],Ye=["ÐÐ¾Ð²Ð°Ñ","Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ","Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð°","ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½Ð°"],js="Europe/Kyiv",_s="GMT+3",zs=[{name:"title",label:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ",type:"text",required:!0},{name:"task_type",label:"Ð¢Ð¸Ð¿",type:"select",options:Je,default:Je[0]},{name:"priority",label:"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚",type:"select",options:Xe,default:Xe[1]},{name:"creator",label:"Ð—Ð°Ð´Ð°Ñ‡Ñƒ ÑÐ¾Ð·Ð´Ð°Ð»",type:"select"},{name:"assignees",label:"Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ð¸",type:"multiselect"},{name:"start_location",label:"Ð¡Ñ‚Ð°Ñ€Ñ‚ Ñ‚Ð¾Ñ‡ÐºÐ°",type:"location"},{name:"transport_type",label:"Ð¢Ð¸Ð¿ Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð°",type:"select",options:Ke,default:Ke[0]},{name:"cargo_length_m",label:"Ð”Ð»Ð¸Ð½Ð°, Ð¼",type:"number"},{name:"cargo_width_m",label:"Ð¨Ð¸Ñ€Ð¸Ð½Ð°, Ð¼",type:"number"},{name:"cargo_height_m",label:"Ð’Ñ‹ÑÐ¾Ñ‚Ð°, Ð¼",type:"number"},{name:"cargo_volume_m3",label:"ÐžÐ±ÑŠÑ‘Ð¼, Ð¼Â³",type:"number"},{name:"cargo_weight_kg",label:"Ð’ÐµÑ, ÐºÐ³",type:"number"},{name:"end_location",label:"Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ°",type:"location"},{name:"payment_method",label:"Ð¡Ð¿Ð¾ÑÐ¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹",type:"select",options:Te,default:Te.find(e=>/^Ð±ÐµÐ· Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹$/i.test(e.trim()))||Te[0]},{name:"payment_amount",label:"Ð¡ÑƒÐ¼Ð¼Ð°",type:"number",default:"0"},{name:"status",label:"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",type:"select",options:Ye,default:Ye[0]},{name:"description",label:"ðŸ”¨ Ð—Ð°Ð´Ð°Ñ‡Ð°",type:"richtext"},{name:"comment",label:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹",type:"richtext"}],ts=1,rs={formVersion:ts},ss=rs,kt=(e,t)=>{const r=new FormData;return r.append("formVersion",String(ss.formVersion)),Object.entries(e).forEach(([s,o])=>{if(o!=null){if(Array.isArray(o)){if(o.length===0)return;if(o.some(a=>typeof a=="object"&&a!==null)){r.append(s,JSON.stringify(o));return}o.forEach(a=>r.append(s,String(a)));return}if(typeof o=="object"){r.append(s,JSON.stringify(o));return}r.append(s,String(o))}}),r},vt={400:"Ð¡ÐµÑ€Ð²ÐµÑ€ Ð¾Ñ‚ÐºÐ»Ð¾Ð½Ð¸Ð» Ð·Ð°Ð¿Ñ€Ð¾Ñ: Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ.",401:"Ð¡ÐµÑÑÐ¸Ñ Ð¸ÑÑ‚ÐµÐºÐ»Ð°. ÐŸÐµÑ€ÐµÐ·Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð¸ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÑƒ.",403:"ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¿Ñ€Ð°Ð² Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸.",404:"ÐžÐ±ÑŠÐµÐºÑ‚ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ Ð¸Ð»Ð¸ ÑƒÐ¶Ðµ ÑƒÐ´Ð°Ð»Ñ‘Ð½.",409:"Ð”Ð°Ð½Ð½Ñ‹Ðµ ÑƒÑÑ‚Ð°Ñ€ÐµÐ»Ð¸. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ð¸ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÐ½Ð¾Ð²Ð°.",413:"ÐŸÑ€ÐµÐ²Ñ‹ÑˆÐµÐ½ Ð´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ð¹ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð»Ð¸ Ð²Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹.",422:"Ð¡ÐµÑ€Ð²ÐµÑ€ Ð½Ðµ Ð¿Ñ€Ð¸Ð½ÑÐ» Ð´Ð°Ð½Ð½Ñ‹Ðµ. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ.",429:"ÐŸÑ€ÐµÐ²Ñ‹ÑˆÐµÐ½ Ð»Ð¸Ð¼Ð¸Ñ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð². ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÑƒ Ð¿Ð¾Ð·Ð¶Ðµ.",500:"Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÑÑ Ð¾ÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.",503:"Ð¡ÐµÑ€Ð²Ð¸Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÑƒ Ð¿Ð¾Ð·Ð¶Ðµ."},os=e=>{let t="";for(const r of e){const s=r.charCodeAt(0);t+=s<32||s===127?" ":r}return t},pe=e=>os(e).replace(/\s+/g," ").trim().slice(0,400),te=async e=>{var o;let t="";try{const n=await e.clone().json();if(n&&typeof n=="object"){const a=n;typeof a.message=="string"?t=a.message:typeof a.error=="string"?t=a.error:Array.isArray(a.errors)&&(t=a.errors.map(l=>l?typeof l=="string"?l:typeof l=="object"&&typeof l.message=="string"?l.message:"":"").filter(Boolean).join(", "))}}catch(n){t=""}if(!t)try{t=(o=(await e.text()).trim().split(/\r?\n/)[0])!=null?o:""}catch(n){t=""}const r=vt[e.status],s=pe(t||"");if(s)return s;if(r)return r;if(e.status){const n=pe(e.statusText||"");return n?"ÐšÐ¾Ð´ ".concat(e.status,": ").concat(n):"ÐšÐ¾Ð´ ".concat(e.status)}return"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ°"};class re extends Error{constructor({status:r,statusText:s,reason:o}){const n=pe(o||vt[r]||"");super(n||(r?"ÐšÐ¾Ð´ ".concat(r).concat(s?": ".concat(pe(s)):""):"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ°"));P(this,"status");P(this,"statusText");P(this,"rawReason");this.name="TaskRequestError",this.status=r,this.statusText=s,this.rawReason=o}}const Is=()=>I("/api/v1/tasks?kanban=true&kind=task").then(e=>e.ok?e.json():[]).then(e=>Array.isArray(e)?e:e.tasks||[]),Cs=(e,t)=>I("/api/v1/tasks/".concat(e,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}),St=async(e,t,r,s)=>{var i;const o=kt(t),n=await I(e,{method:"POST",body:o,onProgress:s});if(!n.ok)throw new re({status:n.status,statusText:n.statusText,reason:await te(n)});const a=await n.json(),l=a._id||a.id;return l&&((i=window.Telegram)!=null&&i.WebApp)&&window.Telegram.WebApp.sendData("task_created:".concat(l)),Tt(),a},Ns=async(e,t,r)=>St("/api/v1/tasks",e,t,r),Rs=async(e,t,r)=>St("/api/v1/tasks/requests",e,t,r),Ms=e=>I("/api/v1/tasks/".concat(e),{method:"DELETE"}),Ps=async(e,t,r,s)=>{const o=kt(t),n=await I("/api/v1/tasks/".concat(e),{method:"PATCH",body:o,onProgress:s});if(!n.ok)throw new re({status:n.status,statusText:n.statusText,reason:await te(n)});return Tt(),n},Os=async()=>{const e=await I("/api/v1/tasks/transport-options");if(!e.ok){const o=await e.text().catch(()=>"");throw new Error(o||"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð°")}const t=await e.json(),r=Array.isArray(t.drivers)?t.drivers.map(o=>{var n,a;return{id:o.id,name:typeof o.name=="string"&&o.name.trim().length>0?o.name.trim():(n=o.username)!=null?n:String(o.id),username:(a=o.username)!=null?a:null}}):[],s=Array.isArray(t.vehicles)?t.vehicles.map(o=>({id:o.id,name:o.name,registrationNumber:o.registrationNumber,transportType:o.transportType==="Ð“Ñ€ÑƒÐ·Ð¾Ð²Ð¾Ð¹"?"Ð“Ñ€ÑƒÐ·Ð¾Ð²Ð¾Ð¹":"Ð›ÐµÐ³ÐºÐ¾Ð²Ð¾Ð¹"})):[];return{drivers:r,vehicles:s}},Ls=()=>I("/api/v1/tasks/executors?kind=request").then(e=>e.ok?e.json():[]).then(e=>Array.isArray(e)?e.map(t=>{var r,s;return{telegram_id:t.telegram_id,name:t.name,username:t.username,telegram_username:(s=(r=t.telegram_username)!=null?r:t.username)!=null?s:null}}):[]),Tt=()=>{Object.keys(localStorage).filter(e=>e.startsWith("tasks_")).forEach(e=>localStorage.removeItem(e))},Ze=()=>{Object.keys(localStorage).filter(e=>e.startsWith("tasks_anon_")).forEach(e=>localStorage.removeItem(e))},At=e=>{var t,r,s,o;return{id:String((r=(t=e.id)!=null?t:e._id)!=null?r:""),kind:e.kind==="request"?"request":(s=e.kind)!=null?s:"task",payload:(o=e.payload)!=null?o:{},attachments:Array.isArray(e.attachments)?e.attachments:[],updatedAt:typeof e.updatedAt=="string"?e.updatedAt:null}},Ds=async e=>{const t=await I("/api/v1/task-drafts/".concat(e));if(t.status===404)return null;if(!t.ok)throw new re({status:t.status,statusText:t.statusText,reason:await te(t)});const r=await t.json();return At(r)},Gs=async(e,t)=>{const r=await I("/api/v1/task-drafts/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:t})});if(!r.ok)throw new re({status:r.status,statusText:r.statusText,reason:await te(r)});const s=await r.json();return At(s)},Fs=async e=>{const t=await I("/api/v1/task-drafts/".concat(e),{method:"DELETE"});if(!t.ok&&t.status!==404)throw new re({status:t.status,statusText:t.statusText,reason:await te(t)})},Bs=(e={},t,r=!1)=>{const s=Object.fromEntries(Object.entries(e).filter(([,i])=>i!=null)),o=new URLSearchParams(s).toString(),n="/api/v1/tasks"+(o?"?".concat(o):""),a="tasks_".concat(t!=null?t:"anon","_").concat(o);let l={};if(!r){try{l=JSON.parse(localStorage.getItem(a)||"")}catch(i){l={}}if(l.time&&Date.now()-l.time<6e4&&l.data)return Promise.resolve(l.data)}return I(n).then(i=>i.ok?i.json():{tasks:[],users:[],total:0}).then(i=>{if(!r)try{localStorage.setItem(a,JSON.stringify({time:Date.now(),data:i}))}catch(c){}return i})};function ge(e){if(e==null)return null;if(typeof e=="string"||typeof e=="number"){const t=String(e).trim();return!t||t==="[object Object]"||t==="undefined"?null:t}if(typeof e=="object"){if("$oid"in e&&typeof e.$oid=="string")return ge(e.$oid);if("toString"in e&&typeof e.toString=="function")return ge(e.toString())}return null}const Qe=25,ns="Ð—Ð°ÑÐ²ÐºÐ°",Ie=e=>{if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e.trim());if(Number.isFinite(t))return t}return null},Et=e=>{if(Array.isArray(e))return e.map(r=>Ie(r)).filter(r=>r!==null);const t=Ie(e);return t!==null?[t]:[]},et=(...e)=>{let t=!1;for(const r of e){if(typeof r=="string")return r;r===null&&(t=!0)}return t?null:void 0},jt=e=>e.kind==="request"?"request":e.kind==="task"?"task":(typeof e.task_type=="string"?e.task_type.trim():"")===ns?"request":"task",tt=e=>{var w,k,v,b,x,A,j,_,C;if(!e)return null;const t=(b=(v=(k=(w=e._id)!=null?w:e.id)!=null?k:e.task_id)!=null?v:e.taskId)!=null?b:null,r=(x=ge(t))!=null?x:typeof t=="string"?t.trim():null;if(!r)return null;const s=typeof e.status=="string"&&e.status.trim()?e.status.trim():"ÐÐ¾Ð²Ð°Ñ",o=typeof e.createdAt=="string"?e.createdAt:typeof e.created_at=="string"?e.created_at:void 0,n=et(e.dueDate,e.due_date),a=et(e.dueDate,e.due_date),l=n!==void 0?n:a,i=Et((j=(A=e.assignees)!=null?A:e.assigned_user_id)!=null?j:e.assignedUserId),c=(C=(_=e.created_by)!=null?_:e.createdBy)!=null?C:e.creator;return{...e,_id:r,id:r,status:s,assignees:i,createdAt:o!=null?o:e.createdAt,dueDate:l,due_date:l,created_by:c,kind:jt(e)}},as=(e,t)=>{var r,s,o,n;if(!e)return!0;if(e.kind&&jt(t)!==e.kind)return!1;if(e.mine&&e.userId){const a=Ie((s=(r=t.created_by)!=null?r:t.creator)!=null?s:t.createdBy);if(!Et((n=(o=t.assignees)!=null?o:t.assigned_user_id)!=null?n:t.assignedUserId).includes(e.userId)&&a!==e.userId)return!1}return!0},is=(e,t)=>{if(!t)return e;const r=t.pageSize&&t.pageSize>0?t.pageSize:0;return r?e.slice(0,r):e},rt=Object.freeze([]);class ls{constructor(){P(this,"tasks",new Map);P(this,"indexes",new Map);P(this,"meta",new Map);P(this,"snapshots",new Map);P(this,"defaultMeta",new Map);P(this,"listeners",new Set);P(this,"version",0)}storeMeta(t,r){const s=Object.freeze({...r});this.meta.set(t,s),this.defaultMeta.delete(t)}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}notify(){this.version+=1,this.listeners.forEach(t=>t())}clear(){!this.tasks.size&&!this.indexes.size&&!this.meta.size||(this.tasks.clear(),this.indexes.clear(),this.meta.clear(),this.snapshots.clear(),this.defaultMeta.clear(),this.notify())}rebuildSnapshot(t){const r=this.indexes.get(t);if(!r||!r.length){this.snapshots.set(t,rt);return}const s=r.map(o=>this.tasks.get(o)).filter(o=>!!o).map(o=>Object.freeze({...o}));this.snapshots.set(t,Object.freeze(s))}rebuildSnapshots(t){for(const r of t)this.rebuildSnapshot(r)}setIndex(t,r,s){var w,k,v;const o=[];r.forEach(b=>{const x=tt(b);if(!x)return;const A=this.tasks.get(x.id),j=A?{...A,...x}:x;this.tasks.set(x.id,j),o.push(x.id)}),this.indexes.set(t,o);const n=(w=s==null?void 0:s.pageSize)!=null?w:o.length?o.length:Qe,a=s==null?void 0:s.kind,l=s==null?void 0:s.mine,i=s==null?void 0:s.userId,c=(k=s==null?void 0:s.sort)!=null?k:"desc",p=(v=s==null?void 0:s.total)!=null?v:o.length;this.storeMeta(t,{key:t,pageSize:n,kind:a,mine:l,userId:i,sort:c,total:p,updatedAt:Date.now()}),this.rebuildSnapshot(t),this.notify()}upsert(t){const r=tt(t);if(!r)return;const s=this.tasks.get(r.id),o=s?{...s,...r}:r;this.tasks.set(r.id,o);let n=!s;const a=new Set;this.indexes.forEach((l,i)=>{var k,v;const c=this.meta.get(i),p=l.includes(r.id),w=as(c,o);if(w&&!p){const b=(c==null?void 0:c.sort)==="asc"?[...l,r.id]:[r.id,...l],x=is(b,c);this.indexes.set(i,x),c&&this.storeMeta(i,{...c,total:((k=c.total)!=null?k:l.length)+1,updatedAt:Date.now()}),n=!0}else if(w&&p)this.indexes.set(i,l);else if(!w&&p){const b=l.filter(x=>x!==r.id);this.indexes.set(i,b),c&&this.storeMeta(i,{...c,total:Math.max(0,((v=c.total)!=null?v:b.length+1)-1),updatedAt:Date.now()}),n=!0}(p||w)&&a.add(i)}),this.rebuildSnapshots(a),n?this.notify():this.notify()}remove(t){var a;const r=(a=ge(t))!=null?a:typeof t=="string"?t.trim():null;if(!r)return;let o=this.tasks.delete(r);const n=new Set;this.indexes.forEach((l,i)=>{var w;if(!l.includes(r))return;const c=l.filter(k=>k!==r);this.indexes.set(i,c);const p=this.meta.get(i);p&&this.storeMeta(i,{...p,total:Math.max(0,((w=p.total)!=null?w:c.length+1)-1),updatedAt:Date.now()}),o=!0,n.add(i)}),this.rebuildSnapshots(n),o&&this.notify()}getIndexSnapshot(t){var r;return(r=this.snapshots.get(t))!=null?r:rt}getIndexMetaSnapshot(t){const r=this.meta.get(t);if(!r){const s=this.defaultMeta.get(t);if(s)return s;const o=Object.freeze({key:t,pageSize:Qe,total:0,sort:"desc",updatedAt:0});return this.defaultMeta.set(t,o),o}return this.defaultMeta.delete(t),r}}const V=new ls,$s=e=>m.useSyncExternalStore(t=>V.subscribe(t),()=>V.getIndexSnapshot(e),()=>V.getIndexSnapshot(e)),Vs=e=>m.useSyncExternalStore(t=>V.subscribe(t),()=>V.getIndexMetaSnapshot(e),()=>V.getIndexMetaSnapshot(e)),_t=m.createContext({user:null,loading:!0}),zt=m.createContext({logout:async()=>{},setUser:()=>{}});function cs({children:e}){const[t,r]=m.useState(null),s=l=>{V.clear(),r(l),l&&Ze()},[o,n]=m.useState(!0);m.useEffect(()=>{const l=async()=>{try{const p=await(await fetch("/api/v1/csrf",{credentials:"include"})).json().catch(()=>({}));p.csrfToken&&wt(p.csrfToken)}catch(c){}};l();const i=()=>{document.hidden||l()};return window.addEventListener("focus",l),document.addEventListener("visibilitychange",i),Zr({noRedirect:!0}).then(c=>{s(c),n(!1)}).catch(()=>{s(null),n(!1)}),()=>{window.removeEventListener("focus",l),document.removeEventListener("visibilitychange",i)}},[]);const a=async()=>{var l;await Qr(),r(null);try{if(Ze(),V.clear(),localStorage.clear(),sessionStorage.clear(),"caches"in window){const i=await caches.keys();await Promise.all(i.map(c=>caches.delete(c)))}document.cookie.split(";").forEach(i=>{const c=i.indexOf("="),p=(c>-1?i.slice(0,c):i).trim();p&&(document.cookie="".concat(p,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"))})}catch(i){}(l=window.Telegram)!=null&&l.WebApp&&window.Telegram.WebApp.close()};return g.jsx(_t.Provider,{value:{user:t,loading:o},children:g.jsx(zt.Provider,{value:{setUser:s,logout:a},children:e})})}function ds(){const e=m.useContext(_t),t=m.useContext(zt);return m.useEffect(()=>{const r=setInterval(()=>{es().catch(()=>t.logout())},24e4);return()=>clearInterval(r)},[t]),{...e,...t}}const us=m.createContext(void 0),fs=({children:e})=>{const[t,r]=m.useState([]),s=m.useRef(null),o=m.useCallback((a,l="success")=>{const i=Date.now();r(c=>[...c,{id:i,message:a,type:l}]),s.current=setTimeout(()=>r(c=>c.filter(p=>p.id!==i)),3e3)},[]),n=m.useCallback(a=>{r(l=>l.filter(i=>i.id!==a))},[]);return m.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),m.useEffect(()=>{const a=l=>{const{message:i,type:c}=l.detail;o(i,c)};return window.addEventListener("toast",a),()=>window.removeEventListener("toast",a)},[o]),g.jsx(us.Provider,{value:{toasts:t,addToast:o,removeToast:n},children:e})},ms=m.lazy(()=>he(()=>import("./AuthenticatedApp-DKm_nmXg.js").then(e=>e.n),__vite__mapDeps([0,1,2,3]))),ps=m.lazy(()=>he(()=>import("./CodeLogin-BDyjYYX3.js"),__vite__mapDeps([4,1,2,3,5]))),gs=m.lazy(()=>he(()=>import("./AttachmentMenu-4mhBf5dw.js"),__vite__mapDeps([6,1,2,3,5]))),hs=m.lazy(()=>he(()=>import("./Toasts-CCoYErBB.js"),__vite__mapDeps([7,1,2,3,5])));function bs(){const{t:e}=it();return g.jsx("main",{className:"flex min-h-screen items-center justify-center bg-slate-50 p-4",children:g.jsx("div",{className:"w-full max-w-sm space-y-4 rounded border bg-white p-6 shadow",children:g.jsx(m.Suspense,{fallback:g.jsx("div",{children:e("loading")}),children:g.jsx(ps,{})})})})}function ys(){return g.jsx(m.Suspense,{fallback:null,children:g.jsx(hs,{})})}function xs({initialAlert:e,onCloseAlert:t}){const r=Gt(),s=Ft(),{user:o,loading:n}=ds(),{t:a}=it(),l=r.pathname.startsWith("/login"),i=r.pathname.startsWith("/menu");m.useEffect(()=>{n||i||(!o&&!l?s("/login",{replace:!0}):o&&l&&s("/tasks",{replace:!0}))},[i,l,n,s,o]);const c=g.jsx(Fr,{open:!!e,message:e||"",onClose:t,closeText:st.t("close")});return i?g.jsxs(g.Fragment,{children:[g.jsx(Ge,{fallback:g.jsx("div",{children:"ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°"}),children:g.jsx(m.Suspense,{fallback:g.jsx("div",{children:a("loading")}),children:g.jsx(gs,{})})}),c]}):n?g.jsxs(g.Fragment,{children:[g.jsx("main",{className:"flex min-h-screen items-center justify-center bg-slate-50 p-4",children:g.jsx("div",{children:a("loading")})}),c]}):o?g.jsx(m.Suspense,{fallback:g.jsx("div",{children:a("loading")}),children:g.jsx(ms,{alert:c})}):g.jsxs(g.Fragment,{children:[g.jsx(Ge,{fallback:g.jsx("div",{children:"ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°"}),children:g.jsx(bs,{})}),c]})}function ws(){const[e,t]=Lt.useState(typeof window<"u"&&window.__ALERT_MESSAGE__||null);return g.jsx(Ht,{i18n:st,children:g.jsx(fs,{children:g.jsx(cs,{children:g.jsxs(Dt,{children:[g.jsx(ys,{}),g.jsx(xs,{initialAlert:e,onCloseAlert:()=>t(null)})]})})})})}const Us=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"}));export{ws as A,xt as B,Rs as C,Ns as D,Gs as E,Dr as F,Fr as G,Ms as H,As as I,Ne as J,Xe as K,Je as L,Gr as M,Us as N,_s as P,Ye as T,ds as a,it as b,Jt as c,Pr as d,lt as e,Or as f,ge as g,I as h,$s as i,Vs as j,Bs as k,Es as l,Is as m,Cs as n,js as o,us as p,zs as q,Os as r,$r as s,V as t,Ts as u,Ls as v,Ds as w,Fs as x,re as y,Ps as z};
//# sourceMappingURL=App-DjzPhsfn.js.map
