{"version":3,"file":"taskColumns-cbsood-k.js","sources":["../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/QuestionMarkCircleIcon.js","../../../web/src/columns/taskDeadline.ts","../../../web/src/columns/taskColumns.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction QuestionMarkCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(QuestionMarkCircleIcon);\nexport default ForwardRef;","// Назначение файла: функции расчёта и форматирования сроков задач.\n// Основные модули: стандартный объект Date.\n\nexport type DeadlineLevel = 'safe' | 'warn' | 'danger';\n\ntype PendingIssue = 'missing-start' | 'invalid-range';\n\ntype InvalidReason = 'missing' | 'invalid';\n\nexport interface DeadlineStateBase {\n  dueDate: Date | null;\n  startDate: Date | null;\n  remainingMs: number | null;\n}\n\nexport interface CountdownState extends DeadlineStateBase {\n  kind: 'countdown';\n  remainingMs: number;\n  ratio: number;\n  level: DeadlineLevel;\n}\n\nexport interface PendingState extends DeadlineStateBase {\n  kind: 'pending';\n  remainingMs: number;\n  issue: PendingIssue;\n}\n\nexport interface OverdueState extends DeadlineStateBase {\n  kind: 'overdue';\n  remainingMs: number;\n}\n\nexport interface InvalidState extends DeadlineStateBase {\n  kind: 'invalid';\n  reason: InvalidReason;\n}\n\nexport type DeadlineState =\n  | CountdownState\n  | PendingState\n  | OverdueState\n  | InvalidState;\n\nconst DAY = 24 * 60 * 60 * 1000;\nconst HOUR = 60 * 60 * 1000;\nconst MINUTE = 60 * 1000;\n\nconst parseDateValue = (value?: string) => {\n  if (!value) {\n    return null;\n  }\n  const date = new Date(value);\n  return Number.isNaN(date.getTime()) ? null : date;\n};\n\nconst clampRatio = (value: number) => {\n  if (Number.isNaN(value)) {\n    return 0;\n  }\n  if (value > 1) {\n    return 1;\n  }\n  if (value < 0) {\n    return 0;\n  }\n  return value;\n};\n\nexport const getDeadlineState = (\n  startValue?: string,\n  dueValue?: string,\n  referenceDate = new Date(),\n): DeadlineState => {\n  const dueDate = parseDateValue(dueValue);\n  const startDate = parseDateValue(startValue);\n\n  if (!dueDate) {\n    return {\n      kind: 'invalid',\n      reason: dueValue ? 'invalid' : 'missing',\n      dueDate: null,\n      startDate,\n      remainingMs: null,\n    };\n  }\n\n  const remainingMs = dueDate.getTime() - referenceDate.getTime();\n\n  if (remainingMs < 0) {\n    return {\n      kind: 'overdue',\n      dueDate,\n      startDate,\n      remainingMs,\n    };\n  }\n\n  if (!startDate) {\n    return {\n      kind: 'pending',\n      issue: 'missing-start',\n      dueDate,\n      startDate: null,\n      remainingMs,\n    };\n  }\n\n  if (startDate.getTime() >= dueDate.getTime()) {\n    return {\n      kind: 'pending',\n      issue: 'invalid-range',\n      dueDate,\n      startDate,\n      remainingMs,\n    };\n  }\n\n  const totalMs = dueDate.getTime() - startDate.getTime();\n  const ratio = clampRatio(remainingMs / totalMs);\n  let level: DeadlineLevel;\n  if (ratio > 0.6) {\n    level = 'safe';\n  } else if (ratio >= 0.2) {\n    level = 'warn';\n  } else {\n    level = 'danger';\n  }\n\n  return {\n    kind: 'countdown',\n    ratio,\n    level,\n    dueDate,\n    startDate,\n    remainingMs,\n  };\n};\n\nexport const formatDurationShort = (value: number) => {\n  if (!Number.isFinite(value) || value === 0) {\n    return '0м';\n  }\n  const abs = Math.abs(value);\n  const parts: string[] = [];\n  let rest = abs;\n\n  const pushPart = (divisor: number, suffix: string) => {\n    const amount = Math.floor(rest / divisor);\n    if (amount > 0) {\n      parts.push(`${amount}${suffix}`);\n      rest -= amount * divisor;\n    }\n  };\n\n  pushPart(DAY, 'д');\n  if (parts.length < 2) {\n    pushPart(HOUR, 'ч');\n  }\n  if (parts.length < 2) {\n    pushPart(MINUTE, 'м');\n  }\n\n  if (parts.length === 0) {\n    return '<1м';\n  }\n\n  return parts.slice(0, 2).join(' ');\n};\n","// Конфигурация колонок задач для React Table\n// Модули: React, @tanstack/react-table, heroicons, EmployeeLink\nimport React from 'react';\nimport type { ColumnDef } from '@tanstack/react-table';\nimport { PROJECT_TIMEZONE, PROJECT_TIMEZONE_LABEL, type Task } from 'shared';\nimport { QuestionMarkCircleIcon } from '@heroicons/react/20/solid';\nimport EmployeeLink from '../components/EmployeeLink';\nimport { getDeadlineState, type DeadlineState } from './taskDeadline';\nimport type { User as AppUser } from '../types/user';\n\n// Оформление бейджей статусов и приоритетов на дизайн-токенах\nconst badgeBaseClass =\n  'inline-flex min-w-0 items-center gap-0.5 whitespace-nowrap rounded-full px-1.5 py-0.5 text-center text-[0.66rem] font-semibold uppercase tracking-wide shadow-xs';\nconst badgeTextClass = 'text-black dark:text-white';\n\nconst buildBadgeClass = (tones: string, extraClass = '') =>\n  [badgeBaseClass, 'transition-colors', badgeTextClass, extraClass, tones]\n    .filter(Boolean)\n    .join(' ');\n\nconst focusableBadgeClass =\n  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background';\n\nconst pillBadgeBaseClass =\n  'inline-flex max-w-full min-w-0 items-center gap-0.5 whitespace-nowrap rounded-full px-1.5 py-0.5 text-left text-[0.7rem] font-semibold leading-tight tracking-normal shadow-xs sm:px-1.5 sm:text-[0.76rem]';\n\nconst dateBadgeClass = `${pillBadgeBaseClass} font-mono normal-case ${badgeTextClass} ring-1 ring-slate-500/30 bg-slate-500/10 dark:bg-slate-500/20 dark:ring-slate-400/30`;\n\nconst dateBadgeTimeClass =\n  'text-[0.65rem] font-semibold text-slate-500 dark:text-slate-200';\n\nconst numberBadgeClass = `${pillBadgeBaseClass} justify-center font-mono uppercase tracking-[0.18em] text-[0.68rem] ${badgeTextClass} ring-1 ring-slate-500/30 bg-slate-500/10 dark:bg-slate-500/20 dark:ring-slate-400/30`;\n\nconst titleBadgeClass = `${pillBadgeBaseClass} justify-start normal-case ${badgeTextClass} ring-1 ring-indigo-500/40 bg-indigo-500/15 dark:bg-indigo-400/25 dark:ring-indigo-300/45`;\n\nexport const creatorBadgeClass = `${pillBadgeBaseClass} w-full max-w-full justify-start normal-case ${badgeTextClass} ring-1 ring-blue-500/40 bg-blue-500/15 dark:bg-blue-400/20 dark:ring-blue-300/45`;\n\nconst assigneeBadgeClass = `${pillBadgeBaseClass} normal-case ${badgeTextClass} ring-1 ring-violet-500/35 bg-violet-500/20 dark:bg-violet-400/30 dark:ring-violet-300/45`;\n\nexport const fallbackBadgeClass = buildBadgeClass(\n  'bg-muted/60 ring-1 ring-muted-foreground/30 dark:bg-slate-700/60 dark:ring-slate-500/35',\n);\n\nconst locationBadgeClass = `${pillBadgeBaseClass} normal-case ${badgeTextClass} ring-1 ring-emerald-500/30 bg-emerald-500/15 dark:bg-emerald-400/20 dark:ring-emerald-300/30`;\n\nconst locationLinkBadgeClass = `${locationBadgeClass} ${focusableBadgeClass} no-underline underline-offset-4 hover:underline`;\n\nconst statusBadgeClassMap: Record<Task['status'], string> = {\n  Новая: buildBadgeClass(\n    'bg-sky-500/20 ring-1 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45',\n  ),\n  'В работе': buildBadgeClass(\n    'bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45',\n  ),\n  Выполнена: buildBadgeClass(\n    'bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45',\n  ),\n  Отменена: buildBadgeClass(\n    'bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45',\n  ),\n};\n\nconst urgentPriorityBadgeClass = buildBadgeClass(\n  'bg-accent/80 ring-1 ring-destructive/40 dark:bg-accent/60 dark:ring-destructive/40',\n);\n\nconst highPriorityBadgeClass = buildBadgeClass(\n  'bg-accent/75 ring-1 ring-primary/40 dark:bg-accent/55 dark:ring-primary/40',\n);\n\nconst normalPriorityBadgeClass = buildBadgeClass(\n  'bg-accent/65 ring-1 ring-primary/30 dark:bg-accent/45 dark:ring-primary/30',\n);\n\nconst lowPriorityBadgeClass = buildBadgeClass(\n  'bg-accent/50 ring-1 ring-primary/20 dark:bg-accent/35 dark:ring-primary/20',\n);\n\nconst priorityBadgeClassMap: Record<string, string> = {\n  срочно: buildBadgeClass(\n    'bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45',\n  ),\n  'в течение дня': buildBadgeClass(\n    'bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45',\n  ),\n  'до выполнения': buildBadgeClass(\n    'bg-slate-500/25 ring-1 ring-slate-500/45 dark:bg-slate-400/25 dark:ring-slate-300/45',\n    'normal-case',\n  ),\n};\n\nconst hasOwn = <T extends Record<PropertyKey, unknown>>(\n  obj: T,\n  key: PropertyKey,\n): key is keyof T => Object.prototype.hasOwnProperty.call(obj, key);\n\nexport const getStatusBadgeClass = (value: string) => {\n  if (hasOwn(statusBadgeClassMap, value)) {\n    return statusBadgeClassMap[value];\n  }\n  return null;\n};\n\nexport const getPriorityBadgeClass = (value: string) => {\n  const normalized = value.trim().toLowerCase();\n  if (!normalized) {\n    return null;\n  }\n  if (hasOwn(priorityBadgeClassMap, normalized)) {\n    return priorityBadgeClassMap[normalized];\n  }\n  if (/сроч|urgent/.test(normalized)) {\n    return urgentPriorityBadgeClass;\n  }\n  if (/высок|повыш|high/.test(normalized)) {\n    return highPriorityBadgeClass;\n  }\n  if (/низк|бесср|без\\s+срок|до\\s+выполн|low|minor/.test(normalized)) {\n    return lowPriorityBadgeClass;\n  }\n  if (/обыч|дня|сутк|norm|stand/.test(normalized)) {\n    return normalPriorityBadgeClass;\n  }\n  return null;\n};\n\nconst normalizePriorityLabel = (value: string) => {\n  const trimmed = value.trim();\n  if (!trimmed) {\n    return trimmed;\n  }\n  if (/^бессроч/i.test(trimmed)) {\n    return 'До выполнения';\n  }\n  return trimmed;\n};\n\nconst completionNoteTextClass =\n  'text-[11px] font-medium text-slate-600 dark:text-slate-300';\n\nconst typeBadgeClassMap: Record<string, string> = {\n  доставить: buildBadgeClass(\n    'bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45',\n  ),\n  купить: buildBadgeClass(\n    'bg-violet-500/20 ring-1 ring-violet-500/40 dark:bg-violet-400/25 dark:ring-violet-300/45',\n  ),\n  выполнить: buildBadgeClass(\n    'bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45',\n  ),\n  построить: buildBadgeClass(\n    'bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45',\n  ),\n  починить: buildBadgeClass(\n    'bg-orange-500/20 ring-1 ring-orange-500/40 dark:bg-orange-400/25 dark:ring-orange-300/45',\n  ),\n};\n\nexport const getTypeBadgeClass = (value: string) => {\n  const normalized = value.trim().toLowerCase();\n  if (!normalized) {\n    return null;\n  }\n  if (hasOwn(typeBadgeClassMap, normalized)) {\n    return typeBadgeClassMap[normalized];\n  }\n  if (/стро|монтаж/.test(normalized)) {\n    return typeBadgeClassMap['построить'];\n  }\n  if (/ремонт|чин/.test(normalized)) {\n    return typeBadgeClassMap['починить'];\n  }\n  if (/закуп|покуп|приобр/.test(normalized)) {\n    return typeBadgeClassMap['купить'];\n  }\n  if (/достав|курьер/.test(normalized)) {\n    return typeBadgeClassMap['доставить'];\n  }\n  if (/исполн|выполн/.test(normalized)) {\n    return typeBadgeClassMap['выполнить'];\n  }\n  return null;\n};\n\nconst parseDistance = (value: unknown) => {\n  if (typeof value === 'number') {\n    return Number.isFinite(value) ? value : null;\n  }\n  if (typeof value === 'string') {\n    const trimmed = value.trim();\n    if (!trimmed) {\n      return null;\n    }\n    const normalized = Number(trimmed.replace(/\\s+/g, '').replace(/,/g, '.'));\n    return Number.isFinite(normalized) ? normalized : null;\n  }\n  return null;\n};\n\nconst formatDistanceLabel = (value: unknown) => {\n  const numeric = parseDistance(value);\n  if (numeric !== null) {\n    return numeric.toLocaleString('ru-RU', {\n      maximumFractionDigits: 2,\n      minimumFractionDigits: 2,\n    });\n  }\n  if (typeof value === 'string') {\n    return value.trim();\n  }\n  if (typeof value === 'number') {\n    return value.toString();\n  }\n  return '';\n};\n\nconst shortDistanceBadgeClass = buildBadgeClass(\n  'bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45',\n);\n\nconst mediumDistanceBadgeClass = buildBadgeClass(\n  'bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45',\n);\n\nconst longDistanceBadgeClass = buildBadgeClass(\n  'bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45',\n);\n\nconst extraLongDistanceBadgeClass = buildBadgeClass(\n  'bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45',\n);\n\nconst getDistanceBadgeClass = (value: unknown) => {\n  const numeric = parseDistance(value);\n  if (numeric === null) {\n    return null;\n  }\n  if (numeric < 5) {\n    return shortDistanceBadgeClass;\n  }\n  if (numeric < 25) {\n    return mediumDistanceBadgeClass;\n  }\n  if (numeric < 100) {\n    return longDistanceBadgeClass;\n  }\n  return extraLongDistanceBadgeClass;\n};\n\nconst fullDateTimeFmt = new Intl.DateTimeFormat('ru-RU', {\n  day: '2-digit',\n  month: '2-digit',\n  year: 'numeric',\n  hour: '2-digit',\n  minute: '2-digit',\n  hour12: false,\n  timeZone: PROJECT_TIMEZONE,\n});\n\nconst datePartFmt = new Intl.DateTimeFormat('ru-RU', {\n  day: '2-digit',\n  month: '2-digit',\n  year: 'numeric',\n  timeZone: PROJECT_TIMEZONE,\n});\n\nconst timePartFmt = new Intl.DateTimeFormat('ru-RU', {\n  hour: '2-digit',\n  minute: '2-digit',\n  hour12: false,\n  timeZone: PROJECT_TIMEZONE,\n});\n\nconst parseDateInput = (value?: string | null) => {\n  if (!value) {\n    return null;\n  }\n  const date = new Date(value);\n  return Number.isNaN(date.getTime()) ? null : date;\n};\n\nconst formatDate = (value?: string) => {\n  const date = parseDateInput(value);\n  if (!date) return null;\n  const full = `${fullDateTimeFmt.format(date).replace(', ', ' ')} ${PROJECT_TIMEZONE_LABEL}`;\n  const datePart = datePartFmt.format(date);\n  const timePart = timePartFmt.format(date);\n  return {\n    full,\n    date: datePart || full,\n    time: timePart,\n  };\n};\n\nconst renderDateCell = (value?: string) => {\n  const formatted = formatDate(value);\n  if (!formatted) return '';\n  return (\n    <span className={dateBadgeClass} title={formatted.full}>\n      <time\n        dateTime={value}\n        className=\"flex w-full items-baseline gap-1 truncate tabular-nums\"\n      >\n        <span className=\"truncate\">{formatted.date}</span>\n        {formatted.time ? (\n          <span className={dateBadgeTimeClass}>{formatted.time}</span>\n        ) : null}\n      </time>\n    </span>\n  );\n};\n\n// Делает текст компактнее, добавляя многоточие по необходимости\nconst compactText = (value: string, maxLength: number) => {\n  const trimmed = value.trim();\n  if (!trimmed || maxLength < 2 || trimmed.length <= maxLength) {\n    return trimmed;\n  }\n  const shortened = trimmed.slice(0, maxLength - 1).trimEnd();\n  return `${shortened}…`;\n};\n\nexport type EntityKind = 'task' | 'request';\n\nexport interface TaskRow extends Task {\n  id: string;\n  created_by?: number | string | null;\n  createdBy?: number | string | null;\n  creator?: number | string | null;\n  assigned_user_id?: number | null;\n  assignees?: number[];\n  start_date?: string | null;\n  due_date?: string | null;\n  start_location?: string | null;\n  start_location_link?: string | null;\n  end_location?: string | null;\n  end_location_link?: string | null;\n}\n\ntype EntityCase = 'nominative' | 'accusative' | 'genitive';\n\nconst ENTITY_WORDS: Record<EntityKind, Record<EntityCase, string>> = {\n  task: {\n    nominative: 'Задача',\n    accusative: 'Задачу',\n    genitive: 'задачи',\n  },\n  request: {\n    nominative: 'Заявка',\n    accusative: 'Заявку',\n    genitive: 'заявки',\n  },\n};\n\nconst entityWord = (\n  kind: EntityKind,\n  form: EntityCase,\n  options?: { lower?: boolean },\n) => {\n  const base = ENTITY_WORDS[kind][form];\n  return options?.lower ? base.toLowerCase() : base;\n};\n\nconst resolveEntityKind = (\n  value: unknown,\n  fallback: EntityKind,\n): EntityKind => {\n  if (typeof value === 'string' && value.trim().toLowerCase() === 'request') {\n    return 'request';\n  }\n  return fallback;\n};\n\nconst escapeRegExp = (value: string) =>\n  value.replace(/[.*+?^${}()|[\\\\]\\\\]/g, '\\\\$&');\n\ntype CountdownLikeState = Extract<\n  DeadlineState,\n  { kind: 'countdown' | 'pending' | 'overdue' }\n>;\n\nconst countdownBadgeBaseClass = `${pillBadgeBaseClass} min-w-0 justify-start normal-case ${badgeTextClass} tabular-nums ring-1`;\n\nconst countdownToneClassMap: Record<\n  'safe' | 'warn' | 'danger' | 'overdue' | 'pending',\n  string\n> = {\n  safe: `${countdownBadgeBaseClass} bg-emerald-500/25 ring-emerald-500/45 dark:bg-emerald-400/25 dark:ring-emerald-300/45`,\n  warn: `${countdownBadgeBaseClass} bg-amber-500/25 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45`,\n  danger: `${countdownBadgeBaseClass} bg-orange-500/25 ring-orange-500/45 dark:bg-orange-400/25 dark:ring-orange-300/45`,\n  overdue: `${countdownBadgeBaseClass} bg-rose-500/30 ring-rose-500/55 dark:bg-rose-400/30 dark:ring-rose-300/50`,\n  pending: `${countdownBadgeBaseClass} bg-sky-500/20 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45`,\n};\n\nconst neutralCountdownBadgeClass = `${countdownBadgeBaseClass} bg-slate-500/15 ring-slate-500/35 dark:bg-slate-500/25 dark:ring-slate-400/35`;\n\nconst formatCountdownParts = (remainingMs: number) => {\n  const absValue = Math.abs(remainingMs);\n  const totalMinutes = Math.max(0, Math.floor(absValue / (60 * 1000)));\n  const days = Math.floor(totalMinutes / (24 * 60));\n  const hours = Math.floor((totalMinutes % (24 * 60)) / 60);\n  const minutes = totalMinutes % 60;\n  const pad = (value: number) => value.toString().padStart(2, '0');\n  return {\n    days,\n    hours,\n    minutes,\n    paddedDays: pad(days),\n    paddedHours: pad(hours),\n    paddedMinutes: pad(minutes),\n  };\n};\n\nconst getRussianPlural = (value: number, forms: [string, string, string]) => {\n  const absValue = Math.abs(value) % 100;\n  if (absValue >= 11 && absValue <= 14) {\n    return forms[2];\n  }\n  const lastDigit = absValue % 10;\n  if (lastDigit === 1) {\n    return forms[0];\n  }\n  if (lastDigit >= 2 && lastDigit <= 4) {\n    return forms[1];\n  }\n  return forms[2];\n};\n\nconst getCountdownToneKey = (\n  state: CountdownLikeState,\n): keyof typeof countdownToneClassMap => {\n  if (state.kind === 'overdue') {\n    return 'overdue';\n  }\n  if (state.kind === 'pending') {\n    return 'pending';\n  }\n  return state.level;\n};\n\nconst buildCountdownLabel = (state: CountdownLikeState) => {\n  const { days, hours, minutes } = formatCountdownParts(state.remainingMs);\n  if (state.kind === 'overdue') {\n    return `Просрочено на ${days} ${getRussianPlural(days, [\n      'день',\n      'дня',\n      'дней',\n    ])} ${hours} ${getRussianPlural(hours, [\n      'час',\n      'часа',\n      'часов',\n    ])} ${minutes} ${getRussianPlural(minutes, ['минута', 'минуты', 'минут'])}`;\n  }\n  if (state.kind === 'pending') {\n    return `Начало через ${days} ${getRussianPlural(days, [\n      'день',\n      'дня',\n      'дней',\n    ])} ${hours} ${getRussianPlural(hours, [\n      'час',\n      'часа',\n      'часов',\n    ])} ${minutes} ${getRussianPlural(minutes, ['минута', 'минуты', 'минут'])}`;\n  }\n  return `До дедлайна ${days} ${getRussianPlural(days, [\n    'день',\n    'дня',\n    'дней',\n  ])} ${hours} ${getRussianPlural(hours, [\n    'час',\n    'часа',\n    'часов',\n  ])} ${minutes} ${getRussianPlural(minutes, ['минута', 'минуты', 'минут'])}`;\n};\n\nconst buildCountdownTitle = (\n  state: CountdownLikeState,\n  formatted: ReturnType<typeof formatDate>,\n  rawDue?: string,\n) => {\n  if (!formatted) {\n    return rawDue ? rawDue.trim() : undefined;\n  }\n  if (state.kind === 'overdue') {\n    return `Просрочено с ${formatted.full}`;\n  }\n  if (state.kind === 'pending') {\n    const note =\n      state.issue === 'missing-start'\n        ? 'Не указана дата начала'\n        : 'Диапазон дат некорректен';\n    return `${note}. Срок ${formatted.full}`;\n  }\n  return `Выполнить до ${formatted.full}`;\n};\n\nconst COMPLETION_THRESHOLD_MS = 60_000;\n\nconst formatCompletionOffset = (diffMs: number) => {\n  const absValue = Math.abs(diffMs);\n  if (absValue < COMPLETION_THRESHOLD_MS) {\n    return 'менее минуты';\n  }\n  const { days, hours, minutes } = formatCountdownParts(absValue);\n  const parts: string[] = [];\n  if (days) {\n    parts.push(`${days} ${getRussianPlural(days, ['день', 'дня', 'дней'])}`);\n  }\n  if (hours) {\n    parts.push(`${hours} ${getRussianPlural(hours, ['час', 'часа', 'часов'])}`);\n  }\n  if (minutes && parts.length < 2) {\n    parts.push(\n      `${minutes} ${getRussianPlural(minutes, ['минута', 'минуты', 'минут'])}`,\n    );\n  }\n  if (!parts.length) {\n    return 'менее минуты';\n  }\n  return parts.slice(0, 2).join(' ');\n};\n\nconst buildCompletionNote = (\n  status: Task['status'] | undefined,\n  dueValue?: string,\n  completedValue?: string | null,\n) => {\n  if (status !== 'Выполнена') {\n    return null;\n  }\n  const dueDate = parseDateInput(dueValue);\n  const completedDate = parseDateInput(completedValue);\n  if (!dueDate || !completedDate) {\n    return null;\n  }\n  const diff = completedDate.getTime() - dueDate.getTime();\n  if (!Number.isFinite(diff)) {\n    return null;\n  }\n  if (Math.abs(diff) < COMPLETION_THRESHOLD_MS) {\n    return 'Выполнена точно в срок';\n  }\n  const offset = formatCompletionOffset(diff);\n  if (!offset) {\n    return 'Выполнена точно в срок';\n  }\n  return diff < 0\n    ? `Выполнена досрочно на ${offset}`\n    : `Выполнена с опозданием на ${offset}`;\n};\n\n// Fast Refresh обрабатывает вспомогательные компоненты как часть конфигурации таблицы\n\nexport function DeadlineCountdownBadge({\n  startValue,\n  dueValue,\n  rawDue,\n  status,\n  completedAt,\n}: {\n  startValue?: string;\n  dueValue?: string;\n  rawDue?: string;\n  status?: Task['status'];\n  completedAt?: string | null;\n}) {\n  const completedDate = React.useMemo(\n    () => parseDateInput(completedAt),\n    [completedAt],\n  );\n  const isCompleted = status === 'Выполнена';\n\n  const [now, setNow] = React.useState<Date>(() => completedDate ?? new Date());\n\n  React.useEffect(() => {\n    if (isCompleted) {\n      if (completedDate) {\n        setNow(completedDate);\n      }\n      return;\n    }\n    const update = () => setNow(new Date());\n    update();\n    const timer = window.setInterval(update, 60_000);\n    return () => window.clearInterval(timer);\n  }, [isCompleted, completedDate, startValue, dueValue]);\n\n  const referenceDate = completedDate ?? now;\n\n  const state = React.useMemo(\n    () => getDeadlineState(startValue, dueValue, referenceDate),\n    [startValue, dueValue, referenceDate],\n  );\n\n  const formatted = React.useMemo(() => formatDate(dueValue), [dueValue]);\n  const completionNote = React.useMemo(\n    () => buildCompletionNote(status, dueValue, completedAt),\n    [status, dueValue, completedAt],\n  );\n\n  if (state.kind === 'invalid') {\n    return (\n      <span\n        className={`${neutralCountdownBadgeClass} inline-flex items-center gap-1.5`}\n        title={\n          state.reason === 'missing'\n            ? 'Срок не назначен'\n            : 'Срок указан некорректно'\n        }\n      >\n        <QuestionMarkCircleIcon\n          className=\"size-4 flex-shrink-0 text-black dark:text-white\"\n          aria-hidden\n        />\n        <span className=\"truncate\">Нет данных</span>\n      </span>\n    );\n  }\n\n  const toneKey = getCountdownToneKey(state);\n  const className = countdownToneClassMap[toneKey];\n  const parts = formatCountdownParts(state.remainingMs);\n  const label = buildCountdownLabel(state);\n  const title = completionNote\n    ? `${completionNote}. ${buildCountdownTitle(state, formatted, rawDue)}`\n    : buildCountdownTitle(state, formatted, rawDue);\n  return (\n    <span\n      className={`${className} inline-flex items-center gap-1.5`}\n      title={title}\n    >\n      <span className=\"sr-only\">{label}</span>\n      <span\n        aria-hidden\n        className=\"flex items-end gap-1 text-black dark:text-white\"\n      >\n        <span className=\"flex flex-col items-center leading-tight\">\n          <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n            {parts.paddedDays}\n          </span>\n          <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n            {getRussianPlural(parts.days, ['день', 'дня', 'дней'])}\n          </span>\n        </span>\n        <span className=\"flex flex-col items-center leading-tight\">\n          <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n            {parts.paddedHours}\n          </span>\n          <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n            {getRussianPlural(parts.hours, ['час', 'часа', 'часов'])}\n          </span>\n        </span>\n        <span className=\"flex flex-col items-center leading-tight\">\n          <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n            {parts.paddedMinutes}\n          </span>\n          <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n            {getRussianPlural(parts.minutes, ['минута', 'минуты', 'минут'])}\n          </span>\n        </span>\n      </span>\n      {completionNote ? (\n        <span className=\"sr-only\">{completionNote}</span>\n      ) : null}\n    </span>\n  );\n}\n\nconst durationToneClassMap: Record<\n  'completed' | 'cancelled' | 'active' | 'planned' | 'idle',\n  string\n> = {\n  completed: `${countdownBadgeBaseClass} bg-emerald-500/25 ring-emerald-500/45 dark:bg-emerald-400/25 dark:ring-emerald-300/45`,\n  cancelled: `${countdownBadgeBaseClass} bg-rose-500/30 ring-rose-500/55 dark:bg-rose-400/30 dark:ring-rose-300/50`,\n  active: `${countdownBadgeBaseClass} bg-amber-500/25 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45`,\n  planned: `${countdownBadgeBaseClass} bg-sky-500/20 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45`,\n  idle: neutralCountdownBadgeClass,\n};\n\nconst formatDurationPhrase = (\n  parts: ReturnType<typeof formatCountdownParts>,\n  variant: 'completed' | 'running',\n  entityKind: EntityKind,\n) => {\n  const { days, hours, minutes } = parts;\n  if (!days && !hours && !minutes) {\n    return variant === 'completed'\n      ? `${entityWord(entityKind, 'nominative')} завершена менее чем за минуту`\n      : 'Затрачено менее минуты';\n  }\n  const dayLabel = `${days} ${getRussianPlural(days, ['день', 'дня', 'дней'])}`;\n  const hourLabel = `${hours} ${getRussianPlural(hours, [\n    'час',\n    'часа',\n    'часов',\n  ])}`;\n  const minuteLabel = `${minutes} ${getRussianPlural(minutes, [\n    'минута',\n    'минуты',\n    'минут',\n  ])}`;\n  const phrase = `${dayLabel} ${hourLabel} ${minuteLabel}`;\n  return variant === 'completed'\n    ? `${entityWord(entityKind, 'nominative')} завершена за ${phrase}`\n    : `Затрачено ${phrase}`;\n};\n\nconst buildDurationTitle = (\n  variant: 'completed' | 'running' | 'idle',\n  startValue?: string,\n  endValue?: string,\n  parts?: ReturnType<typeof formatCountdownParts>,\n  entityKind: EntityKind = 'task',\n) => {\n  const titleParts: string[] = [];\n  const startFormatted = startValue ? formatDate(startValue) : null;\n  const endFormatted = endValue ? formatDate(endValue) : null;\n  if (startFormatted) {\n    titleParts.push(`Начало: ${startFormatted.full}`);\n  }\n  if (endFormatted) {\n    titleParts.push(\n      variant === 'completed'\n        ? `Завершено: ${endFormatted.full}`\n        : `Текущее время: ${endFormatted.full}`,\n    );\n  }\n  if (parts) {\n    const phrase = formatDurationPhrase(\n      parts,\n      variant === 'completed' ? 'completed' : 'running',\n      entityKind,\n    );\n    const normalized =\n      variant === 'completed'\n        ? phrase.replace(\n            new RegExp(\n              `^${escapeRegExp(\n                `${entityWord(entityKind, 'nominative')} завершена за `,\n              )}`,\n            ),\n            'Продолжительность: ',\n          )\n        : phrase.replace(/^Затрачено\\s/, 'Продолжительность: ');\n    titleParts.push(\n      variant === 'idle' ? `Продолжительность: ${phrase}` : normalized,\n    );\n  }\n  if (!titleParts.length) {\n    return variant === 'idle'\n      ? 'Продолжительность появится после указания даты начала'\n      : 'Нет данных о продолжительности';\n  }\n  return titleParts.join('\\n');\n};\n\ntype ActualTimeCellProps = {\n  progressStartValue?: string | null;\n  plannedStartValue?: string | null;\n  completedValue?: string | null;\n  status?: Task['status'];\n  entityKind: EntityKind;\n};\n\nfunction ActualTimeCell({\n  progressStartValue,\n  plannedStartValue,\n  completedValue,\n  status,\n  entityKind,\n}: ActualTimeCellProps) {\n  const plannedStartDate = React.useMemo(\n    () => parseDateInput(plannedStartValue),\n    [plannedStartValue],\n  );\n  const progressStartDate = React.useMemo(\n    () => parseDateInput(progressStartValue),\n    [progressStartValue],\n  );\n  const completedDate = React.useMemo(\n    () => parseDateInput(completedValue),\n    [completedValue],\n  );\n  const isFinished = status === 'Выполнена' || status === 'Отменена';\n  const isCancelled = status === 'Отменена';\n  const isNotStarted = status === 'Новая';\n\n  const timerStartDate = React.useMemo(() => {\n    if (isNotStarted) {\n      return null;\n    }\n    return progressStartDate ?? plannedStartDate ?? null;\n  }, [isNotStarted, progressStartDate, plannedStartDate]);\n\n  const [referenceDate, setReferenceDate] = React.useState<Date>(() => {\n    if (isFinished && completedDate) {\n      return completedDate;\n    }\n    return new Date();\n  });\n\n  React.useEffect(() => {\n    if (isFinished) {\n      if (completedDate) {\n        setReferenceDate(completedDate);\n      }\n      return undefined;\n    }\n    if (!timerStartDate) {\n      return undefined;\n    }\n    const update = () => setReferenceDate(new Date());\n    update();\n    const timer = window.setInterval(update, 60_000);\n    return () => window.clearInterval(timer);\n  }, [isFinished, completedDate, timerStartDate]);\n\n  const effectiveEndDate =\n    isFinished && completedDate ? completedDate : referenceDate;\n  const durationMs = timerStartDate\n    ? Math.max(0, effectiveEndDate.getTime() - timerStartDate.getTime())\n    : null;\n  const durationParts = React.useMemo(() => {\n    if (isNotStarted) {\n      return formatCountdownParts(0);\n    }\n    return durationMs !== null ? formatCountdownParts(durationMs) : null;\n  }, [durationMs, isNotStarted]);\n\n  const endIso = React.useMemo(\n    () => effectiveEndDate.toISOString(),\n    [effectiveEndDate],\n  );\n\n  const variant: 'completed' | 'running' | 'idle' =\n    isNotStarted || !timerStartDate\n      ? 'idle'\n      : isFinished\n        ? 'completed'\n        : 'running';\n\n  const toneKey: keyof typeof durationToneClassMap =\n    isNotStarted || !timerStartDate\n      ? 'idle'\n      : isFinished\n        ? isCancelled\n          ? 'cancelled'\n          : 'completed'\n        : status === 'В работе'\n          ? 'active'\n          : 'planned';\n\n  const label = isNotStarted\n    ? `${entityWord(entityKind, 'nominative')} ещё не начата`\n    : durationParts\n      ? formatDurationPhrase(\n          durationParts,\n          variant === 'completed' ? 'completed' : 'running',\n          entityKind,\n        )\n      : 'Продолжительность появится после начала';\n\n  const startValueForTooltip =\n    progressStartValue ?? plannedStartValue ?? undefined;\n\n  const durationBadgeTitle = isNotStarted\n    ? `Таймер запустится после перевода ${entityWord(entityKind, 'genitive', { lower: true })} в статус «В работе»`\n    : buildDurationTitle(\n        variant,\n        startValueForTooltip,\n        variant === 'completed' ? (completedValue ?? undefined) : endIso,\n        durationParts ?? undefined,\n        entityKind,\n      );\n\n  const renderStopBadge = () => {\n    if (isFinished && completedDate && completedValue) {\n      return renderDateCell(completedValue);\n    }\n    if (isFinished) {\n      return (\n        <span className={dateBadgeClass} title=\"Нет отметки о завершении\">\n          <span className=\"truncate\">Нет данных</span>\n        </span>\n      );\n    }\n    if (!timerStartDate) {\n      const placeholder =\n        status === 'Новая'\n          ? 'Не начата'\n          : status === 'В работе'\n            ? 'В работе'\n            : 'В ожидании';\n      const title =\n        status === 'Новая'\n          ? `${entityWord(entityKind, 'nominative')} ещё не начата`\n          : status === 'В работе'\n            ? 'Таймер запустится после фиксации начала'\n            : 'Дата начала отсутствует';\n      return (\n        <span className={dateBadgeClass} title={title}>\n          <span className=\"truncate\">{placeholder}</span>\n        </span>\n      );\n    }\n    const placeholder = status === 'В работе' ? 'В работе' : 'В ожидании';\n    return (\n      <span\n        className={dateBadgeClass}\n        title={`${entityWord(entityKind, 'nominative')} ещё не завершена`}\n      >\n        <span className=\"truncate\">{placeholder}</span>\n      </span>\n    );\n  };\n\n  return (\n    <div className=\"flex flex-col items-start gap-1\">\n      {renderStopBadge()}\n      <span\n        className={`${durationToneClassMap[toneKey]} inline-flex items-center gap-1.5`}\n        title={durationBadgeTitle}\n      >\n        <span className=\"sr-only\">{label}</span>\n        {durationParts ? (\n          <span\n            aria-hidden\n            className=\"flex items-end gap-1 text-black dark:text-white\"\n          >\n            <span className=\"flex flex-col items-center leading-tight\">\n              <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n                {durationParts.paddedDays}\n              </span>\n              <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n                {getRussianPlural(durationParts.days, ['день', 'дня', 'дней'])}\n              </span>\n            </span>\n            <span className=\"flex flex-col items-center leading-tight\">\n              <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n                {durationParts.paddedHours}\n              </span>\n              <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n                {getRussianPlural(durationParts.hours, [\n                  'час',\n                  'часа',\n                  'часов',\n                ])}\n              </span>\n            </span>\n            <span className=\"flex flex-col items-center leading-tight\">\n              <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n                {durationParts.paddedMinutes}\n              </span>\n              <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n                {getRussianPlural(durationParts.minutes, [\n                  'минута',\n                  'минуты',\n                  'минут',\n                ])}\n              </span>\n            </span>\n          </span>\n        ) : (\n          <span className=\"text-xs font-medium text-black dark:text-white\">\n            {label}\n          </span>\n        )}\n      </span>\n    </div>\n  );\n}\n\nexport default function taskColumns(\n  users: Record<number, AppUser>,\n  defaultKind: EntityKind = 'task',\n): ColumnDef<TaskRow>[] {\n  const cols: ColumnDef<TaskRow>[] = [\n    {\n      header: 'Номер',\n      id: 'number',\n      accessorFn: (row) => {\n        const rowKind = resolveEntityKind(row.kind, defaultKind);\n        const rawValue =\n          rowKind === 'request'\n            ? row.request_id || row.task_number || row._id\n            : row.task_number || row.request_id || row._id;\n        if (typeof rawValue === 'string') {\n          return rawValue;\n        }\n        if (rawValue === undefined || rawValue === null) {\n          return '';\n        }\n        return String(rawValue);\n      },\n      meta: {\n        width: 'clamp(4.25rem, 8vw, 6.25rem)',\n        minWidth: '4rem',\n        maxWidth: '6.5rem',\n        cellClassName:\n          'whitespace-nowrap text-center font-mono tabular-nums sm:text-left sm:pl-1.5',\n        headerClassName: 'whitespace-nowrap text-center sm:text-left',\n      },\n      cell: (p) => {\n        const row = p.row.original as TaskRow;\n        const rowKind = resolveEntityKind(row.kind, defaultKind);\n        const value = (p.getValue<string>() || '').trim();\n        const fallback =\n          rowKind === 'request'\n            ? ((row.request_id as string | undefined) ??\n              (row.task_number as string | undefined) ??\n              String(row._id))\n            : ((row.task_number as string | undefined) ??\n              (row.request_id as string | undefined) ??\n              String(row._id));\n        const display = value || fallback || '';\n        const numericMatch = display.match(/\\d+/);\n        const shortValue = numericMatch ? numericMatch[0] : display;\n        return (\n          <span\n            className={`${numberBadgeClass} justify-center`}\n            title={display}\n          >\n            <span className=\"truncate\">{shortValue}</span>\n          </span>\n        );\n      },\n    },\n    {\n      header: `${entityWord(defaultKind, 'accusative')} создал`,\n      accessorKey: 'createdAt',\n      meta: {\n        width: 'clamp(9rem, 18vw, 14rem)',\n        minWidth: '8.5rem',\n        maxWidth: '16rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: ({ row }) => {\n        const rawCreator =\n          (row.original.created_by as unknown) ??\n          (row.original.createdBy as unknown) ??\n          (row.original.creator as unknown);\n        const creatorId =\n          typeof rawCreator === 'number'\n            ? rawCreator\n            : typeof rawCreator === 'string' && rawCreator.trim()\n              ? Number(rawCreator)\n              : NaN;\n        if (!Number.isFinite(creatorId)) {\n          return <span className=\"text-muted-foreground\">—</span>;\n        }\n        const id = creatorId as number;\n        const user = users[id];\n        const label =\n          (user?.name as string | undefined) ||\n          (user?.telegram_username as string | undefined) ||\n          (user?.username as string | undefined) ||\n          String(id);\n        const title = label.trim() || String(id);\n        return (\n          <EmployeeLink\n            employeeId={id}\n            stopPropagation\n            title={title}\n            className={`${creatorBadgeClass} ${focusableBadgeClass} no-underline`}\n          >\n            <span className=\"truncate\">{compactText(label, 32)}</span>\n          </EmployeeLink>\n        );\n      },\n    },\n    {\n      header: 'Название',\n      accessorKey: 'title',\n      meta: {\n        width: 'clamp(8rem, 18vw, 18rem)',\n        minWidth: '7rem',\n        maxWidth: '18rem',\n        cellClassName: 'align-top',\n      },\n      cell: (p) => {\n        const v = p.getValue<string>() || '';\n        const compact = compactText(v, 72);\n        const row = p.row.original as TaskRow;\n        const completionNote = buildCompletionNote(\n          row.status,\n          row.due_date ?? undefined,\n          row.completed_at ?? undefined,\n        );\n        return (\n          <div className=\"flex flex-col items-start gap-1\">\n            <span title={v} className={`${titleBadgeClass} whitespace-normal`}>\n              <span\n                className=\"block max-w-full break-words text-left leading-snug\"\n                style={{\n                  display: '-webkit-box',\n                  WebkitLineClamp: 2,\n                  WebkitBoxOrient: 'vertical',\n                  overflow: 'hidden',\n                }}\n              >\n                {compact}\n              </span>\n            </span>\n            {completionNote ? (\n              <span className={completionNoteTextClass}>{completionNote}</span>\n            ) : null}\n          </div>\n        );\n      },\n    },\n    {\n      header: 'Исполнители',\n      accessorKey: 'assignees',\n      meta: {\n        width: 'clamp(7rem, 20vw, 13rem)',\n        minWidth: '6rem',\n        maxWidth: '13rem',\n      },\n      cell: ({ row }) => {\n        const ids = Array.isArray(row.original.assignees)\n          ? row.original.assignees\n          : typeof row.original.assigned_user_id === 'number'\n            ? [row.original.assigned_user_id]\n            : [];\n        if (!ids.length) {\n          return <span className=\"text-muted-foreground\">—</span>;\n        }\n        const labels = ids.map((id) => ({\n          id,\n          label:\n            users[id]?.name ||\n            users[id]?.telegram_username ||\n            users[id]?.username ||\n            String(id),\n        }));\n        const tooltip = labels.map((item) => item.label).join(', ');\n        return (\n          <div\n            className=\"flex w-full flex-wrap items-start gap-1 leading-tight\"\n            title={tooltip}\n          >\n            {labels.map(({ id, label }) => (\n              <EmployeeLink\n                key={id}\n                employeeId={id}\n                stopPropagation\n                className={`${assigneeBadgeClass} ${focusableBadgeClass} no-underline`}\n              >\n                <span className=\"truncate\">{compactText(label, 18)}</span>\n              </EmployeeLink>\n            ))}\n          </div>\n        );\n      },\n    },\n    {\n      header: 'Статус',\n      accessorKey: 'status',\n      meta: {\n        width: 'clamp(4.5rem, 8vw, 6.5rem)',\n        minWidth: '4.5rem',\n        maxWidth: '6.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: (p) => {\n        const value = p.getValue<string>() || '';\n        if (!value) {\n          return '';\n        }\n        const badgeClass = getStatusBadgeClass(value);\n        if (!badgeClass) {\n          return <span className={fallbackBadgeClass}>{value}</span>;\n        }\n        return <span className={badgeClass}>{value}</span>;\n      },\n    },\n    {\n      header: 'Приоритет',\n      accessorKey: 'priority',\n      meta: {\n        width: 'clamp(8.5rem, 15vw, 12.5rem)',\n        minWidth: '8.5rem',\n        maxWidth: '12.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: (p) => {\n        const value = p.getValue<string>() || '';\n        if (!value.trim()) {\n          return '';\n        }\n        const display = normalizePriorityLabel(value);\n        const badgeClass = getPriorityBadgeClass(value);\n        const className = badgeClass || `${fallbackBadgeClass} normal-case`;\n        return (\n          <span className={className} title={display}>\n            {display}\n          </span>\n        );\n      },\n    },\n    {\n      header: 'Начало',\n      accessorKey: 'start_date',\n      meta: {\n        width: 'clamp(6.75rem, 11vw, 8.75rem)',\n        minWidth: '6.5rem',\n        maxWidth: '9rem',\n        cellClassName: 'whitespace-nowrap text-xs sm:text-sm',\n      },\n      cell: (p) => renderDateCell(p.getValue<string>()),\n    },\n    {\n      header: 'Дедлайн',\n      accessorKey: 'due_date',\n      meta: {\n        width: 'clamp(10.5rem, 20vw, 15.5rem)',\n        minWidth: '10rem',\n        maxWidth: '16.5rem',\n        cellClassName: 'whitespace-nowrap text-xs sm:text-sm',\n      },\n      cell: (p) => {\n        const dueValue = p.getValue<string>();\n        const row = p.row.original;\n        const countdown = (\n          <DeadlineCountdownBadge\n            startValue={row.start_date ?? undefined}\n            dueValue={row.due_date ?? undefined}\n            rawDue={dueValue}\n            status={row.status}\n            completedAt={row.completed_at ?? undefined}\n          />\n        );\n        if (!dueValue) {\n          return countdown;\n        }\n        const dateCell = renderDateCell(dueValue);\n        if (typeof dateCell === 'string') {\n          if (!dateCell) {\n            return countdown;\n          }\n          return (\n            <div className=\"flex flex-col items-start gap-1\">\n              {dateCell ? <span>{dateCell}</span> : null}\n              {countdown}\n            </div>\n          );\n        }\n        return (\n          <div className=\"flex flex-col items-start gap-1\">\n            {dateCell}\n            {countdown}\n          </div>\n        );\n      },\n    },\n    {\n      header: 'Время выполнения',\n      accessorKey: 'completed_at',\n      meta: {\n        width: 'clamp(10.5rem, 20vw, 15.5rem)',\n        minWidth: '10rem',\n        maxWidth: '16.5rem',\n        cellClassName: 'whitespace-nowrap text-xs sm:text-sm',\n      },\n      cell: (p) => {\n        const row = p.row.original;\n        const rowKind = resolveEntityKind(row.kind, defaultKind);\n        return (\n          <ActualTimeCell\n            progressStartValue={row.in_progress_at ?? undefined}\n            plannedStartValue={row.start_date ?? undefined}\n            completedValue={p.getValue<string | null>() ?? undefined}\n            status={row.status}\n            entityKind={rowKind}\n          />\n        );\n      },\n    },\n    {\n      header: 'Тип',\n      accessorKey: 'task_type',\n      meta: {\n        width: 'clamp(4.5rem, 8vw, 6.5rem)',\n        minWidth: '4.5rem',\n        maxWidth: '6.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: (p) => {\n        const value = p.getValue<string>() || '';\n        const trimmed = value.trim();\n        if (!trimmed) {\n          return '';\n        }\n        const badgeClass = getTypeBadgeClass(trimmed);\n        const className = badgeClass || `${fallbackBadgeClass} normal-case`;\n        return (\n          <span className={className} title={trimmed}>\n            {trimmed}\n          </span>\n        );\n      },\n    },\n    {\n      header: 'Старт',\n      accessorKey: 'start_location',\n      meta: {\n        width: 'clamp(5.5rem, 14vw, 9.5rem)',\n        minWidth: '5rem',\n        maxWidth: '9.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: ({ row }) => {\n        const name = row.original.start_location ?? '';\n        const trimmed = name.trim();\n        const firstToken =\n          trimmed.split(/[\\s,;]+/).filter(Boolean)[0] || trimmed;\n        const compact = compactText(firstToken, 24);\n        const link = row.original.start_location_link ?? undefined;\n        return link ? (\n          <a\n            href={link}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className={locationLinkBadgeClass}\n            title={name}\n          >\n            <span className=\"truncate\">{compact}</span>\n          </a>\n        ) : (\n          <span title={name} className={locationBadgeClass}>\n            <span className=\"truncate\">{compact}</span>\n          </span>\n        );\n      },\n    },\n    {\n      header: 'Финиш',\n      accessorKey: 'end_location',\n      meta: {\n        width: 'clamp(5.5rem, 14vw, 9.5rem)',\n        minWidth: '5rem',\n        maxWidth: '9.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: ({ row }) => {\n        const name = row.original.end_location ?? '';\n        const trimmed = name.trim();\n        const firstToken =\n          trimmed.split(/[\\s,;]+/).filter(Boolean)[0] || trimmed;\n        const compact = compactText(firstToken, 24);\n        const link = row.original.end_location_link ?? undefined;\n        return link ? (\n          <a\n            href={link}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className={locationLinkBadgeClass}\n            title={name}\n          >\n            <span className=\"truncate\">{compact}</span>\n          </a>\n        ) : (\n          <span title={name} className={locationBadgeClass}>\n            <span className=\"truncate\">{compact}</span>\n          </span>\n        );\n      },\n    },\n    {\n      header: 'Км',\n      accessorKey: 'route_distance_km',\n      meta: {\n        width: 'clamp(3.25rem, 6vw, 4.75rem)',\n        minWidth: '3rem',\n        maxWidth: '4.75rem',\n        cellClassName: 'whitespace-nowrap text-center sm:text-left',\n        headerClassName: 'text-center sm:text-left',\n      },\n      cell: (p) => {\n        const raw = p.getValue<number | string | null>();\n        if (\n          raw === null ||\n          raw === undefined ||\n          (typeof raw === 'string' && !raw.trim())\n        ) {\n          return '';\n        }\n        const display = formatDistanceLabel(raw);\n        if (!display) {\n          return '';\n        }\n        const badgeClass = getDistanceBadgeClass(raw);\n        const className = badgeClass || fallbackBadgeClass;\n        return (\n          <span className={className} title={`${display} км`}>\n            {display}\n          </span>\n        );\n      },\n    },\n  ];\n  return cols;\n}\n"],"names":["QuestionMarkCircleIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","parseDateValue","value","date","clampRatio","getDeadlineState","startValue","dueValue","referenceDate","dueDate","startDate","remainingMs","totalMs","ratio","level","badgeBaseClass","badgeTextClass","buildBadgeClass","tones","extraClass","focusableBadgeClass","pillBadgeBaseClass","dateBadgeClass","dateBadgeTimeClass","numberBadgeClass","titleBadgeClass","creatorBadgeClass","assigneeBadgeClass","fallbackBadgeClass","locationBadgeClass","locationLinkBadgeClass","statusBadgeClassMap","urgentPriorityBadgeClass","highPriorityBadgeClass","normalPriorityBadgeClass","lowPriorityBadgeClass","priorityBadgeClassMap","hasOwn","obj","key","getStatusBadgeClass","getPriorityBadgeClass","normalized","normalizePriorityLabel","trimmed","completionNoteTextClass","typeBadgeClassMap","getTypeBadgeClass","parseDistance","formatDistanceLabel","numeric","shortDistanceBadgeClass","mediumDistanceBadgeClass","longDistanceBadgeClass","extraLongDistanceBadgeClass","getDistanceBadgeClass","fullDateTimeFmt","PROJECT_TIMEZONE","datePartFmt","timePartFmt","parseDateInput","formatDate","full","PROJECT_TIMEZONE_LABEL","datePart","timePart","renderDateCell","formatted","jsxs","jsx","compactText","maxLength","shortened","ENTITY_WORDS","entityWord","kind","form","options","base","resolveEntityKind","fallback","escapeRegExp","countdownBadgeBaseClass","countdownToneClassMap","neutralCountdownBadgeClass","formatCountdownParts","absValue","totalMinutes","days","hours","minutes","pad","getRussianPlural","forms","lastDigit","getCountdownToneKey","state","buildCountdownLabel","buildCountdownTitle","rawDue","note","COMPLETION_THRESHOLD_MS","formatCompletionOffset","diffMs","parts","buildCompletionNote","status","completedValue","completedDate","diff","offset","DeadlineCountdownBadge","completedAt","React","isCompleted","now","setNow","update","timer","completionNote","toneKey","className","label","durationToneClassMap","formatDurationPhrase","variant","entityKind","dayLabel","hourLabel","minuteLabel","phrase","buildDurationTitle","endValue","titleParts","startFormatted","endFormatted","ActualTimeCell","progressStartValue","plannedStartValue","plannedStartDate","progressStartDate","isFinished","isCancelled","isNotStarted","timerStartDate","_a","setReferenceDate","effectiveEndDate","durationMs","durationParts","endIso","startValueForTooltip","durationBadgeTitle","renderStopBadge","placeholder","taskColumns","users","defaultKind","row","rawValue","p","rowKind","_b","_d","_c","display","numericMatch","shortValue","rawCreator","creatorId","id","user","EmployeeLink","v","compact","ids","labels","tooltip","item","badgeClass","countdown","dateCell","name","firstToken","link","raw"],"mappings":"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","x_google_ignoreList":[0]}