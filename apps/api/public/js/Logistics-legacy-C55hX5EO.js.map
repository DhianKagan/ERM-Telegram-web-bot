{"version":3,"file":"Logistics-legacy-C55hX5EO.js","sources":["../../../web/src/components/SkeletonCard.tsx","../../../web/src/pages/Logistics.tsx","../../../web/src/services/routePlans.ts"],"sourcesContent":["// Карточка-заглушка во время загрузки\nexport default function SkeletonCard() {\n  return (\n    <div className=\"border-stroke bg-gray animate-pulse rounded border p-4\">\n      <div className=\"bg-gray-2 mb-4 h-6 w-1/3 rounded\" />\n      <div className=\"bg-gray-2 mb-2 h-4 w-full rounded\" />\n      <div className=\"bg-gray-2 mb-2 h-4 w-full rounded\" />\n      <div className=\"bg-gray-2 h-4 w-2/3 rounded\" />\n    </div>\n  );\n}\n","// Страница отображения маршрутных планов в виде карточек\n// Основные модули: React, listRoutePlans, компоненты интерфейса\nimport React from 'react';\nimport type {\n  RoutePlan,\n  RoutePlanRoute,\n  RoutePlanStatus,\n  RoutePlanTaskRef,\n} from 'shared';\n\nimport { Button } from '@/components/ui/button';\nimport Breadcrumbs from '../components/Breadcrumbs';\nimport SkeletonCard from '../components/SkeletonCard';\nimport { useAuth } from '../context/useAuth';\nimport { useToast } from '../context/useToast';\nimport { listRoutePlans } from '../services/routePlans';\nimport { ACCESS_ADMIN, ACCESS_MANAGER, hasAccess } from '../utils/access';\n\nconst STATUS_LABELS: Record<RoutePlanStatus | 'cancelled', string> = {\n  draft: 'Новый',\n  approved: 'В работе',\n  completed: 'Выполнен',\n  cancelled: 'Отменен',\n};\n\nconst STATUS_STYLES: Record<RoutePlanStatus | 'cancelled', string> = {\n  draft: 'bg-blue-100 text-blue-800',\n  approved: 'bg-amber-100 text-amber-800',\n  completed: 'bg-emerald-100 text-emerald-800',\n  cancelled: 'bg-rose-100 text-rose-800',\n};\n\nconst STATUS_OPTIONS: Array<{\n  value: RoutePlanStatus | 'cancelled' | 'all';\n  label: string;\n}> = [\n  { value: 'all', label: 'Все' },\n  { value: 'draft', label: STATUS_LABELS.draft },\n  { value: 'approved', label: STATUS_LABELS.approved },\n  { value: 'completed', label: STATUS_LABELS.completed },\n  { value: 'cancelled', label: STATUS_LABELS.cancelled },\n];\n\nconst formatDate = (value?: string): string => {\n  if (!value) return '—';\n  try {\n    return new Intl.DateTimeFormat('ru-RU', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    }).format(new Date(value));\n  } catch {\n    return value;\n  }\n};\n\nconst collectTasks = (routes: RoutePlanRoute[]): string[] => {\n  const names = new Set<string>();\n  routes.forEach((route) => {\n    route.tasks.forEach((task: RoutePlanTaskRef) => {\n      const label = task.title?.trim() || task.taskId;\n      if (label) {\n        names.add(label);\n      }\n    });\n  });\n  return Array.from(names);\n};\n\nconst collectDrivers = (routes: RoutePlanRoute[]): string => {\n  const drivers = new Set<string>();\n  routes.forEach((route) => {\n    if (route.driverName) {\n      drivers.add(route.driverName);\n    }\n  });\n  return drivers.size > 0 ? Array.from(drivers).join(', ') : 'Не назначен';\n};\n\nconst collectVehicles = (routes: RoutePlanRoute[]): string => {\n  const vehicles = new Set<string>();\n  routes.forEach((route) => {\n    if (route.vehicleName) {\n      vehicles.add(route.vehicleName);\n    }\n  });\n  return vehicles.size > 0 ? Array.from(vehicles).join(', ') : 'Не назначено';\n};\n\nconst normalizeStatus = (\n  status?: RoutePlanStatus | string,\n): RoutePlanStatus | 'cancelled' => {\n  if (status === 'draft' || status === 'approved' || status === 'completed') {\n    return status;\n  }\n  return 'cancelled';\n};\n\nexport default function Logistics() {\n  const [plans, setPlans] = React.useState<RoutePlan[]>([]);\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState<string | null>(null);\n  const [statusFilter, setStatusFilter] = React.useState<\n    RoutePlanStatus | 'cancelled' | 'all'\n  >('all');\n  const { addToast } = useToast();\n  const { user } = useAuth();\n\n  const loadPlans = React.useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await listRoutePlans();\n      setPlans(Array.isArray(data.items) ? data.items : []);\n    } catch (err) {\n      const message =\n        err instanceof Error\n          ? err.message\n          : 'Не удалось загрузить маршрутные планы';\n      setError(message);\n      addToast(message);\n    } finally {\n      setLoading(false);\n    }\n  }, [addToast]);\n\n  React.useEffect(() => {\n    void loadPlans();\n  }, [loadPlans]);\n\n  const filteredPlans = React.useMemo(() => {\n    if (statusFilter === 'all') return plans;\n    return plans.filter(\n      (plan) => normalizeStatus(plan.status) === statusFilter,\n    );\n  }, [plans, statusFilter]);\n\n  const access = typeof user?.access === 'number' ? user.access : 0;\n  const isAdmin = user?.role === 'admin' || hasAccess(access, ACCESS_ADMIN);\n  const isManager = hasAccess(access, ACCESS_MANAGER);\n\n  return (\n    <div className=\"space-y-6\">\n      <Breadcrumbs\n        items={[\n          { label: 'Логистика', href: '/logistics' },\n          { label: 'Маршрутные планы' },\n        ]}\n      />\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <div className=\"space-y-1\">\n          <h2 className=\"text-xl font-semibold\">Маршрутные планы</h2>\n          <p className=\"max-w-2xl text-sm text-muted-foreground\">\n            Просматривайте планы доставки без привязки к карте: задачи,\n            назначенные водители и транспорт, статус и детали плана.\n          </p>\n        </div>\n        <div className=\"flex flex-col gap-2 sm:flex-row sm:items-end\">\n          <label\n            className=\"flex flex-col text-sm font-medium text-foreground\"\n            htmlFor=\"logistics-status-filter\"\n          >\n            Статус\n            <select\n              id=\"logistics-status-filter\"\n              className=\"mt-1 min-w-[160px] rounded-md border border-border bg-background px-3 py-2 text-sm focus:border-accentPrimary focus:outline-none\"\n              value={statusFilter}\n              onChange={(event) =>\n                setStatusFilter(\n                  event.target.value as RoutePlanStatus | 'cancelled' | 'all',\n                )\n              }\n            >\n              {STATUS_OPTIONS.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n          </label>\n          <Button\n            onClick={() => void loadPlans()}\n            disabled={loading}\n            variant=\"outline\"\n            className=\"sm:self-end\"\n          >\n            {loading ? 'Обновляем…' : 'Обновить'}\n          </Button>\n        </div>\n      </div>\n      {!isAdmin && !isManager && (\n        <p className=\"text-sm text-muted-foreground\">\n          Управление маршрутными планами доступно администраторам и менеджерам.\n          Остальные пользователи могут просматривать список.\n        </p>\n      )}\n      {error && (\n        <div\n          className=\"rounded-lg border border-destructive bg-destructive/10 p-3 text-sm text-destructive\"\n          role=\"alert\"\n        >\n          {error}\n        </div>\n      )}\n      {loading ? (\n        <SkeletonCard />\n      ) : filteredPlans.length === 0 ? (\n        <div className=\"rounded-lg border border-border bg-card p-4 text-sm text-muted-foreground\">\n          Маршрутные планы отсутствуют.\n        </div>\n      ) : (\n        <div className=\"grid gap-3 md:grid-cols-2 xl:grid-cols-3\">\n          {filteredPlans.map((plan) => {\n            const status = normalizeStatus(plan.status);\n            const tasks = collectTasks(plan.routes ?? []);\n            const drivers = collectDrivers(plan.routes ?? []);\n            const vehicles = collectVehicles(plan.routes ?? []);\n            const statusLabel = STATUS_LABELS[status];\n            const statusColor = STATUS_STYLES[status];\n\n            return (\n              <article\n                key={plan.id}\n                className=\"flex h-full flex-col gap-3 rounded-lg border border-border bg-card p-4 shadow-sm\"\n              >\n                <div className=\"flex items-start justify-between gap-3\">\n                  <div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Создан: {formatDate(plan.createdAt)}\n                    </p>\n                    <h3 className=\"text-lg font-semibold leading-6\">\n                      {plan.title}\n                    </h3>\n                  </div>\n                  <span\n                    className={`rounded-full px-3 py-1 text-xs font-semibold leading-5 ${statusColor}`}\n                    aria-label={`Статус: ${statusLabel}`}\n                  >\n                    {statusLabel}\n                  </span>\n                </div>\n                {plan.notes && (\n                  <p\n                    className=\"text-sm text-foreground\"\n                    aria-label=\"Описание плана\"\n                  >\n                    {plan.notes}\n                  </p>\n                )}\n                <div className=\"space-y-1 text-sm text-foreground\">\n                  <p>\n                    <span className=\"font-medium\">Водитель: </span>\n                    {drivers}\n                  </p>\n                  <p>\n                    <span className=\"font-medium\">Авто: </span>\n                    {vehicles}\n                  </p>\n                </div>\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm font-medium text-foreground\">Задачи</p>\n                  {tasks.length > 0 ? (\n                    <ul className=\"list-disc space-y-1 pl-5 text-sm text-foreground\">\n                      {tasks.map((task) => (\n                        <li key={task}>{task}</li>\n                      ))}\n                    </ul>\n                  ) : (\n                    <p className=\"text-sm text-muted-foreground\">\n                      Задачи не назначены\n                    </p>\n                  )}\n                </div>\n              </article>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n","// Назначение: HTTP-запросы для работы с маршрутными планами.\n// Основные модули: authFetch, shared\n\nimport type { RoutePlan, RoutePlanRoute, RoutePlanStatus } from 'shared';\nimport authFetch from '../utils/authFetch';\n\nconst normalizeRoutes = (routes?: RoutePlanRoute[]): RoutePlanRoute[] => {\n  if (!Array.isArray(routes)) return [];\n  return routes.map((route) => ({\n    ...route,\n    tasks: Array.isArray(route.tasks) ? route.tasks : [],\n    stops: Array.isArray(route.stops) ? route.stops : [],\n    metrics: route.metrics ?? {},\n  }));\n};\n\nconst normalizePlan = (plan: RoutePlan): RoutePlan => {\n  const routes = normalizeRoutes(plan.routes);\n  const tasks = Array.isArray(plan.tasks) ? plan.tasks : [];\n  const totalStops = routes.reduce(\n    (sum, route) => sum + (route.stops?.length ?? 0),\n    0,\n  );\n  const totalTasks =\n    plan.metrics?.totalTasks ??\n    (tasks.length ||\n      routes.reduce((sum, route) => sum + route.tasks.length, 0));\n\n  return {\n    ...plan,\n    routes,\n    tasks,\n    metrics: plan.metrics ?? {\n      totalDistanceKm: null,\n      totalRoutes: routes.length,\n      totalTasks,\n      totalStops,\n      totalEtaMinutes: null,\n      totalLoad: null,\n    },\n  };\n};\n\ntype RoutePlanListResponsePayload = {\n  items?: RoutePlan[];\n  total?: number;\n};\n\nexport interface RoutePlanUpdatePayload {\n  title?: string;\n  notes?: string | null;\n  routes?: Array<{\n    id?: string;\n    order?: number;\n    vehicleId?: string | null;\n    vehicleName?: string | null;\n    driverId?: number | string | null;\n    driverName?: string | null;\n    notes?: string | null;\n    tasks: string[];\n  }>;\n}\n\nexport interface RoutePlanListResponse {\n  items: RoutePlan[];\n  total: number;\n}\n\nexport async function listRoutePlans(\n  status?: RoutePlanStatus,\n  limit?: number,\n  page?: number,\n): Promise<RoutePlanListResponse> {\n  const params = new URLSearchParams();\n  if (status) params.set('status', status);\n  if (limit) params.set('limit', String(limit));\n  if (page) params.set('page', String(page));\n  const response = await authFetch(`/api/v1/route-plans?${params.toString()}`);\n  if (!response.ok) {\n    throw new Error('Не удалось загрузить маршрутные планы');\n  }\n  const payload = (await response.json()) as RoutePlanListResponsePayload;\n  const items = Array.isArray(payload.items)\n    ? payload.items.map(normalizePlan)\n    : [];\n  const total =\n    typeof payload.total === 'number' ? payload.total : items.length;\n  return { items, total };\n}\n\nexport async function getRoutePlan(id: string): Promise<RoutePlan> {\n  const response = await authFetch(`/api/v1/route-plans/${id}`);\n  if (!response.ok) {\n    throw new Error('Маршрутный план не найден');\n  }\n  const data = await response.json();\n  return normalizePlan(data.plan as RoutePlan);\n}\n\nexport async function updateRoutePlan(\n  id: string,\n  payload: RoutePlanUpdatePayload,\n): Promise<RoutePlan> {\n  const response = await authFetch(`/api/v1/route-plans/${id}`, {\n    method: 'PATCH',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(payload),\n  });\n  if (!response.ok) {\n    throw new Error('Не удалось сохранить маршрутный план');\n  }\n  const data = await response.json();\n  return normalizePlan(data.plan as RoutePlan);\n}\n\nexport async function changeRoutePlanStatus(\n  id: string,\n  status: RoutePlanStatus,\n): Promise<RoutePlan> {\n  const response = await authFetch(`/api/v1/route-plans/${id}/status`, {\n    method: 'PATCH',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ status }),\n  });\n  if (!response.ok) {\n    throw new Error('Не удалось обновить статус маршрутного плана');\n  }\n  const data = await response.json();\n  return normalizePlan(data.plan as RoutePlan);\n}\n\nexport async function deleteRoutePlan(id: string): Promise<void> {\n  const response = await authFetch(`/api/v1/route-plans/${id}`, {\n    method: 'DELETE',\n  });\n  if (!response.ok) {\n    throw new Error('Не удалось удалить маршрутный план');\n  }\n}\n\nexport default {\n  listRoutePlans,\n  getRoutePlan,\n  updateRoutePlan,\n  changeRoutePlanStatus,\n  deleteRoutePlan,\n};\n"],"names":["SkeletonCard","jsxs","className","children","jsx","_React$useState2","_slicedToArray","React","useState","plans","setPlans","_React$useState4","loading","setLoading","_React$useState6","error","setError","_React$useState8","statusFilter","setStatusFilter","addToast","useToast","user","useAuth","loadPlans","useCallback","_asyncToGenerator","_regenerator","m","_callee","data","message","_t","w","_context","p","n","listRoutePlans","v","Array","isArray","items","Error","f","a","useEffect","filteredPlans","useMemo","filter","plan","normalizeStatus","status","access","isAdmin","role","hasAccess","ACCESS_ADMIN","isManager","ACCESS_MANAGER","Breadcrumbs","label","href","htmlFor","id","value","onChange","event","target","STATUS_OPTIONS","map","option","Button","onClick","disabled","variant","length","_plan$routes","_plan$routes2","_plan$routes3","tasks","collectTasks","routes","drivers","collectDrivers","vehicles","collectVehicles","statusLabel","STATUS_LABELS","statusColor","STATUS_STYLES","formatDate","createdAt","title","concat","notes","task","normalizePlan","_plan$metrics$totalTa","_plan$metrics","_plan$metrics2","route","_route$metrics","_objectSpread","stops","metrics","normalizeRoutes","totalStops","reduce","sum","_route$stops$length","_route$stops","totalTasks","totalDistanceKm","totalRoutes","totalEtaMinutes","totalLoad","_x","_x2","_x3","_listRoutePlans","apply","this","arguments","_callee2","limit","page","params","response","payload","total","_context2","URLSearchParams","set","String","authFetch","toString","ok","json","draft","approved","completed","cancelled","Intl","DateTimeFormat","year","month","day","hour","minute","format","Date","_unused","names","Set","forEach","_task$title","trim","taskId","add","from","driverName","size","join","vehicleName"],"mappings":"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"}