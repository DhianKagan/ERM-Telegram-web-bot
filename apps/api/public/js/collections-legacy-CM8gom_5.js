!function(){function t(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return r(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=Array(r);n<r;n++)e[n]=t[n];return e}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(n,o,i,a){var c=o&&o.prototype instanceof l?o:l,f=Object.create(c.prototype);return e(f,"_invoke",function(n,e,o){var i,a,c,l=0,f=o||[],s=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(r,n){return i=r,a=0,c=t,v.n=n,u}};function p(n,e){for(a=n,c=e,r=0;!s&&l&&!o&&r<f.length;r++){var o,i=f[r],p=v.p,y=i[2];n>3?(o=y===e)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,v.v=e,v.n=i[1]):p<y&&(o=n<3||i[0]>e||e>y)&&(i[4]=n,i[5]=e,v.n=y,a=0))}if(o||n>1)return u;throw s=!0,e}return function(o,f,y){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&p(f,y),a=f,c=y;(r=a<2?t:c)||!s;){i||(a?a<3?(a>1&&(v.n=-1),p(a,c)):v.n=c:v.v=c);try{if(l=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((r=(s=v.n<0)?c:n.call(e,v))!==u)break}catch(r){i=t,a=1,c=r}finally{l=1}}return{value:r,done:s}}}(n,i,a),!0),f}var u={};function l(){}function f(){}function s(){}r=Object.getPrototypeOf;var v=[][i]?r(r([][i]())):(e(r={},i,function(){return this}),r),p=s.prototype=l.prototype=Object.create(v);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,e(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return f.prototype=s,e(p,"constructor",s),e(s,"constructor",f),f.displayName="GeneratorFunction",e(s,a,"GeneratorFunction"),e(p),e(p,a,"Generator"),e(p,i,function(){return this}),e(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:y}})()}function e(t,r,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}e=function(t,r,n,o){function a(r,n){e(t,r,function(t){return this._invoke(r,n,t)})}r?i?i(t,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[r]=n:(a("next",0),a("throw",1),a("return",2))},e(t,r,n,o)}function o(t,r,n,e,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?r(u):Promise.resolve(u).then(e,o)}function i(t){return function(){var r=this,n=arguments;return new Promise(function(e,i){var a=t.apply(r,n);function c(t){o(a,e,i,c,u,"next",t)}function u(t){o(a,e,i,c,u,"throw",t)}c(void 0)})}}function a(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,e)}return n}function c(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach(function(r){u(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,r||"default");if("object"!=l(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==l(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}System.register(["./index-legacy-CEOCQCnd.js","./App-legacy-QJVPl7Ns.js"],function(r,e){"use strict";var o,a;return{setters:[function(t){o=t.i},function(t){a=t.h}],execute:function(){var e={"Некорректный тип коллекции":"collections.errors.invalidType","Тип коллекции обязателен":"collections.errors.typeRequired","Некорректное название элемента":"collections.errors.invalidName","Название элемента обязательно":"collections.errors.nameRequired","Некорректное значение элемента":"collections.errors.invalidValue","Значение элемента обязательно":"collections.errors.valueRequired","Значение элемента не может быть пустым":"collections.errors.valueRequired","Ошибка валидации":"collections.errors.generalValidation","Ссылка на тему Telegram должна иметь формат https://t.me/c/<id>/<topic>":"collections.errors.invalidTelegramTopicUrl"},u={departments:{"Значение элемента обязательно":"collections.errors.departmentsMustHaveDivisions"}},f=function(t){try{return JSON.parse(t)}catch(r){return}},s=function(t,r){var n;if(!t)return"";var i=t.trim();if(!i)return"";var a=null==r?void 0:r.collectionType,c=a&&(null===(n=u[a])||void 0===n?void 0:n[i]),l=null!=c?c:e[i];return l?o.t(l):i},v=function(t,r){if(null==t||!t.length)return[];var n=t.map(function(t){var n="string"==typeof(null==t?void 0:t.msg)?t.msg:"string"==typeof(null==t?void 0:t.message)?t.message:"";return s(n,r)}).filter(Boolean);return n.length?n:[o.t("collections.errors.generalValidation")]},p=function(t,r){if(!t)return[];if(Array.isArray(t)){var n=t.filter(function(t){return Boolean(t&&"object"===l(t)&&"msg"in t)});if(n.length)return v(n,r);var e=t.map(function(t){return"string"==typeof t?s(t,r):""}).filter(Boolean);if(e.length)return e}if("string"==typeof t){var o=f(t);if(void 0!==o){var i=p(o,r);if(i.length)return i}var a=s(t,r);return a?[a]:[]}return[]},y=function(t,r,n){var e=429===t?o.t("collections.fallback.rateLimited"):403===t?o.t("collections.fallback.forbidden"):o.t("collections.fallback.loadFailed");if(r){var i=f(r);if(i){var a=v(i.errors,n);if(a.length)return Array.from(new Set(a)).join(". ");var c=p(i.detail,n);if(c.length)return Array.from(new Set(c)).join(". ");var u=s(i.error,n)||s(i.message,n);if(u)return u}else{var l=s(r,n);if(l)return l}}return e},d=function(t){var r="string"==typeof t?Number.parseFloat(t):"number"==typeof t?t:Number.NaN;return Number.isFinite(r)?r:void 0},m=r("t",function(t){var r,n,e,o,i,a,u,l=null!==(r=t.meta)&&void 0!==r?r:{},f="string"==typeof l.address&&l.address.trim().length?l.address.trim():t.value.trim(),s=null!==(n=d(null!==(e=l.latitude)&&void 0!==e?e:null===(o=l.location)||void 0===o?void 0:o.lat))&&void 0!==n?n:void 0,v=null!==(i=d(null!==(a=l.longitude)&&void 0!==a?a:null===(u=l.location)||void 0===u?void 0:u.lng))&&void 0!==i?i:void 0;return c(c({},t),{},{address:f,latitude:s,longitude:v,meta:l})}),h=r("f",function(){var t=i(n().m(function t(r){var e,o,i,c,u,l=arguments;return n().w(function(t){for(;;)switch(t.n){case 0:return e=l.length>1&&void 0!==l[1]?l[1]:"",o=l.length>2&&void 0!==l[2]?l[2]:1,i=l.length>3&&void 0!==l[3]?l[3]:10,t.n=1,a("/api/v1/collections?type=".concat(r,"&page=").concat(o,"&limit=").concat(i).concat(e?"&search=".concat(encodeURIComponent(e)):""));case 1:if((c=t.v).ok){t.n=3;break}return t.n=2,c.text().catch(function(){return""});case 2:throw u=t.v,new Error(y(c.status,u,{collectionType:r}));case 3:return t.a(2,c.json())}},t)}));return function(r){return t.apply(this,arguments)}}()),b=function(t){return"number"==typeof t&&Number.isFinite(t)};r("a",function(){var r=i(n().m(function r(e){var o,i,a,c,u,l,f,s,v,p=arguments;return n().w(function(r){for(;;)switch(r.n){case 0:o=p.length>1&&void 0!==p[1]?p[1]:"",a=(i=p.length>2&&void 0!==p[2]?p[2]:200)>0?i:200,c=[],u=1,l=0,f=100;case 1:if(!(u<=f)){r.n=6;break}return r.n=2,h(e,o,u,a);case 2:if(s=r.v,(v=Array.isArray(s.items)?s.items:[]).length||0!==c.length||b(s.total)){r.n=3;break}return r.a(2,[]);case 3:if(c.push.apply(c,t(v)),b(s.total)&&(l=Math.max(l,s.total)),!(v.length<a)){r.n=4;break}return r.a(3,6);case 4:if(!(l&&c.length>=l)){r.n=5;break}return r.a(3,6);case 5:u+=1,r.n=1;break;case 6:if(!(l&&c.length>l)){r.n=7;break}return r.a(2,c.slice(0,l));case 7:return r.a(2,c)}},r)}));return function(t){return r.apply(this,arguments)}}()),r("b",i(n().m(function t(){var r,e,o,i,a,c,u=arguments;return n().w(function(t){for(;;)switch(t.n){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:"",o=u.length>1&&void 0!==u[1]?u[1]:1,i=u.length>2&&void 0!==u[2]?u[2]:10,t.n=1,h("objects",e,o,i);case 1:return a=t.v,c=Array.isArray(a.items)?a.items.map(m):[],t.a(2,{items:c,total:null!==(r=a.total)&&void 0!==r?r:c.length})}},t)}))),r("c",function(t,r){return a("/api/v1/collections",{method:"POST",confirmed:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(c({type:t},r))}).then(function(){var r=i(n().m(function r(e){var o;return n().w(function(r){for(;;)switch(r.n){case 0:if(e.ok){r.n=2;break}return r.n=1,e.text().catch(function(){return""});case 1:throw o=r.v,new Error(y(e.status,o,{collectionType:t}));case 2:return r.a(2,e.json())}},r)}));return function(t){return r.apply(this,arguments)}}())}),r("u",function(t,r,e){return a("/api/v1/collections/".concat(t),{method:"PUT",confirmed:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(){var t=i(n().m(function t(r){var o;return n().w(function(t){for(;;)switch(t.n){case 0:if(r.ok){t.n=2;break}return t.n=1,r.text().catch(function(){return""});case 1:throw o=t.v,new Error(y(r.status,o,e));case 2:return t.a(2,r.json())}},t)}));return function(r){return t.apply(this,arguments)}}())}),r("r",function(){var t=i(n().m(function t(r){var e,o;return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,a("/api/v1/collections/".concat(r),{method:"DELETE",confirmed:!0});case 1:if((e=t.v).ok){t.n=3;break}return t.n=2,e.text().catch(function(){return""});case 2:throw o=t.v,new Error(y(e.status,o));case 3:return t.a(2,e.json())}},t)}));return function(r){return t.apply(this,arguments)}}())}}})}();
//# sourceMappingURL=collections-legacy-CM8gom_5.js.map
