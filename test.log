
> telegram-task-bot@1.0.0 pretest C:\Users\AgroMarket\Documents\VSC Projetcts\ERM\ERM-Telegram-web-bot\apps\api
> pnpm --filter shared build


> shared@0.0.0 build C:\Users\AgroMarket\Documents\VSC Projetcts\ERM\ERM-Telegram-web-bot\packages\shared
> tsc -p tsconfig.json


> telegram-task-bot@1.0.0 test C:\Users\AgroMarket\Documents\VSC Projetcts\ERM\ERM-Telegram-web-bot\apps\api
> cross-env NODE_ENV=test dotenv -e .env.test -- jest --coverage "--silent"

FAIL tests/services/antivirus.test.ts (6.531 s)
  ‚óè –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∞–Ω—Ç–∏–≤–∏—Ä—É—Å ClamAV –∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Ñ–∞–π–ª

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/tmp/test.txt", 5000, 65536
    Received: "C:\\tmp\\test.txt", 5000, 65536

    Number of calls: 1

    [0m [90m 80 |[39m   expect(mockPing)[33m.[39mtoHaveBeenCalledWith([32m'127.0.0.1'[39m[33m,[39m [35m3310[39m[33m,[39m [35m5000[39m)[33m;[39m
     [90m 81 |[39m   expect(mockCreateScanner)[33m.[39mtoHaveBeenCalledWith([32m'127.0.0.1'[39m[33m,[39m [35m3310[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 82 |[39m   expect(mockScanFile)[33m.[39mtoHaveBeenCalledWith([32m'/tmp/test.txt'[39m[33m,[39m [35m5000[39m[33m,[39m [35m65536[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 83 |[39m   expect(mockIsCleanReply)[33m.[39mtoHaveBeenCalledWith([32m'stream: OK'[39m)[33m;[39m
     [90m 84 |[39m   expect(mockWriteLog)[33m.[39mtoHaveBeenCalledWith(
     [90m 85 |[39m     [32m'–ê–Ω—Ç–∏–≤–∏—Ä—É—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω'[39m[33m,[39m[0m

      at toHaveBeenCalledWith (tests/services/antivirus.test.ts:82:24)
      at Generator.call (tests/services/antivirus.test.ts:2:1)
      at Generator._invoke [as next] (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)

  ‚óè —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∑–∞—Ä–∞–∂—ë–Ω–Ω—ã–π —Ñ–∞–π–ª –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —á–µ—Ä–µ–∑ ClamAV

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "–û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–∏—Ä—É—Å", "warn", ObjectContaining {"path": "/tmp/eicar.txt", "reply": "stream: Eicar-Test-Signature FOUND"}
    Received
           1: "–ê–Ω—Ç–∏–≤–∏—Ä—É—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω", "info", {"host": "127.0.0.1", "port": 3310, "vendor": "ClamAV", "version": "ClamAV 1.0.0/27000/Mon Oct 06 12:00:00 2025"}
           2: "–û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–∏—Ä—É—Å", "warn", {"path": "C:\\tmp\\eicar.txt", "reply": "stream: Eicar-Test-Signature FOUND", "vendor": "ClamAV"}

    Number of calls: 2

    [0m [90m  98 |[39m
     [90m  99 |[39m   expect(result)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 100 |[39m   expect(mockWriteLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 101 |[39m     [32m'–û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–∏—Ä—É—Å'[39m[33m,[39m
     [90m 102 |[39m     [32m'warn'[39m[33m,[39m
     [90m 103 |[39m     expect[33m.[39mobjectContaining({[0m

      at toHaveBeenCalledWith (tests/services/antivirus.test.ts:100:24)
      at Generator.call (tests/services/antivirus.test.ts:2:1)
      at Generator._invoke [as next] (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)

  ‚óè –æ—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ClamAV –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –∏ –ø–∏—à–µ—Ç –ª–æ–≥

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è", "error", ObjectContaining {"error": "socket timeout", "path": "/tmp/file.txt"}
    Received
           1: "–ê–Ω—Ç–∏–≤–∏—Ä—É—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω", "info", {"host": "127.0.0.1", "port": 3310, "vendor": "ClamAV", "version": "ClamAV test build"}
           2: "–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è", "error", {"error": "socket timeout", "path": "C:\\tmp\\file.txt", "vendor": "ClamAV"}

    Number of calls: 2

    [0m [90m 156 |[39m   expect(result)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 157 |[39m   expect(mockIsCleanReply)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m   expect(mockWriteLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 159 |[39m     [32m'–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è'[39m[33m,[39m
     [90m 160 |[39m     [32m'error'[39m[33m,[39m
     [90m 161 |[39m     expect[33m.[39mobjectContaining({[0m

      at toHaveBeenCalledWith (tests/services/antivirus.test.ts:158:24)
      at Generator.call (tests/services/antivirus.test.ts:2:1)
      at Generator._invoke [as next] (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)

FAIL tests/routeServiceUrl.test.ts (8.542 s)
  ‚óè table —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å

    expect(received).toBe(expected) // Object.is equality

    Expected: "/table"
    Received: "/route/table/v1/driving"

    [0m [90m 27 |[39m   [36mawait[39m table([32m'1,1;2,2'[39m[33m,[39m { annotations[33m:[39m [32m'distance'[39m })[33m;[39m
     [90m 28 |[39m   [36mconst[39m url [33m=[39m [36mnew[39m [33mURL[39m(global[33m.[39mfetch[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m0[39m])[33m;[39m
    [31m[1m>[22m[39m[90m 29 |[39m   expect(url[33m.[39mpathname)[33m.[39mtoBe([32m'/table'[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 30 |[39m   expect(url[33m.[39msearchParams[33m.[39m[36mget[39m([32m'points'[39m))[33m.[39mtoBe([32m'1,1;2,2'[39m)[33m;[39m
     [90m 31 |[39m   expect(url[33m.[39msearchParams[33m.[39m[36mget[39m([32m'annotations'[39m))[33m.[39mtoBe([32m'distance'[39m)[33m;[39m
     [90m 32 |[39m })[33m;[39m[0m

      at toBe (tests/routeServiceUrl.test.ts:29:24)
      at Generator.call (tests/routeServiceUrl.test.ts:2:1)
      at Generator._invoke [as next] (tests/routeServiceUrl.test.ts:2:1)
      at asyncGeneratorStep (tests/routeServiceUrl.test.ts:2:1)
      at asyncGeneratorStep (tests/routeServiceUrl.test.ts:2:1)

  ‚óè nearest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä point

    expect(received).toBe(expected) // Object.is equality

    Expected: "/nearest"
    Received: "/route/nearest/v1/driving"

    [0m [90m 38 |[39m   [36mawait[39m nearest([32m'1,1'[39m[33m,[39m { number[33m:[39m [35m1[39m })[33m;[39m
     [90m 39 |[39m   [36mconst[39m url [33m=[39m [36mnew[39m [33mURL[39m(global[33m.[39mfetch[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m0[39m])[33m;[39m
    [31m[1m>[22m[39m[90m 40 |[39m   expect(url[33m.[39mpathname)[33m.[39mtoBe([32m'/nearest'[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 41 |[39m   expect(url[33m.[39msearchParams[33m.[39m[36mget[39m([32m'point'[39m))[33m.[39mtoBe([32m'1,1'[39m)[33m;[39m
     [90m 42 |[39m   expect(url[33m.[39msearchParams[33m.[39m[36mget[39m([32m'number'[39m))[33m.[39mtoBe([32m'1'[39m)[33m;[39m
     [90m 43 |[39m })[33m;[39m[0m

      at toBe (tests/routeServiceUrl.test.ts:40:24)
      at Generator.call (tests/routeServiceUrl.test.ts:2:1)
      at Generator._invoke [as next] (tests/routeServiceUrl.test.ts:2:1)
      at asyncGeneratorStep (tests/routeServiceUrl.test.ts:2:1)
      at asyncGeneratorStep (tests/routeServiceUrl.test.ts:2:1)

FAIL tests/loginRouteFlow.test.ts (9.887 s)
  ‚óè –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ª–æ–≥–∏–Ω–∞ –∏ –∑–∞–ø—Ä–æ—Å–∞

    expect(received).toBeLessThan(expected)

    Expected: < 500
    Received:   500

    [0m [90m 134 |[39m     [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${verifyRes.body.token}`[39m)
     [90m 135 |[39m     [33m.[39msend({ start[33m:[39m { lat[33m:[39m [35m1[39m[33m,[39m lng[33m:[39m [35m2[39m }[33m,[39m end[33m:[39m { lat[33m:[39m [35m3[39m[33m,[39m lng[33m:[39m [35m4[39m } })[33m;[39m
    [31m[1m>[22m[39m[90m 136 |[39m   expect(res[33m.[39mstatus)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 137 |[39m })[33m;[39m
     [90m 138 |[39m[0m

      at toBeLessThan (tests/loginRouteFlow.test.ts:136:22)
      at Generator.call (tests/loginRouteFlow.test.ts:2:1)
      at Generator._invoke [as next] (tests/loginRouteFlow.test.ts:2:1)
      at asyncGeneratorStep (tests/loginRouteFlow.test.ts:2:1)
      at asyncGeneratorStep (tests/loginRouteFlow.test.ts:2:1)

PASS tests/startBotRetry.test.ts (13.724 s)
FAIL tests/routeCsrf.test.ts (14.859 s)
  ‚óè POST /api/v1/route –ø—Ä–∏–Ω–∏–º–∞–µ—Ç CSRF-—Ç–æ–∫–µ–Ω

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m  95 |[39m })[33m;[39m
     [90m  96 |[39m
    [31m[1m>[22m[39m[90m  97 |[39m test([32m'POST /api/v1/route –ø—Ä–∏–Ω–∏–º–∞–µ—Ç CSRF-—Ç–æ–∫–µ–Ω'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m [31m[1m^[22m[39m
     [90m  98 |[39m   [36mconst[39m agent [33m=[39m request[33m.[39magent(baseUrl[33m,[39m { ca[33m:[39m cert })[33m;[39m
     [90m  99 |[39m   [36mconst[39m resCsrf [33m=[39m [36mawait[39m agent
     [90m 100 |[39m     [33m.[39m[36mget[39m([32m'/api/v1/csrf'[39m)[0m

      at Object.test (tests/routeCsrf.test.ts:97:1)

  ‚óè POST /api/v1/route –ø—Ä–∏–Ω–∏–º–∞–µ—Ç CSRF-—Ç–æ–∫–µ–Ω

    TypeError: (0 , _route.getRouteDistance) is not a function

    [0m [90m 47 |[39m   ])[33m,[39m
     [90m 48 |[39m   asyncHandler([36masync[39m (req[33m,[39m res) [33m=>[39m {
    [31m[1m>[22m[39m[90m 49 |[39m     [36mconst[39m data [33m=[39m [36mawait[39m getRouteDistance(req[33m.[39mbody[33m.[39mstart[33m,[39m req[33m.[39mbody[33m.[39mend)[33m;[39m
     [90m    |[39m                                        [31m[1m^[22m[39m
     [90m 50 |[39m     res[33m.[39mjson(data)[33m;[39m
     [90m 51 |[39m   })[33m,[39m
     [90m 52 |[39m )[33m;[39m[0m

      at src/routes/route.ts:49:40
      at Generator.call (src/routes/route.ts:2:1)
      at Generator._invoke [as next] (src/routes/route.ts:2:1)
      at asyncGeneratorStep (src/routes/route.ts:2:1)
      at asyncGeneratorStep (src/routes/route.ts:2:1)
      at _next (src/routes/route.ts:2:1)
      at src/routes/route.ts:2:1
      at apply (src/routes/route.ts:51:4)
      at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:95:5)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/route.js:149:13)
      at next (src/utils/validate.ts:51:32)
      at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:95:5)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/route.js:149:13)
      at middleware (../../node_modules/.pnpm/express-validator@7.2.1/node_modules/express-validator/lib/middlewares/check.js:16:13)

PASS tests/processUploads.test.ts (8.723 s)
PASS tests/routePlanAnalytics.test.ts (7.387 s)
PASS tests/loginTasksFlow.test.ts (16.144 s)
PASS tests/rateLimit.test.ts (16.784 s)
PASS tests/tasks.test.ts (6.857 s)

ReferenceError: You are trying to `import` a file after the Jest environment has been torn down. From tests/loginTasksFlow.test.ts.

      at model.Query.resetId (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/schema/objectId.js:297:27)
      at SchemaObjectId.SchemaType._applySetters (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/schemaType.js:1228:20)
      at SchemaObjectId.SchemaType.applySetters (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/schemaType.js:1253:16)
      at SchemaObjectId.SchemaType.castForQuery (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/schemaType.js:1694:17)
      at cast (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/cast.js:390:32)
      at model.Query.Query.cast (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/query.js:5060:12)
      at model.Query.Query._castConditions (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/query.js:2374:10)
      at model.Query._findOneAndUpdate (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/query.js:3477:8)
      at model.Query.exec (../../node_modules/.pnpm/mongoose@8.18.0_socks@2.8.7/node_modules/mongoose/lib/query.js:4627:80)
PASS tests/routeValidation.test.ts
PASS tests/mongoIndexes.test.ts
PASS tests/collectionRepo.test.ts
PASS tests/collectionsAggregator.test.ts (5.807 s)
PASS tests/fleetsRoute.test.ts
PASS tests/loginFlow.test.ts
PASS tests/expensiveRateLimit.test.ts
PASS tests/routeDistance.test.ts
PASS tests/route.test.ts
PASS tests/taskSync.controller.test.ts
PASS tests/kanbanStatus.test.ts
PASS tests/globalLimiter.test.ts
PASS tests/telegramApiRetry.test.ts
PASS tests/routeCache.test.ts
PASS tests/routes.test.ts
PASS tests/users.test.ts
PASS tests/profile.test.ts
PASS tests/maps.test.ts
PASS tests/authCsrfRoute.test.ts
PASS tests/optimizer.test.ts
PASS tests/tasksService.test.ts
PASS tests/cacheKey.test.ts
PASS tests/mapsRoute.test.ts
PASS tests/collectionsDepartment.test.ts
PASS tests/collectionsValidation.test.ts
PASS tests/admin.test.ts
PASS tests/systemRoute.test.ts
PASS tests/taskAttachments.test.ts
PASS tests/storage.test.ts
PASS tests/errorMiddleware.test.ts
PASS tests/authRole.test.ts
PASS tests/auth.test.ts
PASS tests/api.test.ts
PASS tests/mapsRouteLink.test.ts
PASS tests/security.test.ts
PASS tests/metricsEndpoint.test.ts
PASS tests/cookieSecureFalse.test.ts
PASS tests/files.test.ts
PASS tests/configUrl.test.ts
PASS tests/tmaTasks.test.ts
PASS tests/csrf.test.ts
PASS tests/verifyToken.test.ts
PASS tests/createUser.test.ts
PASS tests/services/wgLogEngine.test.ts
{"level":"info","time":"2025-11-04T12:23:57.942Z","service":"api","msg":"–°—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"}
{"level":"info","time":"2025-11-04T12:23:57.944Z","service":"api","traceId":"custom-trace","msg":"–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"}
{"level":"info","time":"2025-11-04T12:23:57.774Z","service":"api","msg":"–ü–µ—Ä–≤—ã–π –ª–æ–≥"}
{"level":"error","time":"2025-11-04T12:23:57.776Z","service":"api","scope":"storage","msg":"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"}
{"level":"warn","time":"2025-11-04T12:23:57.777Z","service":"api","scope":"other","msg":"–í—Ç–æ—Ä–æ–π –ª–æ–≥"}
PASS tests/pinoLogger.test.ts
PASS tests/archives.test.ts
PASS tests/taskRoles.test.ts
PASS tests/tmaLoginRoute.test.ts
PASS tests/fetchRouteService.test.ts
PASS tests/model.test.ts
PASS tests/optimizerService.test.ts
PASS tests/scheduler.test.ts
PASS tests/telegramApiLargeFile.test.ts
PASS tests/userInfoService.test.ts
PASS tests/fetchKanban.test.ts
PASS tests/accessMask.test.ts
PASS tests/authService.test.ts
PASS tests/verifyInitData.test.ts
PASS tests/authMiddleware.test.ts
PASS tests/mapsMultiRouteLink.test.ts
PASS tests/taskHistory.service.test.ts
PASS tests/taskFields.test.ts
PASS tests/telegramTopics.test.ts
PASS tests/metricsRegistry.test.ts
PASS tests/otp.test.ts
A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
-----------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File                               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
-----------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
All files                          |   39.83 |    28.17 |   39.13 |   40.62 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
 src                               |    65.5 |    50.29 |   88.88 |   65.32 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  config.ts                        |   64.97 |    50.32 |   88.88 |   64.79 | 13,35-39,77-78,84-85,96-101,113-114,117-118,136-142,153,162,168,173,180,192,201,207,231,240-241,247-262,285-289,294-304,321,324,331,343,361-369,384,393,408                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
  messages.ts                      |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  rateLimits.ts                    |     100 |       50 |     100 |     100 | 7-22                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
 src/api                           |   71.94 |    45.83 |   47.61 |   72.05 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  middleware.ts                    |   56.25 |    39.47 |   38.46 |   56.25 | 69-82,85-97,141,157-185                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
  security.ts                      |   95.83 |    83.33 |      80 |   95.45 | 19                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  server.ts                        |   80.39 |    46.42 |   33.33 |      82 | 19,22-23,30,62,65-66,94,104                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
 src/archives                      |       0 |      100 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  archives.service.ts              |       0 |      100 |       0 |       0 | 32-40                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/auth                          |   66.85 |     51.4 |   66.66 |   69.64 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  auth.controller.ts               |   53.06 |    16.66 |   57.14 |   53.06 | 20,46-51,66-72,86-92,99-105,109-116                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
  auth.service.ts                  |   71.13 |    54.31 |   83.33 |    76.4 | 43,58-62,134-159                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
  auth.ts                          |      40 |      100 |   33.33 |      40 | 33-50                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  roles.decorator.ts               |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  roles.guard.ts                   |   88.88 |    66.66 |      50 |     100 | 18-19                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  tmaAuth.guard.ts                 |   71.42 |       50 |     100 |   71.42 | 16-17,20-26                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
 src/bot                           |   14.56 |     5.81 |    7.33 |   14.73 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  bot.ts                           |   14.56 |     5.81 |    7.33 |   14.73 | 56-78,89,92-227,241,244-248,256-280,293-473,478-479,485-571,588,600-603,608,617,625,633,637,652,661,697-699,703-705,728,735-741,745-746,752-771,775-782,794-822,829-840,844-853,857-862,866-869,873-880,890-971,978-1000,1013-1033,1044-1386,1393,1397-1447,1454-1505,1510,1514-1524,1528,1532-1568,1572,1576-1589,1593,1597,1601-1611,1615,1619-1655,1659,1663-1676,1680,1684,1688,1692,1696-1764,1769-1802,1806,1810-1840,1844,1848-1861,1865-1895,1903-2039,2049-2112,2117-2133,2159                                                                                                                                                                                                                                                           
 src/config                        |      50 |    31.25 |    87.5 |   49.05 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  antivirus.ts                     |   48.78 |    28.57 |   83.33 |   48.48 | 30-31,41-44,49-52,57-59,69-74                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
  limits.ts                        |   46.15 |     12.5 |     100 |   45.45 | 9-15                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  storage.ts                       |      60 |       50 |     100 |   55.55 | 10-14                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/controllers                   |   43.32 |    26.33 |   55.81 |   43.68 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  analytics.ts                     |   66.66 |    66.66 |     100 |   73.68 | 11,15,27,39-40                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
  maps.ts                          |    37.2 |       25 |   33.33 |    37.2 | 22,29,42,51-111                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  optimizer.ts                     |      68 |    42.85 |     100 |      68 | 17,30-34,43-51                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
  routes.ts                        |    62.5 |       75 |     100 |    62.5 | 12-20                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  storageDiagnostics.controller.ts |       0 |      100 |       0 |       0 | 15-22                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  taskSync.controller.ts           |    41.4 |    23.34 |      50 |   41.62 | 33,37,42-44,48-49,55,75-95,99-119,129-140,143,146-148,156,169,175-180,196-215,227-237,246-252,265,277,281-288,307-322,383,422,428,434,440-447,482-523,535-719,729-730,734,742-847,875-876,886-899,915,932-950,964,967,972,977-982,990,1006                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
 src/db                            |    40.5 |    30.97 |   40.86 |   41.81 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  connection.ts                    |      25 |    35.71 |      20 |   28.12 | 21-26,31-59                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
  model.ts                         |   54.83 |     3.84 |       0 |   54.83 | 8-15,19-22,424-427,433-460                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
  queries.ts                       |   41.22 |    32.46 |   45.54 |   42.45 | 42,67-68,77,81-88,114,116,122-235,253-296,318,322-327,329,340-347,355-361,384,388,433,468-475,502-505,530,542-556,565,571-587,615,620-629,632-641,654-669,726-727,744-745,765-774,782-784,823,849,868-869,879,881-894,905-917,928,949-950,964-1059,1081-1088,1092,1096-1102,1105-1107,1111-1112,1117-1123,1126-1128,1133,1135,1138-1146,1161-1173,1211,1217,1219,1223,1225-1228,1263-1280,1319-1357,1374-1378,1383-1385,1389-1391,1395-1473,1481,1520,1528,1542-1544,1559,1567-1571,1621-1627,1633,1653-1787                                                                                                                                                                                                                                      
  roleCache.ts                     |     7.4 |        0 |       0 |       8 | 12-50                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/db/models                     |   96.42 |      100 |   66.66 |   96.42 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  CollectionItem.ts                |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  department.ts                    |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  employee.ts                      |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  fleet.ts                         |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  routePlan.ts                     |      90 |      100 |       0 |      90 | 149                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
 src/db/repos                      |   32.55 |    20.51 |      50 |   30.76 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  collectionRepo.ts                |   32.55 |    20.51 |      50 |   30.76 | 26,29,57-102                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
 src/di                            |   84.84 |      100 |   28.57 |   84.84 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  index.ts                         |   84.37 |      100 |   28.57 |   84.37 | 36,39,42,46,50                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
  tokens.ts                        |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
 src/dto                           |   73.43 |    52.63 |   85.71 |   75.86 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  auth.dto.ts                      |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  fleets.dto.ts                    |   66.66 |     37.5 |   77.77 |      70 | 12,26,42,69-72                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
  tasks.dto.ts                     |      75 |    56.66 |   91.66 |   77.41 | 12-13,24-25,129-135                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
  users.dto.ts                     |   66.66 |      100 |   66.66 |   66.66 | 35                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
 src/form                          |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  index.ts                         |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
 src/geo                           |   14.28 |        0 |       0 |   14.28 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  osrm.ts                          |   14.28 |        0 |       0 |   14.28 | 15-18,24-35                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
 src/intake                        |   66.66 |       75 |   66.66 |      80 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  rules.ts                         |   66.66 |       75 |   66.66 |      80 | 20                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
 src/logs                          |       0 |      100 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  logs.service.ts                  |       0 |      100 |       0 |       0 | 18-26                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/metrics                       |   83.33 |    71.42 |     100 |   83.33 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  index.ts                         |   83.33 |    71.42 |     100 |   83.33 | 19-22                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/middleware                    |    79.5 |    65.35 |   70.58 |   80.92 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  auth.ts                          |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  checkRole.ts                     |   72.72 |    41.66 |   66.66 |   77.77 | 18-19                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  errorMiddleware.ts               |   80.76 |       50 |   33.33 |   80.76 | 47-59                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  globalLimiter.ts                 |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  metrics.ts                       |     100 |       50 |     100 |     100 | 15                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  pinoLogger.ts                    |   81.25 |       75 |      80 |    92.3 | 35                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  taskAccess.ts                    |   74.66 |    73.97 |   53.84 |   74.32 | 23-29,37,48,52-54,71-73,96-98,112-120                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  trace.ts                         |   81.25 |    33.33 |     100 |   86.66 | 19-20                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  validateDto.ts                   |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
 src/roles                         |       0 |      100 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  roles.service.ts                 |       0 |      100 |       0 |       0 | 12-21                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/routes                        |   40.18 |    29.73 |   41.05 |    40.9 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  analytics.ts                     |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  authUser.ts                      |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  collections.ts                   |    40.6 |    29.26 |   72.72 |   41.22 | 45-47,73-103,108,153-159,163-169,178,182-191,208-288,301-302,320                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
  files.ts                         |   39.39 |    23.74 |   33.33 |      40 | 28-34,51-68,76-82,92-98,120,147-173,180-190,214-349                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
  fleets.ts                        |   75.75 |     43.1 |      70 |   78.68 | 62,138,156,159,165,174,177,180,183,187-188,201-202                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  maps.ts                          |   44.44 |        0 |       0 |   44.44 | 43-48                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  optimizer.ts                     |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  route.ts                         |    91.3 |       75 |     100 |    91.3 | 68-69                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  routes.ts                        |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  storage.ts                       |   72.72 |    33.33 |     100 |   72.72 | 49-50,67-71                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
  system.ts                        |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  tasks.ts                         |   27.29 |    29.21 |    19.6 |   28.01 | 83,86,99-143,150-156,160-174,178-189,196-242,261-262,268-269,293-317,353-367,382-433,441-447,461-465,480,487-495,499,503-520,526-530,551-560,584-641,648-816,841,871,881-882,905,922,950,967                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
 src/services                      |   51.88 |    38.24 |   47.39 |   53.41 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  antivirus.ts                     |   89.65 |    78.43 |      90 |   91.46 | 87-88,93,106,128-130                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  collectionsAggregator.ts         |   58.27 |       44 |   53.57 |   60.31 | 100-110,118-138,143-168,173-208,213-218,229-231,272,275,311,314                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  dataStorage.ts                   |   51.28 |    36.66 |      50 |   51.74 | 27,36,81-87,94-109,129,133,143-158,182-186,200-202,226,230,237,247-262,296-298,303,322,328,334-340,353-390                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
  logisticsEvents.ts               |   52.63 |      100 |      40 |   47.05 | 28-42,66-81                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
  maps.ts                          |   78.97 |    61.07 |   96.55 |    83.5 | 48,51,55,64,97,120,138,142,146,150,154,162,165,169,196,213-219,254,277,317,326,333-334,342,349,367,371,395,408,420,434                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
  messageQueue.ts                  |      20 |       20 |   14.28 |      20 | 18-35,41,46-63                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
  optimizer.ts                     |   29.95 |    16.29 |   35.55 |   29.68 | 112,117-121,125-130,134-163,170-182,191-196,202-205,214-230,253-299,313-398,442-443,455,467,487,506-507,519-526                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  otp.ts                           |   86.95 |    78.57 |     100 |   90.47 | 29,115-119                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
  reportGenerator.ts               |    8.91 |     7.84 |   11.36 |    9.23 | 51,57,65,93-480                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  route.ts                         |    87.5 |    62.29 |   71.42 |   93.06 | 90-91,97-103,194-201                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  routePlanAnalytics.ts            |   96.06 |       65 |     100 |   96.61 | 198-199,212,220                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  routes.ts                        |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  scheduler.ts                     |   14.67 |     7.22 |   13.33 |   16.16 | 18,36-41,45-53,59-199,210-213                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
  service.ts                       |   93.75 |      100 |       0 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  shortLinks.ts                    |   30.93 |    14.28 |      40 |    32.3 | 15,20-25,36,51-62,66-72,77-88,92-98,106-111,118-125,134-145,150-153,159-163,172,177-214,220-223                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  storageDiagnostics.service.ts    |       0 |        0 |       0 |       0 | 46-172                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
  taskLinks.ts                     |    61.9 |    44.44 |   66.66 |      65 | 18-20,34,37-38,42                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
  taskTypeSettings.ts              |   35.29 |     9.37 |   27.27 |   35.29 | 29-30,38-49,62-67,71,75-81,91-92,98-99,109-112                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
  tasks.ts                         |   17.39 |        0 |       0 |   18.18 | 24-34,40-47,51-74,83-88,95,104-110,117,123-139,143,148                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
  telegramApi.ts                   |   82.35 |       80 |   66.66 |   92.85 | 39                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  userInfoService.ts               |   88.88 |       50 |     100 |   88.88 | 15                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  wgLogEngine.ts                   |   66.82 |    56.09 |      60 |   71.12 | 53,80,90,103,134-138,162,165,168,171-174,179,193-197,210,219-220,229-231,234-240,244,248-252,264-271,323,338,358-370,378-389,395-406,431                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
 src/services/vrp                  |   12.98 |        0 |       0 |   13.88 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  graphhopperAdapter.ts            |   11.25 |        0 |       0 |      12 | 28-35,41-46,51-55,63-67,78-84,88-178,185                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
  orToolsAdapter.ts                |   14.86 |        0 |       0 |   15.94 | 40-43,47-106,113-122,126-136,142,145,152-183,195-196                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
 src/system                        |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  logAnalysis.service.ts           |       0 |        0 |       0 |       0 | 40-143                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
  stackOrchestrator.controller.ts  |       0 |      100 |       0 |       0 | 15-32                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  stackOrchestrator.service.ts     |       0 |        0 |       0 |       0 | 43-128                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
 src/taskDrafts                    |    5.76 |        0 |       0 |    5.94 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  taskDrafts.controller.ts         |    4.54 |        0 |       0 |    4.54 | 11-20,31-118                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
  taskDrafts.service.ts            |    6.66 |        0 |       0 |    7.01 | 10,15-18,22-23,27-132                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/taskTemplates                 |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  taskTemplates.service.ts         |       0 |        0 |       0 |       0 | 17-33                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/tasks                         |   28.82 |    19.68 |      32 |   29.47 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  filterUtils.ts                   |   46.29 |    36.53 |   33.33 |   46.29 | 16-18,21-24,32-39,44,46,68-71,76,79,86,88-89,93,95,99,101,105                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
  taskComments.ts                  |   42.85 |     17.1 |      50 |   42.85 | 24,32-39,44,55,74-103,111,115,148-157,167-183                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
  taskHistory.service.ts           |    56.3 |     40.7 |   57.89 |   58.03 | 38,44,52-55,64,74-99,104,107-108,115-117,122,125,128-129,132,139,143-155,180,209,223,226                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
  taskLinks.ts                     |    64.7 |       40 |     100 |    64.7 | 9,15-23,30,37                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
  taskMessages.ts                  |    6.19 |        0 |       0 |     6.3 | 23-34,38-40,44-51,55-95,99-108,115-225                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
  taskTelegramMedia.ts             |    4.53 |        0 |    5.76 |    4.74 | 82-86,90-98,102-116,120-149,156-178,189-233,243,251-265,272,301-1230                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  tasks.controller.ts              |   32.28 |    22.12 |    36.3 |   33.07 | 97,121-122,133,148-151,155-169,226-230,234-242,246-260,269,274-296,330-347,358-362,371-472,478-494,506-511,514-517,522-569,603-604,607-611,620,639-665,673-674,693-741,744-762,784-877,885,896-901,920-948,961-1139,1153-1159,1173,1179,1191-1193,1214-1220,1231,1245-1250,1281-1302,1310,1317-1322,1332,1349-1901,2019,2058-2060,2077,2086,2126-2128,2136,2142,2150-2215,2224,2248,2275-2293,2299,2307,2312-2318,2361-2364,2372-2383,2398,2404,2409,2414-2419,2429,2449,2459-2471,2481-2496,2529-2572,2599-2606,2616-2638,2646-2657,2672-2673,2681,2689-2742,2757-2764,2774-2781,2786-2841,2851-2858,2868-2893,2896-2919,2936-2937,2962,2974-2980,3005-3006,3010-3039,3053-3077,3083-3087,3095,3103,3115-3116,3127-3133,3183-3196,3238,3254-3260 
  tasks.service.ts                 |   66.84 |    49.07 |   73.07 |   66.29 | 54-79,83,103-108,113,122-129,137,169-173,181,221-224,239,259-263,292,317,333-336,341,350-360,376,384-385,402,416                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
  uploadContext.ts                 |   31.57 |        0 |       0 |   33.33 | 27-34,40-41,45-47                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
  uploadFinalizer.ts               |   11.76 |     4.08 |       5 |   12.61 | 29-36,40-45,49-58,62,66-68,73,100-209,217-233                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
 src/users                         |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  users.service.ts                 |       0 |        0 |       0 |       0 | 29-65                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 src/utils                         |    53.2 |    38.79 |    52.5 |   55.04 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  accessMask.ts                    |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  assigneeIds.ts                   |    8.82 |        0 |       0 |    8.82 | 8,11-58                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
  attachments.ts                   |   43.85 |    41.66 |   38.46 |   46.01 | 42,50,89,102,110-114,124,134-141,145-154,158-170,174-196,200-218,225-266                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
  cache.ts                         |    42.1 |    48.14 |      50 |   46.87 | 12-18,24-26,41-42,49-53,59-60                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
  delay.ts                         |   33.33 |      100 |       0 |   33.33 | 5-6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
  fileCheck.ts                     |      40 |    13.33 |   66.66 |    37.5 | 74-93                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  fileUrls.ts                      |   86.66 |    77.77 |   66.66 |   86.66 | 22,32                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  formatTask.ts                    |   48.46 |    34.45 |    42.5 |   49.86 | 18,55-56,63-74,78-101,117-128,189-210,239,245,250,261,283,287,295-311,375-385,389-392,406-411,423-424,432,439,444,450,464-552,580-594,598,606-610,638-642,651,657-659,669,684-686,691-693,720,730,736,746,751-752,773-774,781,792-813,815,818-821,824-825,846-851,854,869-877                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
  formatUser.ts                    |   64.28 |       50 |     100 |     100 | 20-27                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  mdEscape.ts                      |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  messageLink.ts                   |    42.1 |    32.65 |     100 |   43.24 | 10,21-29,32,39-52,59,62,67                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
  problem.ts                       |    87.5 |    83.33 |     100 |    87.5 | 25                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  rateLimiter.ts                   |   74.57 |    50.94 |      80 |   78.18 | 32-45,53-54                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
  requestUploads.ts                |   33.33 |    15.78 |      20 |      36 | 32-35,39-43,48-50,54-57,64-69,80-82,86-87,96-114,134-148,155-156                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
  sanitizeError.ts                 |   66.66 |       50 |     100 |   66.66 | 8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
  sendCached.ts                    |      75 |       50 |     100 |      75 | 21-22                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  setTokenCookie.ts                |   85.71 |    57.14 |     100 |   85.71 | 19                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  shouldLog.ts                     |      20 |        0 |       0 |      25 | 13-16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  taskAlbumLink.ts                 |   65.62 |    32.43 |      80 |   65.62 | 23,37,41-45,56,64-73                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  taskButtons.ts                   |   76.19 |       44 |    62.5 |   76.19 | 55,78,101-125,137,157                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  taskStatusIcons.ts               |      80 |       50 |     100 |      80 | 19                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  telegramTopics.ts                |   90.32 |     87.5 |     100 |   90.32 | 27,52,56                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
  trace.ts                         |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  userLink.ts                      |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  validate.ts                      |   62.85 |    36.36 |      75 |   61.76 | 15,25,31-42,66-69                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
  verifyInitData.ts                |   86.95 |    77.77 |     100 |   86.95 | 44,57,61,84-85,99                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
-----------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Summary of all failing tests
FAIL tests/services/antivirus.test.ts (6.531 s)
  ‚óè –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∞–Ω—Ç–∏–≤–∏—Ä—É—Å ClamAV –∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Ñ–∞–π–ª

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/tmp/test.txt", 5000, 65536
    Received: "C:\\tmp\\test.txt", 5000, 65536

    Number of calls: 1

    [0m [90m 80 |[39m   expect(mockPing)[33m.[39mtoHaveBeenCalledWith([32m'127.0.0.1'[39m[33m,[39m [35m3310[39m[33m,[39m [35m5000[39m)[33m;[39m
     [90m 81 |[39m   expect(mockCreateScanner)[33m.[39mtoHaveBeenCalledWith([32m'127.0.0.1'[39m[33m,[39m [35m3310[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 82 |[39m   expect(mockScanFile)[33m.[39mtoHaveBeenCalledWith([32m'/tmp/test.txt'[39m[33m,[39m [35m5000[39m[33m,[39m [35m65536[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 83 |[39m   expect(mockIsCleanReply)[33m.[39mtoHaveBeenCalledWith([32m'stream: OK'[39m)[33m;[39m
     [90m 84 |[39m   expect(mockWriteLog)[33m.[39mtoHaveBeenCalledWith(
     [90m 85 |[39m     [32m'–ê–Ω—Ç–∏–≤–∏—Ä—É—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω'[39m[33m,[39m[0m

      at toHaveBeenCalledWith (tests/services/antivirus.test.ts:82:24)
      at Generator.call (tests/services/antivirus.test.ts:2:1)
      at Generator._invoke [as next] (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)

  ‚óè —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∑–∞—Ä–∞–∂—ë–Ω–Ω—ã–π —Ñ–∞–π–ª –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —á–µ—Ä–µ–∑ ClamAV

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "–û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–∏—Ä—É—Å", "warn", ObjectContaining {"path": "/tmp/eicar.txt", "reply": "stream: Eicar-Test-Signature FOUND"}
    Received
           1: "–ê–Ω—Ç–∏–≤–∏—Ä—É—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω", "info", {"host": "127.0.0.1", "port": 3310, "vendor": "ClamAV", "version": "ClamAV 1.0.0/27000/Mon Oct 06 12:00:00 2025"}
           2: "–û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–∏—Ä—É—Å", "warn", {"path": "C:\\tmp\\eicar.txt", "reply": "stream: Eicar-Test-Signature FOUND", "vendor": "ClamAV"}

    Number of calls: 2

    [0m [90m  98 |[39m
     [90m  99 |[39m   expect(result)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 100 |[39m   expect(mockWriteLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 101 |[39m     [32m'–û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–∏—Ä—É—Å'[39m[33m,[39m
     [90m 102 |[39m     [32m'warn'[39m[33m,[39m
     [90m 103 |[39m     expect[33m.[39mobjectContaining({[0m

      at toHaveBeenCalledWith (tests/services/antivirus.test.ts:100:24)
      at Generator.call (tests/services/antivirus.test.ts:2:1)
      at Generator._invoke [as next] (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)

  ‚óè –æ—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ClamAV –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –∏ –ø–∏—à–µ—Ç –ª–æ–≥

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è", "error", ObjectContaining {"error": "socket timeout", "path": "/tmp/file.txt"}
    Received
           1: "–ê–Ω—Ç–∏–≤–∏—Ä—É—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω", "info", {"host": "127.0.0.1", "port": 3310, "vendor": "ClamAV", "version": "ClamAV test build"}
           2: "–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è", "error", {"error": "socket timeout", "path": "C:\\tmp\\file.txt", "vendor": "ClamAV"}

    Number of calls: 2

    [0m [90m 156 |[39m   expect(result)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 157 |[39m   expect(mockIsCleanReply)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m   expect(mockWriteLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 159 |[39m     [32m'–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è'[39m[33m,[39m
     [90m 160 |[39m     [32m'error'[39m[33m,[39m
     [90m 161 |[39m     expect[33m.[39mobjectContaining({[0m

      at toHaveBeenCalledWith (tests/services/antivirus.test.ts:158:24)
      at Generator.call (tests/services/antivirus.test.ts:2:1)
      at Generator._invoke [as next] (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)
      at asyncGeneratorStep (tests/services/antivirus.test.ts:2:1)

FAIL tests/routeServiceUrl.test.ts (8.542 s)
  ‚óè table —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å

    expect(received).toBe(expected) // Object.is equality

    Expected: "/table"
    Received: "/route/table/v1/driving"

    [0m [90m 27 |[39m   [36mawait[39m table([32m'1,1;2,2'[39m[33m,[39m { annotations[33m:[39m [32m'distance'[39m })[33m;[39m
     [90m 28 |[39m   [36mconst[39m url [33m=[39m [36mnew[39m [33mURL[39m(global[33m.[39mfetch[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m0[39m])[33m;[39m
    [31m[1m>[22m[39m[90m 29 |[39m   expect(url[33m.[39mpathname)[33m.[39mtoBe([32m'/table'[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 30 |[39m   expect(url[33m.[39msearchParams[33m.[39m[36mget[39m([32m'points'[39m))[33m.[39mtoBe([32m'1,1;2,2'[39m)[33m;[39m
     [90m 31 |[39m   expect(url[33m.[39msearchParams[33m.[39m[36mget[39m([32m'annotations'[39m))[33m.[39mtoBe([32m'distance'[39m)[33m;[39m
     [90m 32 |[39m })[33m;[39m[0m

      at toBe (tests/routeServiceUrl.test.ts:29:24)
      at Generator.call (tests/routeServiceUrl.test.ts:2:1)
      at Generator._invoke [as next] (tests/routeServiceUrl.test.ts:2:1)
      at asyncGeneratorStep (tests/routeServiceUrl.test.ts:2:1)
      at asyncGeneratorStep (tests/routeServiceUrl.test.ts:2:1)

  ‚óè nearest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä point

    expect(received).toBe(expected) // Object.is equality

    Expected: "/nearest"
    Received: "/route/nearest/v1/driving"

    [0m [90m 38 |[39m   [36mawait[39m nearest([32m'1,1'[39m[33m,[39m { number[33m:[39m [35m1[39m })[33m;[39m
     [90m 39 |[39m   [36mconst[39m url [33m=[39m [36mnew[39m [33mURL[39m(global[33m.[39mfetch[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m0[39m])[33m;[39m
    [31m[1m>[22m[39m[90m 40 |[39m   expect(url[33m.[39mpathname)[33m.[39mtoBe([32m'/nearest'[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 41 |[39m   expect(url[33m.[39msearchParams[33m.[39m[36mget[39m([32m'point'[39m))[33m.[39mtoBe([32m'1,1'[39m)[33m;[39m
     [90m 42 |[39m   expect(url[33m.[39msearchParams[33m.[39m[36mget[39m([32m'number'[39m))[33m.[39mtoBe([32m'1'[39m)[33m;[39m
     [90m 43 |[39m })[33m;[39m[0m

      at toBe (tests/routeServiceUrl.test.ts:40:24)
      at Generator.call (tests/routeServiceUrl.test.ts:2:1)
      at Generator._invoke [as next] (tests/routeServiceUrl.test.ts:2:1)
      at asyncGeneratorStep (tests/routeServiceUrl.test.ts:2:1)
      at asyncGeneratorStep (tests/routeServiceUrl.test.ts:2:1)

FAIL tests/loginRouteFlow.test.ts (9.887 s)
  ‚óè –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ª–æ–≥–∏–Ω–∞ –∏ –∑–∞–ø—Ä–æ—Å–∞

    expect(received).toBeLessThan(expected)

    Expected: < 500
    Received:   500

    [0m [90m 134 |[39m     [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${verifyRes.body.token}`[39m)
     [90m 135 |[39m     [33m.[39msend({ start[33m:[39m { lat[33m:[39m [35m1[39m[33m,[39m lng[33m:[39m [35m2[39m }[33m,[39m end[33m:[39m { lat[33m:[39m [35m3[39m[33m,[39m lng[33m:[39m [35m4[39m } })[33m;[39m
    [31m[1m>[22m[39m[90m 136 |[39m   expect(res[33m.[39mstatus)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 137 |[39m })[33m;[39m
     [90m 138 |[39m[0m

      at toBeLessThan (tests/loginRouteFlow.test.ts:136:22)
      at Generator.call (tests/loginRouteFlow.test.ts:2:1)
      at Generator._invoke [as next] (tests/loginRouteFlow.test.ts:2:1)
      at asyncGeneratorStep (tests/loginRouteFlow.test.ts:2:1)
      at asyncGeneratorStep (tests/loginRouteFlow.test.ts:2:1)

FAIL tests/routeCsrf.test.ts (14.859 s)
  ‚óè POST /api/v1/route –ø—Ä–∏–Ω–∏–º–∞–µ—Ç CSRF-—Ç–æ–∫–µ–Ω

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m  95 |[39m })[33m;[39m
     [90m  96 |[39m
    [31m[1m>[22m[39m[90m  97 |[39m test([32m'POST /api/v1/route –ø—Ä–∏–Ω–∏–º–∞–µ—Ç CSRF-—Ç–æ–∫–µ–Ω'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m [31m[1m^[22m[39m
     [90m  98 |[39m   [36mconst[39m agent [33m=[39m request[33m.[39magent(baseUrl[33m,[39m { ca[33m:[39m cert })[33m;[39m
     [90m  99 |[39m   [36mconst[39m resCsrf [33m=[39m [36mawait[39m agent
     [90m 100 |[39m     [33m.[39m[36mget[39m([32m'/api/v1/csrf'[39m)[0m

      at Object.test (tests/routeCsrf.test.ts:97:1)

  ‚óè POST /api/v1/route –ø—Ä–∏–Ω–∏–º–∞–µ—Ç CSRF-—Ç–æ–∫–µ–Ω

    TypeError: (0 , _route.getRouteDistance) is not a function

    [0m [90m 47 |[39m   ])[33m,[39m
     [90m 48 |[39m   asyncHandler([36masync[39m (req[33m,[39m res) [33m=>[39m {
    [31m[1m>[22m[39m[90m 49 |[39m     [36mconst[39m data [33m=[39m [36mawait[39m getRouteDistance(req[33m.[39mbody[33m.[39mstart[33m,[39m req[33m.[39mbody[33m.[39mend)[33m;[39m
     [90m    |[39m                                        [31m[1m^[22m[39m
     [90m 50 |[39m     res[33m.[39mjson(data)[33m;[39m
     [90m 51 |[39m   })[33m,[39m
     [90m 52 |[39m )[33m;[39m[0m

      at src/routes/route.ts:49:40
      at Generator.call (src/routes/route.ts:2:1)
      at Generator._invoke [as next] (src/routes/route.ts:2:1)
      at asyncGeneratorStep (src/routes/route.ts:2:1)
      at asyncGeneratorStep (src/routes/route.ts:2:1)
      at _next (src/routes/route.ts:2:1)
      at src/routes/route.ts:2:1
      at apply (src/routes/route.ts:51:4)
      at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:95:5)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/route.js:149:13)
      at next (src/utils/validate.ts:51:32)
      at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/layer.js:95:5)
      at next (../../node_modules/.pnpm/express@4.21.2/node_modules/express/lib/router/route.js:149:13)
      at middleware (../../node_modules/.pnpm/express-validator@7.2.1/node_modules/express-validator/lib/middlewares/check.js:16:13)


Test Suites: 4 failed, 71 passed, 75 total
Tests:       7 failed, 223 passed, 230 total
Snapshots:   0 total
Time:        42.598 s, estimated 45 s
‚ÄâELIFECYCLE‚Äâ Test failed. See above for more details.
