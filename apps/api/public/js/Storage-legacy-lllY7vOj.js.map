{"version":3,"file":"Storage-legacy-lllY7vOj.js","sources":["../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/ArrowDownTrayIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/DocumentTextIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/DocumentIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/TrashIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/VideoCameraIcon.js","../../../web/src/components/Breadcrumbs.tsx","../../../web/src/columns/storageColumns.tsx","../../../web/src/services/storage.ts","../../../web/src/pages/Storage.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction ArrowDownTrayIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowDownTrayIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentTextIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentTextIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TrashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TrashIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction VideoCameraIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(VideoCameraIcon);\nexport default ForwardRef;","// Хлебные крошки навигации\r\nimport React from \"react\";\r\n\r\nexport interface Crumb {\r\n  label: string;\r\n  href?: string;\r\n}\r\n\r\nexport default function Breadcrumbs({ items }: { items: Crumb[] }) {\r\n  return (\r\n    <nav className=\"text-body mb-4 text-sm\">\r\n      <ol className=\"list-reset flex\">\r\n        {items.map((c, idx) => (\r\n          <React.Fragment key={idx}>\r\n            {idx > 0 && (\r\n              <li>\r\n                <span className=\"text-body px-2\">/</span>\r\n              </li>\r\n            )}\r\n            <li>\r\n              {c.href ? (\r\n                <a href={c.href} className=\"text-primary hover:underline\">\r\n                  {c.label}\r\n                </a>\r\n              ) : (\r\n                <span className=\"text-bodydark\">{c.label}</span>\r\n              )}\r\n            </li>\r\n          </React.Fragment>\r\n        ))}\r\n      </ol>\r\n    </nav>\r\n  );\r\n}\r\n","// Конфигурация колонок таблицы файлов хранилища\r\n// Основные модули: React, @tanstack/react-table, heroicons\r\nimport React from \"react\";\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport {\r\n  ArrowDownTrayIcon,\r\n  TrashIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport EmployeeLink from \"../components/EmployeeLink\";\r\nimport type { StoredFile } from \"../services/storage\";\r\n\r\nexport interface StorageRow extends StoredFile {\r\n  sizeLabel: string;\r\n  uploadedLabel: string;\r\n  userDisplay: string;\r\n  userHint: string;\r\n  taskDisplay: string;\r\n  taskParam?: string;\r\n  taskLink?: string;\r\n  onDownload: () => void;\r\n  onDelete: () => void;\r\n  selectedTaskId: string;\r\n  onTaskSelect: (taskId: string) => void;\r\n  onAttach: () => void;\r\n  attachLoading: boolean;\r\n  attachDisabled: boolean;\r\n}\r\n\r\ninterface Labels {\r\n  name: string;\r\n  user: string;\r\n  type: string;\r\n  size: string;\r\n  task: string;\r\n  uploaded: string;\r\n  download: string;\r\n  delete: string;\r\n  taskTitleHint: (title: string) => string;\r\n  attachTitle: string;\r\n  attachPlaceholder: string;\r\n  attachAction: string;\r\n  attachProcessing: string;\r\n  attachEmpty: string;\r\n  attachLoading: string;\r\n}\r\n\r\ntype TaskOption = { value: string; label: string };\r\n\r\nconst userBadgeClass = [\r\n  \"inline-flex max-w-full items-center gap-1\",\r\n  \"rounded-full border border-blue-200 bg-blue-50 px-2 py-0.5 text-xs font-semibold text-blue-700 shadow-xs\",\r\n  \"transition-colors duration-150 hover:bg-blue-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2\",\r\n  \"dark:border-blue-500/30 dark:bg-blue-500/10 dark:text-blue-100\",\r\n].join(\" \");\r\n\r\nexport default function createStorageColumns(\r\n  labels: Labels,\r\n  options: {\r\n    onTaskOpen?: (taskId: string) => void;\r\n    taskOptions?: TaskOption[];\r\n    tasksLoading?: boolean;\r\n  } = {},\r\n): ColumnDef<StorageRow>[] {\r\n  const handleTaskOpen = options.onTaskOpen;\r\n  const attachOptions = options.taskOptions ?? [];\r\n  const isTasksLoading = Boolean(options.tasksLoading);\r\n  return [\r\n    {\r\n      header: labels.name,\r\n      accessorKey: \"name\",\r\n      meta: { minWidth: \"12rem\", maxWidth: \"20rem\", renderAsBadges: false },\r\n      cell: ({ row }) => {\r\n        const file = row.original;\r\n        return (\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between gap-3\">\r\n              <span className=\"truncate font-medium\" title={file.name}>\r\n                {file.name}\r\n              </span>\r\n              <div className=\"flex flex-shrink-0 items-center gap-1\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(event) => {\r\n                    event.stopPropagation();\r\n                    file.onDownload();\r\n                  }}\r\n                  className=\"inline-flex items-center rounded border border-blue-200 bg-blue-50 px-2 py-1 text-xs text-blue-700 hover:bg-blue-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 dark:border-blue-500/30 dark:bg-blue-500/10 dark:text-blue-100\"\r\n                  aria-label={labels.download}\r\n                >\r\n                  <ArrowDownTrayIcon className=\"mr-1 size-4\" aria-hidden />\r\n                  {labels.download}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(event) => {\r\n                    event.stopPropagation();\r\n                    file.onDelete();\r\n                  }}\r\n                  className=\"inline-flex items-center rounded border border-red-200 bg-red-50 px-2 py-1 text-xs text-red-700 hover:bg-red-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500 dark:border-red-500/30 dark:bg-red-500/10 dark:text-red-100\"\r\n                  aria-label={labels.delete}\r\n                >\r\n                  <TrashIcon className=\"mr-1 size-4\" aria-hidden />\r\n                  {labels.delete}\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2 rounded-md border border-border/60 bg-muted/40 p-3 text-xs\">\r\n              <span className=\"block font-semibold uppercase tracking-wide text-muted-foreground\">\r\n                {labels.attachTitle}\r\n              </span>\r\n              <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center\">\r\n                <select\r\n                  value={file.selectedTaskId}\r\n                  onChange={(event) => {\r\n                    event.stopPropagation();\r\n                    file.onTaskSelect(event.target.value);\r\n                  }}\r\n                  disabled={file.attachLoading || isTasksLoading}\r\n                  className=\"h-9 min-w-[12rem] rounded-md border border-input bg-background px-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">{labels.attachPlaceholder}</option>\r\n                  {attachOptions.map((option) => (\r\n                    <option key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(event) => {\r\n                    event.stopPropagation();\r\n                    file.onAttach();\r\n                  }}\r\n                  className=\"inline-flex items-center justify-center rounded-md border border-blue-200 bg-blue-600 px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-blue-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:border-border disabled:bg-muted disabled:text-muted-foreground\"\r\n                  disabled={file.attachDisabled}\r\n                >\r\n                  {file.attachLoading ? labels.attachProcessing : labels.attachAction}\r\n                </button>\r\n              </div>\r\n              {isTasksLoading ? (\r\n                <span className=\"block text-muted-foreground\">{labels.attachLoading}</span>\r\n              ) : attachOptions.length === 0 ? (\r\n                <span className=\"block text-muted-foreground\">{labels.attachEmpty}</span>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      header: labels.user,\r\n      accessorKey: \"userDisplay\",\r\n      meta: { minWidth: \"8rem\", maxWidth: \"12rem\", renderAsBadges: false },\r\n      cell: ({ row }) => {\r\n        const file = row.original;\r\n        const label = file.userDisplay;\r\n        if (!file.userId) {\r\n          return (\r\n            <span className=\"truncate text-sm\" title={file.userHint}>\r\n              {label}\r\n            </span>\r\n          );\r\n        }\r\n        return (\r\n          <EmployeeLink\r\n            employeeId={file.userId}\r\n            stopPropagation\r\n            className={userBadgeClass}\r\n            title={file.userHint}\r\n          >\r\n            <span className=\"truncate\">{label}</span>\r\n          </EmployeeLink>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      header: labels.type,\r\n      accessorKey: \"type\",\r\n      meta: { minWidth: \"8rem\", maxWidth: \"10rem\" },\r\n      cell: ({ row }) => row.original.type || \"\",\r\n    },\r\n    {\r\n      header: labels.size,\r\n      accessorKey: \"sizeLabel\",\r\n      meta: { minWidth: \"6rem\", maxWidth: \"8rem\" },\r\n      cell: ({ row }) => row.original.sizeLabel,\r\n    },\r\n    {\r\n      header: labels.task,\r\n      accessorKey: \"taskDisplay\",\r\n      meta: { minWidth: \"10rem\", maxWidth: \"16rem\", renderAsBadges: false },\r\n      cell: ({ row }) => {\r\n        const file = row.original;\r\n        const content = (\r\n          <span className=\"block\">\r\n            {file.taskDisplay}\r\n            {file.taskTitle ? (\r\n              <span className=\"block text-xs text-muted-foreground\">\r\n                {file.taskTitle}\r\n              </span>\r\n            ) : null}\r\n          </span>\r\n        );\r\n        if (!file.taskParam) {\r\n          return content;\r\n        }\r\n        if (handleTaskOpen) {\r\n          return (\r\n            <button\r\n              type=\"button\"\r\n              onClick={(event) => {\r\n                event.stopPropagation();\r\n                handleTaskOpen(file.taskParam as string);\r\n              }}\r\n              className=\"inline-flex w-full flex-col items-start gap-0.5 rounded-lg border border-blue-200 bg-blue-50 px-2 py-1 text-left text-xs font-semibold text-blue-700 transition hover:bg-blue-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 dark:border-blue-500/30 dark:bg-blue-500/10 dark:text-blue-100\"\r\n              title={\r\n                file.taskTitle\r\n                  ? labels.taskTitleHint(file.taskTitle)\r\n                  : undefined\r\n              }\r\n            >\r\n              {content}\r\n            </button>\r\n          );\r\n        }\r\n        if (file.taskLink) {\r\n          return (\r\n            <a\r\n              href={file.taskLink}\r\n              className=\"inline-flex w-full flex-col items-start gap-0.5 rounded-lg border border-blue-200 bg-blue-50 px-2 py-1 text-left text-xs font-semibold text-blue-700 no-underline transition hover:bg-blue-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 dark:border-blue-500/30 dark:bg-blue-500/10 dark:text-blue-100\"\r\n              onClick={(event) => event.stopPropagation()}\r\n              title={\r\n                file.taskTitle\r\n                  ? labels.taskTitleHint(file.taskTitle)\r\n                  : undefined\r\n              }\r\n            >\r\n              {content}\r\n            </a>\r\n          );\r\n        }\r\n        return content;\r\n      },\r\n    },\r\n    {\r\n      header: labels.uploaded,\r\n      accessorKey: \"uploadedLabel\",\r\n      meta: { minWidth: \"10rem\", maxWidth: \"12rem\" },\r\n      cell: ({ row }) => row.original.uploadedLabel,\r\n    },\r\n  ];\r\n}\r\n","// Назначение: запросы к API хранения файлов\r\n// Основные модули: authFetch\r\nimport authFetch from \"../utils/authFetch\";\r\n\r\nexport interface StoredFile {\r\n  id: string;\r\n  path: string;\r\n  userId: number;\r\n  name: string;\r\n  type: string;\r\n  url: string;\r\n  thumbnailUrl?: string;\r\n  previewUrl?: string;\r\n  size?: number;\r\n  uploadedAt?: string;\r\n  taskId?: string | number | null;\r\n  taskNumber?: string | null;\r\n  taskTitle?: string | null;\r\n}\r\n\r\nexport interface StorageDiagnosticsReport {\r\n  generatedAt: string;\r\n  snapshot: {\r\n    totalFiles: number;\r\n    linkedFiles: number;\r\n    detachedFiles: number;\r\n  };\r\n  detachedFiles: Array<{\r\n    id: string;\r\n    name: string;\r\n    path: string;\r\n    size: number;\r\n    uploadedAt: string;\r\n    userId: number;\r\n  }>;\r\n}\r\n\r\nexport const fetchFiles = (params?: { userId?: number; type?: string }) => {\r\n  const qs = new URLSearchParams();\r\n  if (params?.userId) qs.set(\"userId\", String(params.userId));\r\n  if (params?.type) qs.set(\"type\", params.type);\r\n  const url = `/api/v1/storage${qs.toString() ? `?${qs}` : \"\"}`;\r\n  return authFetch(url).then((r) => (r.ok ? r.json() : [])) as Promise<\r\n    StoredFile[]\r\n  >;\r\n};\r\n\r\nexport const fetchFile = (id: string) =>\r\n  authFetch(`/api/v1/storage/${encodeURIComponent(id)}`).then((res) =>\r\n    res.ok ? (res.json() as Promise<StoredFile>) : Promise.reject(res),\r\n  );\r\n\r\nexport const removeFile = (id: string) =>\r\n  authFetch(`/api/v1/storage/${encodeURIComponent(id)}`, {\r\n    method: \"DELETE\",\r\n  });\r\n\r\nexport const runDiagnostics = async (): Promise<StorageDiagnosticsReport> => {\r\n  const response = await authFetch(`/api/v1/storage/diagnostics`);\r\n  if (!response.ok) {\r\n    throw new Error(\"diagnostics\");\r\n  }\r\n  return (await response.json()) as StorageDiagnosticsReport;\r\n};\r\n\r\nexport default { fetchFiles, fetchFile, removeFile, runDiagnostics };\r\n\r\n","// Страница управления файлами: таблица, фильтры и карточка файла\r\n// Основные модули: React, DataTable, heroicons, storageService, react-router\r\nimport React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport {\r\n  ArrowDownTrayIcon,\r\n  DocumentIcon,\r\n  DocumentTextIcon,\r\n  PhotoIcon,\r\n  VideoCameraIcon,\r\n  TrashIcon,\r\n} from \"@heroicons/react/24/outline\";\r\n\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport DataTable from \"../components/DataTable\";\r\nimport Modal from \"../components/Modal\";\r\nimport { Button } from \"../components/ui/button\";\r\nimport { Input } from \"../components/ui/input\";\r\nimport createStorageColumns, {\r\n  type StorageRow,\r\n} from \"../columns/storageColumns\";\r\nimport {\r\n  fetchFile,\r\n  fetchFiles,\r\n  removeFile,\r\n\r\n  runDiagnostics,\r\n  type StorageDiagnosticsReport,\r\n\r\n  type StoredFile,\r\n} from \"../services/storage\";\r\nimport { fetchUsers } from \"../services/users\";\r\nimport type { User } from \"../types/user\";\r\nimport authFetch from \"../utils/authFetch\";\r\nimport { showToast } from \"../utils/toast\";\r\nimport { PROJECT_TIMEZONE, PROJECT_TIMEZONE_LABEL } from \"shared\";\r\n\r\nconst PAGE_SIZE = 25;\r\n\r\nconst dateTimeFormatter = new Intl.DateTimeFormat(\"ru-RU\", {\r\n  day: \"2-digit\",\r\n  month: \"2-digit\",\r\n  year: \"numeric\",\r\n  hour: \"2-digit\",\r\n  minute: \"2-digit\",\r\n  hour12: false,\r\n  timeZone: PROJECT_TIMEZONE,\r\n});\r\n\r\ntype SortOption = \"uploaded_desc\" | \"uploaded_asc\" | \"size_desc\" | \"size_asc\";\r\n\r\ntype PreviewMode = \"image\" | \"video\" | \"pdf\" | \"text\";\r\n\r\ntype PreviewState = {\r\n  mode: PreviewMode;\r\n  inlineUrl: string;\r\n  mime: string;\r\n  loading?: boolean;\r\n  error?: string;\r\n  content?: string;\r\n};\r\n\r\ntype TaskOption = {\r\n  id: string;\r\n  label: string;\r\n  title: string;\r\n  number?: string | null;\r\n  changedAt: number;\r\n};\r\n\r\nconst previewIcons: Record<PreviewMode, React.ComponentType<{ className?: string }>> = {\r\n  image: PhotoIcon,\r\n  video: VideoCameraIcon,\r\n  pdf: DocumentIcon,\r\n  text: DocumentTextIcon,\r\n};\r\n\r\nfunction isTextLike(mime: string): boolean {\r\n  return (\r\n    mime.startsWith(\"text/\") ||\r\n    mime.includes(\"json\") ||\r\n    mime.endsWith(\"xml\") ||\r\n    mime === \"application/sql\"\r\n  );\r\n}\r\n\r\nfunction formatSize(bytes: number | undefined): string {\r\n  if (!bytes || Number.isNaN(bytes)) return \"—\";\r\n  if (bytes <= 0) return \"0 Б\";\r\n  const units = [\"Б\", \"КБ\", \"МБ\", \"ГБ\", \"ТБ\"];\r\n  const index = Math.min(Math.floor(Math.log(bytes) / Math.log(1024)), units.length - 1);\r\n  const value = bytes / Math.pow(1024, index);\r\n  return `${value.toFixed(value >= 10 || index === 0 ? 0 : 1)} ${units[index]}`;\r\n}\r\n\r\nfunction formatDate(value?: string): string {\r\n  if (!value) return \"—\";\r\n  const time = Date.parse(value);\r\n  if (Number.isNaN(time)) return \"—\";\r\n  const label = dateTimeFormatter.format(new Date(time)).replace(\", \", \" \");\r\n  return `${label} ${PROJECT_TIMEZONE_LABEL}`;\r\n}\r\n\r\nexport default function StoragePage() {\r\n  const { t } = useTranslation();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [files, setFiles] = React.useState<StoredFile[]>([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [usersById, setUsersById] = React.useState<Record<number, User>>({});\r\n  const [search, setSearch] = React.useState(\"\");\r\n  const [sort, setSort] = React.useState<SortOption>(\"uploaded_desc\");\r\n  const [pageIndex, setPageIndex] = React.useState(0);\r\n  const [selectedId, setSelectedId] = React.useState<string | null>(\r\n    searchParams.get(\"file\"),\r\n  );\r\n  const [selectedFile, setSelectedFile] = React.useState<StoredFile | null>(null);\r\n  const [detailsLoading, setDetailsLoading] = React.useState(false);\r\n  const [preview, setPreview] = React.useState<PreviewState | null>(null);\r\n  const [tasksLoading, setTasksLoading] = React.useState(false);\r\n  const [taskOptions, setTaskOptions] = React.useState<TaskOption[]>([]);\r\n  const [taskMetaById, setTaskMetaById] = React.useState<\r\n    Record<string, TaskOption>\r\n  >({});\r\n  const [selectionByFile, setSelectionByFile] = React.useState<\r\n    Record<string, string>\r\n  >({});\r\n  const [attachLoadingId, setAttachLoadingId] = React.useState<string | null>(\r\n    null,\r\n  );\r\n\r\n  const [diagnostics, setDiagnostics] = React.useState<\r\n    StorageDiagnosticsReport | null\r\n  >(null);\r\n  const [diagnosticsLoading, setDiagnosticsLoading] = React.useState(false);\r\n  const [diagnosticsError, setDiagnosticsError] = React.useState<string | null>(\r\n    null,\r\n  );\r\n\r\n  const attachFileToTask = React.useCallback(\r\n    async (fileId: string, taskId: string): Promise<void> => {\r\n      const response = await authFetch(\r\n        `/api/v1/files/${encodeURIComponent(fileId)}/attach`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ taskId }),\r\n        },\r\n      );\r\n      if (!response.ok) {\r\n        const error = new Error(\"attach\");\r\n        (error as { status?: number }).status = response.status;\r\n        throw error;\r\n      }\r\n      await response.json().catch(() => ({}));\r\n    },\r\n    [],\r\n  );\r\n\r\n  const loadFiles = React.useCallback(() => {\r\n    setLoading(true);\r\n    return fetchFiles()\r\n      .then((list) => {\r\n        setFiles(Array.isArray(list) ? list : []);\r\n      })\r\n      .catch(() => {\r\n        showToast(t(\"storage.loadError\"), \"error\");\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [t]);\r\n\r\n  const detachedCount = React.useMemo(\r\n    () => files.filter((file) => !file.taskId).length,\r\n    [files],\r\n  );\r\n\r\n  const handleDiagnostics = React.useCallback(() => {\r\n    setDiagnosticsLoading(true);\r\n    setDiagnosticsError(null);\r\n    return runDiagnostics()\r\n      .then((report) => {\r\n        setDiagnostics(report);\r\n        showToast(t(\"storage.diagnostics.success\"), \"success\");\r\n        return loadFiles();\r\n      })\r\n      .catch(() => {\r\n        setDiagnosticsError(t(\"storage.diagnostics.error\"));\r\n        showToast(t(\"storage.diagnostics.error\"), \"error\");\r\n      })\r\n      .finally(() => {\r\n        setDiagnosticsLoading(false);\r\n      });\r\n  }, [loadFiles, t]);\r\n\r\n  React.useEffect(() => {\r\n    void loadFiles();\r\n  }, [loadFiles]);\r\n\r\n  React.useEffect(() => {\r\n    let active = true;\r\n    fetchUsers()\r\n      .then((list) => {\r\n        if (!active) return;\r\n        const map: Record<number, User> = {};\r\n        list.forEach((user) => {\r\n          if (typeof user.telegram_id === \"number\") {\r\n            map[user.telegram_id] = user;\r\n          }\r\n        });\r\n        setUsersById(map);\r\n      })\r\n      .catch(() => {\r\n        showToast(t(\"storage.usersLoadError\"), \"error\");\r\n      });\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [t]);\r\n\r\n  React.useEffect(() => {\r\n    let cancelled = false;\r\n    setTasksLoading(true);\r\n    authFetch(\"/api/v1/tasks/mentioned\")\r\n      .then((res) => (res.ok ? res.json() : []))\r\n      .then((data) => {\r\n        if (cancelled) return;\r\n        const list = Array.isArray(data) ? (data as Record<string, unknown>[]) : [];\r\n        const normalized = list\r\n          .map((task): TaskOption | null => {\r\n            const rawId =\r\n              typeof (task as { _id?: unknown })._id === \"string\"\r\n                ? ((task as { _id: string })._id ?? \"\").trim()\r\n                : typeof (task as { id?: unknown }).id === \"string\"\r\n                  ? ((task as { id: string }).id ?? \"\").trim()\r\n                  : \"\";\r\n            if (!rawId) {\r\n              return null;\r\n            }\r\n            const rawTitle = (task as { title?: unknown }).title;\r\n            const title =\r\n              typeof rawTitle === \"string\" && rawTitle.trim().length > 0\r\n                ? rawTitle.trim()\r\n                : t(\"storage.attach.untitled\");\r\n            const rawNumber = (task as { task_number?: unknown }).task_number;\r\n            const number =\r\n              typeof rawNumber === \"string\" && rawNumber.trim().length > 0\r\n                ? rawNumber.trim()\r\n                : null;\r\n            const timestamps = [\r\n              (task as { changed_at?: unknown }).changed_at,\r\n              (task as { changedAt?: unknown }).changedAt,\r\n              (task as { updatedAt?: unknown }).updatedAt,\r\n              (task as { createdAt?: unknown }).createdAt,\r\n              (task as { submission_date?: unknown }).submission_date,\r\n            ];\r\n            const changedAt = timestamps\r\n              .map((value) => {\r\n                if (value instanceof Date) {\r\n                  const time = value.getTime();\r\n                  return Number.isNaN(time) ? 0 : time;\r\n                }\r\n                if (typeof value === \"string\") {\r\n                  const time = Date.parse(value);\r\n                  return Number.isNaN(time) ? 0 : time;\r\n                }\r\n                if (typeof value === \"number\" && Number.isFinite(value)) {\r\n                  return value;\r\n                }\r\n                return 0;\r\n              })\r\n              .reduce((max, current) => (current > max ? current : max), 0);\r\n            const shortId = rawId.slice(-6) || rawId;\r\n            const label = number\r\n              ? t(\"storage.attach.optionNumber\", { number, title })\r\n              : t(\"storage.attach.optionId\", { id: shortId, title });\r\n            return { id: rawId, label, title, number, changedAt };\r\n          })\r\n          .filter((item): item is TaskOption => Boolean(item));\r\n        normalized.sort((a, b) => b.changedAt - a.changedAt);\r\n        const limited = normalized.slice(0, 6);\r\n        const meta = limited.reduce<Record<string, TaskOption>>((acc, option) => {\r\n          acc[option.id] = option;\r\n          return acc;\r\n        }, {});\r\n        setTaskOptions(limited);\r\n        setTaskMetaById(meta);\r\n      })\r\n      .catch(() => {\r\n        if (cancelled) return;\r\n        setTaskOptions([]);\r\n        setTaskMetaById({});\r\n        showToast(t(\"storage.attach.tasksLoadError\"), \"error\");\r\n      })\r\n      .finally(() => {\r\n        if (!cancelled) {\r\n          setTasksLoading(false);\r\n        }\r\n      });\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [t]);\r\n\r\n  React.useEffect(() => {\r\n    if (!taskOptions.length) {\r\n      setSelectionByFile((current) =>\r\n        Object.keys(current).length ? ({} as Record<string, string>) : current,\r\n      );\r\n      return;\r\n    }\r\n    const validIds = new Set(taskOptions.map((option) => option.id));\r\n    setSelectionByFile((current) => {\r\n      let changed = false;\r\n      const next: Record<string, string> = {};\r\n      Object.entries(current).forEach(([fileId, value]) => {\r\n        if (value && validIds.has(value)) {\r\n          next[fileId] = value;\r\n        } else if (value) {\r\n          changed = true;\r\n        }\r\n      });\r\n      return changed ? next : current;\r\n    });\r\n  }, [taskOptions]);\r\n\r\n  React.useEffect(() => {\r\n    const queryId = searchParams.get(\"file\");\r\n    setSelectedId(queryId);\r\n  }, [searchParams]);\r\n\r\n  React.useEffect(() => {\r\n    if (!selectedId) {\r\n      setSelectedFile(null);\r\n      setDetailsLoading(false);\r\n      setPreview(null);\r\n      return;\r\n    }\r\n    const existing = files.find((file) => file.id === selectedId);\r\n    if (existing) {\r\n      setSelectedFile(existing);\r\n      return;\r\n    }\r\n    setDetailsLoading(true);\r\n    fetchFile(selectedId)\r\n      .then((file) => {\r\n        setSelectedFile(file);\r\n      })\r\n      .catch(() => {\r\n        showToast(t(\"storage.loadError\"), \"error\");\r\n        setSelectedFile(null);\r\n      })\r\n      .finally(() => setDetailsLoading(false));\r\n  }, [selectedId, files, t]);\r\n\r\n  React.useEffect(() => {\r\n    if (!selectedFile) {\r\n      setPreview(null);\r\n      return;\r\n    }\r\n    const mime = selectedFile.type || \"application/octet-stream\";\r\n    const inlineUrl = selectedFile.previewUrl || `${selectedFile.url}?mode=inline`;\r\n    if (mime.startsWith(\"image/\")) {\r\n      setPreview({ mode: \"image\", inlineUrl, mime });\r\n      return;\r\n    }\r\n    if (mime.startsWith(\"video/\")) {\r\n      setPreview({ mode: \"video\", inlineUrl, mime });\r\n      return;\r\n    }\r\n    if (mime === \"application/pdf\") {\r\n      setPreview({ mode: \"pdf\", inlineUrl, mime });\r\n      return;\r\n    }\r\n    if (isTextLike(mime)) {\r\n      let cancelled = false;\r\n      setPreview({ mode: \"text\", inlineUrl, mime, loading: true });\r\n      authFetch(inlineUrl)\r\n        .then((res) => {\r\n          if (!res.ok) throw new Error(\"preview\");\r\n          return res.text();\r\n        })\r\n        .then((content) => {\r\n          if (cancelled) return;\r\n          setPreview({ mode: \"text\", inlineUrl, mime, content });\r\n        })\r\n        .catch(() => {\r\n          if (cancelled) return;\r\n          setPreview({ mode: \"text\", inlineUrl, mime, error: t(\"storage.previewError\") });\r\n        });\r\n      return () => {\r\n        cancelled = true;\r\n      };\r\n    }\r\n    setPreview(null);\r\n    // неподдерживаемые типы доступны только для скачивания\r\n  }, [selectedFile, t]);\r\n\r\n  const filteredFiles = React.useMemo(() => {\r\n    const query = search.trim().toLowerCase();\r\n    return files.filter((file) =>\r\n      query ? file.name.toLowerCase().includes(query) : true,\r\n    );\r\n  }, [files, search]);\r\n\r\n  const sortedFiles = React.useMemo(() => {\r\n    const list = [...filteredFiles];\r\n    list.sort((a, b) => {\r\n      switch (sort) {\r\n        case \"uploaded_asc\": {\r\n          const left = Date.parse(a.uploadedAt || \"\");\r\n          const right = Date.parse(b.uploadedAt || \"\");\r\n          return (left || 0) - (right || 0);\r\n        }\r\n        case \"uploaded_desc\": {\r\n          const left = Date.parse(a.uploadedAt || \"\");\r\n          const right = Date.parse(b.uploadedAt || \"\");\r\n          return (right || 0) - (left || 0);\r\n        }\r\n        case \"size_asc\":\r\n          return (a.size || 0) - (b.size || 0);\r\n        case \"size_desc\":\r\n          return (b.size || 0) - (a.size || 0);\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n    return list;\r\n  }, [filteredFiles, sort]);\r\n\r\n  const pagedFiles = React.useMemo(() => {\r\n    const start = pageIndex * PAGE_SIZE;\r\n    return sortedFiles.slice(start, start + PAGE_SIZE);\r\n  }, [sortedFiles, pageIndex]);\r\n\r\n  const taskOptionsForSelect = React.useMemo(\r\n    () => taskOptions.map((option) => ({ value: option.id, label: option.label })),\r\n    [taskOptions],\r\n  );\r\n\r\n  const handleDownload = React.useCallback(\r\n    (file: StoredFile) => {\r\n      if (!file.url) return;\r\n      window.open(file.url, \"_blank\", \"noopener,noreferrer\");\r\n      showToast(t(\"storage.openedInNewTab\"), \"success\");\r\n    },\r\n    [t],\r\n  );\r\n\r\n  const handleDelete = React.useCallback(\r\n    (file: StoredFile) => {\r\n      const confirmed = window.confirm(\r\n        t(\"storage.deleteConfirm\", { name: file.name }),\r\n      );\r\n      if (!confirmed) return;\r\n      removeFile(file.id)\r\n        .then((res) => {\r\n          if (!res.ok) throw new Error(\"delete\");\r\n          showToast(t(\"storage.deleteSuccess\"), \"success\");\r\n          setFiles((current) => current.filter((candidate) => candidate.id !== file.id));\r\n          if (selectedId === file.id) {\r\n            const next = new URLSearchParams(searchParams.toString());\r\n            next.delete(\"file\");\r\n            setSearchParams(next, { replace: true });\r\n          }\r\n        })\r\n        .catch(() => {\r\n          showToast(t(\"storage.deleteError\"), \"error\");\r\n        });\r\n    },\r\n    [searchParams, selectedId, setSearchParams, t],\r\n  );\r\n\r\n  const handleAttach = React.useCallback(\r\n    (file: StoredFile) => {\r\n      const selectedTaskId = selectionByFile[file.id];\r\n      if (!selectedTaskId) {\r\n        return;\r\n      }\r\n      if (!taskOptions.some((option) => option.id === selectedTaskId)) {\r\n        return;\r\n      }\r\n      setAttachLoadingId(file.id);\r\n      attachFileToTask(file.id, selectedTaskId)\r\n        .then(() => {\r\n          const meta = taskMetaById[selectedTaskId];\r\n          setFiles((current) =>\r\n            current.map((candidate) =>\r\n              candidate.id === file.id\r\n                ? {\r\n                    ...candidate,\r\n                    taskId: selectedTaskId,\r\n                    taskNumber: meta?.number ?? candidate.taskNumber ?? null,\r\n                    taskTitle: meta?.title ?? candidate.taskTitle ?? null,\r\n                  }\r\n                : candidate,\r\n            ),\r\n          );\r\n          if (selectedId === file.id) {\r\n            setSelectedFile((current) =>\r\n              current\r\n                ? {\r\n                    ...current,\r\n                    taskId: selectedTaskId,\r\n                    taskNumber: meta?.number ?? current.taskNumber ?? null,\r\n                    taskTitle: meta?.title ?? current.taskTitle ?? null,\r\n                  }\r\n                : current,\r\n            );\r\n          }\r\n          showToast(t(\"storage.attach.success\"), \"success\");\r\n        })\r\n        .catch((error) => {\r\n          const status = (error as { status?: number }).status;\r\n          if (status === 403) {\r\n            showToast(t(\"storage.attach.forbidden\"), \"error\");\r\n          } else {\r\n            showToast(t(\"storage.attach.error\"), \"error\");\r\n          }\r\n        })\r\n        .finally(() => {\r\n          setAttachLoadingId((current) => (current === file.id ? null : current));\r\n        });\r\n    },\r\n    [\r\n      attachFileToTask,\r\n      selectionByFile,\r\n      taskOptions,\r\n      taskMetaById,\r\n      setFiles,\r\n      selectedId,\r\n      setSelectedFile,\r\n      t,\r\n    ],\r\n  );\r\n\r\n  const toRow = React.useCallback(\r\n    (file: StoredFile): StorageRow => {\r\n      const hasTaskId = file.taskId != null && file.taskId !== \"\";\r\n      const normalizedTaskId = hasTaskId ? String(file.taskId) : undefined;\r\n      const normalizedTitle =\r\n        typeof file.taskTitle === \"string\" && file.taskTitle.trim()\r\n          ? file.taskTitle.trim()\r\n          : undefined;\r\n      const identifier = hasTaskId\r\n        ? file.taskNumber && file.taskNumber !== \"\"\r\n          ? t(\"storage.taskNumberLabel\", { number: file.taskNumber })\r\n          : t(\"storage.taskLabel\", { id: normalizedTaskId })\r\n        : t(\"storage.taskMissing\");\r\n      const user =\r\n        typeof file.userId === \"number\" ? usersById[file.userId] : undefined;\r\n      const displayName =\r\n        (typeof user?.name === \"string\" && user.name.trim()) ||\r\n        (typeof user?.telegram_username === \"string\" &&\r\n          user.telegram_username.trim()) ||\r\n        (typeof user?.username === \"string\" && user.username.trim()) ||\r\n        t(\"storage.userLabel\", { id: file.userId });\r\n      const userHint =\r\n        typeof file.userId === \"number\"\r\n          ? t(\"storage.details.userId\", { id: file.userId })\r\n          : t(\"storage.details.userId\", { id: \"—\" });\r\n      let taskLink: string | undefined;\r\n      if (normalizedTaskId) {\r\n        const paramsWithTask = new URLSearchParams(searchParams.toString());\r\n        paramsWithTask.set(\"task\", normalizedTaskId);\r\n        taskLink = `?${paramsWithTask.toString()}`;\r\n      }\r\n      const selectedCandidate = selectionByFile[file.id] ?? \"\";\r\n      const hasValidSelection = taskOptions.some(\r\n        (option) => option.id === selectedCandidate,\r\n      );\r\n      const selectedTaskId = hasValidSelection ? selectedCandidate : \"\";\r\n      return {\r\n        ...file,\r\n        taskTitle: normalizedTitle,\r\n        sizeLabel: formatSize(file.size),\r\n        uploadedLabel: formatDate(file.uploadedAt),\r\n        userDisplay: displayName,\r\n        userHint,\r\n        taskDisplay: identifier,\r\n        taskParam: normalizedTaskId,\r\n        taskLink,\r\n        onDownload: () => handleDownload(file),\r\n        onDelete: () => handleDelete(file),\r\n        selectedTaskId,\r\n        onTaskSelect: (taskId: string) => {\r\n          setSelectionByFile((current) => ({ ...current, [file.id]: taskId }));\r\n        },\r\n        onAttach: () => handleAttach(file),\r\n        attachLoading: attachLoadingId === file.id,\r\n        attachDisabled:\r\n          attachLoadingId === file.id ||\r\n          tasksLoading ||\r\n          !taskOptions.length ||\r\n          !hasValidSelection,\r\n      };\r\n    },\r\n    [\r\n      attachLoadingId,\r\n      handleAttach,\r\n      handleDelete,\r\n      handleDownload,\r\n      searchParams,\r\n      selectionByFile,\r\n      setSelectionByFile,\r\n      t,\r\n      taskOptions,\r\n      tasksLoading,\r\n      usersById,\r\n    ],\r\n  );\r\n\r\n  const rows = React.useMemo<StorageRow[]>(\r\n    () => pagedFiles.map((file) => toRow(file)),\r\n    [pagedFiles, toRow],\r\n  );\r\n\r\n  const pageCount = React.useMemo(() => {\r\n    if (!sortedFiles.length) return 1;\r\n    return Math.max(1, Math.ceil(sortedFiles.length / PAGE_SIZE));\r\n  }, [sortedFiles.length]);\r\n\r\n  const openTaskDialog = React.useCallback(\r\n    (taskId?: string) => {\r\n      if (!taskId) return;\r\n      const next = new URLSearchParams(searchParams.toString());\r\n      next.set(\"task\", taskId);\r\n      setSearchParams(next, { replace: false });\r\n    },\r\n    [searchParams, setSearchParams],\r\n  );\r\n\r\n  const closeModal = React.useCallback(() => {\r\n    const next = new URLSearchParams(searchParams.toString());\r\n    next.delete(\"file\");\r\n    setSearchParams(next, { replace: true });\r\n  }, [searchParams, setSearchParams]);\r\n\r\n  const selectedRow = React.useMemo(\r\n    () => (selectedFile ? toRow(selectedFile) : null),\r\n    [selectedFile, toRow],\r\n  );\r\n\r\n  const details = React.useMemo(() => {\r\n    if (!selectedRow) return [];\r\n    const empty = t(\"storage.details.empty\");\r\n    return [\r\n      {\r\n        key: \"task\",\r\n        label: t(\"storage.details.task\"),\r\n        value: selectedRow.taskDisplay,\r\n      },\r\n      {\r\n        key: \"taskNumber\",\r\n        label: t(\"storage.details.taskNumber\"),\r\n        value: selectedRow.taskNumber || empty,\r\n      },\r\n      {\r\n        key: \"taskId\",\r\n        label: t(\"storage.details.taskId\"),\r\n        value: selectedRow.taskId || empty,\r\n      },\r\n      {\r\n        key: \"taskTitle\",\r\n        label: t(\"storage.details.taskTitle\"),\r\n        value: selectedRow.taskTitle || empty,\r\n      },\r\n      {\r\n        key: \"user\",\r\n        label: t(\"storage.details.user\"),\r\n        value: (\r\n          <span className=\"flex flex-col\">\r\n            {selectedRow.userDisplay}\r\n            <span className=\"text-xs text-muted-foreground\">\r\n              {selectedRow.userHint}\r\n            </span>\r\n          </span>\r\n        ),\r\n      },\r\n      {\r\n        key: \"uploaded\",\r\n        label: t(\"storage.details.uploaded\"),\r\n        value: selectedRow.uploadedLabel || empty,\r\n      },\r\n      {\r\n        key: \"size\",\r\n        label: t(\"storage.details.size\"),\r\n        value: selectedRow.sizeLabel || empty,\r\n      },\r\n      {\r\n        key: \"type\",\r\n        label: t(\"storage.details.type\"),\r\n        value: selectedRow.type || empty,\r\n      },\r\n      {\r\n        key: \"path\",\r\n        label: t(\"storage.details.path\"),\r\n        value: <code className=\"break-all text-xs\">{selectedRow.path}</code>,\r\n      },\r\n    ];\r\n  }, [selectedRow, t]);\r\n\r\n  const previewIcon = preview ? previewIcons[preview.mode] : null;\r\n  const diagnosticsTimestamp = React.useMemo(\r\n    () => (diagnostics ? formatDate(diagnostics.generatedAt) : null),\r\n    [diagnostics],\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Breadcrumbs items={[{ label: t(\"storage.title\") }]} />\r\n      <section className=\"rounded border border-amber-300 bg-amber-50 p-5 shadow-sm\">\r\n        <div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\r\n          <div className=\"space-y-2\">\r\n            <h2 className=\"text-base font-semibold text-amber-900\">\r\n              {t(\"storage.diagnostics.title\")}\r\n            </h2>\r\n            <p className=\"text-sm text-amber-800\">\r\n              {t(\"storage.diagnostics.description\")}\r\n            </p>\r\n            <p className=\"text-sm text-amber-900\">\r\n              {detachedCount === 0\r\n                ? t(\"storage.sync.ok\", { count: files.length })\r\n                : t(\"storage.sync.warning\", { count: detachedCount })}\r\n            </p>\r\n          </div>\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            className=\"self-start border-amber-400 text-amber-900 hover:bg-amber-100\"\r\n            disabled={diagnosticsLoading}\r\n            onClick={() => {\r\n              void handleDiagnostics();\r\n            }}\r\n          >\r\n            {diagnosticsLoading\r\n              ? t(\"storage.diagnostics.progress\")\r\n              : t(\"storage.diagnostics.cta\")}\r\n          </Button>\r\n        </div>\r\n        {diagnosticsError ? (\r\n          <p className=\"mt-3 text-sm text-red-700\">{diagnosticsError}</p>\r\n        ) : null}\r\n        {diagnostics ? (\r\n          <div className=\"mt-3 space-y-1 text-sm text-amber-900\">\r\n            <p>\r\n              {t(\"storage.diagnostics.lastRun\", {\r\n                date: diagnosticsTimestamp ?? \"—\",\r\n              })}\r\n            </p>\r\n            <p>\r\n              {t(\"storage.diagnostics.snapshot\", {\r\n                total: diagnostics.snapshot.totalFiles,\r\n                linked: diagnostics.snapshot.linkedFiles,\r\n                detached: diagnostics.snapshot.detachedFiles,\r\n              })}\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <p className=\"mt-3 text-sm text-amber-800\">\r\n            {t(\"storage.diagnostics.placeholder\")}\r\n          </p>\r\n        )}\r\n      </section>\r\n      <section className=\"space-y-5 rounded border border-border bg-card p-5 shadow-sm\">\r\n        <header className=\"flex flex-col gap-4 border-b border-border pb-4\">\r\n          <div className=\"flex flex-col gap-1\">\r\n            <h2 className=\"text-lg font-semibold text-foreground\">{t(\"storage.title\")}</h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {t(\"storage.total\", { count: filteredFiles.length })}\r\n            </p>\r\n          </div>\r\n          <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              <Input\r\n                value={search}\r\n                onChange={(event) => {\r\n                  setSearch(event.target.value);\r\n                  setPageIndex(0);\r\n                }}\r\n                placeholder={t(\"storage.searchPlaceholder\") ?? \"\"}\r\n                className=\"max-w-xs\"\r\n              />\r\n              <select\r\n                value={sort}\r\n                onChange={(event) => {\r\n                  setSort(event.target.value as SortOption);\r\n                  setPageIndex(0);\r\n                }}\r\n                className=\"h-9 rounded-md border border-input bg-background px-2 text-sm\"\r\n              >\r\n                <option value=\"uploaded_desc\">{t(\"storage.sort.uploadedDesc\")}</option>\r\n                <option value=\"uploaded_asc\">{t(\"storage.sort.uploadedAsc\")}</option>\r\n                <option value=\"size_desc\">{t(\"storage.sort.sizeDesc\")}</option>\r\n                <option value=\"size_asc\">{t(\"storage.sort.sizeAsc\")}</option>\r\n              </select>\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"secondary\"\r\n                onClick={() => void loadFiles()}\r\n                disabled={loading}\r\n              >\r\n                {t(\"storage.refresh\")}\r\n              </Button>\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground md:text-sm\">\r\n              {loading ? t(\"loading\") : null}\r\n            </div>\r\n          </div>\r\n        </header>\r\n        <DataTable<StorageRow>\r\n          columns={createStorageColumns(\r\n            {\r\n              name: t(\"storage.columns.name\"),\r\n              user: t(\"storage.columns.user\"),\r\n              type: t(\"storage.columns.type\"),\r\n              size: t(\"storage.columns.size\"),\r\n              task: t(\"storage.columns.task\"),\r\n              uploaded: t(\"storage.columns.uploaded\"),\r\n              download: t(\"storage.download\"),\r\n              delete: t(\"storage.delete\"),\r\n              taskTitleHint: (title: string) => t(\"storage.taskTitleHint\", { title }),\r\n              attachTitle: t(\"storage.attach.title\"),\r\n              attachPlaceholder: t(\"storage.attach.placeholder\"),\r\n              attachAction: t(\"storage.attach.button\"),\r\n              attachProcessing: t(\"storage.attach.processing\"),\r\n              attachEmpty: t(\"storage.attach.empty\"),\r\n              attachLoading: t(\"storage.attach.loading\"),\r\n            },\r\n            {\r\n              onTaskOpen: openTaskDialog,\r\n              taskOptions: taskOptionsForSelect,\r\n              tasksLoading,\r\n            },\r\n          )}\r\n          data={rows}\r\n          pageIndex={pageIndex}\r\n          pageSize={PAGE_SIZE}\r\n          pageCount={pageCount}\r\n          onPageChange={setPageIndex}\r\n          showGlobalSearch={false}\r\n          showFilters={false}\r\n          wrapCellsAsBadges\r\n          onRowClick={(row) => {\r\n            const next = new URLSearchParams(searchParams.toString());\r\n            next.set(\"file\", row.id);\r\n            setSearchParams(next, { replace: false });\r\n          }}\r\n        />\r\n      </section>\r\n      <Modal open={Boolean(selectedId)} onClose={closeModal}>\r\n        {detailsLoading ? (\r\n          <div className=\"p-4 text-center text-sm text-muted-foreground\">\r\n            {t(\"loading\")}\r\n          </div>\r\n        ) : selectedRow ? (\r\n          <div className=\"space-y-4\">\r\n            <header className=\"flex items-start justify-between gap-4\">\r\n              <div>\r\n                <h2 className=\"text-lg font-semibold\">{selectedRow.name}</h2>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {selectedRow.type || t(\"storage.details.type\")}\r\n                </p>\r\n              </div>\r\n              <div className=\"flex flex-wrap items-center gap-2\">\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={() => handleDownload(selectedRow)}\r\n                >\r\n                  <ArrowDownTrayIcon className=\"mr-2 size-4\" />\r\n                  {t(\"storage.download\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"destructive\"\r\n                  onClick={() => handleDelete(selectedRow)}\r\n                >\r\n                  <TrashIcon className=\"mr-2 size-4\" />\r\n                  {t(\"storage.delete\")}\r\n                </Button>\r\n              </div>\r\n            </header>\r\n            {preview ? (\r\n              <div className=\"space-y-2 rounded-lg border border-dashed border-border p-4\">\r\n                <div className=\"flex items-center gap-2 text-sm font-semibold\">\r\n                  {previewIcon ? <previewIcon className=\"size-5\" /> : null}\r\n                  <span>{t(\"storage.previewTitle\")}</span>\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    {t(\"storage.mimeLabel\", { mime: preview.mime })}\r\n                  </span>\r\n                </div>\r\n                {preview.mode === \"image\" ? (\r\n                  <img\r\n                    src={preview.inlineUrl}\r\n                    alt={selectedRow.name}\r\n                    className=\"max-h-[300px] w-full rounded-md object-contain\"\r\n                  />\r\n                ) : preview.mode === \"video\" ? (\r\n                  <video\r\n                    controls\r\n                    src={preview.inlineUrl}\r\n                    className=\"max-h-[320px] w-full rounded-md\"\r\n                  />\r\n                ) : preview.mode === \"pdf\" ? (\r\n                  <iframe\r\n                    title={selectedRow.name}\r\n                    src={preview.inlineUrl}\r\n                    className=\"h-[320px] w-full rounded-md\"\r\n                  />\r\n            ) : preview.mode === \"text\" ? (\r\n              preview.loading ? (\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {t(\"storage.previewLoading\")}\r\n                </div>\r\n              ) : preview.error ? (\r\n                <div className=\"text-sm text-red-500\">{preview.error}</div>\r\n              ) : (\r\n                <pre className=\"max-h-[320px] overflow-auto rounded bg-muted p-3 text-xs\">\r\n                  {preview.content}\r\n                </pre>\r\n              )\r\n            ) : null}\r\n          </div>\r\n        ) : null}\r\n        <section className=\"space-y-3\">\r\n          <h3 className=\"text-sm font-semibold\">{t(\"storage.attach.title\")}</h3>\r\n          <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center\">\r\n            <select\r\n              value={selectedRow.selectedTaskId}\r\n              onChange={(event) => selectedRow.onTaskSelect(event.target.value)}\r\n              disabled={selectedRow.attachLoading || tasksLoading}\r\n              className=\"h-9 min-w-[12rem] rounded-md border border-input bg-background px-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500\"\r\n            >\r\n              <option value=\"\">{t(\"storage.attach.placeholder\")}</option>\r\n              {taskOptionsForSelect.map((option) => (\r\n                <option key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => selectedRow.onAttach()}\r\n              disabled={selectedRow.attachDisabled}\r\n            >\r\n              {selectedRow.attachLoading\r\n                ? t(\"storage.attach.processing\")\r\n                : t(\"storage.attach.button\")}\r\n            </Button>\r\n          </div>\r\n          {tasksLoading ? (\r\n            <p className=\"text-xs text-muted-foreground\">{t(\"storage.attach.loading\")}</p>\r\n          ) : taskOptionsForSelect.length === 0 ? (\r\n            <p className=\"text-xs text-muted-foreground\">{t(\"storage.attach.empty\")}</p>\r\n          ) : null}\r\n        </section>\r\n        <section className=\"space-y-2\">\r\n          <h3 className=\"text-sm font-semibold\">{t(\"storage.details.title\")}</h3>\r\n          <dl className=\"grid gap-2 sm:grid-cols-2\">\r\n            {details.map((item) => (\r\n              <div\r\n                    key={item.key}\r\n                    className=\"rounded-md border border-border p-3 text-sm\"\r\n                  >\r\n                    <dt className=\"text-xs font-semibold uppercase text-muted-foreground\">\r\n                      {item.label}\r\n                    </dt>\r\n                    <dd className=\"mt-1 text-sm\">{item.value}</dd>\r\n                  </div>\r\n                ))}\r\n              </dl>\r\n              {selectedRow.taskId ? (\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"ghost\"\r\n                  onClick={() => openTaskDialog(selectedRow.taskId)}\r\n                >\r\n                  {t(\"storage.details.openTask\")}\r\n                </Button>\r\n              ) : null}\r\n            </section>\r\n          </div>\r\n        ) : (\r\n          <div className=\"p-4 text-sm text-muted-foreground\">\r\n            {t(\"storage.loadError\")}\r\n          </div>\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ArrowDownTrayIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React.createElement","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","ForwardRef","React.forwardRef","DocumentTextIcon","_ref2","_excluded2","exports","DocumentIcon","_ref3","_excluded3","TrashIcon","_ref4","_excluded4","VideoCameraIcon","_ref5","_excluded5","Breadcrumbs","_ref6","items","className","children","jsx","map","c","idx","jsxs","React","Fragment","href","label","userBadgeClass","join","createStorageColumns","labels","_options$taskOptions","options","arguments","length","undefined","handleTaskOpen","onTaskOpen","attachOptions","taskOptions","isTasksLoading","Boolean","tasksLoading","header","name","accessorKey","meta","minWidth","maxWidth","renderAsBadges","cell","_ref7","file","row","original","type","onClick","event","stopPropagation","onDownload","download","onDelete","delete","attachTitle","value","selectedTaskId","onChange","onTaskSelect","target","disabled","attachLoading","attachPlaceholder","option","onAttach","attachDisabled","attachProcessing","attachAction","attachEmpty","user","_ref8","userDisplay","userId","EmployeeLink","employeeId","userHint","size","_ref0","sizeLabel","task","_ref1","content","taskDisplay","taskTitle","taskParam","taskTitleHint","taskLink","uploaded","_ref10","uploadedLabel","fetchFiles","params","qs","URLSearchParams","set","String","url","concat","toString","authFetch","then","r","ok","json","fetchFile","encodeURIComponent","res","Promise","reject","removeFile","method","runDiagnostics","_callee","response","_regenerator","w","_context","n","v","Error","a","PAGE_SIZE","dateTimeFormatter","Intl","DateTimeFormat","day","month","year","hour","minute","hour12","timeZone","PROJECT_TIMEZONE","previewIcons","image","PhotoIcon","video","pdf","text","formatSize","bytes","Number","isNaN","units","index","Math","min","floor","log","pow","toFixed","formatDate","time","Date","parse","format","replace","PROJECT_TIMEZONE_LABEL","StoragePage","_t","t","useTranslation","_useSearchParams2","_slicedToArray","useSearchParams","searchParams","setSearchParams","_React$useState2","useState","files","setFiles","_React$useState4","loading","setLoading","_React$useState6","usersById","setUsersById","_React$useState8","search","setSearch","_React$useState0","sort","setSort","_React$useState10","pageIndex","setPageIndex","_React$useState12","get","selectedId","setSelectedId","_React$useState14","selectedFile","setSelectedFile","_React$useState16","detailsLoading","setDetailsLoading","_React$useState18","preview","setPreview","_React$useState20","setTasksLoading","_React$useState22","setTaskOptions","_React$useState24","taskMetaById","setTaskMetaById","_React$useState26","selectionByFile","setSelectionByFile","_React$useState28","attachLoadingId","setAttachLoadingId","_React$useState30","diagnostics","setDiagnostics","_React$useState32","diagnosticsLoading","setDiagnosticsLoading","_React$useState34","diagnosticsError","setDiagnosticsError","attachFileToTask","useCallback","_ref12","_asyncToGenerator","m","_callee2","fileId","taskId","error","_context2","headers","body","JSON","stringify","status","catch","_x","_x2","apply","this","loadFiles","list","Array","isArray","showToast","finally","detachedCount","useMemo","filter","handleDiagnostics","report","useEffect","active","fetchUsers","forEach","telegram_id","cancelled","data","normalized","_task$_id","_task$id","rawId","_id","trim","rawTitle","rawNumber","task_number","number","changedAt","changed_at","updatedAt","createdAt","submission_date","getTime","isFinite","reduce","max","current","shortId","slice","item","b","limited","acc","validIds","Set","changed","next","entries","_ref13","_ref14","has","keys","queryId","existing","find","mime","inlineUrl","previewUrl","startsWith","mode","includes","endsWith","isTextLike","filteredFiles","query","toLowerCase","sortedFiles","_toConsumableArray","uploadedAt","left","pagedFiles","start","taskOptionsForSelect","handleDownload","window","open","handleDelete","confirm","candidate","handleAttach","some","_ref15","_meta$number","_ref16","_meta$title","_objectSpread","taskNumber","_ref17","_meta$number2","_ref18","_meta$title2","toRow","_selectionByFile$file","hasTaskId","normalizedTaskId","normalizedTitle","identifier","displayName","telegram_username","username","paramsWithTask","selectedCandidate","hasValidSelection","_defineProperty","rows","pageCount","ceil","openTaskDialog","closeModal","selectedRow","details","empty","key","path","previewIcon","diagnosticsTimestamp","generatedAt","count","Button","variant","date","total","snapshot","totalFiles","linked","linkedFiles","detached","detachedFiles","Input","placeholder","DataTable","columns","pageSize","onPageChange","showGlobalSearch","showFilters","wrapCellsAsBadges","onRowClick","Modal","onClose","src","alt","controls"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}