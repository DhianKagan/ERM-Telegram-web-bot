!function(){var t=["rangeJSON"];function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(e,o,i,a){var c=o&&o.prototype instanceof s?o:s,l=Object.create(c.prototype);return r(l,"_invoke",function(e,r,o){var i,a,c,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,r){return i=e,a=0,c=t,d.n=r,u}};function h(e,r){for(a=e,c=r,n=0;!f&&s&&!o&&n<l.length;n++){var o,i=l[n],h=d.p,y=i[2];e>3?(o=y===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=e<2&&h<i[1])?(a=0,d.v=r,d.n=i[1]):h<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,d.n=y,a=0))}if(o||e>1)return u;throw f=!0,r}return function(o,l,y){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,y),a=l,c=y;(n=a<2?t:c)||!f;){i||(a?a<3?(a>1&&(d.n=-1),h(a,c)):d.n=c:d.v=c);try{if(s=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((n=(f=d.n<0)?c:e.call(r,d))!==u)break}catch(n){i=t,a=1,c=n}finally{s=1}}return{value:n,done:f}}}(e,i,a),!0),l}var u={};function s(){}function l(){}function f(){}n=Object.getPrototypeOf;var d=[][i]?n(n([][i]())):(r(n={},i,function(){return this}),n),h=f.prototype=s.prototype=Object.create(d);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,r(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t}return l.prototype=f,r(h,"constructor",f),r(f,"constructor",l),l.displayName="GeneratorFunction",r(f,a,"GeneratorFunction"),r(h),r(h,a,"Generator"),r(h,i,function(){return this}),r(h,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:y}})()}function r(t,e,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}r=function(t,e,n,o){function a(e,n){r(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},r(t,e,n,o)}function n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)})}}function i(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){j(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(t,e,r){return e=d(e),function(t,e){if(e&&("object"==p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,r||[],d(t).constructor):e.apply(t,r))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(s=function(){return!!t})()}function l(t,e,r,n){var o=f(d(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},f.apply(null,arguments)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function v(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function m(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=b(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function b(t,e){if(t){if("string"==typeof t)return _(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k(n.key),n)}}function O(t,e,r){return e&&E(t.prototype,e),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function j(t,e,r){return(e=k(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}System.register(["./vendor-legacy-3V6tX1hl.js","./index-legacy-DJSRlCyG.js"],function(r,n){"use strict";var a,s,f,d;return{setters:[function(t){a=t.w,s=t.r,f=t.l},function(t){d=t.r}],execute:function(){function n(t,e){for(var r=function(){var r=e[n];if("string"!=typeof r&&!Array.isArray(r)){var o=function(e){if("default"!==e&&!(e in t)){var n=Object.getOwnPropertyDescriptor(r,e);n&&Object.defineProperty(t,e,n.get?n:{enumerable:!0,get:function(){return r[e]}})}};for(var i in r)o(i)}},n=0;n<e.length;n++)r();return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var y={exports:{}},b=function(){return O(function t(e){var r=this;if(w(this,t),j(this,"crashes",[]),j(this,"state","initializing"),j(this,"_crashNumberLimit",void 0),j(this,"_now",Date.now),j(this,"_minimumNonErrorTimePeriod",void 0),j(this,"_boundErrorHandler",void 0),j(this,"_listeners",void 0),this.crashes=[],this._crashNumberLimit="number"==typeof e.crashNumberLimit?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof e.minimumNonErrorTimePeriod?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=function(t){var e="error"in t?t.error:t.reason;e instanceof Error&&r._handleError(e,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")},[{key:"destroy",value:function(){this._stopErrorHandling(),this._listeners={}}},{key:"on",value:function(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}},{key:"off",value:function(t,e){this._listeners[t]=this._listeners[t].filter(function(t){return t!==e})}},{key:"_fire",value:function(t){for(var e=this._listeners[t]||[],r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i,a=m(e);try{for(a.s();!(i=a.n()).done;){i.value.apply(this,[null].concat(n))}}catch(c){a.e(c)}finally{a.f()}}},{key:"_startErrorHandling",value:function(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_stopErrorHandling",value:function(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_handleError",value:function(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});var r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}},{key:"_shouldReactToError",value:function(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}},{key:"_shouldRestart",value:function(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}])}();
/**
             * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
             * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
             */var _="[object RegExp]",E="[object String]",x="[object Number]",C="[object Boolean]",P="[object Arguments]",S="[object Symbol]",R="[object Date]",D="[object Map]",A="[object Set]",T="[object Array]",W="[object ArrayBuffer]",N="[object Object]",I="[object DataView]",M="[object Uint8Array]",L="[object Uint8ClampedArray]",U="[object Uint16Array]",B="[object Uint32Array]",F="[object Int8Array]",J="[object Int16Array]",q="[object Int32Array]",z="[object Float32Array]",H="[object Float64Array]";function K(t,e,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=null==i?void 0:i(t,e,r,o);if(null!=a)return a;if(function(t){return null==t||"object"!==p(t)&&"function"!=typeof t}(t))return t;if(o.has(t))return o.get(t);if(Array.isArray(t)){var c=new Array(t.length);o.set(t,c);for(var u=0;u<t.length;u++)c[u]=K(t[u],u,r,o,i);return Object.hasOwn(t,"index")&&(c.index=t.index),Object.hasOwn(t,"input")&&(c.input=t.input),c}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var s=new RegExp(t.source,t.flags);return s.lastIndex=t.lastIndex,s}if(t instanceof Map){var l=new Map;o.set(t,l);var f,d=m(t);try{for(d.s();!(f=d.n()).done;){var h=g(f.value,2),y=h[0],v=h[1];l.set(y,K(v,y,r,o,i))}}catch(tt){d.e(tt)}finally{d.f()}return l}if(t instanceof Set){var b=new Set;o.set(t,b);var w,O=m(t);try{for(O.s();!(w=O.n()).done;){var j=w.value;b.add(K(j,void 0,r,o,i))}}catch(tt){O.e(tt)}finally{O.f()}return b}if("undefined"!=typeof Buffer&&Buffer.isBuffer(t))return t.subarray();if(n=t,ArrayBuffer.isView(n)&&!(n instanceof DataView)){var k=new(Object.getPrototypeOf(t).constructor)(t.length);o.set(t,k);for(var Q=0;Q<t.length;Q++)k[Q]=K(t[Q],Q,r,o,i);return k}if(t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){var G=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return o.set(t,G),V(G,t,r,o,i),G}if("undefined"!=typeof File&&t instanceof File){var $=new File([t],t.name,{type:t.type});return o.set(t,$),V($,t,r,o,i),$}if(t instanceof Blob){var Y=new Blob([t],{type:t.type});return o.set(t,Y),V(Y,t,r,o,i),Y}if(t instanceof Error){var X=new t.constructor;return o.set(t,X),X.message=t.message,X.name=t.name,X.stack=t.stack,X.cause=t.cause,V(X,t,r,o,i),X}if("object"===p(t)&&function(t){switch(function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}(t)){case P:case T:case W:case I:case C:case R:case z:case H:case F:case J:case q:case D:case x:case N:case _:case A:case E:case S:case M:case L:case U:case B:return!0;default:return!1}}(t)){var Z=Object.create(Object.getPrototypeOf(t));return o.set(t,Z),V(Z,t,r,o,i),Z}return t}function V(t,e){for(var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=[].concat(v(Object.keys(e)),v((r=e,Object.getOwnPropertySymbols(r).filter(function(t){return Object.prototype.propertyIsEnumerable.call(r,t)})))),c=0;c<a.length;c++){var u=a[c],s=Object.getOwnPropertyDescriptor(t,u);(null==s||s.writable)&&(t[u]=K(e[u],u,n,o,i))}}function Q(t,e){return function(t,e){return K(t,void 0,t,new Map,e)}(t,function(r,n,o,i){var a=null==e?void 0:e(r,n,o,i);if(null!=a)return a;if("object"===p(t))switch(Object.prototype.toString.call(t)){case x:case E:case C:var c=new t.constructor(null==t?void 0:t.valueOf());return V(c,t),c;case P:var u={};return V(u,t),u.length=t.length,u[Symbol.iterator]=t[Symbol.iterator],u;default:return}})}function G(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.signal,o=r.edges,i=void 0,a=null,c=null!=o&&o.includes("leading"),u=null==o||o.includes("trailing"),s=function(){null!==a&&(t.apply(i,a),i=void 0,a=null)},l=null,f=function(){null!=l&&clearTimeout(l),l=setTimeout(function(){l=null,u&&s(),h()},e)},d=function(){null!==l&&(clearTimeout(l),l=null)},h=function(){d(),i=void 0,a=null},y=function(){if(null==n||!n.aborted){i=this;for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];a=e;var o=null==l;f(),c&&o&&s()}};return y.schedule=f,y.cancel=h,y.flush=function(){d(),s()},null==n||n.addEventListener("abort",h,{once:!0}),y}function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==p(r)&&(r={});var n=r,o=n.leading,i=void 0===o||o,a=n.trailing;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==p(r)&&(r={});var n=r,o=n.leading,i=void 0!==o&&o,a=n.trailing,c=void 0===a||a,u=n.maxWait,s=Array(2);i&&(s[0]="leading"),c&&(s[1]="trailing");var l=void 0,f=null,d=G(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];l=t.apply(this,r),f=null},e,{edges:s}),h=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null!=u&&(null===f&&(f=Date.now()),Date.now()-f>=u)?(l=t.apply(this,r),f=Date.now(),d.cancel(),d.schedule(),l):(d.apply(this,r),l)};return h.cancel=d.cancel,h.flush=function(){return d.flush(),l},h}(t,e,{leading:i,trailing:void 0===a||a,maxWait:e})}function Y(t){return function(t){return"object"===p(t)&&null!==t}(t)&&1===t.nodeType&&!function(t){if("object"!==p(t))return!1;if(null==t)return!1;if(null===Object.getPrototypeOf(t))return!0;if("[object Object]"!==Object.prototype.toString.call(t)){var e,r=t[Symbol.toStringTag];return null!=r&&!(null===(e=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))||void 0===e||!e.writable)&&t.toString()==="[object ".concat(r,"]")}for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}(t)}
/**
             * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
             * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
             */function X(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,r=[t],n=new Set,o=0;r.length>o;){var i=r[o++];if(!n.has(i)&&Z(i)&&!e.has(i))if(n.add(i),Symbol.iterator in i)try{var a,c=m(i);try{for(c.s();!(a=c.n()).done;){var u=a.value;r.push(u)}}catch(l){c.e(l)}finally{c.f()}}catch(f){}else for(var s in i)"defaultValue"!==s&&r.push(i[s])}return n}function Z(t){var e=Object.prototype.toString.call(t),r=p(t);return!("number"===r||"boolean"===r||"string"===r||"symbol"===r||"function"===r||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}
/**
             * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
             * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
             */function tt(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(t===e&&("object"===p(r=t)&&null!==r))return!0;var o,i=X(t,n),a=X(e,n),c=m(i);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(a.has(u))return!0}}catch(s){c.e(s)}finally{c.f()}return!1}
/**
             * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
             * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
             */
var et=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(this,e),j(r=u(this,e,[n]),"_editor",null),j(r,"_lifecyclePromise",null),j(r,"_throttledSave",void 0),j(r,"_data",void 0),j(r,"_lastDocumentVersion",void 0),j(r,"_elementOrData",void 0),j(r,"_initUsingData",!0),j(r,"_editables",{}),j(r,"_config",void 0),j(r,"_excludedProps",void 0),r._throttledSave=$(r._save.bind(r),"number"==typeof n.saveInterval?n.saveInterval:5e3),t&&(r._creator=function(e,r){return t.create(e,r)}),r._destructor=function(t){return t.destroy()},r}return h(e,t),O(e,[{key:"editor",get:function(){return this._editor}},{key:"_item",get:function(){return this._editor}},{key:"setCreator",value:function(t){this._creator=t}},{key:"setDestructor",value:function(t){this._destructor=t}},{key:"_restart",value:function(){var t=this;return Promise.resolve().then(function(){return t.state="initializing",t._fire("stateChange"),t._destroy()}).catch(function(t){console.error("An error happened during the editor destroying.",t)}).then(function(){for(var e={},r=[],n=t._config.rootsAttributes||{},o={},i=0,a=Object.entries(t._data.roots);i<a.length;i++){var u=g(a[i],2),s=u[0];u[1].isLoaded?(e[s]="",o[s]=n[s]||{}):r.push(s)}var l=c(c({},t._config),{},{extraPlugins:t._config.extraPlugins||[],lazyRoots:r,rootsAttributes:o,_watchdogInitialData:t._data});return delete l.initialData,l.extraPlugins.push(rt),t._initUsingData?t.create(e,l,l.context):Y(t._elementOrData)?t.create(t._elementOrData,l,l.context):t.create(t._editables,l,l.context)}).then(function(){t._fire("restart")})}},{key:"create",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._elementOrData,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config,o=arguments.length>2?arguments[2]:void 0;return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(function(){return l(e,"_startErrorHandling",t,3)([]),t._elementOrData=r,t._initUsingData="string"==typeof r||Object.keys(r).length>0&&"string"==typeof Object.values(r)[0],t._config=t._cloneEditorConfiguration(n)||{},t._config.context=o,t._creator(r,t._config)}).then(function(e){t._editor=e,e.model.document.on("change:data",t._throttledSave),t._lastDocumentVersion=e.model.document.version,t._data=t._getData(),t._initUsingData||(t._editables=t._getEditables()),t.state="ready",t._fire("stateChange")}).finally(function(){t._lifecyclePromise=null}),this._lifecyclePromise}},{key:"destroy",value:function(){var t=this;return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(function(){return t.state="destroyed",t._fire("stateChange"),l(e,"destroy",t,3)([]),t._destroy()}).finally(function(){t._lifecyclePromise=null}),this._lifecyclePromise}},{key:"_destroy",value:function(){var t=this;return Promise.resolve().then(function(){t._stopErrorHandling(),t._throttledSave.cancel();var e=t._editor;return t._editor=null,e.model.document.off("change:data",t._throttledSave),t._destructor(e)})}},{key:"_save",value:function(){var t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(e){console.error(e,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}},{key:"_setExcludedProperties",value:function(t){this._excludedProps=t}},{key:"_getData",value:function(){var t=this._editor,e=t.model.document.roots.filter(function(t){return t.isAttached()&&"$graveyard"!=t.rootName}),r=t.plugins,n=r.has("CommentsRepository")&&r.get("CommentsRepository"),o=r.has("TrackChanges")&&r.get("TrackChanges"),i={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};e.forEach(function(t){i.roots[t.rootName]={content:JSON.stringify(Array.from(t.getChildren())),attributes:JSON.stringify(Array.from(t.getAttributes())),isLoaded:t._isLoaded}});var a,c=m(t.model.markers);try{for(c.s();!(a=c.n()).done;){var u=a.value;u._affectsData&&(i.markers[u.name]={rangeJSON:u.getRange().toJSON(),usingOperation:u._managedUsingOperations,affectsData:u._affectsData})}}catch(s){c.e(s)}finally{c.f()}return n&&(i.commentThreads=JSON.stringify(n.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(i.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),i}},{key:"_getEditables",value:function(){var t,e={},r=m(this.editor.model.document.getRootNames());try{for(r.s();!(t=r.n()).done;){var n=t.value,o=this.editor.ui.getEditableElement(n);o&&(e[n]=o)}}catch(i){r.e(i)}finally{r.f()}return e}},{key:"_isErrorComingFromThisItem",value:function(t){return tt(this._editor,t.context,this._excludedProps)}},{key:"_cloneEditorConfiguration",value:function(t){return Q(t,function(t,e){return Y(t)||"context"===e?t:void 0})}}])}(b),rt=function(){return O(function t(e){w(this,t),j(this,"editor",void 0),j(this,"_data",void 0),this.editor=e,this._data=e.config.get("_watchdogInitialData")},[{key:"init",value:function(){var t=this;this.editor.data.on("init",function(e){e.stop(),t.editor.model.enqueueChange({isUndoable:!1},function(e){t._restoreCollaborationData(),t._restoreEditorData(e)}),t.editor.data.fire("ready")},{priority:999})}},{key:"_createNode",value:function(t,e){if("name"in e){var r=t.createElement(e.name,e.attributes);if(e.children){var n,o=m(e.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;r._appendChild(this._createNode(t,i))}}catch(a){o.e(a)}finally{o.f()}}return r}return t.createText(e.data,e.attributes)}},{key:"_restoreEditorData",value:function(e){var r=this,n=this.editor;Object.entries(this._data.roots).forEach(function(t){var o,i=g(t,2),a=i[0],c=i[1],u=c.content,s=c.attributes,l=JSON.parse(u),f=JSON.parse(s),d=n.model.document.getRoot(a),h=m(f);try{for(h.s();!(o=h.n()).done;){var y=g(o.value,2),v=y[0],p=y[1];e.setAttribute(v,p,d)}}catch(O){h.e(O)}finally{h.f()}var b,_=m(l);try{for(_.s();!(b=_.n()).done;){var w=b.value,E=r._createNode(e,w);e.insert(E,d,"end")}}catch(O){_.e(O)}finally{_.f()}}),Object.entries(this._data.markers).forEach(function(r){var o=g(r,2),a=o[0],u=o[1],s=n.model.document,l=u.rangeJSON,f=l.start,d=l.end,h=i(u,t),y=s.getRoot(f.root),v=e.createPositionFromPath(y,f.path,f.stickiness),p=e.createPositionFromPath(y,d.path,d.stickiness),m=e.createRange(v,p);e.addMarker(a,c({range:m},h))})}},{key:"_restoreCollaborationData",value:function(){var t=this,e=JSON.parse(this._data.commentThreads),r=JSON.parse(this._data.suggestions);e.forEach(function(e){var r=t.editor.config.get("collaboration.channelId"),n=t.editor.plugins.get("CommentsRepository");n.hasCommentThread(e.threadId)&&n.getCommentThread(e.threadId).remove();n.addCommentThread(c({channelId:r},e))}),r.forEach(function(e){var r=t.editor.plugins.get("TrackChangesEditing");r.hasSuggestion(e.id)?r.getSuggestion(e.id).attributes=e.attributes:r.addSuggestionData(e)})}}])}(),nt=Symbol("MainQueueId"),ot=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(this,e),j(r=u(this,e,[n]),"_watchdogs",new Map),j(r,"_watchdogConfig",void 0),j(r,"_context",null),j(r,"_contextProps",new Set),j(r,"_actionQueues",new it),j(r,"_contextConfig",void 0),j(r,"_item",void 0),r._watchdogConfig=n,r._creator=function(e){return t.create(e)},r._destructor=function(t){return t.destroy()},r._actionQueues.onEmpty(function(){"initializing"===r.state&&(r.state="ready",r._fire("stateChange"))}),r}return h(e,t),O(e,[{key:"setCreator",value:function(t){this._creator=t}},{key:"setDestructor",value:function(t){this._destructor=t}},{key:"context",get:function(){return this._context}},{key:"create",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._actionQueues.enqueue(nt,function(){return t._contextConfig=e,t._create()})}},{key:"getItem",value:function(t){return this._getWatchdog(t)._item}},{key:"getItemState",value:function(t){return this._getWatchdog(t).state}},{key:"add",value:function(t){var e=this,r=at(t);return Promise.all(r.map(function(t){return e._actionQueues.enqueue(t.id,function(){if("destroyed"===e.state)throw new Error("Cannot add items to destroyed watchdog.");if(!e._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");var r;if(e._watchdogs.has(t.id))throw new Error("Item with the given id is already added: '".concat(t.id,"'."));if("editor"===t.type)return(r=new et(null,e._watchdogConfig)).setCreator(t.creator),r._setExcludedProperties(e._contextProps),t.destructor&&r.setDestructor(t.destructor),e._watchdogs.set(t.id,r),r.on("error",function(n,o){var i=o.error,a=o.causesRestart;e._fire("itemError",{itemId:t.id,error:i}),a&&e._actionQueues.enqueue(t.id,function(){return new Promise(function(n){var o=function(){r.off("restart",o),e._fire("itemRestart",{itemId:t.id}),n()};r.on("restart",o)})})}),r.create(t.sourceElementOrData,t.config,e._context);throw new Error("Not supported item type: '".concat(t.type,"'."))})}))}},{key:"remove",value:function(t){var e=this,r=at(t);return Promise.all(r.map(function(t){return e._actionQueues.enqueue(t,function(){var r=e._getWatchdog(t);return e._watchdogs.delete(t),r.destroy()})}))}},{key:"destroy",value:function(){var t=this;return this._actionQueues.enqueue(nt,function(){return t.state="destroyed",t._fire("stateChange"),l(e,"destroy",t,3)([]),t._destroy()})}},{key:"_restart",value:function(){var t=this;return this._actionQueues.enqueue(nt,function(){return t.state="initializing",t._fire("stateChange"),t._destroy().catch(function(t){console.error("An error happened during destroying the context or items.",t)}).then(function(){return t._create()}).then(function(){return t._fire("restart")})})}},{key:"_create",value:function(){var t=this;return Promise.resolve().then(function(){return t._startErrorHandling(),t._creator(t._contextConfig)}).then(function(e){return t._context=e,t._contextProps=X(t._context),Promise.all(Array.from(t._watchdogs.values()).map(function(e){return e._setExcludedProperties(t._contextProps),e.create(void 0,void 0,t._context)}))})}},{key:"_destroy",value:function(){var t=this;return Promise.resolve().then(function(){t._stopErrorHandling();var e=t._context;return t._context=null,t._contextProps=new Set,Promise.all(Array.from(t._watchdogs.values()).map(function(t){return t.destroy()})).then(function(){return t._destructor(e)})})}},{key:"_getWatchdog",value:function(t){var e=this._watchdogs.get(t);if(!e)throw new Error("Item with the given id was not registered: ".concat(t,"."));return e}},{key:"_isErrorComingFromThisItem",value:function(t){var e,r=m(this._watchdogs.values());try{for(r.s();!(e=r.n()).done;){if(e.value._isErrorComingFromThisItem(t))return!1}}catch(n){r.e(n)}finally{r.f()}return tt(this._context,t.context)}}])}(b),it=function(){return O(function t(){w(this,t),j(this,"_onEmptyCallbacks",[]),j(this,"_queues",new Map),j(this,"_activeActions",0)},[{key:"onEmpty",value:function(t){this._onEmptyCallbacks.push(t)}},{key:"enqueue",value:function(t,e){var r=this,n=t===nt;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());var o=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(nt),this._queues.get(t)])).then(e),i=o.catch(function(){});return this._queues.set(t,i),o.finally(function(){r._activeActions--,r._queues.get(t)===i&&0===r._activeActions&&r._onEmptyCallbacks.forEach(function(t){return t()})})}}])}();function at(t){return Array.isArray(t)?t:[t]}
/**
             * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
             * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
             */var ct,ut=Object.freeze(Object.defineProperty({__proto__:null,ContextWatchdog:ot,EditorWatchdog:et,Watchdog:b},Symbol.toStringTag,{value:"Module"})),st=a(ut);var lt=(ct||(ct=1,function(t){var r,n,a;self,t.exports=(r=s(),n=d(),a=st,function(){var t={546:function(t){t.exports=a},949:function(t){t.exports=n},155:function(t){t.exports=r}},s={};function l(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,l),n.exports}l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,{a:e}),e},l.d=function(t,e){for(var r in e)l.o(e,r)&&!l.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var f={};return function(){l.r(f),l.d(f,{CKEditor:function(){return b},CKEditorContext:function(){return p},useMultiRootEditor:function(){return C}});var t=l(155),r=l.n(t),n=l(949),a=l.n(n),s=new Array(256).fill("").map(function(t,e){return("0"+e.toString(16)).slice(-2)}),d=l(546),y=r().createContext("contextWatchdog"),p=function(t){function n(t,e){var r;return w(this,n),(r=u(this,n,[t,e])).contextWatchdog=null,r.props.isLayoutReady&&r._initializeContextWatchdog(r.props.config),r}return h(n,t),O(n,[{key:"shouldComponentUpdate",value:function(t){return this._shouldComponentUpdate(t)}},{key:"_shouldComponentUpdate",value:function(){var t=o(e().m(function t(r){var n;return e().w(function(t){for(;;)switch(t.n){case 0:if(r.id===this.props.id){t.n=2;break}if(!this.contextWatchdog){t.n=1;break}return t.n=1,this.contextWatchdog.destroy();case 1:return t.n=2,this._initializeContextWatchdog(r.config);case 2:if(!r.isLayoutReady||this.contextWatchdog){t.n=4;break}return t.n=3,this._initializeContextWatchdog(r.config);case 3:n=!0,t.n=5;break;case 4:n=this.props.children!==r.children;case 5:return t.a(2,n)}},t,this)}));function r(e){return t.apply(this,arguments)}return r}()},{key:"render",value:function(){return r().createElement(y.Provider,{value:this.contextWatchdog},this.props.children)}},{key:"componentWillUnmount",value:function(){this._destroyContext()}},{key:"_initializeContextWatchdog",value:function(){var t=o(e().m(function t(r){var n=this;return e().w(function(t){for(;;)switch(t.n){case 0:return this.contextWatchdog=new d.ContextWatchdog(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",function(t,e){n.props.onError(e.error,{phase:"runtime",willContextRestart:e.causesRestart})}),this.contextWatchdog.on("stateChange",function(){"ready"===n.contextWatchdog.state&&n.props.onReady&&n.props.onReady(n.contextWatchdog.context)}),t.n=1,this.contextWatchdog.create(r).catch(function(t){n.props.onError(t,{phase:"initialization",willContextRestart:!1})});case 1:return t.a(2)}},t,this)}));function r(e){return t.apply(this,arguments)}return r}()},{key:"_destroyContext",value:function(){var t=o(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:if(!this.contextWatchdog){t.n=2;break}return t.n=1,this.contextWatchdog.destroy();case 1:this.contextWatchdog=null;case 2:return t.a(2)}},t,this)}));function r(){return t.apply(this,arguments)}return r}()}])}(r().Component);p.defaultProps={isLayoutReady:!0,onError:function(t,e){return console.error(t,e)}},p.propTypes={id:a().string,isLayoutReady:a().bool,context:a().func,watchdogConfig:a().object,config:a().object,onReady:a().func,onError:a().func};var m="Lock from React integration (@ckeditor/ckeditor5-react)",b=function(t){function n(t){var e;w(this,n),(e=u(this,n,[t])).editorDestructionInProgress=null,e.domContainer=r().createRef(),e.watchdog=null;var o=window.CKEDITOR_VERSION;return o?g(o.split(".").map(Number),1)[0]<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher."):console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.'),e}return h(n,t),O(n,[{key:"editor",get:function(){return this.props.disableWatchdog?this.instance:this.watchdog?this.watchdog.editor:null}},{key:"shouldComponentUpdate",value:function(t){return!(!this.editor||t.id===this.props.id&&t.disableWatchdog===this.props.disableWatchdog&&(this._shouldUpdateEditor(t)&&this.editor.data.set(t.data),"disabled"in t&&(t.disabled?this.editor.enableReadOnlyMode(m):this.editor.disableReadOnlyMode(m)),1))}},{key:"componentDidMount",value:function(){var t=o(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._initializeEditor();case 1:return t.a(2)}},t,this)}));function r(){return t.apply(this,arguments)}return r}()},{key:"componentDidUpdate",value:function(){var t=o(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._destroyEditor();case 1:return t.n=2,this._initializeEditor();case 2:return t.a(2)}},t,this)}));function r(){return t.apply(this,arguments)}return r}()},{key:"componentWillUnmount",value:function(){var t=o(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._destroyEditor();case 1:return t.a(2)}},t,this)}));function r(){return t.apply(this,arguments)}return r}()},{key:"render",value:function(){return r().createElement("div",{ref:this.domContainer})}},{key:"_initializeEditor",value:function(){var t=o(e().m(function t(){var r=this;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.editorDestructionInProgress;case 1:if(!this.props.disableWatchdog){t.n=3;break}return t.n=2,this._createEditor(this.domContainer.current,this._getConfig());case 2:this.instance=t.v,t.n=4;break;case 3:if(this.watchdog){t.n=4;break}return this.context instanceof d.ContextWatchdog?this.watchdog=new _(this.context):this.watchdog=new n._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator(function(t,e){return r._createEditor(t,e)}),this.watchdog.on("error",function(t,e){var n=e.error,o=e.causesRestart;(r.props.onError||console.error)(n,{phase:"runtime",willEditorRestart:o})}),t.n=4,this.watchdog.create(this.domContainer.current,this._getConfig()).catch(function(t){(r.props.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1})});case 4:return t.a(2)}},t,this)}));function r(){return t.apply(this,arguments)}return r}()},{key:"_createEditor",value:function(t,e){var r=this;return this.props.editor.create(t,e).then(function(t){"disabled"in r.props&&r.props.disabled&&t.enableReadOnlyMode(m);var e=t.model.document,n=t.editing.view.document;return e.on("change:data",function(e){r.props.onChange&&r.props.onChange(e,t)}),n.on("focus",function(e){r.props.onFocus&&r.props.onFocus(e,t)}),n.on("blur",function(e){r.props.onBlur&&r.props.onBlur(e,t)}),setTimeout(function(){r.props.onReady&&r.props.onReady(t)}),t})}},{key:"_destroyEditor",value:function(){var t=o(e().m(function t(){var r=this;return e().w(function(t){for(;;)switch(t.n){case 0:this.editorDestructionInProgress=new Promise(function(t){setTimeout(o(e().m(function n(){var o,i;return e().w(function(e){for(;;)switch(e.n){case 0:if(!r.watchdog){e.n=2;break}return e.n=1,r.watchdog.destroy();case 1:r.watchdog=null,o=t(),e.n=6;break;case 2:if(!r.instance){e.n=4;break}return e.n=3,r.instance.destroy();case 3:r.instance=null,i=t(),e.n=5;break;case 4:i=void t();case 5:o=i;case 6:return e.a(2,o)}},n)})))});case 1:return t.a(2)}},t,this)}));function r(){return t.apply(this,arguments)}return r}()},{key:"_shouldUpdateEditor",value:function(t){return this.props.data!==t.data&&this.editor.data.get()!==t.data}},{key:"_getConfig",value:function(){var t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),c(c({},t),{},{initialData:t.initialData||this.props.data||""})}}])}(r().Component);b.contextType=y,b.propTypes={editor:a().func.isRequired,data:a().string,config:a().object,disableWatchdog:a().bool,watchdogConfig:a().object,onChange:a().func,onReady:a().func,onFocus:a().func,onBlur:a().func,onError:a().func,disabled:a().bool,id:a().any},b._EditorWatchdog=d.EditorWatchdog;var _=function(){function t(e){w(this,t),this._contextWatchdog=e,this._id=function(){var t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+s[255&t]+s[t>>8&255]+s[t>>16&255]+s[t>>24&255]+s[255&e]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]+s[255&r]+s[r>>8&255]+s[r>>16&255]+s[r>>24&255]+s[255&n]+s[n>>8&255]+s[n>>16&255]+s[n>>24&255]}()}return O(t,[{key:"setCreator",value:function(t){this._creator=t}},{key:"create",value:function(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}},{key:"on",value:function(t,e){var r=this;this._contextWatchdog.on("itemError",function(t,n){var o=n.itemId,i=n.error;o===r._id&&e(null,{error:i,causesRestart:void 0})})}},{key:"destroy",value:function(){return"ready"===this._contextWatchdog.state?this._contextWatchdog.remove(this._id):Promise.resolve()}},{key:"editor",get:function(){return this._contextWatchdog.getItem(this._id)}}])}(),E="Lock from React integration (@ckeditor/ckeditor5-react)",x=function(e){var n=e.editor,o=(0,t.useRef)(null);return(0,t.useEffect)(function(){var t=o.current;if(n&&t){var e=n.ui.view.toolbar.element;return t&&t.appendChild(e),function(){t&&t.removeChild(e)}}},[n&&n.id]),r().createElement("div",{ref:o})},C=function(n){var a=(0,t.useRef)(null),u=(0,t.useRef)(null),s=(0,t.useContext)(y),l=g((0,t.useState)(null),2),f=l[0],h=l[1],p=g((0,t.useState)(n.data),2),m=p[0],b=p[1],w=g((0,t.useState)(n.rootsAttributes||{}),2),O=w[0],C=w[1],P=g((0,t.useState)([]),2),S=P[0],R=P[1],D=(0,t.useRef)(!0);(0,t.useEffect)(function(){return o(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,u.current;case 1:if(!1===n.isLayoutReady){t.n=2;break}return t.n=2,I();case 2:return t.a(2)}},t)}))(),function(){N().then(function(){u.current=null})}},[n.isLayoutReady]),(0,t.useEffect)(function(){f&&(n.disabled?f.enableReadOnlyMode(E):f.disableReadOnlyMode(E))},[n.disabled]),(0,t.useEffect)(function(){if(f&&!u.current){var t=f.getFullData();b(c({},t)),C(c({},f.getRootsAttributes())),R(v(Object.keys(t).map(function(t){return T(f,t)})))}},[f&&f.id]);var A=function(){var t=n.config||{};return n.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` property. The config value takes precedence over `data` property and will be used when both are specified."),c(c({},t),{},{rootsAttributes:O})},T=function(t,e){return r().createElement("div",{id:e,key:e,ref:function(r){if(r){var n=t.ui.view.createEditable(e,r);t.ui.addEditable(n),t.editing.view.forceRender()}}})},W=function(t,e){return n.editor.create(t,e).then(function(t){n.disabled&&n.disabled&&t.enableReadOnlyMode(E);var e=t.model.document,r=t.editing.view.document;return e.on("change:data",function(e){return function(t,e){var r=t.model.document;if(!n.disableTwoWayDataBinding){var o={},i={};r.differ.getChanges().forEach(function(e){var r;if((r="insert"==e.type||"remove"==e.type?e.position.root:e.range.root).isAttached()){var n=r.rootName;o[n]=t.getData({rootName:n})}}),r.differ.getChangedRoots().forEach(function(e){if(e.state)void 0!==o[e.name]&&delete o[e.name];else{var r=e.name;i[r]=t.getRootAttributes(r)}}),Object.keys(o).length&&b(function(t){return c(c({},t),o)}),Object.keys(i).length&&C(function(t){return c(c({},t),i)})}n.onChange&&n.onChange(e,t)}(t,e)}),t.on("addRoot",function(e,r){return function(t,e,r){var o=r.rootName,i=T(t,o);n.disableTwoWayDataBinding||(b(function(e){return c(c({},e),{},j({},o,t.getData({rootName:o})))}),C(function(e){return c(c({},e),{},j({},o,t.getRootAttributes(o)))})),R(function(t){return[].concat(v(t),[i])})}(t,0,r)}),t.on("detachRoot",function(e,r){return function(t,e,r){var o=r.rootName;R(function(t){return t.filter(function(t){return t.props.id!==o})}),n.disableTwoWayDataBinding||(b(function(t){return t[o],c({},i(t,[o].map(k)))}),C(function(t){return t[o],c({},i(t,[o].map(k)))})),t.detachEditable(r)}(t,0,r)}),r.on("focus",function(e){n.onFocus&&n.onFocus(e,t)}),r.on("blur",function(e){n.onBlur&&n.onBlur(e,t)}),h(t),n.onReady&&n.onReady(t),t})},N=function(){var t=o(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:h(null),b({}),C({}),R([]),u.current=new Promise(function(t){setTimeout(o(e().m(function r(){var n,o;return e().w(function(e){for(;;)switch(e.n){case 0:if(!a.current){e.n=2;break}return e.n=1,a.current.destroy();case 1:a.current=null,n=t(),e.n=6;break;case 2:if(!f){e.n=4;break}return e.n=3,f.destroy();case 3:o=t(),e.n=5;break;case 4:o=void t();case 5:n=o;case 6:return e.a(2,n)}},r)})))});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),I=function(){var t=o(e().m(function t(){var r;return e().w(function(t){for(;;)switch(t.n){case 0:if(!n.disableWatchdog){t.n=2;break}return t.n=1,W(n.data,A());case 1:return t.a(2,void t.v);case 2:if(!a.current){t.n=3;break}return t.a(2);case 3:return s instanceof d.ContextWatchdog?a.current=new _(s):a.current=new d.EditorWatchdog(n.editor,n.watchdogConfig),(r=a.current).setCreator(function(t,e){return W(t,e)}),r.on("error",function(t,e){var r=e.error,o=e.causesRestart;(n.onError||console.error)(r,{phase:"runtime",willEditorRestart:o})}),t.n=4,r.create(m,A()).catch(function(t){(n.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1})});case 4:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();(0,t.useEffect)(function(){if(f&&D.current){D.current=!1;var t=Object.keys(m),e=Object.keys(O);if(!t.every(function(t){return e.includes(t)}))throw new Error("`data` and `attributes` objects must have the same keys (roots).");var r=f.getFullData(),n=f.getRootsAttributes(),o=M(r,m||{}),i=o.addedKeys,a=o.removedKeys,c=t.some(function(t){return void 0!==r[t]&&JSON.stringify(r[t])!==JSON.stringify(m[t])}),u=e.filter(function(t){return JSON.stringify(n[t])!==JSON.stringify(O[t])});f.model.change(function(t){L(i),U(a),c&&B(),u.length&&F(t,u)})}},[m,O]);var M=function(t,e){var r=Object.keys(t),n=Object.keys(e);return{addedKeys:n.filter(function(t){return!r.includes(t)}),removedKeys:r.filter(function(t){return!n.includes(t)})}},L=function(t){t.forEach(function(t){f.addRoot(t,{data:m[t]||"",attributes:(null==O?void 0:O[t])||{},isUndoable:!0})})},U=function(t){t.forEach(function(t){f.detachRoot(t,!0)})},B=function(){f.data.set(m,{suppressErrorInCollaboration:!0})},F=function(t,e){e.forEach(function(e){Object.keys(O[e]).forEach(function(t){f.registerRootAttribute(t)}),t.clearAttributes(f.model.document.getRoot(e)),t.setAttributes(O[e],f.model.document.getRoot(e))})},J=(0,t.useCallback)(function(t){D.current=!0,b(t)},[b]),q=(0,t.useCallback)(function(t){D.current=!0,C(t)},[C]);return{editor:f,editableElements:S,toolbarElement:r().createElement(x,{editor:f}),data:m,setData:J,attributes:O,setAttributes:q}}}(),f}())}(y)),y.exports);r("i",n({__proto__:null,default:f(lt)},[lt]))}}})}();
//# sourceMappingURL=index-legacy-CR1ktOk6.js.map
