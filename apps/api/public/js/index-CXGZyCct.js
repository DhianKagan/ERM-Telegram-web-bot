const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/react-apexcharts.min-zsnjzXmB.js","js/vendor-DBLHOZWC.js","js/index-Chjiymov.js"])))=>i.map(i=>d[i]);
import{j as t,_ as er}from"./index-CiBvN1ph.js";import{b as i,l as tr,R as A,i as ar,p as sr,m as rr,s as lr}from"./vendor-DBLHOZWC.js";import{d as Re,B as P,M as rt,s as Ne,h as nr,b as Za,a as or}from"./App-CBKZhWa-.js";import{F as ir,B as cr,S as dr}from"./Storage-97xpzoFZ.js";import lt from"./DataTable-yuss4d11.js";import{a as mr,b as ur,c as fr,d as hr,P as dt,e as Ya,R as xr,I as pr,f as St,g as gr,S as we,F as br,h as vr,A as yr,i as jr}from"./AuthenticatedApp-BGiyXYX-.js";import{f as nt,a as _e,c as Ct,u as It,r as _t}from"./collections-C6zdDLQE.js";import{C as ke}from"./ConfirmDialog-B5RyHtIh.js";import{f as ye,a as Qa,R as Nr,E as wr}from"./EmployeeCardForm-DEXryWVS.js";import{l as kr,c as Sr,u as Cr,d as Ir}from"./fleets-CJzuCDvZ.js";import{I as Te}from"./input-DPyG2bFz.js";import _r from"./Archive-Dlfwdt_V.js";import Er from"./Logs-BZzNirXw.js";import{f as Tr,d as wa,c as Ar,u as Rr}from"./users-e0BWfEj3.js";import"./EmployeeLink-CKfquPNy.js";import"./PhotoIcon-CILObUDG.js";import"./useToast-D14QlpPZ.js";function Dr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const Mr=i.forwardRef(Dr);function Wr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const Or=i.forwardRef(Wr);function Fr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"}))}const Ur=i.forwardRef(Fr);function Lr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Pr=i.forwardRef(Lr);function Kr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const Vr=i.forwardRef(Kr);function $r({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const Hr=i.forwardRef($r);function Br({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const zr=i.forwardRef(Br);function Gr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}const qr=i.forwardRef(Gr);function Zr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const Yr=i.forwardRef(Zr);function Qr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const Xr=i.forwardRef(Qr);function Jr({title:e,titleId:a,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const el=i.forwardRef(Jr);var Le={exports:{}},ka;function tl(){if(ka)return Le.exports;ka=1;var e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},a=Object.keys(e).join("|"),r=new RegExp(a,"g"),l=new RegExp(a,"");function n(d){return e[d]}var o=function(d){return d.replace(r,n)},m=function(d){return!!d.match(l)};return Le.exports=o,Le.exports.has=m,Le.exports.remove=o,Le.exports}var al=tl();const sl=tr(al);/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2020 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const Z={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},rl=(e,a)=>String(e.rankedValue).localeCompare(String(a.rankedValue));function Xa(e,a,r={}){const{keys:l,threshold:n=Z.MATCHES,baseSort:o=rl,sorter:m=v=>v.sort((x,b)=>cl(x,b,o))}=r,d=e.reduce(f,[]);return m(d).map(({item:v})=>v);function f(v,x,b){const y=ll(x,l,a,r),{rank:F,keyThreshold:k=n}=y;return F>=k&&v.push({...y,item:x,index:b}),v}}Xa.rankings=Z;function ll(e,a,r,l){if(!a){const o=e;return{rankedValue:o,rank:Sa(o,r,l),keyIndex:-1,keyThreshold:l.threshold}}return ul(e,a).reduce(({rank:o,rankedValue:m,keyIndex:d,keyThreshold:f},{itemValue:v,attributes:x},b)=>{let y=Sa(v,r,l),F=m;const{minRanking:k,maxRanking:I,threshold:T}=x;return y<k&&y>=Z.MATCHES?y=k:y>I&&(y=I),y>o&&(o=y,d=b,f=T,F=v),{rankedValue:F,rank:o,keyIndex:d,keyThreshold:f}},{rankedValue:e,rank:Z.NO_MATCH,keyIndex:-1,keyThreshold:l.threshold})}function*nl(e,a){let r=-1;for(;(r=e.indexOf(a,r+1))>-1;)yield r;return-1}function Sa(e,a,r){if(e=Ca(e,r),a=Ca(a,r),a.length>e.length)return Z.NO_MATCH;if(e===a)return Z.CASE_SENSITIVE_EQUAL;e=e.toLowerCase(),a=a.toLowerCase();const l=nl(e,a),n=l.next(),o=n.value;if(e.length===a.length&&o===0)return Z.EQUAL;if(o===0)return Z.STARTS_WITH;let m=n;for(;!m.done;){if(m.value>0&&e[m.value-1]===" ")return Z.WORD_STARTS_WITH;m=l.next()}return o>0?Z.CONTAINS:a.length===1?Z.NO_MATCH:ol(e).includes(a)?Z.ACRONYM:il(e,a)}function ol(e){let a="",r=" ";for(let l=0;l<e.length;l++){const n=e.charAt(l);(r===" "||r==="-")&&!(n===" "||n==="-")&&(a+=n),r=n}return a}function il(e,a){let r=0,l=0;function n(f,v,x){for(let b=x,y=v.length;b<y;b++)if(v[b]===f)return r+=1,b+1;return-1}function o(f){const v=1/f,x=r/a.length;return Z.MATCHES+x*v}const m=n(a[0],e,0);if(m<0)return Z.NO_MATCH;l=m;for(let f=1,v=a.length;f<v;f++){const x=a[f];if(l=n(x,e,l),!(l>-1))return Z.NO_MATCH}const d=l-m;return o(d)}function cl(e,a,r){const{rank:o,keyIndex:m}=e,{rank:d,keyIndex:f}=a;return o===d?m===f?r(e,a):m<f?-1:1:o>d?-1:1}function Ca(e,{keepDiacritics:a}){return e="".concat(e),a||(e=sl(e)),e}function dl(e,a){typeof a=="object"&&(a=a.key);let r;if(typeof a=="function")r=a(e);else if(e==null)r=null;else if(Object.hasOwnProperty.call(e,a))r=e[a];else{if(a.includes("."))return ml(a,e);r=null}return r==null?[]:Array.isArray(r)?r:[String(r)]}function ml(e,a){const r=e.split(".");let l=[a];for(let n=0,o=r.length;n<o;n++){const m=r[n];let d=[];for(let f=0,v=l.length;f<v;f++){const x=l[f];if(x!=null)if(Object.hasOwnProperty.call(x,m)){const b=x[m];b!=null&&d.push(b)}else m==="*"&&(d=d.concat(x))}l=d}return Array.isArray(l[0])?[].concat(...l):l}function ul(e,a){const r=[];for(let l=0,n=a.length;l<n;l++){const o=a[l],m=fl(o),d=dl(e,o);for(let f=0,v=d.length;f<v;f++)r.push({itemValue:d[f],attributes:m})}return r}const Ia={maxRanking:1/0,minRanking:-1/0};function fl(e){return typeof e=="string"?Ia:{...Ia,...e}}var mt="Tabs",[hl,Cn]=fr(mt,[Ya]),Ja=Ya(),[xl,Kt]=hl(mt),es=i.forwardRef((e,a)=>{const{__scopeTabs:r,value:l,onValueChange:n,defaultValue:o,orientation:m="horizontal",dir:d,activationMode:f="automatic",...v}=e,x=mr(d),[b,y]=ur({prop:l,onChange:n,defaultProp:o!=null?o:"",caller:mt});return t.jsx(xl,{scope:r,baseId:hr(),value:b,onValueChange:y,orientation:m,dir:x,activationMode:f,children:t.jsx(dt.div,{dir:x,"data-orientation":m,...v,ref:a})})});es.displayName=mt;var ts="TabsList",as=i.forwardRef((e,a)=>{const{__scopeTabs:r,loop:l=!0,...n}=e,o=Kt(ts,r),m=Ja(r);return t.jsx(xr,{asChild:!0,...m,orientation:o.orientation,dir:o.dir,loop:l,children:t.jsx(dt.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:a})})});as.displayName=ts;var ss="TabsTrigger",rs=i.forwardRef((e,a)=>{const{__scopeTabs:r,value:l,disabled:n=!1,...o}=e,m=Kt(ss,r),d=Ja(r),f=os(m.baseId,l),v=is(m.baseId,l),x=l===m.value;return t.jsx(pr,{asChild:!0,...d,focusable:!n,active:x,children:t.jsx(dt.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":v,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:f,...o,ref:a,onMouseDown:St(e.onMouseDown,b=>{!n&&b.button===0&&b.ctrlKey===!1?m.onValueChange(l):b.preventDefault()}),onKeyDown:St(e.onKeyDown,b=>{[" ","Enter"].includes(b.key)&&m.onValueChange(l)}),onFocus:St(e.onFocus,()=>{const b=m.activationMode!=="manual";!x&&!n&&b&&m.onValueChange(l)})})})});rs.displayName=ss;var ls="TabsContent",ns=i.forwardRef((e,a)=>{const{__scopeTabs:r,value:l,forceMount:n,children:o,...m}=e,d=Kt(ls,r),f=os(d.baseId,l),v=is(d.baseId,l),x=l===d.value,b=i.useRef(x);return i.useEffect(()=>{const y=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(y)},[]),t.jsx(gr,{present:n||x,children:({present:y})=>t.jsx(dt.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":f,hidden:!y,id:v,tabIndex:0,...m,ref:a,style:{...e.style,animationDuration:b.current?"0s":void 0},children:y&&o})})});ns.displayName=ls;function os(e,a){return"".concat(e,"-trigger-").concat(a)}function is(e,a){return"".concat(e,"-content-").concat(a)}var pl=es,gl=as,bl=rs,vl=ns;function _a({className:e,...a}){return t.jsx(pl,{"data-slot":"tabs",className:Re("flex flex-col gap-2",e),...a})}function Ea({className:e,...a}){return t.jsx(gl,{"data-slot":"tabs-list",className:Re("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...a})}function Ta({className:e,...a}){return t.jsx(bl,{"data-slot":"tabs-trigger",className:Re("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function ce({className:e,...a}){return t.jsx(vl,{"data-slot":"tabs-content",className:Re("flex-1 outline-none",e),...a})}function yl({breadcrumbs:e,title:a,description:r,toolbar:l,children:n,className:o}){return t.jsxs("section",{className:Re("flex flex-col gap-3 rounded-3xl border border-[color:var(--color-gray-200)]","bg-[color:var(--color-gray-25)] p-4 shadow-[var(--shadow-theme-sm)] sm:p-6","dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]",o),children:[e?t.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]",children:e}):null,a||r||l?t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[t.jsxs("div",{className:"min-w-0 space-y-1",children:[a?t.jsx("h1",{className:"text-lg font-semibold text-[color:var(--color-gray-900)] dark:text-white sm:text-xl",children:a}):null,r?t.jsx("p",{className:"text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]",children:r}):null]}),l?t.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:l}):null]}):null,n?t.jsx("div",{className:"space-y-3 sm:space-y-4",children:n}):null]})}function jl({value:e,displayValue:a,copyHint:r,copiedHint:l,onCopy:n,className:o,disabled:m,...d}){const[f,v]=A.useState(!1),x=A.useRef(),b=a!=null?a:e,y=r!=null?r:"Copy",F=l!=null?l:"Copied";A.useEffect(()=>()=>{x.current&&window.clearTimeout(x.current)},[]),A.useEffect(()=>{if(f)return x.current=window.setTimeout(()=>v(!1),1600),()=>{x.current&&window.clearTimeout(x.current)}},[f]);const k=async()=>{if(!e||m)return;const I=async()=>{var p;if(typeof navigator<"u"&&((p=navigator.clipboard)!=null&&p.writeText))return await navigator.clipboard.writeText(e),!0;if(typeof document>"u")return!1;const T=document.createElement("textarea");T.value=e,T.setAttribute("readonly",""),T.style.position="absolute",T.style.left="-9999px",document.body.appendChild(T),T.select();try{return document.execCommand("copy")}catch(S){return!1}finally{document.body.removeChild(T)}};try{await I()&&v(!0)}finally{n==null||n({value:e})}};return t.jsxs("button",{type:"button",className:Re("inline-flex items-center gap-1.5 rounded-full border border-[color:var(--color-gray-300)]","bg-[color:var(--color-gray-25)] px-3 py-1 text-[11px] font-semibold tracking-wide text-[color:var(--color-gray-700)]","transition-colors duration-150 ease-out hover:border-[color:var(--color-brand-400)] hover:bg-[color:var(--color-brand-50)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-500)] focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:border-[color:var(--color-gray-200)] disabled:text-[color:var(--color-gray-400)]","dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-[color:var(--color-gray-100)]","dark:hover:border-[color:var(--color-brand-400)] dark:hover:bg-[color:var(--color-gray-800)]",o),onClick:k,title:f?F:y,"aria-pressed":f,"aria-live":"polite",disabled:m,...d,children:[t.jsxs("span",{className:"inline-flex items-center gap-1",children:[f?t.jsx(Pr,{className:"h-4 w-4 text-[color:var(--color-brand-500)] dark:text-[color:var(--color-brand-400)]","aria-hidden":"true"}):t.jsx(Vr,{className:"h-4 w-4 text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]","aria-hidden":"true"}),t.jsx("span",{className:"truncate text-left",children:b})]}),t.jsx("span",{className:"sr-only",children:f?F:y})]})}function Nl({form:e,onChange:a,onSubmit:r,onDelete:l,onReset:n,valueLabel:o="Значение",renderValueField:m,readonly:d=!1,readonlyNotice:f}){const[v,x]=A.useState(!1),[b,y]=A.useState(!1),F=k=>{k.preventDefault(),!d&&y(!0)};return t.jsxs("form",{onSubmit:F,className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Имя"}),t.jsx("input",{id:"collection-form-name",name:"collectionName",className:"h-10 w-full rounded border px-3",value:e.name,onChange:k=>a({...e,name:k.target.value}),required:!0,disabled:d})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:o}),m?m(e,d?()=>{}:a,{readonly:d}):t.jsx("input",{id:"collection-form-value",name:"collectionValue",className:"h-10 w-full rounded border px-3",value:e.value,onChange:k=>a({...e,value:k.target.value}),required:!0,disabled:d})]}),d?t.jsx("p",{className:"rounded border border-amber-200 bg-amber-50 p-2 text-sm text-amber-900",children:f!=null?f:"Элемент доступен только для чтения."}):null,t.jsxs("div",{className:"flex gap-2",children:[t.jsx(P,{type:"submit",disabled:d,children:"Сохранить"}),e._id?t.jsx(P,{type:"button",variant:"destructive",disabled:d,onClick:()=>{d||x(!0)},children:"Удалить"}):t.jsx(P,{type:"button",variant:"outline",onClick:n,disabled:d,children:"Очистить"})]}),t.jsx(ke,{open:b,message:"Сохранить изменения?",onConfirm:()=>{y(!1),r()},onCancel:()=>y(!1),confirmText:"Сохранить"}),t.jsx(ke,{open:v,message:"Удалить элемент?",onConfirm:()=>{x(!1),l()},onCancel:()=>x(!1)})]})}const Et={name:"",registrationNumber:"",odometerInitial:"0",odometerCurrent:"0",mileageTotal:"0",transportType:"Легковой",fuelType:"Бензин",fuelRefilled:"0",fuelAverageConsumption:"0",fuelSpentTotal:"0",currentTasks:""},wl=e=>e.split(/[\n,]/).map(a=>a.trim()).filter(Boolean);function kl({open:e,mode:a,vehicle:r,saving:l,onSubmit:n,onDelete:o,onClose:m}){const[d,f]=i.useState(Et),[v,x]=i.useState(null),[b,y]=i.useState(!1),[F,k]=i.useState(!1);i.useEffect(()=>{if(e&&r){const N=Array.isArray(r.currentTasks)?r.currentTasks.filter(Boolean):[];f({name:r.name,registrationNumber:r.registrationNumber,odometerInitial:String(r.odometerInitial),odometerCurrent:String(r.odometerCurrent),mileageTotal:String(r.mileageTotal),transportType:r.transportType,fuelType:r.fuelType,fuelRefilled:String(r.fuelRefilled),fuelAverageConsumption:String(r.fuelAverageConsumption),fuelSpentTotal:String(r.fuelSpentTotal),currentTasks:N.join("\n")}),x(null),y(!1),k(!1);return}e&&a==="create"&&(f(Et),x(null),y(!1),k(!1)),e||(f(Et),x(null),y(!1),k(!1))},[e,a,r]);const I=a==="update"&&r,T=i.useMemo(()=>({name:d.name.trim(),registrationNumber:d.registrationNumber.trim().toUpperCase(),odometerInitial:Number(d.odometerInitial||"0"),odometerCurrent:Number(d.odometerCurrent||"0"),mileageTotal:Number(d.mileageTotal||"0"),transportType:d.transportType,fuelType:d.fuelType,fuelRefilled:Number(d.fuelRefilled||"0"),fuelAverageConsumption:Number(d.fuelAverageConsumption||"0"),fuelSpentTotal:Number(d.fuelSpentTotal||"0"),currentTasks:wl(d.currentTasks)}),[d]),p=N=>{if(N.preventDefault(),!d.name.trim()){x("Название обязательно");return}if(!/^[A-ZА-ЯІЇЄ]{2} \d{4} [A-ZА-ЯІЇЄ]{2}$/u.test(T.registrationNumber)){x("Регистрационный номер должен быть в формате XX 0000 XX");return}x(null),y(!0)},S=async()=>{try{await n(T,r==null?void 0:r.id),y(!1),m()}catch(N){const C=N instanceof Error?N.message:"Не удалось сохранить транспорт";x(C),y(!1)}},R=async()=>{if(!(!r||!o))try{await o(r.id),k(!1),m()}catch(N){const C=N instanceof Error?N.message:"Не удалось удалить транспорт";x(C),k(!1)}};return t.jsxs("form",{onSubmit:p,className:"space-y-3",children:[t.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Название"}),t.jsx("input",{id:"fleet-vehicle-name",name:"name",className:"h-10 w-full rounded border px-3",value:d.name,onChange:N=>f(C=>({...C,name:N.target.value})),disabled:l,required:!0})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Регистрационный номер"}),t.jsx("input",{id:"fleet-vehicle-registration",name:"registrationNumber",className:"h-10 w-full rounded border px-3 uppercase",value:d.registrationNumber,onChange:N=>f(C=>({...C,registrationNumber:N.target.value})),disabled:l,required:!0,placeholder:"AA 1234 BB"})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Тип транспорта"}),t.jsxs("select",{id:"fleet-vehicle-transport-type",name:"transportType",className:"h-10 w-full rounded border px-3",value:d.transportType,onChange:N=>f(C=>({...C,transportType:N.target.value})),disabled:l,required:!0,children:[t.jsx("option",{value:"Легковой",children:"Легковой"}),t.jsx("option",{value:"Грузовой",children:"Грузовой"})]})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Одометр начальный, км"}),t.jsx("input",{type:"number",min:"0",id:"fleet-vehicle-odometer-initial",name:"odometerInitial",className:"h-10 w-full rounded border px-3",value:d.odometerInitial,onChange:N=>f(C=>({...C,odometerInitial:N.target.value})),disabled:l,required:!0})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Одометр текущий, км"}),t.jsx("input",{type:"number",min:"0",id:"fleet-vehicle-odometer-current",name:"odometerCurrent",className:"h-10 w-full rounded border px-3",value:d.odometerCurrent,onChange:N=>f(C=>({...C,odometerCurrent:N.target.value})),disabled:l,required:!0})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Пробег общий, км"}),t.jsx("input",{type:"number",min:"0",id:"fleet-vehicle-mileage-total",name:"mileageTotal",className:"h-10 w-full rounded border px-3",value:d.mileageTotal,onChange:N=>f(C=>({...C,mileageTotal:N.target.value})),disabled:l,required:!0})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Вид топлива"}),t.jsxs("select",{id:"fleet-vehicle-fuel-type",name:"fuelType",className:"h-10 w-full rounded border px-3",value:d.fuelType,onChange:N=>f(C=>({...C,fuelType:N.target.value})),disabled:l,children:[t.jsx("option",{value:"Бензин",children:"Бензин"}),t.jsx("option",{value:"Дизель",children:"Дизель"}),t.jsx("option",{value:"Газ",children:"Газ"})]})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Топлива заправлено"}),t.jsx("input",{type:"number",min:"0",id:"fleet-vehicle-fuel-refilled",name:"fuelRefilled",className:"h-10 w-full rounded border px-3",value:d.fuelRefilled,onChange:N=>f(C=>({...C,fuelRefilled:N.target.value})),disabled:l,required:!0})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Расход средний, л/км"}),t.jsx("input",{type:"number",min:"0",step:"0.01",id:"fleet-vehicle-fuel-average",name:"fuelAverageConsumption",className:"h-10 w-full rounded border px-3",value:d.fuelAverageConsumption,onChange:N=>f(C=>({...C,fuelAverageConsumption:N.target.value})),disabled:l,required:!0})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Затрачено топлива всего, л"}),t.jsx("input",{type:"number",min:"0",id:"fleet-vehicle-fuel-spent",name:"fuelSpentTotal",className:"h-10 w-full rounded border px-3",value:d.fuelSpentTotal,onChange:N=>f(C=>({...C,fuelSpentTotal:N.target.value})),disabled:l,required:!0})]})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"Текущие задачи (ID через запятую или перенос строки)"}),t.jsx("textarea",{id:"fleet-vehicle-current-tasks",name:"currentTasks",className:"min-h-[5rem] w-full rounded border px-3 py-2",value:d.currentTasks,onChange:N=>f(C=>({...C,currentTasks:N.target.value})),disabled:l})]}),v?t.jsx("p",{className:"text-sm text-red-600",children:v}):null,t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(P,{type:"submit",disabled:l,children:"Сохранить"}),t.jsx(P,{type:"button",variant:"outline",onClick:m,disabled:l,children:"Отмена"}),I&&o?t.jsx(P,{type:"button",variant:"destructive",onClick:()=>k(!0),disabled:l,children:"Удалить"}):null]}),t.jsx(ke,{open:b,message:"Сохранить транспорт?",confirmText:"Сохранить",onConfirm:S,onCancel:()=>y(!1)}),t.jsx(ke,{open:F,message:"Удалить транспорт?",confirmText:"Удалить",status:"danger",onConfirm:R,onCancel:()=>k(!1)})]})}const Aa=e=>{if(e==null)return"";if(Array.isArray(e))return e.length?e.join(", "):"";if(typeof e=="object")try{return JSON.stringify(e)}catch(a){return String(e)}return String(e)},Sl=[{accessorKey:"name",header:"Название",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"registrationNumber",header:"Рег. номер",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"odometerInitial",header:"Одометр начальный",meta:{minWidth:"8rem",maxWidth:"14rem"}},{accessorKey:"odometerCurrent",header:"Одометр текущий",meta:{minWidth:"8rem",maxWidth:"14rem"}},{accessorKey:"mileageTotal",header:"Пробег",meta:{minWidth:"6rem",maxWidth:"12rem"}},{accessorKey:"transportType",header:"Тип транспорта",meta:{minWidth:"8rem",maxWidth:"14rem"}},{accessorKey:"fuelType",header:"Тип топлива",meta:{minWidth:"6rem",maxWidth:"12rem"}},{accessorKey:"fuelRefilled",header:"Заправлено",meta:{minWidth:"6rem",maxWidth:"10rem"}},{accessorKey:"fuelAverageConsumption",header:"Расход",meta:{minWidth:"6rem",maxWidth:"10rem"}},{accessorKey:"fuelSpentTotal",header:"Израсходовано",meta:{minWidth:"6rem",maxWidth:"10rem"}},{accessorKey:"currentTasks",header:"Текущие задачи",cell:({getValue:e})=>Aa(e()),meta:{minWidth:"10rem",maxWidth:"24rem"}},{accessorKey:"transportHistoryInfo",header:"История задач",cell:({getValue:e})=>Aa(e()),meta:{minWidth:"12rem",maxWidth:"28rem"}},{accessorKey:"createdAt",header:"Создан",meta:{minWidth:"10rem",maxWidth:"16rem"}},{accessorKey:"updatedAt",header:"Обновлён",meta:{minWidth:"10rem",maxWidth:"16rem"}},{accessorKey:"unitId",header:"Устройство",meta:{minWidth:"8rem",maxWidth:"12rem"}},{accessorKey:"remoteName",header:"Удалённое имя",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"notes",header:"Примечания",meta:{minWidth:"10rem",maxWidth:"20rem"}}],X="Нет данных",Cl=["inline-flex min-h-[1.65rem] min-w-0 max-w-full items-center justify-start gap-1","rounded-full px-2.5 py-0.5 text-[0.72rem] font-semibold leading-tight text-slate-900","ring-1 ring-slate-300/80 bg-slate-100/95 shadow-xs","dark:text-slate-100 dark:ring-slate-600/60 dark:bg-slate-800/80","truncate"].join(" "),Ae="".concat(Cl),Ve="flex flex-wrap items-center gap-1.5",Tt=10,Il=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),Ra=e=>{if(!e)return"";const a=new Date(e);return Number.isNaN(a.getTime())?"":Il.format(a)},cs=e=>{const a=Ra(e.assignedAt),r=Ra(e.removedAt),l=e.taskTitle&&e.taskTitle.trim().length?e.taskTitle.trim():e.taskId;return a&&r?"".concat(a," — ").concat(l," (до ").concat(r,")"):a?"".concat(a," — ").concat(l):r?"".concat(l," (до ").concat(r,")"):l},_l=e=>e!=null&&e.length?e.map(cs).join("; "):"",El=[{id:"id",label:"ID",render:e=>e.id},{id:"name",label:"Название",render:e=>e.name},{id:"registrationNumber",label:"Регистрационный номер",render:e=>e.registrationNumber},{id:"odometerInitial",label:"Одометр начальный",render:e=>e.odometerInitial},{id:"odometerCurrent",label:"Одометр текущий",render:e=>e.odometerCurrent},{id:"mileageTotal",label:"Пробег",render:e=>e.mileageTotal},{id:"transportType",label:"Тип транспорта",render:e=>e.transportType},{id:"fuelType",label:"Тип топлива",render:e=>e.fuelType},{id:"fuelRefilled",label:"Заправлено",render:e=>e.fuelRefilled},{id:"fuelAverageConsumption",label:"Расход",render:e=>e.fuelAverageConsumption},{id:"fuelSpentTotal",label:"Израсходовано",render:e=>e.fuelSpentTotal},{id:"currentTasks",label:"Задачи",render:e=>e.currentTasks.length?e.currentTasks.join(", "):"—"},{id:"transportHistory",label:"История задач",render:e=>{var a;return(a=e.transportHistory)!=null&&a.length?t.jsx("ul",{className:"space-y-1 text-sm",children:e.transportHistory.map(r=>t.jsx("li",{className:"leading-snug",children:cs(r)},"".concat(r.taskId,"-").concat(r.assignedAt)))}):"—"}},{id:"createdAt",label:"Создан",render:e=>e.createdAt||"—"},{id:"updatedAt",label:"Обновлён",render:e=>e.updatedAt||"—"},{id:"unitId",label:"Устройство",render:e=>e.unitId!==void 0&&e.unitId!==null?e.unitId:"—"},{id:"remoteName",label:"Удалённое имя",render:e=>e.remoteName||"—"},{id:"notes",label:"Примечания",render:e=>e.notes||"—"}];function Tl(){const[e,a]=i.useState([]),[r,l]=i.useState(0),[n,o]=i.useState(1),[m,d]=i.useState(""),[f,v]=i.useState(""),[x,b]=i.useState(!1),[y,F]=i.useState(""),[k,I]=i.useState(!1),[T,p]=i.useState("create"),[S,R]=i.useState(!1),[N,C]=i.useState(null),D=i.useMemo(()=>Math.max(1,Math.ceil(r/Tt)),[r]),B=i.useMemo(()=>e.map(M=>({...M,transportHistoryInfo:_l(M.transportHistory)})),[e]),V=i.useMemo(()=>"".concat(Ae," whitespace-nowrap sm:text-sm"),[]),K=i.useMemo(()=>"".concat(Ve," justify-start"),[]),Q=i.useCallback(async()=>{b(!0),F("");try{const M=await kr(f,n,Tt);a(M.items),l(M.total)}catch(M){const u=M instanceof Error?M.message:"Не удалось загрузить транспорт";F(u),a([]),l(0)}finally{b(!1)}},[f,n]);i.useEffect(()=>{Q()},[Q]);const z=()=>{p("create"),C(null),I(!0)},G=M=>{p("update"),C(M),I(!0)},ne=()=>{S||(I(!1),C(null))},de=async(M,u)=>{R(!0);try{T==="create"||!u?(await Sr(M),Ne("Транспорт создан","success")):(await Cr(u,M),Ne("Транспорт обновлён","success")),await Q(),C(null),I(!1)}finally{R(!1)}},J=async M=>{R(!0);try{await Ir(M),Ne("Транспорт удалён","success"),await Q(),C(null),I(!1)}finally{R(!1)}},oe=M=>{M.preventDefault(),o(1),v(m.trim())},me=M=>{M<1||M>D||o(M)};return t.jsxs("section",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-start sm:gap-3 lg:items-center lg:gap-3",children:[t.jsxs("form",{onSubmit:oe,className:"mt-2 flex w-full flex-col gap-2 sm:flex-row sm:flex-wrap sm:items-center sm:gap-2 lg:grid lg:flex-1 lg:grid-cols-[minmax(0,18rem)_auto] lg:items-center lg:gap-3",children:[t.jsxs("label",{className:"flex w-full flex-col gap-1 sm:w-64 lg:w-full lg:min-w-0",children:[t.jsx("span",{className:"text-sm font-medium",children:"Поиск"}),t.jsx("input",{id:"fleet-vehicles-search",name:"fleetVehicleSearch",className:"h-10 w-full rounded border px-3 text-sm lg:h-9 lg:text-xs",value:m,onChange:M=>d(M.target.value),placeholder:"Название или номер"})]}),t.jsx(P,{type:"submit",className:"h-10 w-full max-w-[11rem] px-3 text-sm font-semibold sm:h-10 sm:w-auto sm:px-3 lg:h-8 lg:text-xs",children:"Искать"})]}),t.jsx(P,{type:"button",variant:"success",className:"h-10 w-full max-w-[11rem] px-3 text-sm font-semibold sm:w-auto lg:h-8 lg:text-xs",onClick:z,children:"Добавить"})]}),x?t.jsx("p",{className:"text-sm text-gray-500",children:"Загрузка транспорта…"}):null,y?t.jsx("p",{className:"rounded border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:y}):null,!x&&!y&&!e.length?t.jsx("p",{className:"text-sm text-gray-500",children:"Транспорт не найден."}):null,t.jsx(lt,{columns:Sl,data:B,pageIndex:n-1,pageSize:Tt,pageCount:D,onPageChange:M=>me(M+1),showGlobalSearch:!1,showFilters:!1,onRowClick:M=>G(M),wrapCellsAsBadges:!0,badgeClassName:V,badgeWrapperClassName:K,badgeEmptyPlaceholder:X}),t.jsx(rt,{open:k,onClose:ne,children:t.jsxs("div",{className:"space-y-4",children:[N?t.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:[t.jsx("h3",{className:"text-base font-semibold",children:"Карточка транспорта"}),t.jsx("dl",{className:"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2",children:El.map(({id:M,label:u,render:j})=>t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:u}),t.jsx("dd",{className:"text-slate-900",children:j(N)})]},M))})]}):null,t.jsx(kl,{open:k,mode:T,vehicle:N,saving:S,onSubmit:de,onDelete:T==="update"?J:void 0,onClose:ne})]})})]})}const ds="rounded-lg border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900",Da="space-y-4",Al=({item:e,value:a,onChange:r,onSave:l,onReset:n,onDelete:o,saving:m,deleting:d,error:f})=>{var S,R,N,C,D,B;const[v,x]=A.useState(f);A.useEffect(()=>{x(f)},[f]);const b=(R=(S=e.meta)==null?void 0:S.defaultLabel)!=null?R:e.name,y=((N=e.value)==null?void 0:N.trim())||b,F=a.trim(),k=F!==y,I=async()=>{x(void 0);try{await l()}catch(V){const K=V instanceof Error?V.message:String(V);x(K)}},T=()=>{x(void 0),n()},p=async()=>{if(o){x(void 0);try{await o()}catch(V){const K=V instanceof Error?V.message:String(V);x(K)}}};return t.jsx("article",{className:ds,children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between gap-2",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:[b,(C=e.meta)!=null&&C.required?" *":""]}),t.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Поле: ",t.jsx("span",{className:"font-mono",children:e.name}),(D=e.meta)!=null&&D.fieldType?" • Тип: ".concat(e.meta.fieldType):""]})]})}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Отображаемое название"}),t.jsx(Te,{value:a,onChange:V=>r(V.target.value),placeholder:b,"aria-label":"Название поля ".concat(b)})]}),v?t.jsx("p",{className:"text-sm text-rose-600",role:"alert",children:v}):null,t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(P,{type:"button",size:"sm",onClick:I,disabled:m||d||!k||!F,children:m?t.jsx(we,{}):"Сохранить"}),t.jsx(P,{type:"button",size:"sm",variant:"outline",onClick:T,disabled:m||d,children:"Сбросить"}),o&&!((B=e.meta)!=null&&B.virtual)?t.jsx(P,{type:"button",size:"sm",variant:"destructive",onClick:p,disabled:m||d,children:d?t.jsx(we,{}):"Удалить"}):null]})]})})},Rl=({item:e,label:a,url:r,photosUrl:l,onChangeLabel:n,onChangeUrl:o,onChangePhotosUrl:m,onSave:d,onReset:f,onDelete:v,saving:x,deleting:b,error:y})=>{var Q,z,G,ne,de,J,oe,me,M,u;const[F,k]=A.useState(y);A.useEffect(()=>{k(y)},[y]);const I=(z=(Q=e.meta)==null?void 0:Q.defaultLabel)!=null?z:e.name,T=((G=e.value)==null?void 0:G.trim())||I,p=typeof((ne=e.meta)==null?void 0:ne.tg_theme_url)=="string"?e.meta.tg_theme_url:"",S=typeof((de=e.meta)==null?void 0:de.tg_photos_url)=="string"?e.meta.tg_photos_url:"",R=a.trim(),N=r.trim(),C=l.trim(),D=R!==T||N!==(p||"")||C!==(S||""),B=async()=>{k(void 0);try{await d()}catch(j){const w=j instanceof Error?j.message:String(j);k(w)}},V=()=>{k(void 0),f()},K=async()=>{if(v){k(void 0);try{await v()}catch(j){const w=j instanceof Error?j.message:String(j);k(w)}}};return t.jsx("article",{className:ds,children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between gap-2",children:t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:I}),t.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Тип задачи: ",t.jsx("span",{className:"font-mono",children:e.name})]})]})}),t.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Отображаемое название"}),t.jsx(Te,{value:a,onChange:j=>n(j.target.value),placeholder:I,"aria-label":"Название типа ".concat(I)})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ссылка на тему Telegram"}),t.jsx(Te,{value:r,onChange:j=>o(j.target.value),placeholder:"https://t.me/c/...","aria-label":"Ссылка темы для типа ".concat(I)})]}),t.jsxs("label",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Тема для фото"}),t.jsx(Te,{value:l,onChange:j=>m(j.target.value),placeholder:"https://t.me/c/...","aria-label":"Ссылка темы для фото ".concat(I)})]})]}),(J=e.meta)!=null&&J.tg_chat_id?t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Чат: ",e.meta.tg_chat_id]}):null,(oe=e.meta)!=null&&oe.tg_topic_id?t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Тема: ",e.meta.tg_topic_id]}):null,(me=e.meta)!=null&&me.tg_photos_chat_id?t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Чат фото: ",e.meta.tg_photos_chat_id]}):null,(M=e.meta)!=null&&M.tg_photos_topic_id?t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Тема фото: ",e.meta.tg_photos_topic_id]}):null,F?t.jsx("p",{className:"text-sm text-rose-600",role:"alert",children:F}):null,t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(P,{type:"button",size:"sm",onClick:B,disabled:x||b||!R||!D,children:x?t.jsx(we,{}):"Сохранить"}),t.jsx(P,{type:"button",size:"sm",variant:"outline",onClick:V,disabled:x||b,children:"Сбросить"}),v&&!((u=e.meta)!=null&&u.virtual)?t.jsx(P,{type:"button",size:"sm",variant:"destructive",onClick:K,disabled:x||b,children:b?t.jsx(we,{}):"Удалить"}):null]})]})})},Ma=e=>[...e].sort((a,r)=>{var o,m;const l=typeof((o=a.meta)==null?void 0:o.order)=="number"?a.meta.order:0,n=typeof((m=r.meta)==null?void 0:m.order)=="number"?r.meta.order:0;return l-n}),Wa=(e,a)=>{const[r,l]=A.useState({});return A.useEffect(()=>{l(n=>{let o=!1;const m={...n},d=new Set(e.map(f=>f.name));return e.forEach(f=>{const v=f.name;v in n||(m[v]=a(f),o=!0)}),Object.keys(n).forEach(f=>{d.has(f)||(delete m[f],o=!0)}),o?m:n})},[e,a]),[r,l]},Dl=({fields:e,types:a,loading:r,onSaveField:l,onDeleteField:n,onSaveType:o,onDeleteType:m})=>{const d=A.useCallback(u=>{var j,w;return((j=u.value)==null?void 0:j.trim())||((w=u.meta)==null?void 0:w.defaultLabel)||u.name},[]),f=A.useCallback(u=>{var j,w,E,q;return{label:((j=u.value)==null?void 0:j.trim())||((w=u.meta)==null?void 0:w.defaultLabel)||u.name,url:typeof((E=u.meta)==null?void 0:E.tg_theme_url)=="string"?u.meta.tg_theme_url:"",photosUrl:typeof((q=u.meta)==null?void 0:q.tg_photos_url)=="string"?u.meta.tg_photos_url:""}},[]),[v,x]=Wa(e,d),[b,y]=Wa(a,f),[F,k]=A.useState(null),[I,T]=A.useState(null),[p,S]=A.useState(null),[R,N]=A.useState(null),[C,D]=A.useState({}),[B,V]=A.useState({}),K=A.useMemo(()=>Ma(e),[e]),Q=A.useMemo(()=>Ma(a),[a]),z=(u,j)=>{x(w=>({...w,[u]:j})),D(w=>({...w,[u]:""}))},G=(u,j)=>{y(w=>{var E,q,ae,ue,U,ee;return{...w,[u]:{label:(q=(E=w[u])==null?void 0:E.label)!=null?q:"",url:(ue=(ae=w[u])==null?void 0:ae.url)!=null?ue:"",photosUrl:(ee=(U=w[u])==null?void 0:U.photosUrl)!=null?ee:"",...j}}}),V(w=>({...w,[u]:""}))},ne=async u=>{var w;const j=(w=v[u.name])!=null?w:"";k(u.name),D(E=>({...E,[u.name]:""}));try{await l(u,j),x(E=>({...E,[u.name]:j}))}catch(E){const q=E instanceof Error?E.message:String(E);throw D(ae=>({...ae,[u.name]:q})),E}finally{k(E=>E===u.name?null:E)}},de=async u=>{var j;if(!((j=u.meta)!=null&&j.virtual)){S(u.name),D(w=>({...w,[u.name]:""}));try{await n(u)}catch(w){const E=w instanceof Error?w.message:String(w);throw D(q=>({...q,[u.name]:E})),w}finally{S(w=>w===u.name?null:w)}}},J=u=>{x(j=>({...j,[u.name]:d(u)})),D(j=>({...j,[u.name]:""}))},oe=async u=>{var w;const j=(w=b[u.name])!=null?w:{label:"",url:"",photosUrl:""};T(u.name),V(E=>({...E,[u.name]:""}));try{await o(u,{label:j.label,tg_theme_url:j.url,tg_photos_url:j.photosUrl}),y(E=>({...E,[u.name]:{label:j.label,url:j.url,photosUrl:j.photosUrl}}))}catch(E){const q=E instanceof Error?E.message:String(E);throw V(ae=>({...ae,[u.name]:q})),E}finally{T(E=>E===u.name?null:E)}},me=async u=>{var j;if(!((j=u.meta)!=null&&j.virtual)){N(u.name),V(w=>({...w,[u.name]:""}));try{await m(u)}catch(w){const E=w instanceof Error?w.message:String(w);throw V(q=>({...q,[u.name]:E})),w}finally{N(w=>w===u.name?null:w)}}},M=u=>{y(j=>({...j,[u.name]:f(u)})),V(j=>({...j,[u.name]:""}))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("section",{className:Da,children:[t.jsxs("header",{className:"space-y-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Поля задачи"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Настройте названия полей, которые видят пользователи в карточке задачи."})]}),r&&!K.length?t.jsx("div",{className:"flex items-center justify-center py-6",children:t.jsx(we,{})}):t.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:K.map(u=>{var j,w;return t.jsx(Al,{item:u,value:(j=v[u.name])!=null?j:"",onChange:E=>z(u.name,E),onSave:()=>ne(u),onReset:()=>J(u),onDelete:(w=u.meta)!=null&&w.virtual?void 0:()=>de(u),saving:F===u.name,deleting:p===u.name,error:C[u.name]},u._id)})})]}),t.jsxs("section",{className:Da,children:[t.jsxs("header",{className:"space-y-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Типы задач и темы Telegram"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Для каждого типа задачи можно задать отображаемое название, основную тему чата Telegram и отдельную тему для альбома фото."})]}),r&&!Q.length?t.jsx("div",{className:"flex items-center justify-center py-6",children:t.jsx(we,{})}):t.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:Q.map(u=>{var j,w,E,q,ae,ue,U;return t.jsx(Rl,{item:u,label:(w=(j=b[u.name])==null?void 0:j.label)!=null?w:"",url:(q=(E=b[u.name])==null?void 0:E.url)!=null?q:"",photosUrl:(ue=(ae=b[u.name])==null?void 0:ae.photosUrl)!=null?ue:"",onChangeLabel:ee=>G(u.name,{label:ee}),onChangeUrl:ee=>G(u.name,{url:ee}),onChangePhotosUrl:ee=>G(u.name,{photosUrl:ee}),onSave:()=>oe(u),onReset:()=>M(u),onDelete:(U=u.meta)!=null&&U.virtual?void 0:()=>me(u),saving:I===u.name,deleting:R===u.name,error:B[u.name]},u._id)})})]})]})};async function Ml(e={}){const a=new URLSearchParams;e.from&&a.set("from",e.from),e.to&&a.set("to",e.to),e.status&&a.set("status",e.status);const r=a.toString(),l=await nr("/api/v1/analytics/route-plans/summary".concat(r?"?".concat(r):""));if(!l.ok)throw new Error("Не удалось получить аналитику маршрутных планов");return await l.json()}const At=A.lazy(()=>er(()=>import("./react-apexcharts.min-zsnjzXmB.js").then(e=>e.r),__vite__mapDeps([0,1,2]))),Wl=1440*60*1e3,ms=e=>new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10),Oa=ms(new Date),Fa=ms(new Date(Date.now()-Wl*29)),Ol=[{value:"all",label:"Все статусы"},{value:"draft",label:"Черновики"},{value:"approved",label:"Утверждённые"},{value:"completed",label:"Завершённые"}],Rt=new Intl.NumberFormat("ru-RU",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1}),Dt=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:1}),Mt=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:2}),Fl=e=>{const a={};return e.from&&(a.from=e.from),e.to&&(a.to=e.to),e.status!=="all"&&(a.status=e.status),a},Ul=e=>{var a;return(a=e==null?void 0:e.mileage.byPeriod.map(r=>({x:r.date,y:typeof r.value=="number"?r.value:0})))!=null?a:[]},Ll=e=>{var a;return(a=e==null?void 0:e.load.byPeriod.map(r=>({x:r.date,y:typeof r.value=="number"?r.value:null})))!=null?a:[]},Pl=e=>{var a;return(a=e==null?void 0:e.sla.byPeriod.map(r=>({x:r.date,y:typeof r.rate=="number"?Number((r.rate*100).toFixed(2)):null})))!=null?a:[]};function Kl(){var I,T,p;const{t:e}=Za(),[a,r]=A.useState({from:Fa,to:Oa,status:"completed"}),[l,n]=A.useState(!1),[o,m]=A.useState(null),[d,f]=A.useState(null),v=A.useCallback(async S=>{n(!0),m(null);try{const R=await Ml(Fl(S));f(R)}catch(R){console.error("Не удалось загрузить аналитику маршрутных планов",R),m(e("analytics.loadError"))}finally{n(!1)}},[e]);A.useEffect(()=>{v(a)},[a,v]);const x=S=>{S.preventDefault();const R=new FormData(S.currentTarget),N={from:String(R.get("from")||""),to:String(R.get("to")||""),status:R.get("status")||"all"};r(N)},b=()=>{r({from:Fa,to:Oa,status:"completed"})},y=A.useMemo(()=>Ul(d),[d]),F=A.useMemo(()=>Ll(d),[d]),k=A.useMemo(()=>Pl(d),[d]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("h1",{className:"text-2xl font-semibold",children:e("analytics.title")}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:e("analytics.description")})]}),t.jsxs("form",{onSubmit:x,className:"flex flex-wrap items-end gap-3 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900",children:[t.jsxs("label",{className:"flex flex-col text-sm text-slate-700 dark:text-slate-200",children:[e("analytics.filters.from"),t.jsx(Te,{type:"date",name:"from",defaultValue:a.from})]}),t.jsxs("label",{className:"flex flex-col text-sm text-slate-700 dark:text-slate-200",children:[e("analytics.filters.to"),t.jsx(Te,{type:"date",name:"to",defaultValue:a.to})]}),t.jsxs("label",{className:"flex flex-col text-sm text-slate-700 dark:text-slate-200",children:[e("analytics.filters.status"),t.jsx("select",{name:"status",defaultValue:a.status,className:"mt-1 w-48 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-primary/60 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:Ol.map(S=>t.jsx("option",{value:S.value,children:e("analytics.status.".concat(S.value))},S.value))})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(P,{type:"submit",disabled:l,children:e(l?"analytics.loading":"analytics.apply")}),t.jsx(P,{type:"button",variant:"outline",onClick:b,children:e("analytics.reset")})]})]}),o?t.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-600 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200",children:o}):null,t.jsxs("section",{className:"grid gap-4 md:grid-cols-3",children:[t.jsxs("article",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900",children:[t.jsx("h2",{className:"text-sm font-medium text-slate-500 dark:text-slate-300",children:e("analytics.cards.mileage")}),t.jsxs("p",{className:"mt-2 text-2xl font-semibold",children:[Dt.format((I=d==null?void 0:d.mileage.total)!=null?I:0)," км"]}),t.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:e("analytics.cards.period",{from:(T=d==null?void 0:d.period.from)!=null?T:a.from,to:(p=d==null?void 0:d.period.to)!=null?p:a.to})})]}),t.jsxs("article",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900",children:[t.jsx("h2",{className:"text-sm font-medium text-slate-500 dark:text-slate-300",children:e("analytics.cards.load")}),t.jsx("p",{className:"mt-2 text-2xl font-semibold",children:typeof(d==null?void 0:d.load.average)=="number"?"".concat(Mt.format(d.load.average)," кг"):e("analytics.noData")}),t.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:e("analytics.cards.loadHint")})]}),t.jsxs("article",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900",children:[t.jsx("h2",{className:"text-sm font-medium text-slate-500 dark:text-slate-300",children:"SLA"}),t.jsx("p",{className:"mt-2 text-2xl font-semibold",children:typeof(d==null?void 0:d.sla.average)=="number"?Rt.format(d.sla.average):e("analytics.noData")}),t.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:e("analytics.cards.slaHint")})]})]}),t.jsxs("section",{className:"grid gap-4 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900 lg:col-span-3",children:[t.jsx("h3",{className:"text-base font-semibold text-slate-700 dark:text-slate-200",children:e("analytics.charts.mileage")}),t.jsx(A.Suspense,{fallback:t.jsx("div",{children:e("analytics.loading")}),children:t.jsx(At,{type:"area",height:280,series:[{name:e("analytics.cards.mileage"),data:y}],options:{chart:{id:"analytics-mileage",animations:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},xaxis:{type:"category"},yaxis:{labels:{formatter:S=>Dt.format(S)}},tooltip:{y:{formatter:S=>"".concat(Dt.format(S)," км")}}}})})]}),t.jsxs("div",{className:"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900",children:[t.jsx("h3",{className:"text-base font-semibold text-slate-700 dark:text-slate-200",children:e("analytics.charts.load")}),t.jsx(A.Suspense,{fallback:t.jsx("div",{children:e("analytics.loading")}),children:t.jsx(At,{type:"bar",height:280,series:[{name:e("analytics.cards.load"),data:F}],options:{chart:{id:"analytics-load",animations:{enabled:!1}},dataLabels:{enabled:!1},xaxis:{type:"category"},yaxis:{labels:{formatter:S=>"".concat(Mt.format(S)," кг")}},tooltip:{y:{formatter:S=>"".concat(Mt.format(S)," кг")}}}})})]}),t.jsxs("div",{className:"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900",children:[t.jsx("h3",{className:"text-base font-semibold text-slate-700 dark:text-slate-200",children:e("analytics.charts.sla")}),t.jsx(A.Suspense,{fallback:t.jsx("div",{children:e("analytics.loading")}),children:t.jsx(At,{type:"line",height:280,series:[{name:"SLA",data:k}],options:{chart:{id:"analytics-sla",animations:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight",width:2},markers:{size:4},xaxis:{type:"category"},yaxis:{min:0,max:100,tickAmount:5,labels:{formatter:S=>Rt.format(S/100)}},tooltip:{y:{formatter:S=>Rt.format(S/100)}}}})})]})]})]})}const Vl=[{accessorKey:"name",header:"Название",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"value",header:"Значение",meta:{minWidth:"8rem",maxWidth:"20rem"}},{accessorKey:"displayValue",header:"Связанные данные",meta:{minWidth:"10rem",maxWidth:"24rem"}},{accessorKey:"type",header:"Тип",meta:{minWidth:"6rem",maxWidth:"12rem"}},{accessorKey:"_id",header:"Идентификатор",meta:{minWidth:"10rem",maxWidth:"16rem"}},{accessorKey:"metaSummary",header:"Доп. сведения",meta:{minWidth:"10rem",maxWidth:"24rem"}}],$l=[{accessorKey:"telegram_id",header:"Telegram ID",meta:{minWidth:"8rem"}},{accessorKey:"username",header:"Логин",cell:({row:e})=>{var a,r;return(r=(a=e.original.telegram_username)!=null?a:e.original.username)!=null?r:""},meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"name",header:"Имя",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"phone",header:"Телефон",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"mobNumber",header:"Моб. номер",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"email",header:"E-mail",meta:{minWidth:"10rem",maxWidth:"20rem"}},{accessorKey:"role",header:"Роль",cell:({getValue:e})=>ye(e()),meta:{minWidth:"6rem",maxWidth:"12rem"}},{accessorKey:"access",header:"Доступ",cell:({getValue:e})=>{var a;return String((a=e())!=null?a:"")},meta:{minWidth:"6rem",maxWidth:"10rem"}},{accessorKey:"roleId",header:"Роль ID",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"departmentId",header:"Департамент",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"divisionId",header:"Отдел",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"positionId",header:"Должность",meta:{minWidth:"8rem",maxWidth:"16rem"}}],Hl=e=>e==null?"":String(e),Bl=[{accessorKey:"telegram_id",header:"Telegram ID",meta:{minWidth:"8rem"}},{accessorKey:"username",header:"Логин",cell:({row:e})=>{var a,r;return(r=(a=e.original.telegram_username)!=null?a:e.original.username)!=null?r:""},meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"name",header:"Имя",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"phone",header:"Телефон",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"mobNumber",header:"Моб. номер",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"email",header:"E-mail",meta:{minWidth:"10rem",maxWidth:"20rem"}},{accessorKey:"role",header:"Роль",cell:({getValue:e})=>ye(e()),meta:{minWidth:"6rem",maxWidth:"12rem"}},{accessorKey:"access",header:"Доступ",cell:({getValue:e})=>Hl(e()),meta:{minWidth:"6rem",maxWidth:"10rem"}},{accessorKey:"roleId",header:"Роль ID",cell:({row:e})=>ye(e.original.roleName),meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"departmentId",header:"Департамент",cell:({row:e})=>e.original.departmentName||"—",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"divisionId",header:"Отдел",cell:({row:e})=>e.original.divisionName||"—",meta:{minWidth:"8rem",maxWidth:"16rem"}},{accessorKey:"positionId",header:"Должность",cell:({row:e})=>e.original.positionName||"—",meta:{minWidth:"8rem",maxWidth:"16rem"}}],Pe=e=>{if(typeof e!="string")return;const a=e.trim();return a.length?a:void 0},zl=e=>typeof e=="number"&&Number.isFinite(e)?e:void 0,Gl=e=>{if(Array.isArray(e))return e.filter(a=>typeof a=="string").map(a=>a.trim()).filter(a=>a.length>0)},ql=e=>{var o,m,d,f;const a={roleName:(o=Pe(e.roleName))!=null?o:"",departmentName:(m=Pe(e.departmentName))!=null?m:"",divisionName:(d=Pe(e.divisionName))!=null?d:"",positionName:(f=Pe(e.positionName))!=null?f:""},r=(v,x)=>{const b=Pe(x);b!==void 0&&(a[v]=b)},l=(v,x)=>{const b=zl(x);b!==void 0&&(a[v]=b)};r("id",e.id),l("telegram_id",e.telegram_id),r("telegram_username",e.telegram_username),r("username",e.username),r("name",e.name),r("phone",e.phone),r("mobNumber",e.mobNumber),r("email",e.email),r("role",e.role),l("access",e.access);const n=Gl(e.permissions);return n!==void 0&&(a.permissions=n),r("roleId",e.roleId),r("roleName",a.roleName),r("departmentId",e.departmentId),r("departmentName",a.departmentName),r("divisionId",e.divisionId),r("divisionName",a.divisionName),r("positionId",e.positionId),r("positionName",a.positionName),a};function Zl({form:e,onChange:a,onSubmit:r,onReset:l}){var T;const[n,o]=A.useState(!1),[m,d]=A.useState([]),[f,v]=A.useState([]),[x,b]=A.useState([]),[y,F]=A.useState([]);A.useEffect(()=>{nt("departments","",1,100).then(p=>d(p.items)).catch(()=>d([])),nt("divisions","",1,100).then(p=>v(p.items)).catch(()=>v([])),nt("positions","",1,100).then(p=>b(p.items)).catch(()=>b([])),Qa().then(p=>F(p))},[]);const k=p=>{var R;const S=y.find(N=>N.name===p);a({...e,role:p,roleId:S==null?void 0:S._id,access:(R=S==null?void 0:S.access)!=null?R:1})},I=p=>{p.preventDefault(),o(!0)};return t.jsxs("form",{onSubmit:I,className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"ID"}),t.jsx("input",{id:"settings-user-telegram-id",name:"telegramId",className:"h-10 w-full rounded border px-3",value:(T=e.telegram_id)!=null?T:"",onChange:p=>a({...e,telegram_id:p.target.value?Number(p.target.value):void 0}),readOnly:!!e.telegram_id,required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Username"}),t.jsx("input",{id:"settings-user-username",name:"username",className:"h-10 w-full rounded border px-3",value:e.username||"",onChange:p=>a({...e,username:p.target.value}),readOnly:!!e.telegram_id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Имя"}),t.jsx("input",{id:"settings-user-name",name:"name",className:"h-10 w-full rounded border px-3",value:e.name||"",onChange:p=>a({...e,name:p.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Телефон"}),t.jsx("input",{id:"settings-user-phone",name:"phone",className:"h-10 w-full rounded border px-3",value:e.phone||"",onChange:p=>a({...e,phone:p.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Доп. телефон"}),t.jsx("input",{id:"settings-user-mob",name:"mobNumber",className:"h-10 w-full rounded border px-3",value:e.mobNumber||"",onChange:p=>a({...e,mobNumber:p.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Email"}),t.jsx("input",{id:"settings-user-email",name:"email",className:"h-10 w-full rounded border px-3",value:e.email||"",onChange:p=>a({...e,email:p.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Роль"}),t.jsx("select",{className:"h-10 w-full rounded border px-3",value:e.role||"user",onChange:p=>k(p.target.value),children:Nr.map(p=>t.jsx("option",{value:p.value,children:p.label},p.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Департамент"}),t.jsxs("select",{className:"h-10 w-full rounded border px-3",value:e.departmentId||"",onChange:p=>a({...e,departmentId:p.target.value}),children:[t.jsx("option",{value:""}),m.map(p=>t.jsx("option",{value:p._id,children:p.name},p._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Отдел"}),t.jsxs("select",{className:"h-10 w-full rounded border px-3",value:e.divisionId||"",onChange:p=>a({...e,divisionId:p.target.value}),children:[t.jsx("option",{value:""}),f.map(p=>t.jsx("option",{value:p._id,children:p.name},p._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Должность"}),t.jsxs("select",{className:"h-10 w-full rounded border px-3",value:e.positionId||"",onChange:p=>a({...e,positionId:p.target.value}),children:[t.jsx("option",{value:""}),x.map(p=>t.jsx("option",{value:p._id,children:p.name},p._id))]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(P,{type:"submit",children:"Сохранить"}),t.jsx(P,{type:"button",variant:"outline",onClick:l,children:"Очистить"})]}),t.jsx(ke,{open:n,message:"Сохранить изменения?",onConfirm:()=>{o(!1),r()},onCancel:()=>o(!1),confirmText:"Сохранить"})]})}const Pt=[{key:"directories",label:"Справочники",description:"Структура компании и доступы",icon:Mr},{key:"reports",label:"Отчёты",description:"Аналитика процессов и KPI",icon:br},{key:"archive",label:"Архив",description:"История задач и записей",icon:Or},{key:"logs",label:"Логи",description:"Журнал действий и событий",icon:ir},{key:"storage",label:"Файлы",description:"Управление вложениями",icon:qr}],Ua=e=>Pt.some(a=>a.key===e),ot=[{key:"departments",label:"Департамент",description:"Структура компании и направления"},{key:"divisions",label:"Отдел",description:"Команды внутри департаментов"},{key:"positions",label:"Должность",description:"Роли и рабочие позиции"},{key:"employees",label:"Сотрудник",description:"Карточки и доступы сотрудников"},{key:"fleets",label:"Автопарк",description:"Транспорт и связанный состав"},{key:"users",label:"Пользователь",description:"Учётные записи в системе"},{key:"tasks",label:"Задачи",description:"Поля формы и темы публикаций"}],La=()=>ot.reduce((e,a)=>(e[a.key]="",e),{}),Ee={telegram_id:void 0,username:"",name:"",phone:"",mobNumber:"",email:"",role:"user",access:1,roleId:"",departmentId:"",divisionId:"",positionId:""},Yl={departments:Ur,divisions:Yr,positions:Hr,employees:el,fleets:Xr,users:zr,tasks:jr},Wt=e=>e.length?t.jsx("div",{className:Ve,children:e.map((a,r)=>t.jsx("span",{className:Ae,title:a,children:a},"".concat(a,"-").concat(r)))}):t.jsx("span",{className:Ae,title:X,children:X}),Ql=e=>{const a=e.trim();return a?a.replace(/^['"]+|['"]+$/g,"").replace(/^\[+|\]+$/g,"").replace(/^[{}]+|[{}]+$/g,"").replace(/,+$/g,"").trim():""},it=e=>{if(typeof e=="string")return[e];if(Array.isArray(e))return e.flatMap(it);if(e&&typeof e=="object"){const a=[];return Object.entries(e).forEach(([r,l])=>{if(Array.isArray(l)||l&&typeof l=="object"){a.push(...it(l));return}if(typeof l=="string"){const n=l.trim();if(!n)return;(r.toLowerCase().includes("id")||!/\s/.test(n))&&a.push(n);return}(typeof l=="boolean"||typeof l=="number")&&l&&a.push(r)}),a}return[]},Xl={telegram_id:"Telegram ID",telegram_username:"Логин Telegram",username:"Логин",name:"Имя",phone:"Телефон",mobNumber:"Моб. номер",email:"E-mail",role:"Роль",access:"Доступ",roleId:"Роль ID",departmentId:"Департамент",departmentName:"Департамент",divisionId:"Отдел",divisionName:"Отдел",positionId:"Должность",positionName:"Должность",permissions:"Права",fleetId:"Автопарк",source:"Источник",sourceId:"ID источника",readonly:"Только чтение",readonlyReason:"Причина ограничения",invalid:"Некорректен",invalidReason:"Причина ошибки",invalidCode:"Код ошибки",invalidAt:"Ошибка от",syncPending:"Ожидает синхронизации",syncWarning:"Предупреждение",syncError:"Ошибка синхронизации",syncFailedAt:"Сбой синхронизации",defaultLabel:"Название по умолчанию",fieldType:"Тип поля",required:"Обязательное",order:"Порядок",virtual:"Системный элемент",tg_theme_url:"Тема Telegram",tg_chat_id:"ID чата",tg_topic_id:"ID темы",tg_photos_url:"Тема для фото",tg_photos_chat_id:"ID чата фото",tg_photos_topic_id:"ID темы фото"},us=e=>{const a=Xl[e];if(a)return a;const r=e.replace(/[_-]+/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").trim();return r?r.charAt(0).toUpperCase()+r.slice(1):e},ct=e=>e==null?"":typeof e=="boolean"?e?"Да":"Нет":typeof e=="number"?Number.isFinite(e)?String(e):"":typeof e=="string"?e.trim():Array.isArray(e)?e.map(r=>ct(r)).filter(Boolean).join(", "):e instanceof Date?e.toISOString():typeof e=="object"?Object.entries(e).map(([r,l])=>{const n=ct(l);return n?"".concat(us(r),"=").concat(n):""}).filter(Boolean).join("; "):"",fs=e=>e?Object.entries(e).map(([r,l])=>{const n=ct(l);return n?"".concat(us(r),": ").concat(n):""}).filter(Boolean).join("\n"):"",Jl=e=>{try{return JSON.parse(e)}catch(a){return}},Ot=e=>{const a=e.trim();if(!a)return"";const r=a.startsWith("{")||a.startsWith("[")?Jl(a):void 0;if(Array.isArray(r)){const l=r.map(n=>ct(n)).filter(Boolean);if(l.length)return l.join("\n")}else if(r&&typeof r=="object"){const l=fs(r);if(l)return l}if(a.includes(",")){const l=a.split(",").map(n=>n.trim()).filter(Boolean);if(l.length>1)return l.join("\n")}return a},en=sr(e=>{if(e==null)return[];if(typeof e=="string"){const a=e.trim();if(!a)return[];if(a.startsWith("{")||a.startsWith("["))try{const r=JSON.parse(a);return it(r)}catch(r){}return a.split(",").map(r=>r.trim()).filter(Boolean)}return Array.isArray(e)||e&&typeof e=="object"?it(e):[String(e)]},rr(lr())).transform(e=>{const a=e.map(r=>Ql(String(r))).filter(r=>r.length>0);return Array.from(new Set(a))}),Ke=e=>{const a=en.safeParse(e);return a.success?a.data:[]},Ft=(e,a)=>{if(!a.length)return e;const r=e.slice(),l=new Map;r.forEach((o,m)=>{l.set(o._id,m)});let n=!1;return a.forEach(o=>{const m=l.get(o._id);if(typeof m=="number"){r[m]!==o&&(r[m]=o,n=!0);return}l.set(o._id,r.length),r.push(o),n=!0}),n?r:e},at=(e,a,r)=>{var o;const l=typeof r=="string"&&r.trim().length?r.trim():"";if(l)return l;if(typeof a!="string")return"";const n=a.trim();return n?(o=e.get(n))!=null?o:n:""},Vt=(e,a)=>{for(const l of a)if(l in e)return e[l];const r={};Object.entries(e).forEach(([l,n])=>{r[l.toLowerCase()]=n});for(const l of a){const n=l.toLowerCase();if(n in r)return r[n]}},Y=(e,a,r)=>{const l=Vt(e,a);if(typeof l=="string"){const n=l.trim();if(n.length)return n}if(typeof l=="number"&&Number.isFinite(l))return String(l);if(typeof r=="string"){const n=r.trim();if(n.length)return n}},Pa=(e,a)=>{const r=Vt(e,a);if(typeof r=="number"&&Number.isFinite(r))return r;if(typeof r=="string"){const l=r.trim();if(!l)return;const n=Number(l);if(Number.isFinite(n))return n}},tn=(e,a)=>{const r=Vt(e,a);if(!Array.isArray(r))return;const l=r.filter(n=>typeof n=="string").map(n=>n.trim()).filter(n=>n.length>0);return l.length?l:void 0},an=e=>{var Q;if(e.type!=="employees")return;const a=[];e.meta&&typeof e.meta=="object"&&a.push(e.meta);const r=e.value;if(typeof r=="string"){const z=r.trim();if(z)try{const G=JSON.parse(z);G&&typeof G=="object"&&!Array.isArray(G)&&a.push(G)}catch(G){}}else r&&typeof r=="object"&&!Array.isArray(r)&&a.push(r);if(!a.length){const z=(Q=e.name)==null?void 0:Q.trim();return z?{name:z}:void 0}const l=a.reduce((z,G)=>({...z,...G}),{}),n={},o=Pa(l,["telegram_id","telegramId","id"]);typeof o=="number"&&(n.telegram_id=o);const m=Y(l,["telegram_username","telegramUsername","telegram_login","telegramLogin"]);m&&(n.telegram_username=m);const d=Y(l,["username","login"]);d&&(n.username=d);const f=Y(l,["name","fullName"],e.name),v=Y(l,["firstName","first_name"]),x=Y(l,["lastName","last_name","surname","familyName"]),b=Y(l,["middleName","middle_name","patronymic"]);if(f)n.name=f;else{const z=[x,v,b].filter(G=>typeof G=="string"&&G.trim().length>0);z.length&&(n.name=z.join(" "))}const y=Y(l,["phone","phone_number","phoneNumber"]);y&&(n.phone=y);const F=Y(l,["mobNumber","mobile","mobile_phone","mobilePhone"]);F&&(n.mobNumber=F);const k=Y(l,["email","mail"]);k&&(n.email=k);const I=Y(l,["role","roleName"]);I&&(n.role=I);const T=Pa(l,["access","access_level","accessLevel"]);typeof T=="number"&&(n.access=T);const p=Y(l,["roleId","role_id"]);p&&(n.roleId=p);const S=Y(l,["roleName"]);S&&(n.roleName=S);const R=Y(l,["departmentId","department_id"]);R&&(n.departmentId=R);const N=Y(l,["departmentName"]);N&&(n.departmentName=N);const C=Y(l,["divisionId","division_id"]);C&&(n.divisionId=C);const D=Y(l,["divisionName"]);D&&(n.divisionName=D);const B=Y(l,["positionId","position_id"]);B&&(n.positionId=B);const V=Y(l,["positionName"]);V&&(n.positionName=V);const K=tn(l,["permissions"]);return K&&(n.permissions=K),Object.keys(n).length?n:void 0},sn=e=>{const a={byId:new Map,byTelegramUsername:new Map,byUsername:new Map};return e.forEach(r=>{const l=an(r);l&&(typeof l.telegram_id=="number"&&a.byId.set(String(l.telegram_id),l),typeof l.telegram_username=="string"&&a.byTelegramUsername.set(l.telegram_username.toLowerCase(),l),typeof l.username=="string"&&a.byUsername.set(l.username.toLowerCase(),l))}),a},Ka=(e,a)=>{if(!a)return e;const r={...e},l=o=>{const m=a[o];if(typeof m!="number"||!Number.isFinite(m))return;const d=r[o];typeof d=="number"&&Number.isFinite(d)||(r[o]=m)},n=o=>{const m=a[o];if(m==null)return;const d=typeof m=="string"?m.trim():typeof m=="number"&&Number.isFinite(m)?String(m):"";if(!d)return;const f=r[o];(f==null||typeof f=="string"&&!f.trim())&&(r[o]=d)};return l("telegram_id"),n("telegram_username"),n("username"),n("name"),n("phone"),n("mobNumber"),n("email"),n("role"),l("access"),n("roleId"),n("roleName"),n("departmentId"),n("departmentName"),n("divisionId"),n("divisionName"),n("positionId"),n("positionName"),(!r.permissions||!r.permissions.length)&&Array.isArray(a.permissions)&&a.permissions.length&&(r.permissions=a.permissions.slice()),r},rn=/[\s,.;:/\\|_-]+/u,ln=e=>{var l,n,o,m,d,f,v,x,b,y,F,k;const a=new Set,r=I=>{if(I==null)return;let T;if(typeof I=="number"){if(!Number.isFinite(I))return;T=String(I)}else if(typeof I=="string")T=I.trim();else return;T&&(a.add(T),T.split(rn).map(p=>p.trim()).filter(p=>p.length>0).forEach(p=>a.add(p)))};return r((l=e.username)!=null?l:void 0),r((n=e.telegram_username)!=null?n:void 0),r((o=e.telegram_id)!=null?o:void 0),r((m=e.name)!=null?m:void 0),r((d=e.phone)!=null?d:void 0),r((f=e.mobNumber)!=null?f:void 0),r((v=e.email)!=null?v:void 0),r((x=e.role)!=null?x:void 0),r((b=e.roleName)!=null?b:void 0),r((y=e.departmentName)!=null?y:void 0),r((F=e.divisionName)!=null?F:void 0),r((k=e.positionName)!=null?k:void 0),Array.isArray(e.permissions)&&e.permissions.forEach(I=>r(I)),Array.from(a)},Va=(e,a,r)=>{const l=r?r.trim():typeof(e==null?void 0:e.telegram_id)=="number"?String(e.telegram_id):void 0;if(l){const m=a.byId.get(l);if(m)return m}const n=typeof(e==null?void 0:e.telegram_username)=="string"?e.telegram_username.trim().toLowerCase():void 0;if(n){const m=a.byTelegramUsername.get(n);if(m)return m}const o=typeof(e==null?void 0:e.username)=="string"?e.username.trim().toLowerCase():void 0;if(o){const m=a.byUsername.get(o);if(m)return m}},Ut="Не удалось загрузить пользователей",$a="Обнаружены дублирующиеся отделы",Lt="Не удалось загрузить настройки задач",Ha="Не удалось сохранить поле задачи",Ba="Не удалось сохранить тип задачи",st="Не удалось удалить настройку задачи",nn="Пользователь удалён",za="Не удалось удалить пользователя",on="Сотрудник удалён",Ga="Не удалось удалить сотрудника",qa=e=>typeof e.accessorKey=="string";function In(){var oa,ia,ca,da,ma,ua,fa,ha,xa,pa,ga,ba,va;const{t:e}=Za(),[a,r]=ar(),[l,n]=i.useState(()=>{const s=a.get("module");return Ua(s)?s:"directories"}),[o,m]=i.useState("departments"),[d,f]=i.useState([]),[v,x]=i.useState(!1),[b,y]=i.useState(0),[F,k]=i.useState(1),[I,T]=i.useState(()=>La()),[p,S]=i.useState(()=>La()),[R,N]=i.useState({name:"",value:""}),[C,D]=i.useState(""),[B,V]=i.useState([]),[K,Q]=i.useState([]),[z,G]=i.useState([]),[ne,de]=i.useState([]),J=10,[oe,me]=i.useState([]),[M,u]=i.useState(1),[j,w]=i.useState(""),[E,q]=i.useState(""),[ae,ue]=i.useState(!1),[U,ee]=i.useState(Ee),[ut,ft]=i.useState(!1),[W,ht]=i.useState(null),fe=i.useRef(),[he,xe]=i.useState(void 0),[hs,De]=i.useState(!1),[$t,Me]=i.useState("create"),[xs,Ht]=i.useState([]),[ps,Bt]=i.useState([]),[gs,zt]=i.useState(!1),{user:xt}=or(),[bs,$e]=i.useState(!1),[vs,He]=i.useState(!1),Gt=vr(xt==null?void 0:xt.access,yr);i.useEffect(()=>()=>{fe.current&&window.clearTimeout(fe.current)},[]),i.useEffect(()=>{const s=a.get("module"),c=Ua(s)?s:"directories";c!==l&&n(c)},[a,l]);const qt=i.useCallback(s=>{n(s);const c=new URLSearchParams(a.toString());s==="directories"?c.delete("module"):c.set("module",s),r(c,{replace:!0})},[a,r]),Se=i.useMemo(()=>{var g;if(!(W!=null&&W.meta)||typeof W.meta!="object")return{readonly:!1,notice:void 0};const s=W.meta,c=!!((g=s.readonly)!=null?g:s.legacy),h=c?typeof s.readonlyReason=="string"?s.readonlyReason:s.legacy?"Элемент перенесён из старой коллекции и доступен только для чтения.":void 0:void 0;return{readonly:c,notice:h}},[W]),ys=i.useMemo(()=>[{label:e("nav.settings"),href:"/settings"},{label:e("collections.page.title")}],[e]),Be=(oa=I[o])!=null?oa:"",We=(ia=p[o])!=null?ia:"",Oe=l==="directories"&&o!=="users"&&o!=="fleets"&&o!=="tasks",pt=l==="directories"&&o==="users",Zt=l==="directories"&&o==="employees",ze=i.useCallback(s=>{const c=s.trim();k(1),T(h=>h[o]===c?h:{...h,[o]:c})},[o]);i.useEffect(()=>{S(s=>({...s,[o]:Be}))},[o,Be]),i.useEffect(()=>{if(Oe)return fe.current&&window.clearTimeout(fe.current),fe.current=window.setTimeout(()=>{ze(We)},400),()=>{fe.current&&window.clearTimeout(fe.current)}},[ze,We,Oe]);const Ge=i.useCallback(async()=>{if(o==="users"||o==="tasks"){x(!1);return}x(!0);try{if(o==="fleets"){f([]),y(0),D("");return}if(o==="employees"){const c=await _e("employees");f(c),y(c.length),D("");return}const s=await nt(o,Be,F,J);f(s.items),y(s.total),o==="departments"&&V(c=>Ft(c,s.items)),o==="divisions"&&Q(c=>Ft(c,s.items)),o==="positions"&&G(c=>Ft(c,s.items)),D("")}catch(s){const c=s instanceof Error?s.message:"Не удалось загрузить элементы";f([]),y(0),D(c)}finally{x(!1)}},[o,Be,F]),se=i.useCallback(async()=>{try{const s=await Tr();me(s),D(c=>c===Ut?"":c)}catch(s){const c=s instanceof Error?s.message:Ut;me([]),D(c||Ut)}},[]),ie=i.useCallback(async()=>{zt(!0);try{const[s,c]=await Promise.all([_e("task_fields"),_e("task_types")]);Ht(s),Bt(c),D(h=>h===Lt?"":h)}catch(s){const c=s instanceof Error?s.message:Lt;Ht([]),Bt([]),D(c||Lt)}finally{zt(!1)}},[D]);i.useEffect(()=>{o==="tasks"&&ie()},[o,ie]);const js=i.useCallback(async(s,c)=>{var g;const h=c.trim();if(!h)throw new Error("Название не может быть пустым");try{(g=s.meta)!=null&&g.virtual?await Ct("task_fields",{name:s.name,value:h}):await It(s._id,{name:s.name,value:h},{collectionType:"task_fields"}),await ie()}catch(O){const _=O instanceof Error?O.message:Ha;throw new Error(_||Ha)}},[ie]),Ns=i.useCallback(async s=>{var c;if(!((c=s.meta)!=null&&c.virtual))try{await _t(s._id),await ie()}catch(h){const g=h instanceof Error?h.message:st;throw new Error(g||st)}},[ie]),ws=i.useCallback(async(s,c)=>{var _;const h=c.label.trim();if(!h)throw new Error("Название не может быть пустым");const g=c.tg_theme_url.trim(),O=c.tg_photos_url.trim();try{const L=()=>{const $={};return g&&($.tg_theme_url=g),O&&($.tg_photos_url=O),$};if((_=s.meta)!=null&&_.virtual){const $=L();await Ct("task_types",{name:s.name,value:h,...Object.keys($).length?{meta:$}:{}})}else{const $=L();g||($.tg_theme_url=""),O||($.tg_photos_url=""),await It(s._id,{name:s.name,value:h,meta:$},{collectionType:"task_types"})}await ie()}catch(L){const $=L instanceof Error?L.message:Ba;throw new Error($||Ba)}},[ie]),ks=i.useCallback(async s=>{var c;if(!((c=s.meta)!=null&&c.virtual))try{await _t(s._id),await ie()}catch(h){const g=h instanceof Error?h.message:st;throw new Error(g||st)}},[ie]);i.useEffect(()=>{(o==="users"||o==="employees")&&q(j)},[o,j]),i.useEffect(()=>{ut&&(W==null?void 0:W.type)==="divisions"&&se()},[ut,W,se]),i.useEffect(()=>{(async()=>{const[c,h,g]=await Promise.allSettled([_e("departments"),_e("divisions"),_e("positions")]),O=(_,L,$)=>{if(_.status==="fulfilled"){L(_.value);return}const le=_.reason,pe=le instanceof Error&&le.message?le.message:$;D(te=>te||pe)};O(c,V,"Не удалось загрузить департаменты"),O(h,Q,"Не удалось загрузить отделы"),O(g,G,"Не удалось загрузить должности")})(),Qa().then(c=>de(c)).catch(c=>{de([]);const h=c instanceof Error?c.message:"Не удалось загрузить роли";D(g=>g||h)})},[]),i.useEffect(()=>{o!=="users"&&o!=="tasks"?(Ge(),o!=="fleets"&&N({name:"",value:""})):D("")},[Ge,o]),i.useEffect(()=>{o==="users"&&(se(),ee(Ee),xe(void 0)),o==="employees"&&(se(),xe(void 0),Me("create"),De(!1)),o!=="employees"&&De(!1),(o==="users"||o==="employees"||o==="fleets"||o==="tasks")&&ft(!1),o!=="users"&&(ue(!1),ee(Ee))},[o,se]);const qe=s=>{s?(N({_id:s._id,name:s.name,value:s.value}),ht(s)):(N({name:"",value:""}),ht(null)),ft(!0)},gt=()=>{ft(!1),ht(null),N({name:"",value:""})},Ss=s=>{var c,h,g,O,_,L,$,le,pe,te,ge,ve;return{telegram_id:s==null?void 0:s.telegram_id,username:(h=(c=s==null?void 0:s.telegram_username)!=null?c:s==null?void 0:s.username)!=null?h:"",name:(g=s==null?void 0:s.name)!=null?g:"",phone:(O=s==null?void 0:s.phone)!=null?O:"",mobNumber:(_=s==null?void 0:s.mobNumber)!=null?_:"",email:(L=s==null?void 0:s.email)!=null?L:"",role:($=s==null?void 0:s.role)!=null?$:"user",access:(le=s==null?void 0:s.access)!=null?le:1,roleId:(pe=s==null?void 0:s.roleId)!=null?pe:"",departmentId:(te=s==null?void 0:s.departmentId)!=null?te:"",divisionId:(ge=s==null?void 0:s.divisionId)!=null?ge:"",positionId:(ve=s==null?void 0:s.positionId)!=null?ve:""}},bt=s=>{ee(s?Ss(s):Ee),ue(!0)},Ze=i.useCallback(()=>{ue(!1),ee(Ee)},[]),vt=s=>{s?(xe(String(s.telegram_id)),Me("update")):(xe(void 0),Me("create")),De(!0)},Fe=i.useCallback(s=>{S(c=>({...c,[o]:s}))},[o]),Ce=i.useCallback(s=>{fe.current&&window.clearTimeout(fe.current),ze(s!=null?s:We)},[ze,We]),Cs=i.useCallback(s=>{Oe&&(s.key==="Enter"&&(s.preventDefault(),Ce(s.currentTarget.value)),s.key==="Escape"&&(s.preventDefault(),Fe(""),Ce("")))},[Oe,Ce,Fe]),Is=i.useCallback(()=>{Fe(""),Ce("")},[Ce,Fe]),Ue=i.useCallback(s=>{s==null||s.preventDefault(),u(1),w(E.trim()),xe(void 0)},[E]),_s=i.useCallback(s=>{pt&&(s.key==="Enter"&&(s.preventDefault(),Ue()),s.key==="Escape"&&(s.preventDefault(),q(""),Ue()))},[pt,Ue]),Es=s=>{se(),s.telegram_id!==void 0&&(xe(String(s.telegram_id)),Me("update"))},Ts=i.useCallback(async()=>{if(!U.telegram_id){$e(!1);return}try{await wa(U.telegram_id),Ne(nn,"success"),xe(s=>s===String(U.telegram_id)?void 0:s),Ze(),await se()}catch(s){const c=s instanceof Error?s.message:za;Ne(c||za,"error")}finally{$e(!1)}},[U.telegram_id,Ze,se,xe]),As=i.useCallback(async()=>{if(!he){He(!1);return}try{await wa(he),Ne(on,"success"),De(!1),xe(void 0),Me("create"),await se()}catch(s){const c=s instanceof Error?s.message:Ga;Ne(c||Ga,"error")}finally{He(!1)}},[he,se]),Rs=async()=>{var h;if(o==="fleets")return;const s=R.name.trim();if(!s)return;if(R._id&&Se.readonly){D((h=Se.notice)!=null?h:"Элемент перенесён из старой коллекции и доступен только для чтения.");return}let c=R.value;if(o==="departments")c=Ke(R.value).join(",");else if(c=R.value.trim(),!c){D("Заполните значение элемента.");return}try{let g=null;if(R._id?g=await It(R._id,{name:s,value:c},{collectionType:o}):g=await Ct(o,{name:s,value:c}),!g)throw new Error("Сервер не вернул сохранённый элемент");D(""),await Ge(),gt()}catch(g){const O=g instanceof Error?g.message:"Не удалось сохранить элемент";D(O)}},Ds=async()=>{var s;if(R._id){if(Se.readonly){D((s=Se.notice)!=null?s:"Элемент перенесён из старой коллекции и доступен только для чтения.");return}try{await _t(R._id),D(""),await Ge(),gt()}catch(c){const h=c instanceof Error?c.message:"";D(h)}}},Ms=async()=>{if(!U.telegram_id)return;const s=U.telegram_id;oe.find(g=>g.telegram_id===s)||await Ar(s,U.username,U.roleId);const{telegram_id:c,...h}=U;await Rr(s,h),se(),Ze()},be=i.useMemo(()=>{const s=new Map;return B.forEach(c=>s.set(c._id,c.name)),s},[B]),re=i.useMemo(()=>{const s=new Map;return K.forEach(c=>s.set(c._id,c.name)),s},[K]),Ye=i.useMemo(()=>{const s=new Map;return z.forEach(c=>s.set(c._id,c.name)),s},[z]),Qe=i.useMemo(()=>sn(d),[d]),Xe=i.useCallback(s=>Ka(s,Va(s,Qe)),[Qe]),je=i.useMemo(()=>oe.map(s=>Xe(s)),[oe,Xe]),Je=i.useMemo(()=>{const s=new Map;return ne.forEach(c=>s.set(c._id,c.name)),s},[ne]),{divisionOwners:Yt,duplicateDivisionIds:yt}=i.useMemo(()=>{const s=new Map,c=new Set;return B.forEach(h=>{Ke(h.value).forEach(g=>{const O=s.get(g);if(O&&O!==h._id){c.add(g);return}O||s.set(g,h._id)})}),{divisionOwners:s,duplicateDivisionIds:Array.from(c)}},[B]),jt=i.useMemo(()=>{if(!yt.length)return"";const s=yt.map(h=>{var g,O,_;return(_=(O=re.get(h))!=null?O:(g=K.find(L=>L._id===h))==null?void 0:g.name)!=null?_:h}).filter(h=>!!h),c=s.length?": ".concat(s.join(", "),"."):".";return"".concat($a).concat(c)},[yt,re,K]);i.useEffect(()=>{if(jt){D(s=>s||jt);return}D(s=>s&&s.startsWith($a)?"":s)},[jt]);const Ws=i.useCallback((s,c)=>{var g,O,_,L,$,le,pe;if(c==="departments"){const te=Ke(s.value);if(!te.length)return X;const ge=te.map(ve=>{var ya,ja,Na;return(Na=(ja=re.get(ve))!=null?ja:(ya=K.find(Js=>Js._id===ve))==null?void 0:ya.name)!=null?Na:ve}).filter(ve=>!!ve);return ge.length?ge.join("\n"):X}if(c==="divisions"){const te=(_=(O=be.get(s.value))!=null?O:(g=B.find(ge=>ge._id===s.value))==null?void 0:g.name)!=null?_:s.value;return te?Ot(te):X}if(c==="positions"){const te=(le=($=re.get(s.value))!=null?$:(L=K.find(ge=>ge._id===s.value))==null?void 0:L.name)!=null?le:s.value;return te?Ot(te):X}return Ot((pe=s.value)!=null?pe:"")||X},[B,K,be,re]),Os=i.useCallback(s=>s&&fs(s)||X,[]),Qt=e("collections.actions.copyId"),Xt=e("collections.actions.copiedId"),Nt=i.useMemo(()=>Vl.map(s=>{if(!qa(s))return s;switch(s.accessorKey){case"name":return{...s,header:e("collections.table.columns.name")};case"value":return{...s,header:e("collections.table.columns.value")};case"displayValue":return{...s,header:e("collections.table.columns.relations")};case"type":return{...s,header:e("collections.table.columns.type")};case"_id":return{...s,header:e("collections.table.columns.id"),cell:({getValue:c})=>{const h=c(),g=typeof h=="string"?h:"";return g?t.jsx(jl,{value:g,copyHint:Qt,copiedHint:Xt}):t.jsx("span",{className:"text-xs text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]",children:X})}};case"metaSummary":return{...s,header:e("collections.table.columns.meta")};default:return s}}),[Xt,Qt,e]),Fs=e("collections.search.placeholder"),Jt=e("collections.search.hint"),et=e("collections.actions.search"),ea=e("collections.actions.reset"),ta=e("collections.actions.add"),wt=e("collections.table.empty.title"),kt=e("collections.table.empty.description"),Us=e("collections.table.empty.action"),Ls=e("collections.users.searchPlaceholder"),aa=e("collections.users.add"),Ps=e("collections.employees.searchPlaceholder"),sa=e("collections.employees.add"),Ie=i.useCallback(s=>Nt.filter(c=>!qa(c)||!s.includes(c.accessorKey)),[Nt]),Ks=i.useMemo(()=>Ie(["value","type","metaSummary"]),[Ie]),Vs=i.useMemo(()=>Ie(["type","metaSummary"]),[Ie]),$s=i.useMemo(()=>Ie(["type","metaSummary"]),[Ie]),Hs=i.useCallback((s,c,h)=>{const g=Ke(s.value),O=_=>{const L=Array.from(_.target.selectedOptions).map($=>$.value);c({...s,value:L.join(",")})};return t.jsx("select",{multiple:!0,className:"min-h-[8rem] w-full rounded border px-3 py-2",value:g,onChange:O,disabled:h==null?void 0:h.readonly,children:K.filter(_=>{const L=Yt.get(_._id);return!L||g.includes(_._id)?!0:s._id?L===s._id:!1}).map(_=>t.jsx("option",{value:_._id,children:_.name},_._id))})},[K,Yt]),Bs=i.useCallback((s,c,h)=>t.jsxs("select",{className:"h-10 w-full rounded border px-3",value:s.value,onChange:g=>c({...s,value:g.target.value}),required:!0,disabled:h==null?void 0:h.readonly,children:[t.jsx("option",{value:"",disabled:!0,children:"Выберите департамент"}),B.map(g=>t.jsx("option",{value:g._id,children:g.name},g._id))]}),[B]),zs=i.useCallback((s,c,h)=>t.jsxs("select",{className:"h-10 w-full rounded border px-3",value:s.value,onChange:g=>c({...s,value:g.target.value}),required:!0,disabled:h==null?void 0:h.readonly,children:[t.jsx("option",{value:"",disabled:!0,children:"Выберите отдел"}),K.map(g=>t.jsx("option",{value:g._id,children:g.name},g._id))]}),[K]),Gs=Math.ceil(b/J)||1,ra=i.useMemo(()=>{const s=j.trim();return s?Xa(je,s,{keys:[{key:c=>{var h;return(h=c.username)!=null?h:""},threshold:Z.STARTS_WITH},{key:c=>{var h;return(h=c.telegram_username)!=null?h:""},threshold:Z.STARTS_WITH},{key:c=>c.telegram_id!==void 0&&c.telegram_id!==null?String(c.telegram_id):"",threshold:Z.STARTS_WITH},{key:c=>ln(c),threshold:Z.CONTAINS}]}):je},[j,je]),la=Math.ceil(ra.length/J)||1,tt=ra.slice((M-1)*J,M*J),na=i.useMemo(()=>tt.map(s=>{const c=Xe(s),h=typeof c.roleId=="string"?c.roleId.trim():"",g=typeof c.departmentId=="string"?c.departmentId.trim():"",O=typeof c.divisionId=="string"?c.divisionId.trim():"",_=typeof c.positionId=="string"?c.positionId.trim():"",L=at(Je,h,c.roleName),$=at(be,g,c.departmentName),le=at(re,O,c.divisionName),pe=at(Ye,_,c.positionName),te=L||(c.role?ye(c.role):"");return ql({...c,roleId:h,departmentId:g,divisionId:O,positionId:_,roleName:te,departmentName:$,divisionName:le,positionName:pe})}),[tt,Je,be,re,Ye,Xe]),H=i.useMemo(()=>{if(!he)return;const s=je.find(g=>String(g.telegram_id)===he);if(s)return s;const c=Va(void 0,Qe,he);if(!c)return;const h={};if(typeof c.telegram_id=="number")h.telegram_id=c.telegram_id;else{const g=Number(he);Number.isFinite(g)&&(h.telegram_id=g)}return c.username&&(h.username=c.username),c.telegram_username&&(h.telegram_username=c.telegram_username),Ka(h,c)},[Qe,je,he]),qs=i.useMemo(()=>!W||W.type!=="departments"?[]:Ke(W.value).map(c=>{var h,g,O;return(O=(g=re.get(c))!=null?g:(h=K.find(_=>_._id===c))==null?void 0:h.name)!=null?O:c}).filter(c=>!!c),[W,re,K]),Zs=i.useMemo(()=>{var c,h,g;if(!W||W.type!=="divisions")return X;const s=W.value;return s?(g=(h=be.get(s))!=null?h:(c=B.find(O=>O._id===s))==null?void 0:c.name)!=null?g:s:X},[W,be,B]),Ys=i.useMemo(()=>!W||W.type!=="divisions"?[]:z.filter(s=>s.value===W._id).map(s=>s.name).filter(s=>!!s),[W,z]),Qs=i.useMemo(()=>!W||W.type!=="divisions"?[]:je.filter(s=>s.divisionId===W._id).map(s=>s.name&&s.name.trim()?s.name.trim():s.username&&s.username.trim()?s.username.trim():s.telegram_id!==void 0&&s.telegram_id!==null?"ID ".concat(s.telegram_id):"Без имени"),[W,je]),Xs=(()=>{if(l!=="directories")return null;if(pt||Zt){const s=Zt,c=s?Ps:Ls,h=s?sa:aa,g=s?()=>vt():()=>bt();return t.jsxs("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[t.jsxs("div",{className:"flex w-full flex-col gap-1 sm:w-72",children:[t.jsx("label",{htmlFor:"settings-users-search",className:"sr-only",children:et}),t.jsx("input",{id:"settings-users-search",className:"h-10 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm text-[color:var(--color-gray-900)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white",value:E,onChange:O=>q(O.target.value),onKeyDown:_s,placeholder:c}),t.jsx("span",{className:"text-[11px] text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]",children:Jt})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx(P,{size:"sm",onClick:()=>Ue(),children:et}),t.jsx(P,{size:"sm",variant:"outline",onClick:()=>{q(""),Ue()},children:ea}),t.jsx(P,{size:"sm",variant:"success",onClick:g,children:h})]})]})}return Oe?t.jsxs("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[t.jsxs("div",{className:"flex w-full flex-col gap-1 sm:w-72",children:[t.jsx("label",{htmlFor:"settings-collections-search",className:"sr-only",children:et}),t.jsx("input",{id:"settings-collections-search",className:"h-10 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm text-[color:var(--color-gray-900)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white",value:We,onChange:s=>Fe(s.target.value),onKeyDown:Cs,placeholder:Fs}),t.jsx("span",{className:"text-[11px] text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]",children:Jt})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx(P,{size:"sm",onClick:()=>Ce(),children:et}),t.jsx(P,{size:"sm",variant:"outline",onClick:Is,children:ea}),t.jsx(P,{size:"sm",variant:"success",onClick:()=>qe(),children:ta})]})]}):t.jsx("div",{className:"flex flex-wrap items-center gap-2",children:t.jsx(P,{size:"sm",variant:"success",onClick:()=>qe(),children:ta})})})();return t.jsx("div",{className:"mx-auto flex w-full max-w-screen-2xl flex-col gap-6 px-3 pb-12 pt-4 sm:px-4 lg:px-8",children:t.jsxs(_a,{value:l,onValueChange:s=>qt(s),className:"space-y-6",children:[t.jsx(yl,{breadcrumbs:t.jsx(cr,{items:ys}),title:e("collections.page.title"),description:e("collections.page.description"),toolbar:Xs,children:t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"sm:hidden",children:[t.jsx("label",{htmlFor:"settings-module-select",className:"sr-only",children:e("collections.moduleSelectLabel")}),t.jsx("select",{id:"settings-module-select",className:"h-11 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm font-semibold text-[color:var(--color-gray-800)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white",value:l,onChange:s=>qt(s.target.value),children:Pt.map(s=>t.jsx("option",{value:s.key,children:s.label},s.key))})]}),t.jsx(Ea,{className:"hidden h-auto gap-2 bg-transparent p-0 sm:grid sm:gap-2 sm:p-1 sm:[grid-template-columns:repeat(5,minmax(11rem,1fr))]",children:Pt.map(s=>{const c=s.icon,h="".concat(s.key,"-module-tab-label");return t.jsxs(Ta,{value:s.key,"aria-labelledby":h,className:"group flex h-full min-h-[3.4rem] w-full flex-col items-center justify-center gap-1.5 rounded-xl border border-transparent px-3 py-2 text-sm font-semibold text-[color:var(--color-gray-700)] transition-colors duration-200 ease-out hover:bg-[color:var(--color-gray-50)] focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-400)] focus-visible:ring-offset-2 dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)] data-[state=active]:border-[color:var(--color-gray-200)] data-[state=active]:bg-white data-[state=active]:text-[color:var(--color-brand-600)] data-[state=active]:shadow-sm dark:data-[state=active]:border-[color:var(--color-gray-700)] dark:data-[state=active]:bg-[color:var(--color-gray-dark)] dark:data-[state=active]:text-[color:var(--color-brand-300)]",children:[t.jsx(c,{className:"size-5 flex-shrink-0 text-[color:var(--color-gray-500)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-300)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)] sm:size-6"}),t.jsx("span",{id:h,className:"truncate text-sm font-semibold leading-5 text-[color:var(--color-gray-800)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-100)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)]",children:s.label}),s.description?t.jsx("span",{className:"hidden text-xs font-medium text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-400)] sm:block",children:s.description}):null]},s.key)})})]})}),t.jsxs(ce,{value:"directories",className:"mt-0 space-y-6",children:[C?t.jsx("div",{className:"rounded-2xl border border-[color:var(--color-error-200)] bg-[color:var(--color-error-25)] p-4 text-sm text-[color:var(--color-error-600)] dark:border-[color:var(--color-error-700)] dark:bg-[color:var(--color-error-900)]/40 dark:text-[color:var(--color-error-200)]",children:C}):null,t.jsxs(_a,{value:o,onValueChange:s=>{m(s),k(1)},className:"space-y-5",children:[t.jsxs("div",{className:"sm:hidden",children:[t.jsx("label",{htmlFor:"settings-section-select",className:"sr-only",children:e("collections.directorySelectLabel")}),t.jsx("select",{id:"settings-section-select",className:"h-11 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm font-semibold text-[color:var(--color-gray-800)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white",value:o,onChange:s=>{m(s.target.value),k(1)},children:ot.map(s=>t.jsx("option",{value:s.key,children:s.label},s.key))})]}),t.jsx(Ea,{className:"hidden gap-2 sm:grid sm:gap-2 sm:overflow-visible sm:p-1 sm:[grid-template-columns:repeat(7,minmax(9.5rem,1fr))]",children:ot.map(s=>{const c=Yl[s.key],h="".concat(s.key,"-tab-label");return t.jsxs(Ta,{value:s.key,"aria-labelledby":h,className:"group flex h-full min-h-[3.1rem] w-full flex-col items-center justify-center gap-1.5 rounded-xl border border-transparent px-3 py-2 text-sm font-semibold text-[color:var(--color-gray-700)] transition-colors duration-200 ease-out hover:bg-[color:var(--color-gray-50)] focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-400)] focus-visible:ring-offset-2 dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)] data-[state=active]:border-[color:var(--color-gray-200)] data-[state=active]:bg-white data-[state=active]:text-[color:var(--color-brand-600)] data-[state=active]:shadow-sm dark:data-[state=active]:border-[color:var(--color-gray-700)] dark:data-[state=active]:bg-[color:var(--color-gray-dark)] dark:data-[state=active]:text-[color:var(--color-brand-300)]",children:[c?t.jsx(c,{className:"size-5 flex-shrink-0 text-[color:var(--color-gray-500)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-300)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)] sm:size-6"}):null,t.jsx("span",{id:h,className:"truncate text-sm font-semibold leading-5 text-[color:var(--color-gray-800)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-100)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)]",children:s.label}),s.description?t.jsx("span",{"aria-hidden":"true",className:"hidden text-xs font-medium text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-400)] sm:block",children:s.description}):null]},s.key)})}),ot.map(s=>{const c=s.key===o,h=c?d.map(_=>({..._,displayValue:Ws(_,s.key),metaSummary:Os(_.meta)})):[],g=s.key==="departments"?Ks:s.key==="divisions"?Vs:s.key==="positions"?$s:Nt;if(s.key==="users"){const _=tt.length===0;return t.jsx(ce,{value:s.key,className:"mt-0 flex flex-col gap-4",children:_?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]",children:[t.jsx("h3",{className:"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white",children:wt}),t.jsx("p",{className:"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]",children:kt}),t.jsx(P,{variant:"success",onClick:()=>bt(),children:aa})]}):t.jsx(lt,{columns:$l,data:tt,pageIndex:M-1,pageSize:J,pageCount:la,onPageChange:L=>u(L+1),showGlobalSearch:!1,showFilters:!1,onRowClick:L=>bt(L),wrapCellsAsBadges:!0,badgeClassName:Ae,badgeWrapperClassName:Ve,badgeEmptyPlaceholder:X})},s.key)}if(s.key==="employees"){const _=na.length===0;return t.jsx(ce,{value:s.key,className:"mt-0 flex flex-col gap-4",children:_?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]",children:[t.jsx("h3",{className:"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white",children:wt}),t.jsx("p",{className:"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]",children:kt}),t.jsx(P,{variant:"success",onClick:()=>vt(),children:sa})]}):t.jsx(lt,{columns:Bl,data:na,pageIndex:M-1,pageSize:J,pageCount:la,onPageChange:L=>u(L+1),showGlobalSearch:!1,showFilters:!1,onRowClick:L=>vt(L),wrapCellsAsBadges:!0,badgeClassName:Ae,badgeWrapperClassName:Ve,badgeEmptyPlaceholder:X})},s.key)}if(s.key==="tasks")return t.jsx(ce,{value:s.key,className:"mt-0",children:t.jsx(Dl,{fields:xs,types:ps,loading:gs,onSaveField:js,onDeleteField:Ns,onSaveType:ws,onDeleteType:ks})},s.key);if(s.key==="fleets")return t.jsx(ce,{value:s.key,className:"mt-0",children:t.jsx(Tl,{})},s.key);const O=h.length===0;return t.jsx(ce,{value:s.key,className:"mt-0 flex flex-col gap-4",children:c&&v?t.jsx("div",{className:"flex min-h-[12rem] items-center justify-center rounded-2xl border border-[color:var(--color-gray-200)] bg-white shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]",children:t.jsx(we,{className:"h-6 w-6 text-[color:var(--color-brand-500)]"})}):O?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]",children:[t.jsx("h3",{className:"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white",children:wt}),t.jsx("p",{className:"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]",children:kt}),t.jsx(P,{variant:"success",onClick:()=>qe(),children:Us})]}):t.jsx(lt,{columns:g,data:h,pageIndex:F-1,pageSize:J,pageCount:Gs,onPageChange:_=>k(_+1),showGlobalSearch:!1,showFilters:!1,onRowClick:_=>qe(_),wrapCellsAsBadges:!0,badgeClassName:Ae,badgeWrapperClassName:Ve,badgeEmptyPlaceholder:X})},s.key)})]})]}),t.jsx(rt,{open:ut,onClose:gt,children:t.jsxs("div",{className:"space-y-4",children:[W?t.jsx("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:W.type==="departments"?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-base font-semibold",children:"Информация о департаменте"}),t.jsxs("dl",{className:"mt-2 space-y-3 text-sm",children:[t.jsxs("div",{className:"flex justify-between gap-4",children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"ID"}),t.jsx("dd",{className:"text-right text-slate-900",children:W._id})]}),t.jsxs("div",{className:"flex justify-between gap-4",children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Название"}),t.jsx("dd",{className:"text-right text-slate-900",children:W.name})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Отделы департамента"}),t.jsx("dd",{className:"mt-2",children:Wt(qs)})]})]})]}):W.type==="divisions"?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-base font-semibold",children:"Информация о департаменте"}),t.jsxs("dl",{className:"mt-2 space-y-3 text-sm",children:[t.jsxs("div",{className:"flex justify-between gap-4",children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"ID"}),t.jsx("dd",{className:"text-right text-slate-900",children:W._id})]}),t.jsxs("div",{className:"flex justify-between gap-4",children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Название"}),t.jsx("dd",{className:"text-right text-slate-900",children:W.name})]}),t.jsxs("div",{className:"flex justify-between gap-4",children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Департамент"}),t.jsx("dd",{className:"text-right text-slate-900",children:Zs||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Должности отдела"}),t.jsx("dd",{className:"mt-2",children:Wt(Ys)})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Сотрудники отдела"}),t.jsx("dd",{className:"mt-2",children:Wt(Qs)})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-base font-semibold",children:"Карточка элемента"}),t.jsxs("dl",{className:"mt-2 space-y-1 text-sm",children:[t.jsxs("div",{className:"flex justify-between gap-4",children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"ID"}),t.jsx("dd",{className:"text-right text-slate-900",children:W._id})]}),t.jsxs("div",{className:"flex justify-between gap-4",children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Название"}),t.jsx("dd",{className:"text-right text-slate-900",children:W.name})]}),t.jsxs("div",{className:"flex justify-between gap-4",children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Тип"}),t.jsx("dd",{className:"text-right text-slate-900",children:W.type})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Значение"}),t.jsx("dd",{className:"mt-1 rounded bg-white p-2 font-mono text-xs text-slate-900",children:W.value||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Meta"}),t.jsx("dd",{className:"mt-1",children:t.jsx("pre",{className:"max-h-48 overflow-auto rounded bg-white p-2 text-xs text-slate-800",children:W.meta?JSON.stringify(W.meta,null,2):"{}"})})]})]})]})}):null,t.jsx(Nl,{form:R,onChange:N,onSubmit:Rs,onDelete:Ds,onReset:()=>N({name:"",value:""}),valueLabel:o==="departments"?"Отделы":o==="divisions"?"Департамент":o==="positions"?"Отдел":void 0,renderValueField:o==="departments"?Hs:o==="divisions"?Bs:o==="positions"?zs:void 0,readonly:Se.readonly,readonlyNotice:Se.notice})]})}),t.jsx(rt,{open:ae,onClose:Ze,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:[t.jsxs("header",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-base font-semibold",children:"Карточка пользователя"}),t.jsxs("p",{className:"text-sm text-slate-500",children:["Telegram ID: ",(ca=U.telegram_id)!=null?ca:"—"]})]}),Gt&&U.telegram_id?t.jsx(P,{type:"button",variant:"destructive",className:"h-9 px-3 text-sm",onClick:()=>$e(!0),children:"Удалить"}):null]}),t.jsxs("dl",{className:"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Логин"}),t.jsx("dd",{className:"text-slate-900",children:U.username||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Имя"}),t.jsx("dd",{className:"text-slate-900",children:U.name||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Телефон"}),t.jsx("dd",{className:"text-slate-900",children:U.phone||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Мобильный"}),t.jsx("dd",{className:"text-slate-900",children:U.mobNumber||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Email"}),t.jsx("dd",{className:"text-slate-900",children:U.email||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Роль"}),t.jsx("dd",{className:"text-slate-900",children:ye(U.role)})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Доступ"}),t.jsx("dd",{className:"text-slate-900",children:U.access})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Роль ID"}),t.jsx("dd",{className:"text-slate-900",children:U.roleId?ye((da=Je.get(U.roleId))!=null?da:U.roleId):"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Департамент"}),t.jsx("dd",{className:"text-slate-900",children:U.departmentId?(ma=be.get(U.departmentId))!=null?ma:U.departmentId:"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Отдел"}),t.jsx("dd",{className:"text-slate-900",children:U.divisionId?(ua=re.get(U.divisionId))!=null?ua:U.divisionId:"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Должность"}),t.jsx("dd",{className:"text-slate-900",children:U.positionId?(fa=Ye.get(U.positionId))!=null?fa:U.positionId:"—"})]})]})]}),t.jsx(Zl,{form:U,onChange:ee,onSubmit:Ms,onReset:()=>ee(Ee)})]})}),t.jsx(rt,{open:hs,onClose:()=>De(!1),children:t.jsxs("div",{className:"space-y-4",children:[H?t.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:[t.jsxs("header",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-base font-semibold",children:"Карточка сотрудника"}),t.jsxs("p",{className:"text-sm text-slate-500",children:["ID: ",(ha=H.telegram_id)!=null?ha:"—"]})]}),Gt&&H.telegram_id?t.jsx(P,{type:"button",variant:"destructive",className:"h-9 px-3 text-sm",onClick:()=>He(!0),children:"Удалить"}):null]}),t.jsxs("dl",{className:"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Telegram ID"}),t.jsx("dd",{className:"text-slate-900",children:H.telegram_id})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Логин"}),t.jsx("dd",{className:"text-slate-900",children:H.username||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Имя"}),t.jsx("dd",{className:"text-slate-900",children:H.name||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Телефон"}),t.jsx("dd",{className:"text-slate-900",children:H.phone||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Мобильный"}),t.jsx("dd",{className:"text-slate-900",children:H.mobNumber||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Email"}),t.jsx("dd",{className:"text-slate-900",children:H.email||"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Роль"}),t.jsx("dd",{className:"text-slate-900",children:ye(H.role)})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Доступ"}),t.jsx("dd",{className:"text-slate-900",children:(xa=H.access)!=null?xa:"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Роль ID"}),t.jsx("dd",{className:"text-slate-900",children:H.roleId?ye((pa=Je.get(H.roleId))!=null?pa:H.roleId):"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Департамент"}),t.jsx("dd",{className:"text-slate-900",children:H.departmentId?(ga=be.get(H.departmentId))!=null?ga:H.departmentId:"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Отдел"}),t.jsx("dd",{className:"text-slate-900",children:H.divisionId?(ba=re.get(H.divisionId))!=null?ba:H.divisionId:"—"})]}),t.jsxs("div",{children:[t.jsx("dt",{className:"font-medium text-slate-500",children:"Должность"}),t.jsx("dd",{className:"text-slate-900",children:H.positionId?(va=Ye.get(H.positionId))!=null?va:H.positionId:"—"})]})]})]}):null,t.jsx(wr,{telegramId:$t==="update"?he:void 0,mode:$t,onSaved:Es})]})}),t.jsx(ke,{open:bs,message:"Удалить пользователя? Это действие нельзя отменить.",onConfirm:Ts,onCancel:()=>$e(!1),confirmText:"Удалить"}),t.jsx(ke,{open:vs,message:"Удалить сотрудника? Это действие нельзя отменить.",onConfirm:As,onCancel:()=>He(!1),confirmText:"Удалить"}),t.jsx(ce,{value:"reports",className:"mt-0",children:t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:t.jsx(Kl,{})})}),t.jsx(ce,{value:"archive",className:"mt-0",children:t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:t.jsx(_r,{})})}),t.jsx(ce,{value:"logs",className:"mt-0",children:t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:t.jsx(Er,{})})}),t.jsx(ce,{value:"storage",className:"mt-0",children:t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:t.jsx(dr,{})})})]})})}export{In as default};
//# sourceMappingURL=index-CXGZyCct.js.map
