<!-- Назначение файла: журнал прогона скриптов стабильности. Основные модули: pnpm, bash-скрипты. -->

# Отчёт прогона скриптов из README (2025-10-28, Europe/Kyiv)

## Сводка команд

| Команда                                        | Статус                     | Ключевые сообщения                                                                                 |
| ---------------------------------------------- | -------------------------- | -------------------------------------------------------------------------------------------------- |
| `pnpm install`                                 | ✅ Успех                   | установка зависимостей завершилась без ошибок【2bb487†L1-L9】                                      |
| `./scripts/create_env_from_exports.sh`         | ✅ Успех                   | `.env` обновлён из экспортов【4680f8†L1-L2】                                                       |
| `./scripts/setup_and_test.sh`                  | ❌ Провал                  | Jest упал: сбой аналитики маршрутов и таймауты MongoDB индексов【127b90†L1-L63】                   |
| `pnpm build`                                   | ⚠️ Успех с предупреждением | сборка завершилась, но не удалось подключиться к удалённой MongoDB【c9bf60†L1-L2】                 |
| `pnpm size`                                    | ✅ Успех                   | бандл 69.41 kB, ограничение 900 kB не превышено【6f628d†L1-L4】                                    |
| `pnpm a11y`                                    | ❌ Провал                  | axe CLI завершился с ошибкой после проверки одной страницы【1ca5a5†L1-L6】                         |
| `pnpm approve-builds`                          | ⚠️ Не пройдено             | команда потребовала интерактивного подтверждения и завершилась ошибкой чтения TTY【15696c†L1-L17】 |
| `./scripts/pre_pr_check.sh`                    | ✅ Успех                   | цикл проверок прошёл, завершение подтверждено сообщением【28dd00†L1-L2】                           |
| `./scripts/install_bot_deps.sh`                | ⚠️ Успех с изменениями     | pnpm предложил overrides для устранения CVE【f2e97a†L1-L13】                                       |
| `pnpm pretest:e2e`                             | ⚠️ Прервано                | процесс остановлен вручную после длительной сборки Playwright【cfbd31†L1-L1】                      |
| `timeout 30 pnpm run dev`                      | ⚠️ Прервано                | dev-серверы стартовали, процесс завершён по SIGTERM по истечении таймаута【7b0820†L1-L4】          |
| `timeout 30 ./scripts/start_api_with_memdb.sh` | ❌ Провал                  | запуск API сорвался из-за отсутствия `dist/server.js`【57d642†L1-L15】                             |

## Наблюдения

- Повторяющиеся ошибки тестов указывают на нестабильность модулей аналитики маршрутов и MongoDB-модуля индексов; требуется ручная диагностика перед разработкой.
- Проверка доступности выявила ненулевой код возврата из `@axe-core/cli`, однако конкретные нарушения контраста не перечислены в стандартном выводе; рекомендуется повторный запуск с `--exit` и сохранением отчёта.
- `pnpm install` и `pre_pr_check` проходят, но `approve-builds` невозможно выполнить без интерактивного подтверждения; для CI следует подготовить список разрешённых скриптов.
- Запуск API из `start_api_with_memdb.sh` зависит от наличия сборки `apps/api/dist`; перед стресс-тестами нужно выполнять `pnpm build` без очистки артефактов.
