const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index-BBSZBYTt.js","js/vendor-bFQg9Mu4.js","js/index-Chjiymov.js","js/ckeditor-ePvoknc6.js"])))=>i.map(i=>d[i]);
var El=Object.defineProperty;var Cl=(t,e,r)=>e in t?El(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Zr=(t,e,r)=>Cl(t,typeof e!="symbol"?e+"":e,r);import{j as d,_ as Qi,e as _l}from"./index-DgL4A3Hy.js";import{b as E,R as y,g as es,e as Zs,n as Ol,C as ts}from"./vendor-bFQg9Mu4.js";import{s as ai,B as xt,M as Il,h as qn,b as Js,g as Tn,a as Nl,p as Ot,q as Al,P as Rl,r as Dl,v as Ml,w as ns,x as pr,y as ja,z as kl,C as Pl,D as Ll,F as rs,d as hr,f as as,E as Fl,G as jl,n as is,o as Vl}from"./App-C5qf9m0C.js";import{F as ss}from"./PhotoIcon-COuocIGv.js";import{m as Ul,S as $l}from"./AuthenticatedApp-m87IzzAI.js";import{C as Jr}from"./ConfirmDialog-CQLmQCUJ.js";import{E as Hl}from"./EmployeeLink-Cf0n-sug.js";import{c as zl,g as Bl,f as Va,b as Wl,a as ql}from"./taskColumns-cbsood-k.js";import{F as Gl}from"./ArrowPathIcon-CFf_6S57.js";function Yl({title:t,titleId:e,...r},a){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":e},r),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Kl=E.forwardRef(Yl);const{entries:Qs,setPrototypeOf:os,isFrozen:Xl,getPrototypeOf:Zl,getOwnPropertyDescriptor:Jl}=Object;let{freeze:Xe,seal:St,create:eo}=Object,{apply:ii,construct:si}=typeof Reflect<"u"&&Reflect;Xe||(Xe=function(e){return e});St||(St=function(e){return e});ii||(ii=function(e,r,a){return e.apply(r,a)});si||(si=function(e,r){return new e(...r)});const Qr=Ze(Array.prototype.forEach),Ql=Ze(Array.prototype.lastIndexOf),ls=Ze(Array.prototype.pop),gr=Ze(Array.prototype.push),ec=Ze(Array.prototype.splice),oa=Ze(String.prototype.toLowerCase),Ua=Ze(String.prototype.toString),cs=Ze(String.prototype.match),br=Ze(String.prototype.replace),tc=Ze(String.prototype.indexOf),nc=Ze(String.prototype.trim),It=Ze(Object.prototype.hasOwnProperty),Ye=Ze(RegExp.prototype.test),vr=rc(TypeError);function Ze(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return ii(t,e,a)}}function rc(t){return function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return si(t,r)}}function H(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oa;os&&os(t,null);let a=e.length;for(;a--;){let n=e[a];if(typeof n=="string"){const s=r(n);s!==n&&(Xl(e)||(e[a]=s),n=s)}t[n]=!0}return t}function ac(t){for(let e=0;e<t.length;e++)It(t,e)||(t[e]=null);return t}function Bt(t){const e=eo(null);for(const[r,a]of Qs(t))It(t,r)&&(Array.isArray(a)?e[r]=ac(a):a&&typeof a=="object"&&a.constructor===Object?e[r]=Bt(a):e[r]=a);return e}function yr(t,e){for(;t!==null;){const a=Jl(t,e);if(a){if(a.get)return Ze(a.get);if(typeof a.value=="function")return Ze(a.value)}t=Zl(t)}function r(){return null}return r}const us=Xe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$a=Xe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ha=Xe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ic=Xe(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),za=Xe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),sc=Xe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ds=Xe(["#text"]),fs=Xe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ba=Xe(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ms=Xe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ea=Xe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oc=St(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lc=St(/<%[\w\W]*|[\w\W]*%>/gm),cc=St(/\$\{[\w\W]*/gm),uc=St(/^data-[\-\w.\u00B7-\uFFFF]+$/),dc=St(/^aria-[\-\w]+$/),to=St(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fc=St(/^(?:\w+script|data):/i),mc=St(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),no=St(/^html$/i),pc=St(/^[a-z][.\w]*(-[.\w]+)+$/i);var ps=Object.freeze({__proto__:null,ARIA_ATTR:dc,ATTR_WHITESPACE:mc,CUSTOM_ELEMENT:pc,DATA_ATTR:uc,DOCTYPE_NAME:no,ERB_EXPR:lc,IS_ALLOWED_URI:to,IS_SCRIPT_OR_DATA:fc,MUSTACHE_EXPR:oc,TMPLIT_EXPR:cc});const xr={element:1,text:3,progressingInstruction:7,comment:8,document:9},hc=function(){return typeof window>"u"?null:window},gc=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let a=null;const n="data-tt-policy-suffix";r&&r.hasAttribute(n)&&(a=r.getAttribute(n));const s="dompurify"+(a?"#"+a:"");try{return e.createPolicy(s,{createHTML(l){return l},createScriptURL(l){return l}})}catch(l){return console.warn("TrustedTypes policy "+s+" could not be created."),null}},hs=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ro(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hc();const e=F=>ro(F);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==xr.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const a=r,n=a.currentScript,{DocumentFragment:s,HTMLTemplateElement:l,Node:u,Element:o,NodeFilter:c,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:b,DOMParser:S,trustedTypes:T}=t,w=o.prototype,x=yr(w,"cloneNode"),h=yr(w,"remove"),g=yr(w,"nextSibling"),N=yr(w,"childNodes"),M=yr(w,"parentNode");if(typeof l=="function"){const F=r.createElement("template");F.content&&F.content.ownerDocument&&(r=F.content.ownerDocument)}let m,O="";const{implementation:A,createNodeIterator:I,createDocumentFragment:P,getElementsByTagName:$}=r,{importNode:W}=a;let z=hs();e.isSupported=typeof Qs=="function"&&typeof M=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:G,ERB_EXPR:ie,TMPLIT_EXPR:he,DATA_ATTR:ue,ARIA_ATTR:me,IS_SCRIPT_OR_DATA:Ve,ATTR_WHITESPACE:Me,CUSTOM_ELEMENT:st}=ps;let{IS_ALLOWED_URI:Je}=ps,de=null;const oe=H({},[...us,...$a,...Ha,...za,...ds]);let B=null;const Qe=H({},[...fs,...Ba,...ms,...ea]);let q=Object.seal(eo(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ve=null,ke=null,Ue=!0,wt=!0,jt=!1,Gt=!0,et=!1,Nt=!0,$e=!1,pt=!1,Vt=!1,ot=!1,ht=!1,cn=!1,un=!0,gt=!1;const dn="user-content-";let Ie=!0,Yt=!1,lt={},Pe=null;const _n=H({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Dr=null;const Ut=H({},["audio","video","img","source","image","track"]);let fn=null;const Mr=H({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),At="http://www.w3.org/1998/Math/MathML",On="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml";let Tt=tt,Rt=!1,mn=null;const In=H({},[At,On,tt],Ua);let Kt=H({},["mi","mo","mn","ms","mtext"]),nt=H({},["annotation-xml"]);const Zn=H({},["title","style","font","a","script"]);let Ne=null;const pn=["application/xhtml+xml","text/html"],rt="text/html";let re=null,ge=null;const Xt=r.createElement("form"),Le=function(f){return f instanceof RegExp||f instanceof Function},He=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ge&&ge===f)){if((!f||typeof f!="object")&&(f={}),f=Bt(f),Ne=pn.indexOf(f.PARSER_MEDIA_TYPE)===-1?rt:f.PARSER_MEDIA_TYPE,re=Ne==="application/xhtml+xml"?Ua:oa,de=It(f,"ALLOWED_TAGS")?H({},f.ALLOWED_TAGS,re):oe,B=It(f,"ALLOWED_ATTR")?H({},f.ALLOWED_ATTR,re):Qe,mn=It(f,"ALLOWED_NAMESPACES")?H({},f.ALLOWED_NAMESPACES,Ua):In,fn=It(f,"ADD_URI_SAFE_ATTR")?H(Bt(Mr),f.ADD_URI_SAFE_ATTR,re):Mr,Dr=It(f,"ADD_DATA_URI_TAGS")?H(Bt(Ut),f.ADD_DATA_URI_TAGS,re):Ut,Pe=It(f,"FORBID_CONTENTS")?H({},f.FORBID_CONTENTS,re):_n,ve=It(f,"FORBID_TAGS")?H({},f.FORBID_TAGS,re):Bt({}),ke=It(f,"FORBID_ATTR")?H({},f.FORBID_ATTR,re):Bt({}),lt=It(f,"USE_PROFILES")?f.USE_PROFILES:!1,Ue=f.ALLOW_ARIA_ATTR!==!1,wt=f.ALLOW_DATA_ATTR!==!1,jt=f.ALLOW_UNKNOWN_PROTOCOLS||!1,Gt=f.ALLOW_SELF_CLOSE_IN_ATTR!==!1,et=f.SAFE_FOR_TEMPLATES||!1,Nt=f.SAFE_FOR_XML!==!1,$e=f.WHOLE_DOCUMENT||!1,ot=f.RETURN_DOM||!1,ht=f.RETURN_DOM_FRAGMENT||!1,cn=f.RETURN_TRUSTED_TYPE||!1,Vt=f.FORCE_BODY||!1,un=f.SANITIZE_DOM!==!1,gt=f.SANITIZE_NAMED_PROPS||!1,Ie=f.KEEP_CONTENT!==!1,Yt=f.IN_PLACE||!1,Je=f.ALLOWED_URI_REGEXP||to,Tt=f.NAMESPACE||tt,Kt=f.MATHML_TEXT_INTEGRATION_POINTS||Kt,nt=f.HTML_INTEGRATION_POINTS||nt,q=f.CUSTOM_ELEMENT_HANDLING||{},f.CUSTOM_ELEMENT_HANDLING&&Le(f.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=f.CUSTOM_ELEMENT_HANDLING.tagNameCheck),f.CUSTOM_ELEMENT_HANDLING&&Le(f.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=f.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),f.CUSTOM_ELEMENT_HANDLING&&typeof f.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=f.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),et&&(wt=!1),ht&&(ot=!0),lt&&(de=H({},ds),B=[],lt.html===!0&&(H(de,us),H(B,fs)),lt.svg===!0&&(H(de,$a),H(B,Ba),H(B,ea)),lt.svgFilters===!0&&(H(de,Ha),H(B,Ba),H(B,ea)),lt.mathMl===!0&&(H(de,za),H(B,ms),H(B,ea))),f.ADD_TAGS&&(de===oe&&(de=Bt(de)),H(de,f.ADD_TAGS,re)),f.ADD_ATTR&&(B===Qe&&(B=Bt(B)),H(B,f.ADD_ATTR,re)),f.ADD_URI_SAFE_ATTR&&H(fn,f.ADD_URI_SAFE_ATTR,re),f.FORBID_CONTENTS&&(Pe===_n&&(Pe=Bt(Pe)),H(Pe,f.FORBID_CONTENTS,re)),Ie&&(de["#text"]=!0),$e&&H(de,["html","head","body"]),de.table&&(H(de,["tbody"]),delete ve.tbody),f.TRUSTED_TYPES_POLICY){if(typeof f.TRUSTED_TYPES_POLICY.createHTML!="function")throw vr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof f.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=f.TRUSTED_TYPES_POLICY,O=m.createHTML("")}else m===void 0&&(m=gc(T,n)),m!==null&&typeof O=="string"&&(O=m.createHTML(""));Xe&&Xe(f),ge=f}},We=H({},[...$a,...Ha,...ic]),qe=H({},[...za,...sc]),kr=function(f){let C=M(f);(!C||!C.tagName)&&(C={namespaceURI:Tt,tagName:"template"});const L=oa(f.tagName),Q=oa(C.tagName);return mn[f.namespaceURI]?f.namespaceURI===On?C.namespaceURI===tt?L==="svg":C.namespaceURI===At?L==="svg"&&(Q==="annotation-xml"||Kt[Q]):!!We[L]:f.namespaceURI===At?C.namespaceURI===tt?L==="math":C.namespaceURI===On?L==="math"&&nt[Q]:!!qe[L]:f.namespaceURI===tt?C.namespaceURI===On&&!nt[Q]||C.namespaceURI===At&&!Kt[Q]?!1:!qe[L]&&(Zn[L]||!We[L]):!!(Ne==="application/xhtml+xml"&&mn[f.namespaceURI]):!1},bt=function(f){gr(e.removed,{element:f});try{M(f).removeChild(f)}catch(C){h(f)}},Et=function(f,C){try{gr(e.removed,{attribute:C.getAttributeNode(f),from:C})}catch(L){gr(e.removed,{attribute:null,from:C})}if(C.removeAttribute(f),f==="is")if(ot||ht)try{bt(C)}catch(L){}else try{C.setAttribute(f,"")}catch(L){}},Pr=function(f){let C=null,L=null;if(Vt)f="<remove></remove>"+f;else{const fe=cs(f,/^[\r\n\t ]+/);L=fe&&fe[0]}Ne==="application/xhtml+xml"&&Tt===tt&&(f='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+f+"</body></html>");const Q=m?m.createHTML(f):f;if(Tt===tt)try{C=new S().parseFromString(Q,Ne)}catch(fe){}if(!C||!C.documentElement){C=A.createDocument(Tt,"template",null);try{C.documentElement.innerHTML=Rt?O:Q}catch(fe){}}const ye=C.body||C.documentElement;return f&&L&&ye.insertBefore(r.createTextNode(L),ye.childNodes[0]||null),Tt===tt?$.call(C,$e?"html":"body")[0]:$e?C.documentElement:ye},Nn=function(f){return I.call(f.ownerDocument||f,f,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},An=function(f){return f instanceof b&&(typeof f.nodeName!="string"||typeof f.textContent!="string"||typeof f.removeChild!="function"||!(f.attributes instanceof p)||typeof f.removeAttribute!="function"||typeof f.setAttribute!="function"||typeof f.namespaceURI!="string"||typeof f.insertBefore!="function"||typeof f.hasChildNodes!="function")},Jn=function(f){return typeof u=="function"&&f instanceof u};function vt(F,f,C){Qr(F,L=>{L.call(e,f,C,ge)})}const Qn=function(f){let C=null;if(vt(z.beforeSanitizeElements,f,null),An(f))return bt(f),!0;const L=re(f.nodeName);if(vt(z.uponSanitizeElement,f,{tagName:L,allowedTags:de}),Nt&&f.hasChildNodes()&&!Jn(f.firstElementChild)&&Ye(/<[/\w!]/g,f.innerHTML)&&Ye(/<[/\w!]/g,f.textContent)||f.nodeType===xr.progressingInstruction||Nt&&f.nodeType===xr.comment&&Ye(/<[/\w]/g,f.data))return bt(f),!0;if(!de[L]||ve[L]){if(!ve[L]&&hn(L)&&(q.tagNameCheck instanceof RegExp&&Ye(q.tagNameCheck,L)||q.tagNameCheck instanceof Function&&q.tagNameCheck(L)))return!1;if(Ie&&!Pe[L]){const Q=M(f)||f.parentNode,ye=N(f)||f.childNodes;if(ye&&Q){const fe=ye.length;for(let pe=fe-1;pe>=0;--pe){const at=x(ye[pe],!0);at.__removalCount=(f.__removalCount||0)+1,Q.insertBefore(at,g(f))}}}return bt(f),!0}return f instanceof o&&!kr(f)||(L==="noscript"||L==="noembed"||L==="noframes")&&Ye(/<\/no(script|embed|frames)/i,f.innerHTML)?(bt(f),!0):(et&&f.nodeType===xr.text&&(C=f.textContent,Qr([G,ie,he],Q=>{C=br(C,Q," ")}),f.textContent!==C&&(gr(e.removed,{element:f.cloneNode()}),f.textContent=C)),vt(z.afterSanitizeElements,f,null),!1)},Rn=function(f,C,L){if(un&&(C==="id"||C==="name")&&(L in r||L in Xt))return!1;if(!(wt&&!ke[C]&&Ye(ue,C))){if(!(Ue&&Ye(me,C))){if(!B[C]||ke[C]){if(!(hn(f)&&(q.tagNameCheck instanceof RegExp&&Ye(q.tagNameCheck,f)||q.tagNameCheck instanceof Function&&q.tagNameCheck(f))&&(q.attributeNameCheck instanceof RegExp&&Ye(q.attributeNameCheck,C)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(C))||C==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Ye(q.tagNameCheck,L)||q.tagNameCheck instanceof Function&&q.tagNameCheck(L))))return!1}else if(!fn[C]){if(!Ye(Je,br(L,Me,""))){if(!((C==="src"||C==="xlink:href"||C==="href")&&f!=="script"&&tc(L,"data:")===0&&Dr[f])){if(!(jt&&!Ye(Ve,br(L,Me,"")))){if(L)return!1}}}}}}return!0},hn=function(f){return f!=="annotation-xml"&&cs(f,st)},Dn=function(f){vt(z.beforeSanitizeAttributes,f,null);const{attributes:C}=f;if(!C||An(f))return;const L={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let Q=C.length;for(;Q--;){const ye=C[Q],{name:fe,namespaceURI:pe,value:at}=ye,Ge=re(fe),Jt=at;let le=fe==="value"?Jt:nc(Jt);if(L.attrName=Ge,L.attrValue=le,L.keepAttr=!0,L.forceKeepAttr=void 0,vt(z.uponSanitizeAttribute,f,L),le=L.attrValue,gt&&(Ge==="id"||Ge==="name")&&(Et(fe,f),le=dn+le),Nt&&Ye(/((--!?|])>)|<\/(style|title)/i,le)){Et(fe,f);continue}if(L.forceKeepAttr)continue;if(!L.keepAttr){Et(fe,f);continue}if(!Gt&&Ye(/\/>/i,le)){Et(fe,f);continue}et&&Qr([G,ie,he],ct=>{le=br(le,ct," ")});const gn=re(f.nodeName);if(!Rn(gn,Ge,le)){Et(fe,f);continue}if(m&&typeof T=="object"&&typeof T.getAttributeType=="function"&&!pe)switch(T.getAttributeType(gn,Ge)){case"TrustedHTML":{le=m.createHTML(le);break}case"TrustedScriptURL":{le=m.createScriptURL(le);break}}if(le!==Jt)try{pe?f.setAttributeNS(pe,fe,le):f.setAttribute(fe,le),An(f)?bt(f):ls(e.removed)}catch(ct){Et(fe,f)}}vt(z.afterSanitizeAttributes,f,null)},Zt=function F(f){let C=null;const L=Nn(f);for(vt(z.beforeSanitizeShadowDOM,f,null);C=L.nextNode();)vt(z.uponSanitizeShadowNode,C,null),Qn(C),Dn(C),C.content instanceof s&&F(C.content);vt(z.afterSanitizeShadowDOM,f,null)};return e.sanitize=function(F){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=null,L=null,Q=null,ye=null;if(Rt=!F,Rt&&(F="<!-->"),typeof F!="string"&&!Jn(F))if(typeof F.toString=="function"){if(F=F.toString(),typeof F!="string")throw vr("dirty is not a string, aborting")}else throw vr("toString is not a function");if(!e.isSupported)return F;if(pt||He(f),e.removed=[],typeof F=="string"&&(Yt=!1),Yt){if(F.nodeName){const at=re(F.nodeName);if(!de[at]||ve[at])throw vr("root node is forbidden and cannot be sanitized in-place")}}else if(F instanceof u)C=Pr("<!---->"),L=C.ownerDocument.importNode(F,!0),L.nodeType===xr.element&&L.nodeName==="BODY"||L.nodeName==="HTML"?C=L:C.appendChild(L);else{if(!ot&&!et&&!$e&&F.indexOf("<")===-1)return m&&cn?m.createHTML(F):F;if(C=Pr(F),!C)return ot?null:cn?O:""}C&&Vt&&bt(C.firstChild);const fe=Nn(Yt?F:C);for(;Q=fe.nextNode();)Qn(Q),Dn(Q),Q.content instanceof s&&Zt(Q.content);if(Yt)return F;if(ot){if(ht)for(ye=P.call(C.ownerDocument);C.firstChild;)ye.appendChild(C.firstChild);else ye=C;return(B.shadowroot||B.shadowrootmode)&&(ye=W.call(a,ye,!0)),ye}let pe=$e?C.outerHTML:C.innerHTML;return $e&&de["!doctype"]&&C.ownerDocument&&C.ownerDocument.doctype&&C.ownerDocument.doctype.name&&Ye(no,C.ownerDocument.doctype.name)&&(pe="<!DOCTYPE "+C.ownerDocument.doctype.name+">\n"+pe),et&&Qr([G,ie,he],at=>{pe=br(pe,at," ")}),m&&cn?m.createHTML(pe):pe},e.setConfig=function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};He(F),pt=!0},e.clearConfig=function(){ge=null,pt=!1},e.isValidAttribute=function(F,f,C){ge||He({});const L=re(F),Q=re(f);return Rn(L,Q,C)},e.addHook=function(F,f){typeof f=="function"&&gr(z[F],f)},e.removeHook=function(F,f){if(f!==void 0){const C=Ql(z[F],f);return C===-1?void 0:ec(z[F],C,1)[0]}return ls(z[F])},e.removeHooks=function(F){z[F]=[]},e.removeAllHooks=function(){z=hs()},e}var Wa=ro(),gs={},bs;function bc(){return bs||(bs=1,(function(t){const e=t.ru=t.ru||{};e.dictionary=Object.assign(e.dictionary||{},{"(may require <kbd>Fn</kbd>)":"(может требовать <kbd>Fn</kbd>)","%0 of %1":"%0 из %1",Accept:"Принять",Accessibility:"Доступность","Accessibility help":"Помощь по специальным возможностям","Align cell text to the bottom":"Выровнять текст ячейки по нижнему краю","Align cell text to the center":"Выровнять текст по центру","Align cell text to the left":"Выровнять текст по левому краю","Align cell text to the middle":"Выровнять текст ячейки по центру","Align cell text to the right":"Выровнять текст по правому краю","Align cell text to the top":"Выровнять текст ячейки по верхнему краю","Align table to the left":"Выровнять таблицу по левому краю","Align table to the right":"Выровнять таблицу по правому краю",Alignment:"Выравнивание",Aquamarine:"Аквамариновый",Background:"Фон","Below, you can find a list of keyboard shortcuts that can be used in the editor.":"Ниже вы можете найти список сочетаний клавиш, которые можно использовать в редакторе.",Black:"Чёрный","Block quote":"Цитата",Blue:"Синий",Bold:"Жирный","Bold text":"Жирный текст",Border:"Граница","Break text":"Разрывать текст","Bulleted List":"Маркированный список","Bulleted list styles toolbar":"Стили маркированного списка",Cancel:"Отмена","Cannot access default workspace.":"Не удается получить доступ к рабочему пространству по умолчанию.","Cannot determine a category for the uploaded file.":"Не удаётся определить категорию для загруженного файла.","Cannot upload file:":"Невозможно загрузить файл","Caption for image: %0":"Подпись к изображению: %0","Caption for the image":"Подпись к изображению","Cell properties":"Свойства ячейки","Center table":"Выровнять таблицу по центру","Centered image":"Выравнивание по центру","Change image text alternative":"Редактировать альтернативный текст","Choose heading":"Выбор стиля",Circle:"Окружность",Clear:"Очистить","Click to edit block":"Нажмите, чтобы редактировать блок",Close:"Закрыть","Close contextual balloons, dropdowns, and dialogs":"Закрыть контекстные всплывающие окна, раскрывающиеся списки и диалоговые окна.",Code:"Исходный код",Color:"Цвет","Color picker":"Выбор цвета",Column:"Столбец","Content editing keystrokes":"Клавиши для редактирования контента","Copy selected content":"Копировать выбранное содержание","Could not insert image at the current position.":"Нельзя вставить изображение на текущую позицию.","Could not obtain resized image URL.":"Не удалось получить URL с измененным размером изображения.","Create link":"Создать ссылку",Custom:"Другое","Custom image size":"Пользовательский размер изображения",Dashed:"Пунктирная",Decimal:"Десятичный","Decimal with leading zero":"Десятичный с ведущим нулем","Decrease indent":"Уменьшить отступ","Decrease list item indent":"Уменьшить отступ элемента списка","Delete column":"Удалить столбец","Delete row":"Удалить строку","Dim grey":"Тёмно-серый",Dimensions:"Размеры",Disc:"Диск",Dotted:"Точечная",Double:"Двойная",Downloadable:"Загружаемые","Drag to move":"Перетащить","Dropdown toolbar":"Выпадающая панель инструментов","Edit block":"Редактировать блок","Edit image":"Редактировать изображение","Edit link":"Редактировать ссылку","Editor block content toolbar":"Панель инструментов редактора","Editor contextual toolbar":"Контекстуальная панель инструментов редактора","Editor dialog":"Диалоговое окно редактора","Editor editing area: %0":"Область редактирования редактора: %0","Editor menu bar":"Панель меню редактора","Editor toolbar":"Панель инструментов редактора","Enter image caption":"Подпись к изображению","Enter table caption":"Подпись таблицы","Entering a to-do list":"Ввод списка текущих дел","Error during image upload":"Ошибка при загрузке изображения","Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content.":"Активировать кнопку, находящуюся в фокусе. Активирование кнопок, которые взаимодействуют с содержимым редактора, перемещает фокус обратно на содержимое.","Failed to determine category of edited image.":"Не удалось определить категорию отредактированного изображения.","Full size image":"Оригинальный размер изображения",Green:"Зелёный",Grey:"Серый",Groove:"Желобчатая","Header column":"Столбец заголовков","Header row":"Строка заголовков",Heading:"Стиль","Heading 1":"Заголовок 1","Heading 2":"Заголовок 2","Heading 3":"Заголовок 3","Heading 4":"Заголовок 4","Heading 5":"Заголовок 5","Heading 6":"Заголовок 6",Height:"Высота","Help Contents. To close this dialog press ESC.":"Содержание справки. Чтобы закрыть это диалоговое окно, нажмите ESC.",HEX:"HEX","Horizontal text alignment toolbar":"Панель инструментов горизонтального выравнивания текста","Image from computer":"Изображение с компьютера","Image resize list":"Список размеров","Image toolbar":"Панель инструментов изображения","Image upload complete":"Загрузка изображения завершена","image widget":"Виджет изображений","In line":"В тексте","Increase indent":"Увеличить отступ","Increase list item indent":"Увеличить отступ элемента списка",Insert:"Вставить","Insert a hard break (a new paragraph)":"Вставить жесткий разрыв (новый абзац)","Insert a new paragraph directly after a widget":"Вставить новый абзац непосредственно после виджета.","Insert a new paragraph directly before a widget":"Вставить новый абзац непосредственно перед виджетом.","Insert a new table row (when in the last cell of a table)":"Вставить новую строку таблицы (в последней ячейке таблицы)","Insert a soft break (a <code>&lt;br&gt;</code> element)":"Вставить мягкий разрыв (элемент <code>&lt;br&gt;</code>)","Insert column left":"Вставить столбец слева","Insert column right":"Вставить столбец справа","Insert image":"Вставить изображение","Insert image via URL":"Вставить изображение по URL","Insert image with file manager":"Вставить изображение с помощью файлового менеджера","Insert media":"Вставить медиа","Insert paragraph after block":"Вставить параграф после блока","Insert paragraph before block":"Вставить параграф перед блоком","Insert row above":"Вставить строку выше","Insert row below":"Вставить строку ниже","Insert table":"Вставить таблицу","Insert with file manager":"Вставка с помощью файлового менеджера","Inserting image failed":"Вставка изображения не удалась",Inset:"Вдавленная","Invalid start index value.":"Недопустимое значение начального индекса.",Italic:"Курсив","Italic text":"Текст курсивом","Justify cell text":"Выровнять текст по ширине","Keystrokes that can be used in a list":"Нажатия клавиш, которые можно использовать в списке","Keystrokes that can be used in a table cell":"Нажатия клавиш, которые можно использовать в ячейке таблицы","Keystrokes that can be used when a widget is selected (for example: image, table, etc.)":"Нажатия клавиш, которые можно использовать при выборе виджета (например: изображение, таблица и т. д.)","Leaving a to-do list":"Оставляем список текущих дел","Left aligned image":"Выравнивание по левому краю","Light blue":"Голубой","Light green":"Салатовый","Light grey":"Светло-серый",Link:"Ссылка","Link image":"Ссылка на изображение","Link URL":"Ссылка URL","Link URL must not be empty.":"URL-адрес ссылки не должен быть пустым.","List properties":"Свойства списка","Lower-latin":"Малые латинские","Lower–roman":"Малые римские","Media toolbar":"Панель инструментов медиа","Media URL":"URL медиа","media widget":"медиа-виджет",MENU_BAR_MENU_EDIT:"Редактировать",MENU_BAR_MENU_FILE:"Файл",MENU_BAR_MENU_FONT:"Шрифт",MENU_BAR_MENU_FORMAT:"Формат",MENU_BAR_MENU_HELP:"Помощь",MENU_BAR_MENU_INSERT:"Вставить",MENU_BAR_MENU_TEXT:"Текст",MENU_BAR_MENU_TOOLS:"Инструменты",MENU_BAR_MENU_VIEW:"Посмотреть","Merge cell down":"Объединить с ячейкой снизу","Merge cell left":"Объединить с ячейкой слева","Merge cell right":"Объединить с ячейкой справа","Merge cell up":"Объединить с ячейкой сверху","Merge cells":"Объединить ячейки","Move focus between form fields (inputs, buttons, etc.)":"Переместить фокус между полями формы (вводы, кнопки и т. д.)","Move focus in and out of an active dialog window":"Переместить фокус в активное диалоговое окно и обратно.","Move focus to the menu bar, navigate between menu bars":"Переместить фокус на панель меню, перемещаться между панелями меню","Move focus to the toolbar, navigate between toolbars":"Переместить фокус на панель инструментов, перемещаться между панелями инструментов","Move out of a link":"Выйти из ссылки","Move out of an inline code style":"Выйти из встроенного стиля кода","Move the caret to allow typing directly after a widget":"Переместить курсор, чтобы можно было вводить текст сразу после виджета.","Move the caret to allow typing directly before a widget":"Переместите курсор, чтобы можно было вводить текст непосредственно перед виджетом.","Move the selection to the next cell":"Переместить выделение в следующую ячейку","Move the selection to the previous cell":"Переместить выделение на предыдущую ячейку","Navigate through the table":"Навигация по таблице","Navigate through the toolbar or menu bar":"Перемещение по панели инструментов или панели меню",Next:"Следующий","No results found":"Результаты не найдены","No searchable items":"Нет элементов для поиска",None:"Нет","Numbered List":"Нумерованный список","Numbered list styles toolbar":"Стили нумерованного списка","Open file manager":"Открыть менеджер файлов","Open in a new tab":"Открыть в новой вкладке","Open link in new tab":"Открыть ссылку в новой вкладке","Open media in new tab":"Откройте медиа в новой вкладке","Open the accessibility help dialog":"Открыть диалоговое окно справки по специальным возможностям",Orange:"Оранжевый",Original:"Оригинальный",Outset:"Выпуклая",Padding:"Отступ",Paragraph:"Параграф","Paste content":"Вставить содержание","Paste content as plain text":"Вставить содержанрие в виде обычного текста","Paste the media URL in the input.":"Вставьте URL медиа в поле ввода.",'Please enter a valid color (e.g. "ff0000").':'Введите действительный цвет (например, "ff0000").',"Press %0 for help.":"Нажмите %0 для получения помощи.","Press Enter to type after or press Shift + Enter to type before the widget":"Нажмите Enter для ввода текста после виджета или нажмите Shift + Enter для ввода текста перед виджетом",Previous:"Предыдущий","Processing the edited image.":"Обработка отредактированного изображения.",Purple:"Фиолетовый",Red:"Красный",Redo:"Повторить","Remove color":"Убрать цвет","Replace from computer":"Заменить с компьютера","Replace image":"Заменить изображение","Replace image from computer":"Заменить изображение с компьютера","Replace image with file manager":"Заменить изображение с помощью файлового менеджера","Replace with file manager":"Заменить с помощью файлового менеджера","Resize image":"Изменить размер изображения","Resize image (in %0)":"Изменить размер изображения (в %0)","Resize image to %0":"Изменить размер изображения до %0","Resize image to the original size":"Вернуть размер изображения к оригинальному","Restore default":"По умолчанию","Reversed order":"Обратный порядок","Revert autoformatting action":"Отменить действие автоформатирования","Rich Text Editor":"Редактор",Ridge:"Ребристая","Right aligned image":"Выравнивание по правому краю",Row:"Строка",Save:"Сохранить","Select all":"Выбрать все","Select column":"Выбрать столбец","Select row":"Выбрать строку","Selecting resized image failed":"Выбор изображения с измененным размером не удался","Server failed to process the image.":"Серверу не удалось обработать изображение.","Show more items":"Другие инструменты","Side image":"Боковое изображение",Solid:"Сплошная","Split cell horizontally":"Разделить ячейку горизонтально","Split cell vertically":"Разделить ячейку вертикально",Square:"Квадрат","Start at":"Начать с","Start index must be greater than 0.":"Начальный индекс должен быть больше 0.",Strikethrough:"Зачеркнутый","Strikethrough text":"Зачеркнутый текст",Style:"Стиль",Subscript:"Подстрочный",Superscript:"Надстрочный",Table:"Таблица","Table alignment toolbar":"Панель инструментов выравнивания таблицы","Table cell text alignment":"Выравнивание текста в ячейке таблицы","Table properties":"Свойства таблицы","Table toolbar":"Панель инструментов таблицы","Text alternative":"Альтернативный текст",'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".':'Неверный цвет. Попробуйте "#FF0000" или "rgb(255,0,0)" или "red".',"The URL must not be empty.":"URL не должен быть пустым.",'The value is invalid. Try "10px" or "2em" or simply "2".':'Неверное значение. Попробуйте "10px" или "2em" или просто "2".',"The value must not be empty.":"Значение не должно быть пустым.","The value should be a plain number.":"Значение должно быть простым числом.","These keyboard shortcuts allow for quick access to content editing features.":"Эти сочетания клавиш обеспечивают быстрый доступ к функциям редактирования контента.","This link has no URL":"Для этой ссылки не установлен адрес URL","This media URL is not supported.":"Этот URL медиа не поддерживается.","Tip: Paste the URL into the content to embed faster.":"Подсказка: Вставьте URL в контент для быстрого включения.","To-do List":"Список задач","Toggle caption off":"Выключить описание","Toggle caption on":"Включить описание","Toggle the circle list style":"Переключить на стиль списка с маркерами в виде незакрашенного кружка","Toggle the decimal list style":"Переключить на стиль списка с цифровыми маркерами","Toggle the decimal with leading zero list style":"Переключить на стиль списка с маркерами в виде цифр с нулем в начале","Toggle the disc list style":"Переключить на стиль списка с маркерами в виде закрашенного кружка","Toggle the lower–latin list style":"Переключить на стиль списка с маркерами в виде строчных латинских букв","Toggle the lower–roman list style":"Переключить на стиль списка с маркерами в виде строчных римских цифр","Toggle the square list style":"Переключить на стиль списка с квадратными маркерами","Toggle the upper–latin list style":"Переключить на стиль списка с маркерами в виде заглавных латинских букв","Toggle the upper–roman list style":"Переключить на стиль списка с маркерами в виде заглавных римских цифр",Turquoise:"Бирюзовый","Type or paste your content here.":"Введите или вставьте сюда ваш текст","Type your title":"Введите заголовок",Underline:"Подчеркнутый","Underline text":"Подчеркнутый текст",Undo:"Отменить",Unlink:"Убрать ссылку",Update:"Изменить","Update image URL":"Изменить URL изображения","Upload failed":"Загрузка не выполнена","Upload from computer":"Загрузить с компьютера","Upload image from computer":"Загрузить изображение с компьютера","Upload in progress":"Идёт загрузка","Uploading image":"Загрузка изображения","Upper-latin":"Большие латинские","Upper-roman":"Большие римские","Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface.":"Использовать следующие сочетания клавиш для более эффективной навигации в пользовательском интерфейсе CKEditor 5.","User interface and content navigation keystrokes":"Пользовательский интерфейс и клавиши навигации по контенту","Vertical text alignment toolbar":"Панель инструментов вертикального выравнивания текста",White:"Белый","Widget toolbar":"Панель инструментов виджета",Width:"Ширина","Wrap text":"Обтекать текст",Yellow:"Жёлтый"}),e.getPluralForm=function(r){return r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<12||r%100>14)?1:r%10==0||r%10>=5&&r%10<=9||r%100>=11&&r%100<=14?2:3}})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={}))),gs}bc();_l();const vc={"image/png":".png","image/jpeg":".jpg","image/jpg":".jpg","image/gif":".gif","image/webp":".webp","image/bmp":".bmp","image/svg+xml":".svg","image/heic":".heic","image/heif":".heif"},la=t=>{if(!t)return;const e=t.trim();if(!e)return;if(e.startsWith("blob:")||e.startsWith("data:")||!e.includes("/api/v1/files/")||/[?&]mode=inline(?:&|$)/.test(e))return e;const r=e.indexOf("#"),a=r===-1?e:e.slice(0,r),n=r===-1?"":e.slice(r),s=a.includes("?")?"&":"?";return"".concat(a).concat(s,"mode=inline").concat(n)},vs=t=>{if(!t)return;const e=t.split(",").map(r=>r.trim()).filter(r=>r.length>0).map(r=>{var l;const[a,...n]=r.split(/\s+/),s=(l=la(a))!=null?l:a;return n.length?"".concat(s," ").concat(n.join(" ")):s}).filter(r=>r.length>0);return e.length>0?e.join(", "):void 0},yc=t=>{if(!t)return"";if(typeof window>"u"||typeof document>"u")return Wa.sanitize(t);let e=null;try{const l=Wa.sanitize(t,{RETURN_DOM_FRAGMENT:!0});e=l instanceof DocumentFragment||l&&typeof l.cloneNode=="function"?l:null}catch(l){e=null}if(!e)return Wa.sanitize(t);e.querySelectorAll("img").forEach(l=>{const u=l.getAttribute("src"),o=la(u);o&&l.setAttribute("src",o);const c=vs(l.getAttribute("srcset"));c?l.setAttribute("srcset",c):l.hasAttribute("srcset")&&l.removeAttribute("srcset")}),e.querySelectorAll("source").forEach(l=>{const u=vs(l.getAttribute("srcset"));u&&l.setAttribute("srcset",u);const o=la(l.getAttribute("src"));o&&l.setAttribute("src",o)}),e.querySelectorAll("a[href]").forEach(l=>{const u=la(l.getAttribute("href"));u&&l.setAttribute("href",u)});const s=document.createElement("div");return s.appendChild(e),s.innerHTML};function xc(t){var c;const e=typeof t.name=="string"?t.name.trim():"",r=e.toLowerCase();if(/\.[0-9a-z_-]{1,16}$/.test(r))return e;const n=typeof t.type=="string"?t.type.toLowerCase():"",s=(c=vc[n])!=null?c:".png",o=e.replace(/\.[^./\\]+$/,"").replace(/[^0-9a-z_-]+/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||"image";return"".concat(o).concat(s)}class Sc{constructor(e,r){Zr(this,"loader");Zr(this,"controller",new AbortController);Zr(this,"onError");this.loader=e,this.onError=r}async upload(){var e;try{const r=await this.loader.file;if(!r)throw new Error("Файл не выбран");const a=new FormData;a.append("upload",r,xc(r));const n=await qn("/api/v1/tasks/upload-inline",{method:"POST",body:a,signal:this.controller.signal});if(!n.ok){let l="Не удалось загрузить файл";try{const u=await n.clone().json();u!=null&&u.error&&(l=u.error)}catch(u){try{const o=await n.text();o.trim()&&(l=o.trim())}catch(o){}}throw new Error(l)}const s=await n.json();if(!(s!=null&&s.url))throw new Error("Сервер не вернул ссылку на файл");return{default:s.url}}catch(r){throw r instanceof Error&&((e=this.onError)==null||e.call(this,r.message)),r}}abort(){this.controller.abort()}}const wc=y.lazy(async()=>{const[{CKEditor:t},{default:e}]=await Promise.all([Qi(()=>import("./index-BBSZBYTt.js").then(r=>r.i),__vite__mapDeps([0,1,2])),Qi(()=>import("./ckeditor-ePvoknc6.js").then(r=>r.c),__vite__mapDeps([3,1]))]);return{default:r=>d.jsx(t,{editor:e,...r})}});function ys({value:t,onChange:e,readOnly:r}){const[a,n]=E.useState(!1),[s,l]=E.useState(t),u=E.useMemo(()=>t?yc(t):"",[t]),o=E.useMemo(()=>function(T){const w=T.plugins.get("FileRepository");w&&(w.createUploadAdapter=x=>new Sc(x,h=>ai(h,"error")))},[]),c=E.useMemo(()=>({language:{ui:"ru",content:"ru"},toolbar:["undo","redo","|","heading","|","bold","italic","link","bulletedList","numberedList","|","blockQuote","insertTable","uploadImage","mediaEmbed"],image:{toolbar:["imageStyle:inline","imageStyle:block","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},placeholder:"Опишите задачу, добавьте изображения, ссылки или форматирование…",extraPlugins:[o],link:{decorators:{openInNewTab:{mode:"manual",label:"Открывать в новой вкладке",defaultValue:!0,attributes:{target:"_blank",rel:"noopener noreferrer"}}}}}),[o]);y.useEffect(()=>{a||l(t)},[a,t]);const p=u?d.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:u}}):d.jsxs("p",{className:"flex items-center gap-2 text-slate-400",children:[d.jsx(ss,{className:"h-5 w-5"})," Добавьте описание, изображения или форматированный текст"]}),b=d.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 bg-gradient-to-r from-indigo-50 via-white to-white px-3 py-2 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:[d.jsxs("span",{className:"flex items-center gap-1 text-indigo-600",children:[d.jsx(Kl,{className:"h-4 w-4"})," Расширенный редактор"]}),d.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-indigo-100 px-2 py-1 text-[10px] font-medium text-indigo-700",children:[d.jsx(ss,{className:"h-3 w-3"})," Drag & Drop"]})]});return r?d.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[b,d.jsx("div",{className:"px-4 py-3 text-sm leading-relaxed text-slate-700",children:p}),d.jsx("div",{className:"flex flex-wrap items-center justify-between gap-2 border-t border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"Комментарий доступен только для чтения"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{l(t),n(!0)},onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),l(t),n(!0))},className:"group rounded-2xl border border-slate-200 bg-white shadow-sm transition hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring focus:ring-indigo-200",children:[b,d.jsx("div",{className:"px-4 py-3 text-sm leading-relaxed text-slate-700",children:p}),d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-slate-200 bg-slate-50 px-3 py-2",children:[d.jsx("span",{className:"hidden text-xs text-slate-500 sm:block",children:"Поддерживает списки, таблицы, изображения и ссылки."}),d.jsxs("div",{className:"flex flex-wrap gap-2 sm:flex-nowrap",children:[t&&d.jsx(xt,{type:"button",variant:"outline",size:"xs",className:"gap-1",onClick:S=>{S.stopPropagation(),e==null||e("")},children:"Очистить"}),d.jsx(xt,{type:"button",variant:"default",size:"xs",onClick:()=>{l(t),n(!0)},children:"Открыть редактор"})]})]})]}),a&&d.jsx(Il,{open:!0,onClose:()=>n(!1),children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex items-center justify-between gap-3",children:d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Редактирование текста"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Добавляйте изображения, таблицы, списки и ссылки — всё сохраняется автоматически."})]})}),d.jsx(y.Suspense,{fallback:d.jsx("div",{className:"flex h-64 items-center justify-center text-slate-500",children:"Загрузка редактора…"}),children:d.jsx(wc,{data:s,config:c,onReady:S=>{const T=S.editing.view.document.getRoot();S.editing.view.change(w=>{T&&w.setStyle("min-height","320px",T)})},onChange:(S,T)=>l(T.getData())})}),d.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[d.jsx(xt,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Отмена"}),d.jsx(xt,{type:"button",variant:"default",onClick:()=>{e==null||e(s),n(!1)},children:"Сохранить"})]})]})})]})}function Cn(t){"@babel/helpers - typeof";return Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(t)}function Tc(t,e){if(Cn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(Cn(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ao(t){var e=Tc(t,"string");return Cn(e)=="symbol"?e:e+""}function Cr(t,e,r){return(e=ao(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xs(Object(r),!0).forEach(function(a){Cr(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xs(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Ec(t){if(Array.isArray(t))return t}function Cc(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,s,l,u=[],o=!0,c=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(a=s.call(r)).done)&&(u.push(a.value),u.length!==e);o=!0);}catch(p){c=!0,n=p}finally{try{if(!o&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return u}}function oi(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function io(t,e){if(t){if(typeof t=="string")return oi(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oi(t,e):void 0}}function _c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wt(t,e){return Ec(t)||Cc(t,e)||io(t,e)||_c()}function Oc(t,e){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function qt(t,e){if(t==null)return{};var r,a,n=Oc(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var Ic=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Nc(t){var e=t.defaultInputValue,r=e===void 0?"":e,a=t.defaultMenuIsOpen,n=a===void 0?!1:a,s=t.defaultValue,l=s===void 0?null:s,u=t.inputValue,o=t.menuIsOpen,c=t.onChange,p=t.onInputChange,b=t.onMenuClose,S=t.onMenuOpen,T=t.value,w=qt(t,Ic),x=E.useState(u!==void 0?u:r),h=Wt(x,2),g=h[0],N=h[1],M=E.useState(o!==void 0?o:n),m=Wt(M,2),O=m[0],A=m[1],I=E.useState(T!==void 0?T:l),P=Wt(I,2),$=P[0],W=P[1],z=E.useCallback(function(Me,st){typeof c=="function"&&c(Me,st),W(Me)},[c]),G=E.useCallback(function(Me,st){var Je;typeof p=="function"&&(Je=p(Me,st)),N(Je!==void 0?Je:Me)},[p]),ie=E.useCallback(function(){typeof S=="function"&&S(),A(!0)},[S]),he=E.useCallback(function(){typeof b=="function"&&b(),A(!1)},[b]),ue=u!==void 0?u:g,me=o!==void 0?o:O,Ve=T!==void 0?T:$;return V(V({},w),{},{inputValue:ue,menuIsOpen:me,onChange:z,onInputChange:G,onMenuClose:he,onMenuOpen:ie,value:Ve})}function U(){return U=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},U.apply(null,arguments)}function Ac(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ss(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,ao(a.key),a)}}function Rc(t,e,r){return e&&Ss(t.prototype,e),r&&Ss(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function li(t,e){return li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},li(t,e)}function Dc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&li(t,e)}function pa(t){return pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pa(t)}function so(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(so=function(){return!!t})()}function Mc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kc(t,e){if(e&&(Cn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mc(t)}function Pc(t){var e=so();return function(){var r,a=pa(t);if(e){var n=pa(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return kc(this,r)}}function Lc(t){if(Array.isArray(t))return oi(t)}function Fc(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bi(t){return Lc(t)||Fc(t)||io(t)||jc()}function Vc(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Uc(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var $c=(function(){function t(r){var a=this;this._insertTag=function(n){var s;a.tags.length===0?a.insertionPoint?s=a.insertionPoint.nextSibling:a.prepend?s=a.container.firstChild:s=a.before:s=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(n,s),a.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(a){a.forEach(this._insertTag)},e.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Uc(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Vc(n);try{s.insertRule(a,s.cssRules.length)}catch(l){}}else n.appendChild(document.createTextNode(a));this.ctr++},e.flush=function(){this.tags.forEach(function(a){var n;return(n=a.parentNode)==null?void 0:n.removeChild(a)}),this.tags=[],this.ctr=0},t})(),Be="-ms-",ha="-moz-",Z="-webkit-",oo="comm",vi="rule",yi="decl",Hc="@import",lo="@keyframes",zc="@layer",Bc=Math.abs,ya=String.fromCharCode,Wc=Object.assign;function qc(t,e){return je(t,0)^45?(((e<<2^je(t,0))<<2^je(t,1))<<2^je(t,2))<<2^je(t,3):0}function co(t){return t.trim()}function Gc(t,e){return(t=e.exec(t))?t[0]:t}function J(t,e,r){return t.replace(e,r)}function ci(t,e){return t.indexOf(e)}function je(t,e){return t.charCodeAt(e)|0}function _r(t,e,r){return t.slice(e,r)}function Pt(t){return t.length}function xi(t){return t.length}function ta(t,e){return e.push(t),t}function Yc(t,e){return t.map(e).join("")}var xa=1,Kn=1,uo=0,it=0,Oe=0,Xn="";function Sa(t,e,r,a,n,s,l){return{value:t,root:e,parent:r,type:a,props:n,children:s,line:xa,column:Kn,length:l,return:""}}function Sr(t,e){return Wc(Sa("",null,null,"",null,null,0),t,{length:-t.length},e)}function Kc(){return Oe}function Xc(){return Oe=it>0?je(Xn,--it):0,Kn--,Oe===10&&(Kn=1,xa--),Oe}function mt(){return Oe=it<uo?je(Xn,it++):0,Kn++,Oe===10&&(Kn=1,xa++),Oe}function Ft(){return je(Xn,it)}function ca(){return it}function Rr(t,e){return _r(Xn,t,e)}function Or(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fo(t){return xa=Kn=1,uo=Pt(Xn=t),it=0,[]}function mo(t){return Xn="",t}function ua(t){return co(Rr(it-1,ui(t===91?t+2:t===40?t+1:t)))}function Zc(t){for(;(Oe=Ft())&&Oe<33;)mt();return Or(t)>2||Or(Oe)>3?"":" "}function Jc(t,e){for(;--e&&mt()&&!(Oe<48||Oe>102||Oe>57&&Oe<65||Oe>70&&Oe<97););return Rr(t,ca()+(e<6&&Ft()==32&&mt()==32))}function ui(t){for(;mt();)switch(Oe){case t:return it;case 34:case 39:t!==34&&t!==39&&ui(Oe);break;case 40:t===41&&ui(t);break;case 92:mt();break}return it}function Qc(t,e){for(;mt()&&t+Oe!==57;)if(t+Oe===84&&Ft()===47)break;return"/*"+Rr(e,it-1)+"*"+ya(t===47?t:mt())}function eu(t){for(;!Or(Ft());)mt();return Rr(t,it)}function tu(t){return mo(da("",null,null,null,[""],t=fo(t),0,[0],t))}function da(t,e,r,a,n,s,l,u,o){for(var c=0,p=0,b=l,S=0,T=0,w=0,x=1,h=1,g=1,N=0,M="",m=n,O=s,A=a,I=M;h;)switch(w=N,N=mt()){case 40:if(w!=108&&je(I,b-1)==58){ci(I+=J(ua(N),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:I+=ua(N);break;case 9:case 10:case 13:case 32:I+=Zc(w);break;case 92:I+=Jc(ca()-1,7);continue;case 47:switch(Ft()){case 42:case 47:ta(nu(Qc(mt(),ca()),e,r),o);break;default:I+="/"}break;case 123*x:u[c++]=Pt(I)*g;case 125*x:case 59:case 0:switch(N){case 0:case 125:h=0;case 59+p:g==-1&&(I=J(I,/\f/g,"")),T>0&&Pt(I)-b&&ta(T>32?Ts(I+";",a,r,b-1):Ts(J(I," ","")+";",a,r,b-2),o);break;case 59:I+=";";default:if(ta(A=ws(I,e,r,c,p,n,u,M,m=[],O=[],b),s),N===123)if(p===0)da(I,e,A,A,m,s,b,u,O);else switch(S===99&&je(I,3)===110?100:S){case 100:case 108:case 109:case 115:da(t,A,A,a&&ta(ws(t,A,A,0,0,n,u,M,n,m=[],b),O),n,O,b,u,a?m:O);break;default:da(I,A,A,A,[""],O,0,u,O)}}c=p=T=0,x=g=1,M=I="",b=l;break;case 58:b=1+Pt(I),T=w;default:if(x<1){if(N==123)--x;else if(N==125&&x++==0&&Xc()==125)continue}switch(I+=ya(N),N*x){case 38:g=p>0?1:(I+="\f",-1);break;case 44:u[c++]=(Pt(I)-1)*g,g=1;break;case 64:Ft()===45&&(I+=ua(mt())),S=Ft(),p=b=Pt(M=I+=eu(ca())),N++;break;case 45:w===45&&Pt(I)==2&&(x=0)}}return s}function ws(t,e,r,a,n,s,l,u,o,c,p){for(var b=n-1,S=n===0?s:[""],T=xi(S),w=0,x=0,h=0;w<a;++w)for(var g=0,N=_r(t,b+1,b=Bc(x=l[w])),M=t;g<T;++g)(M=co(x>0?S[g]+" "+N:J(N,/&\f/g,S[g])))&&(o[h++]=M);return Sa(t,e,r,n===0?vi:u,o,c,p)}function nu(t,e,r){return Sa(t,e,r,oo,ya(Kc()),_r(t,2,-2),0)}function Ts(t,e,r,a){return Sa(t,e,r,yi,_r(t,0,a),_r(t,a+1,-1),a)}function Yn(t,e){for(var r="",a=xi(t),n=0;n<a;n++)r+=e(t[n],n,t,e)||"";return r}function ru(t,e,r,a){switch(t.type){case zc:if(t.children.length)break;case Hc:case yi:return t.return=t.return||t.value;case oo:return"";case lo:return t.return=t.value+"{"+Yn(t.children,a)+"}";case vi:t.value=t.props.join(",")}return Pt(r=Yn(t.children,a))?t.return=t.value+"{"+r+"}":""}function au(t){var e=xi(t);return function(r,a,n,s){for(var l="",u=0;u<e;u++)l+=t[u](r,a,n,s)||"";return l}}function iu(t){return function(e){e.root||(e=e.return)&&t(e)}}function su(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var ou=function(e,r,a){for(var n=0,s=0;n=s,s=Ft(),n===38&&s===12&&(r[a]=1),!Or(s);)mt();return Rr(e,it)},lu=function(e,r){var a=-1,n=44;do switch(Or(n)){case 0:n===38&&Ft()===12&&(r[a]=1),e[a]+=ou(it-1,r,a);break;case 2:e[a]+=ua(n);break;case 4:if(n===44){e[++a]=Ft()===58?"&\f":"",r[a]=e[a].length;break}default:e[a]+=ya(n)}while(n=mt());return e},cu=function(e,r){return mo(lu(fo(e),r))},Es=new WeakMap,uu=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,a=e.parent,n=e.column===a.column&&e.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!Es.get(a))&&!n){Es.set(e,!0);for(var s=[],l=cu(r,s),u=a.props,o=0,c=0;o<l.length;o++)for(var p=0;p<u.length;p++,c++)e.props[c]=s[o]?l[o].replace(/&\f/g,u[p]):u[p]+" "+l[o]}}},du=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function po(t,e){switch(qc(t,e)){case 5103:return Z+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Z+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+t+ha+t+Be+t+t;case 6828:case 4268:return Z+t+Be+t+t;case 6165:return Z+t+Be+"flex-"+t+t;case 5187:return Z+t+J(t,/(\w+).+(:[^]+)/,Z+"box-$1$2"+Be+"flex-$1$2")+t;case 5443:return Z+t+Be+"flex-item-"+J(t,/flex-|-self/,"")+t;case 4675:return Z+t+Be+"flex-line-pack"+J(t,/align-content|flex-|-self/,"")+t;case 5548:return Z+t+Be+J(t,"shrink","negative")+t;case 5292:return Z+t+Be+J(t,"basis","preferred-size")+t;case 6060:return Z+"box-"+J(t,"-grow","")+Z+t+Be+J(t,"grow","positive")+t;case 4554:return Z+J(t,/([^-])(transform)/g,"$1"+Z+"$2")+t;case 6187:return J(J(J(t,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),t,"")+t;case 5495:case 3959:return J(t,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return J(J(t,/(.+:)(flex-)?(.*)/,Z+"box-pack:$3"+Be+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Z+t+t;case 4095:case 3583:case 4068:case 2532:return J(t,/(.+)-inline(.+)/,Z+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pt(t)-1-e>6)switch(je(t,e+1)){case 109:if(je(t,e+4)!==45)break;case 102:return J(t,/(.+:)(.+)-([^]+)/,"$1"+Z+"$2-$3$1"+ha+(je(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~ci(t,"stretch")?po(J(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(je(t,e+1)!==115)break;case 6444:switch(je(t,Pt(t)-3-(~ci(t,"!important")&&10))){case 107:return J(t,":",":"+Z)+t;case 101:return J(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Z+(je(t,14)===45?"inline-":"")+"box$3$1"+Z+"$2$3$1"+Be+"$2box$3")+t}break;case 5936:switch(je(t,e+11)){case 114:return Z+t+Be+J(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Z+t+Be+J(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Z+t+Be+J(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Z+t+Be+t+t}return t}var fu=function(e,r,a,n){if(e.length>-1&&!e.return)switch(e.type){case yi:e.return=po(e.value,e.length);break;case lo:return Yn([Sr(e,{value:J(e.value,"@","@"+Z)})],n);case vi:if(e.length)return Yc(e.props,function(s){switch(Gc(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Yn([Sr(e,{props:[J(s,/:(read-\w+)/,":"+ha+"$1")]})],n);case"::placeholder":return Yn([Sr(e,{props:[J(s,/:(plac\w+)/,":"+Z+"input-$1")]}),Sr(e,{props:[J(s,/:(plac\w+)/,":"+ha+"$1")]}),Sr(e,{props:[J(s,/:(plac\w+)/,Be+"input-$1")]})],n)}return""})}},mu=[fu],pu=function(e){var r=e.key;if(r==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(x){var h=x.getAttribute("data-emotion");h.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var n=e.stylisPlugins||mu,s={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(x){for(var h=x.getAttribute("data-emotion").split(" "),g=1;g<h.length;g++)s[h[g]]=!0;u.push(x)});var o,c=[uu,du];{var p,b=[ru,iu(function(x){p.insert(x)})],S=au(c.concat(n,b)),T=function(h){return Yn(tu(h),S)};o=function(h,g,N,M){p=N,T(h?h+"{"+g.styles+"}":g.styles),M&&(w.inserted[g.name]=!0)}}var w={key:r,sheet:new $c({key:r,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return w.sheet.hydrate(u),w},qa={exports:{}},ne={};var Cs;function hu(){if(Cs)return ne;Cs=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.server_context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),w;w=Symbol.for("react.module.reference");function x(h){if(typeof h=="object"&&h!==null){var g=h.$$typeof;switch(g){case t:switch(h=h.type,h){case r:case n:case a:case c:case p:return h;default:switch(h=h&&h.$$typeof,h){case u:case l:case o:case S:case b:case s:return h;default:return g}}case e:return g}}}return ne.ContextConsumer=l,ne.ContextProvider=s,ne.Element=t,ne.ForwardRef=o,ne.Fragment=r,ne.Lazy=S,ne.Memo=b,ne.Portal=e,ne.Profiler=n,ne.StrictMode=a,ne.Suspense=c,ne.SuspenseList=p,ne.isAsyncMode=function(){return!1},ne.isConcurrentMode=function(){return!1},ne.isContextConsumer=function(h){return x(h)===l},ne.isContextProvider=function(h){return x(h)===s},ne.isElement=function(h){return typeof h=="object"&&h!==null&&h.$$typeof===t},ne.isForwardRef=function(h){return x(h)===o},ne.isFragment=function(h){return x(h)===r},ne.isLazy=function(h){return x(h)===S},ne.isMemo=function(h){return x(h)===b},ne.isPortal=function(h){return x(h)===e},ne.isProfiler=function(h){return x(h)===n},ne.isStrictMode=function(h){return x(h)===a},ne.isSuspense=function(h){return x(h)===c},ne.isSuspenseList=function(h){return x(h)===p},ne.isValidElementType=function(h){return typeof h=="string"||typeof h=="function"||h===r||h===n||h===a||h===c||h===p||h===T||typeof h=="object"&&h!==null&&(h.$$typeof===S||h.$$typeof===b||h.$$typeof===s||h.$$typeof===l||h.$$typeof===o||h.$$typeof===w||h.getModuleId!==void 0)},ne.typeOf=x,ne}var _s;function gu(){return _s||(_s=1,qa.exports=hu()),qa.exports}var Ga,Os;function bu(){if(Os)return Ga;Os=1;var t=gu(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=a,s[t.Memo]=n;function l(w){return t.isMemo(w)?n:s[w.$$typeof]||e}var u=Object.defineProperty,o=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,S=Object.prototype;function T(w,x,h){if(typeof x!="string"){if(S){var g=b(x);g&&g!==S&&T(w,g,h)}var N=o(x);c&&(N=N.concat(c(x)));for(var M=l(w),m=l(x),O=0;O<N.length;++O){var A=N[O];if(!r[A]&&!(h&&h[A])&&!(m&&m[A])&&!(M&&M[A])){var I=p(x,A);try{u(w,A,I)}catch(P){}}}}return w}return Ga=T,Ga}bu();var vu=!0;function yu(t,e,r){var a="";return r.split(" ").forEach(function(n){t[n]!==void 0?e.push(t[n]+";"):n&&(a+=n+" ")}),a}var ho=function(e,r,a){var n=e.key+"-"+r.name;(a===!1||vu===!1)&&e.registered[n]===void 0&&(e.registered[n]=r.styles)},xu=function(e,r,a){ho(e,r,a);var n=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var s=r;do e.insert(r===s?"."+n:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Su(t){for(var e=0,r,a=0,n=t.length;n>=4;++a,n-=4)r=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(n){case 3:e^=(t.charCodeAt(a+2)&255)<<16;case 2:e^=(t.charCodeAt(a+1)&255)<<8;case 1:e^=t.charCodeAt(a)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var wu={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tu=/[A-Z]|^ms/g,Eu=/_EMO_([^_]+?)_([^]*?)_EMO_/g,go=function(e){return e.charCodeAt(1)===45},Is=function(e){return e!=null&&typeof e!="boolean"},Ya=su(function(t){return go(t)?t:t.replace(Tu,"-$&").toLowerCase()}),Ns=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(Eu,function(a,n,s){return Lt={name:n,styles:s,next:Lt},n})}return wu[e]!==1&&!go(e)&&typeof r=="number"&&r!==0?r+"px":r};function Ir(t,e,r){if(r==null)return"";var a=r;if(a.__emotion_styles!==void 0)return a;switch(typeof r){case"boolean":return"";case"object":{var n=r;if(n.anim===1)return Lt={name:n.name,styles:n.styles,next:Lt},n.name;var s=r;if(s.styles!==void 0){var l=s.next;if(l!==void 0)for(;l!==void 0;)Lt={name:l.name,styles:l.styles,next:Lt},l=l.next;var u=s.styles+";";return u}return Cu(t,e,r)}case"function":{if(t!==void 0){var o=Lt,c=r(t);return Lt=o,Ir(t,e,c)}break}}var p=r;return p}function Cu(t,e,r){var a="";if(Array.isArray(r))for(var n=0;n<r.length;n++)a+=Ir(t,e,r[n])+";";else for(var s in r){var l=r[s];if(typeof l!="object"){var u=l;Is(u)&&(a+=Ya(s)+":"+Ns(s,u)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&e==null)for(var o=0;o<l.length;o++)Is(l[o])&&(a+=Ya(s)+":"+Ns(s,l[o])+";");else{var c=Ir(t,e,l);switch(s){case"animation":case"animationName":{a+=Ya(s)+":"+c+";";break}default:a+=s+"{"+c+"}"}}}return a}var As=/label:\s*([^\s;{]+)\s*(;|$)/g,Lt;function bo(t,e,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,n="";Lt=void 0;var s=t[0];if(s==null||s.raw===void 0)a=!1,n+=Ir(r,e,s);else{var l=s;n+=l[0]}for(var u=1;u<t.length;u++)if(n+=Ir(r,e,t[u]),a){var o=s;n+=o[u]}As.lastIndex=0;for(var c="",p;(p=As.exec(n))!==null;)c+="-"+p[1];var b=Su(n)+c;return{name:b,styles:n,next:Lt}}var _u=function(e){return e()},Ou=es.useInsertionEffect?es.useInsertionEffect:!1,Iu=Ou||_u,vo=E.createContext(typeof HTMLElement<"u"?pu({key:"css"}):null);vo.Provider;var Nu=function(e){return E.forwardRef(function(r,a){var n=E.useContext(vo);return e(r,n,a)})},Au=E.createContext({}),Si={}.hasOwnProperty,di="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ru=function(e,r){var a={};for(var n in r)Si.call(r,n)&&(a[n]=r[n]);return a[di]=e,a},Du=function(e){var r=e.cache,a=e.serialized,n=e.isStringTag;return ho(r,a,n),Iu(function(){return xu(r,a,n)}),null},Mu=Nu(function(t,e,r){var a=t.css;typeof a=="string"&&e.registered[a]!==void 0&&(a=e.registered[a]);var n=t[di],s=[a],l="";typeof t.className=="string"?l=yu(e.registered,s,t.className):t.className!=null&&(l=t.className+" ");var u=bo(s,void 0,E.useContext(Au));l+=e.key+"-"+u.name;var o={};for(var c in t)Si.call(t,c)&&c!=="css"&&c!==di&&(o[c]=t[c]);return o.className=l,r&&(o.ref=r),E.createElement(E.Fragment,null,E.createElement(Du,{cache:e,serialized:u,isStringTag:typeof n=="string"}),E.createElement(n,o))}),ku=Mu,j=function(e,r){var a=arguments;if(r==null||!Si.call(r,"css"))return E.createElement.apply(void 0,a);var n=a.length,s=new Array(n);s[0]=ku,s[1]=Ru(e,r);for(var l=2;l<n;l++)s[l]=a[l];return E.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(j||(j={}));function wi(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return bo(e)}function Pu(){var t=wi.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Lu(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var fi=E.useLayoutEffect,Fu=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],ga=function(){};function ju(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function Vu(t,e){for(var r=arguments.length,a=new Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];var s=[].concat(a);if(e&&t)for(var l in e)e.hasOwnProperty(l)&&e[l]&&s.push("".concat(ju(t,l)));return s.filter(function(u){return u}).map(function(u){return String(u).trim()}).join(" ")}var Rs=function(e){return Yu(e)?e.filter(Boolean):Cn(e)==="object"&&e!==null?[e]:[]},yo=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var r=qt(e,Fu);return V({},r)},Se=function(e,r,a){var n=e.cx,s=e.getStyles,l=e.getClassNames,u=e.className;return{css:s(r,e),className:n(a!=null?a:{},l(r,e),u)}};function wa(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Uu(t){return wa(t)?window.innerHeight:t.clientHeight}function xo(t){return wa(t)?window.pageYOffset:t.scrollTop}function ba(t,e){if(wa(t)){window.scrollTo(0,e);return}t.scrollTop=e}function $u(t){var e=getComputedStyle(t),r=e.position==="absolute",a=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var n=t;n=n.parentElement;)if(e=getComputedStyle(n),!(r&&e.position==="static")&&a.test(e.overflow+e.overflowY+e.overflowX))return n;return document.documentElement}function Hu(t,e,r,a){return r*((t=t/a-1)*t*t+1)+e}function na(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ga,n=xo(t),s=e-n,l=10,u=0;function o(){u+=l;var c=Hu(u,n,s,r);ba(t,c),u<r?window.requestAnimationFrame(o):a(t)}o()}function Ds(t,e){var r=t.getBoundingClientRect(),a=e.getBoundingClientRect(),n=e.offsetHeight/3;a.bottom+n>r.bottom?ba(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+n,t.scrollHeight)):a.top-n<r.top&&ba(t,Math.max(e.offsetTop-n,0))}function zu(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function Ms(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}function Bu(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}}var So=!1,Wu={get passive(){return So=!0}},ra=typeof window<"u"?window:{};ra.addEventListener&&ra.removeEventListener&&(ra.addEventListener("p",ga,Wu),ra.removeEventListener("p",ga,!1));var qu=So;function Gu(t){return t!=null}function Yu(t){return Array.isArray(t)}function aa(t,e,r){return t?e:r}var Ku=function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];var s=Object.entries(e).filter(function(l){var u=Wt(l,1),o=u[0];return!a.includes(o)});return s.reduce(function(l,u){var o=Wt(u,2),c=o[0],p=o[1];return l[c]=p,l},{})},Xu=["children","innerProps"],Zu=["children","innerProps"];function Ju(t){var e=t.maxHeight,r=t.menuEl,a=t.minHeight,n=t.placement,s=t.shouldScroll,l=t.isFixedPosition,u=t.controlHeight,o=$u(r),c={placement:"bottom",maxHeight:e};if(!r||!r.offsetParent)return c;var p=o.getBoundingClientRect(),b=p.height,S=r.getBoundingClientRect(),T=S.bottom,w=S.height,x=S.top,h=r.offsetParent.getBoundingClientRect(),g=h.top,N=l?window.innerHeight:Uu(o),M=xo(o),m=parseInt(getComputedStyle(r).marginBottom,10),O=parseInt(getComputedStyle(r).marginTop,10),A=g-O,I=N-x,P=A+M,$=b-M-x,W=T-N+M+m,z=M+x-O,G=160;switch(n){case"auto":case"bottom":if(I>=w)return{placement:"bottom",maxHeight:e};if($>=w&&!l)return s&&na(o,W,G),{placement:"bottom",maxHeight:e};if(!l&&$>=a||l&&I>=a){s&&na(o,W,G);var ie=l?I-m:$-m;return{placement:"bottom",maxHeight:ie}}if(n==="auto"||l){var he=e,ue=l?A:P;return ue>=a&&(he=Math.min(ue-m-u,e)),{placement:"top",maxHeight:he}}if(n==="bottom")return s&&ba(o,W),{placement:"bottom",maxHeight:e};break;case"top":if(A>=w)return{placement:"top",maxHeight:e};if(P>=w&&!l)return s&&na(o,z,G),{placement:"top",maxHeight:e};if(!l&&P>=a||l&&A>=a){var me=e;return(!l&&P>=a||l&&A>=a)&&(me=l?A-O:P-O),s&&na(o,z,G),{placement:"top",maxHeight:me}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(n,'".'))}return c}function Qu(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var wo=function(e){return e==="auto"?"bottom":e},ed=function(e,r){var a,n=e.placement,s=e.theme,l=s.borderRadius,u=s.spacing,o=s.colors;return V((a={label:"menu"},Cr(a,Qu(n),"100%"),Cr(a,"position","absolute"),Cr(a,"width","100%"),Cr(a,"zIndex",1),a),r?{}:{backgroundColor:o.neutral0,borderRadius:l,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:u.menuGutter,marginTop:u.menuGutter})},To=E.createContext(null),td=function(e){var r=e.children,a=e.minMenuHeight,n=e.maxMenuHeight,s=e.menuPlacement,l=e.menuPosition,u=e.menuShouldScrollIntoView,o=e.theme,c=E.useContext(To)||{},p=c.setPortalPlacement,b=E.useRef(null),S=E.useState(n),T=Wt(S,2),w=T[0],x=T[1],h=E.useState(null),g=Wt(h,2),N=g[0],M=g[1],m=o.spacing.controlHeight;return fi(function(){var O=b.current;if(O){var A=l==="fixed",I=u&&!A,P=Ju({maxHeight:n,menuEl:O,minHeight:a,placement:s,shouldScroll:I,isFixedPosition:A,controlHeight:m});x(P.maxHeight),M(P.placement),p==null||p(P.placement)}},[n,s,l,u,a,p,m]),r({ref:b,placerProps:V(V({},e),{},{placement:N||wo(s),maxHeight:w})})},nd=function(e){var r=e.children,a=e.innerRef,n=e.innerProps;return j("div",U({},Se(e,"menu",{menu:!0}),{ref:a},n),r)},rd=nd,ad=function(e,r){var a=e.maxHeight,n=e.theme.spacing.baseUnit;return V({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:n,paddingTop:n})},id=function(e){var r=e.children,a=e.innerProps,n=e.innerRef,s=e.isMulti;return j("div",U({},Se(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:n},a),r)},Eo=function(e,r){var a=e.theme,n=a.spacing.baseUnit,s=a.colors;return V({textAlign:"center"},r?{}:{color:s.neutral40,padding:"".concat(n*2,"px ").concat(n*3,"px")})},sd=Eo,od=Eo,ld=function(e){var r=e.children,a=r===void 0?"No options":r,n=e.innerProps,s=qt(e,Xu);return j("div",U({},Se(V(V({},s),{},{children:a,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),a)},cd=function(e){var r=e.children,a=r===void 0?"Loading...":r,n=e.innerProps,s=qt(e,Zu);return j("div",U({},Se(V(V({},s),{},{children:a,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),a)},ud=function(e){var r=e.rect,a=e.offset,n=e.position;return{left:r.left,position:n,top:a,width:r.width,zIndex:1}},dd=function(e){var r=e.appendTo,a=e.children,n=e.controlElement,s=e.innerProps,l=e.menuPlacement,u=e.menuPosition,o=E.useRef(null),c=E.useRef(null),p=E.useState(wo(l)),b=Wt(p,2),S=b[0],T=b[1],w=E.useMemo(function(){return{setPortalPlacement:T}},[]),x=E.useState(null),h=Wt(x,2),g=h[0],N=h[1],M=E.useCallback(function(){if(n){var I=zu(n),P=u==="fixed"?0:window.pageYOffset,$=I[S]+P;($!==(g==null?void 0:g.offset)||I.left!==(g==null?void 0:g.rect.left)||I.width!==(g==null?void 0:g.rect.width))&&N({offset:$,rect:I})}},[n,u,S,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);fi(function(){M()},[M]);var m=E.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&o.current&&(c.current=Ul(n,o.current,M,{elementResize:"ResizeObserver"in window}))},[n,M]);fi(function(){m()},[m]);var O=E.useCallback(function(I){o.current=I,m()},[m]);if(!r&&u!=="fixed"||!g)return null;var A=j("div",U({ref:O},Se(V(V({},e),{},{offset:g.offset,position:u,rect:g.rect}),"menuPortal",{"menu-portal":!0}),s),a);return j(To.Provider,{value:w},r?Zs.createPortal(A,r):A)},fd=function(e){var r=e.isDisabled,a=e.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},md=function(e){var r=e.children,a=e.innerProps,n=e.isDisabled,s=e.isRtl;return j("div",U({},Se(e,"container",{"--is-disabled":n,"--is-rtl":s}),a),r)},pd=function(e,r){var a=e.theme.spacing,n=e.isMulti,s=e.hasValue,l=e.selectProps.controlShouldRenderValue;return V({alignItems:"center",display:n&&s&&l?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},hd=function(e){var r=e.children,a=e.innerProps,n=e.isMulti,s=e.hasValue;return j("div",U({},Se(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":s}),a),r)},gd=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},bd=function(e){var r=e.children,a=e.innerProps;return j("div",U({},Se(e,"indicatorsContainer",{indicators:!0}),a),r)},ks,vd=["size"],yd=["innerProps","isRtl","size"],xd={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Co=function(e){var r=e.size,a=qt(e,vd);return j("svg",U({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:xd},a))},Ti=function(e){return j(Co,U({size:20},e),j("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},_o=function(e){return j(Co,U({size:20},e),j("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Oo=function(e,r){var a=e.isFocused,n=e.theme,s=n.spacing.baseUnit,l=n.colors;return V({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:a?l.neutral60:l.neutral20,padding:s*2,":hover":{color:a?l.neutral80:l.neutral40}})},Sd=Oo,wd=function(e){var r=e.children,a=e.innerProps;return j("div",U({},Se(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),r||j(_o,null))},Td=Oo,Ed=function(e){var r=e.children,a=e.innerProps;return j("div",U({},Se(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),r||j(Ti,null))},Cd=function(e,r){var a=e.isDisabled,n=e.theme,s=n.spacing.baseUnit,l=n.colors;return V({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:a?l.neutral10:l.neutral20,marginBottom:s*2,marginTop:s*2})},_d=function(e){var r=e.innerProps;return j("span",U({},r,Se(e,"indicatorSeparator",{"indicator-separator":!0})))},Od=Pu(ks||(ks=Lu(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),Id=function(e,r){var a=e.isFocused,n=e.size,s=e.theme,l=s.colors,u=s.spacing.baseUnit;return V({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},r?{}:{color:a?l.neutral60:l.neutral20,padding:u*2})},Ka=function(e){var r=e.delay,a=e.offset;return j("span",{css:wi({animation:"".concat(Od," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Nd=function(e){var r=e.innerProps,a=e.isRtl,n=e.size,s=n===void 0?4:n,l=qt(e,yd);return j("div",U({},Se(V(V({},l),{},{innerProps:r,isRtl:a,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),j(Ka,{delay:0,offset:a}),j(Ka,{delay:160,offset:!0}),j(Ka,{delay:320,offset:!a}))},Ad=function(e,r){var a=e.isDisabled,n=e.isFocused,s=e.theme,l=s.colors,u=s.borderRadius,o=s.spacing;return V({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:o.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:a?l.neutral5:l.neutral0,borderColor:a?l.neutral10:n?l.primary:l.neutral20,borderRadius:u,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(l.primary):void 0,"&:hover":{borderColor:n?l.primary:l.neutral30}})},Rd=function(e){var r=e.children,a=e.isDisabled,n=e.isFocused,s=e.innerRef,l=e.innerProps,u=e.menuIsOpen;return j("div",U({ref:s},Se(e,"control",{control:!0,"control--is-disabled":a,"control--is-focused":n,"control--menu-is-open":u}),l,{"aria-disabled":a||void 0}),r)},Dd=Rd,Md=["data"],kd=function(e,r){var a=e.theme.spacing;return r?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},Pd=function(e){var r=e.children,a=e.cx,n=e.getStyles,s=e.getClassNames,l=e.Heading,u=e.headingProps,o=e.innerProps,c=e.label,p=e.theme,b=e.selectProps;return j("div",U({},Se(e,"group",{group:!0}),o),j(l,U({},u,{selectProps:b,theme:p,getStyles:n,getClassNames:s,cx:a}),c),j("div",null,r))},Ld=function(e,r){var a=e.theme,n=a.colors,s=a.spacing;return V({label:"group",cursor:"default",display:"block"},r?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},Fd=function(e){var r=yo(e);r.data;var a=qt(r,Md);return j("div",U({},Se(e,"groupHeading",{"group-heading":!0}),a))},jd=Pd,Vd=["innerRef","isDisabled","isHidden","inputClassName"],Ud=function(e,r){var a=e.isDisabled,n=e.value,s=e.theme,l=s.spacing,u=s.colors;return V(V({visibility:a?"hidden":"visible",transform:n?"translateZ(0)":""},$d),r?{}:{margin:l.baseUnit/2,paddingBottom:l.baseUnit/2,paddingTop:l.baseUnit/2,color:u.neutral80})},Io={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},$d={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":V({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Io)},Hd=function(e){return V({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Io)},zd=function(e){var r=e.cx,a=e.value,n=yo(e),s=n.innerRef,l=n.isDisabled,u=n.isHidden,o=n.inputClassName,c=qt(n,Vd);return j("div",U({},Se(e,"input",{"input-container":!0}),{"data-value":a||""}),j("input",U({className:r({input:!0},o),ref:s,style:Hd(u),disabled:l},c)))},Bd=zd,Wd=function(e,r){var a=e.theme,n=a.spacing,s=a.borderRadius,l=a.colors;return V({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:l.neutral10,borderRadius:s/2,margin:n.baseUnit/2})},qd=function(e,r){var a=e.theme,n=a.borderRadius,s=a.colors,l=e.cropWithEllipsis;return V({overflow:"hidden",textOverflow:l||l===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:n/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Gd=function(e,r){var a=e.theme,n=a.spacing,s=a.borderRadius,l=a.colors,u=e.isFocused;return V({alignItems:"center",display:"flex"},r?{}:{borderRadius:s/2,backgroundColor:u?l.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:l.dangerLight,color:l.danger}})},No=function(e){var r=e.children,a=e.innerProps;return j("div",a,r)},Yd=No,Kd=No;function Xd(t){var e=t.children,r=t.innerProps;return j("div",U({role:"button"},r),e||j(Ti,{size:14}))}var Zd=function(e){var r=e.children,a=e.components,n=e.data,s=e.innerProps,l=e.isDisabled,u=e.removeProps,o=e.selectProps,c=a.Container,p=a.Label,b=a.Remove;return j(c,{data:n,innerProps:V(V({},Se(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":l})),s),selectProps:o},j(p,{data:n,innerProps:V({},Se(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},r),j(b,{data:n,innerProps:V(V({},Se(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},u),selectProps:o}))},Jd=Zd,Qd=function(e,r){var a=e.isDisabled,n=e.isFocused,s=e.isSelected,l=e.theme,u=l.spacing,o=l.colors;return V({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:s?o.primary:n?o.primary25:"transparent",color:a?o.neutral20:s?o.neutral0:"inherit",padding:"".concat(u.baseUnit*2,"px ").concat(u.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:s?o.primary:o.primary50}})},ef=function(e){var r=e.children,a=e.isDisabled,n=e.isFocused,s=e.isSelected,l=e.innerRef,u=e.innerProps;return j("div",U({},Se(e,"option",{option:!0,"option--is-disabled":a,"option--is-focused":n,"option--is-selected":s}),{ref:l,"aria-disabled":a},u),r)},tf=ef,nf=function(e,r){var a=e.theme,n=a.spacing,s=a.colors;return V({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:s.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},rf=function(e){var r=e.children,a=e.innerProps;return j("div",U({},Se(e,"placeholder",{placeholder:!0}),a),r)},af=rf,sf=function(e,r){var a=e.isDisabled,n=e.theme,s=n.spacing,l=n.colors;return V({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:a?l.neutral40:l.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},of=function(e){var r=e.children,a=e.isDisabled,n=e.innerProps;return j("div",U({},Se(e,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),n),r)},lf=of,cf={ClearIndicator:Ed,Control:Dd,DropdownIndicator:wd,DownChevron:_o,CrossIcon:Ti,Group:jd,GroupHeading:Fd,IndicatorsContainer:bd,IndicatorSeparator:_d,Input:Bd,LoadingIndicator:Nd,Menu:rd,MenuList:id,MenuPortal:dd,LoadingMessage:cd,NoOptionsMessage:ld,MultiValue:Jd,MultiValueContainer:Yd,MultiValueLabel:Kd,MultiValueRemove:Xd,Option:tf,Placeholder:af,SelectContainer:md,SingleValue:lf,ValueContainer:hd},uf=function(e){return V(V({},cf),e.components)},Ps=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function df(t,e){return!!(t===e||Ps(t)&&Ps(e))}function ff(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!df(t[r],e[r]))return!1;return!0}function mf(t,e){e===void 0&&(e=ff);var r=null;function a(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(r&&r.lastThis===this&&e(n,r.lastArgs))return r.lastResult;var l=t.apply(this,n);return r={lastResult:l,lastArgs:n,lastThis:this},l}return a.clear=function(){r=null},a}var pf={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},hf=function(e){return j("span",U({css:pf},e))},Ls=hf,gf={guidance:function(e){var r=e.isSearchable,a=e.isMulti,n=e.tabSelectsValue,s=e.context,l=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return l?"".concat(e["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var r=e.action,a=e.label,n=a===void 0?"":a,s=e.labels,l=e.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return l?"option ".concat(n," is disabled. Select another option."):"option ".concat(n,", selected.");default:return""}},onFocus:function(e){var r=e.context,a=e.focused,n=e.options,s=e.label,l=s===void 0?"":s,u=e.selectValue,o=e.isDisabled,c=e.isSelected,p=e.isAppleDevice,b=function(x,h){return x&&x.length?"".concat(x.indexOf(h)+1," of ").concat(x.length):""};if(r==="value"&&u)return"value ".concat(l," focused, ").concat(b(u,a),".");if(r==="menu"&&p){var S=o?" disabled":"",T="".concat(c?" selected":"").concat(S);return"".concat(l).concat(T,", ").concat(b(n,a),".")}return""},onFilter:function(e){var r=e.inputValue,a=e.resultsMessage;return"".concat(a).concat(r?" for search term "+r:"",".")}},bf=function(e){var r=e.ariaSelection,a=e.focusedOption,n=e.focusedValue,s=e.focusableOptions,l=e.isFocused,u=e.selectValue,o=e.selectProps,c=e.id,p=e.isAppleDevice,b=o.ariaLiveMessages,S=o.getOptionLabel,T=o.inputValue,w=o.isMulti,x=o.isOptionDisabled,h=o.isSearchable,g=o.menuIsOpen,N=o.options,M=o.screenReaderStatus,m=o.tabSelectsValue,O=o.isLoading,A=o["aria-label"],I=o["aria-live"],P=E.useMemo(function(){return V(V({},gf),b||{})},[b]),$=E.useMemo(function(){var ue="";if(r&&P.onChange){var me=r.option,Ve=r.options,Me=r.removedValue,st=r.removedValues,Je=r.value,de=function(Ue){return Array.isArray(Ue)?null:Ue},oe=Me||me||de(Je),B=oe?S(oe):"",Qe=Ve||st||void 0,q=Qe?Qe.map(S):[],ve=V({isDisabled:oe&&x(oe,u),label:B,labels:q},r);ue=P.onChange(ve)}return ue},[r,P,x,u,S]),W=E.useMemo(function(){var ue="",me=a||n,Ve=!!(a&&u&&u.includes(a));if(me&&P.onFocus){var Me={focused:me,label:S(me),isDisabled:x(me,u),isSelected:Ve,options:s,context:me===a?"menu":"value",selectValue:u,isAppleDevice:p};ue=P.onFocus(Me)}return ue},[a,n,S,x,P,s,u,p]),z=E.useMemo(function(){var ue="";if(g&&N.length&&!O&&P.onFilter){var me=M({count:s.length});ue=P.onFilter({inputValue:T,resultsMessage:me})}return ue},[s,T,g,P,N,M,O]),G=(r==null?void 0:r.action)==="initial-input-focus",ie=E.useMemo(function(){var ue="";if(P.guidance){var me=n?"value":g?"menu":"input";ue=P.guidance({"aria-label":A,context:me,isDisabled:a&&x(a,u),isMulti:w,isSearchable:h,tabSelectsValue:m,isInitialFocus:G})}return ue},[A,a,n,w,x,h,g,P,u,m,G]),he=j(E.Fragment,null,j("span",{id:"aria-selection"},$),j("span",{id:"aria-focused"},W),j("span",{id:"aria-results"},z),j("span",{id:"aria-guidance"},ie));return j(E.Fragment,null,j(Ls,{id:c},G&&he),j(Ls,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},l&&!G&&he))},vf=bf,mi=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],yf=new RegExp("["+mi.map(function(t){return t.letters}).join("")+"]","g"),Ao={};for(var Xa=0;Xa<mi.length;Xa++)for(var Za=mi[Xa],Ja=0;Ja<Za.letters.length;Ja++)Ao[Za.letters[Ja]]=Za.base;var Ro=function(e){return e.replace(yf,function(r){return Ao[r]})},xf=mf(Ro),Fs=function(e){return e.replace(/^\s+|\s+$/g,"")},Sf=function(e){return"".concat(e.label," ").concat(e.value)},wf=function(e){return function(r,a){if(r.data.__isNew__)return!0;var n=V({ignoreCase:!0,ignoreAccents:!0,stringify:Sf,trim:!0,matchFrom:"any"},e),s=n.ignoreCase,l=n.ignoreAccents,u=n.stringify,o=n.trim,c=n.matchFrom,p=o?Fs(a):a,b=o?Fs(u(r)):u(r);return s&&(p=p.toLowerCase(),b=b.toLowerCase()),l&&(p=xf(p),b=Ro(b)),c==="start"?b.substr(0,p.length)===p:b.indexOf(p)>-1}},Tf=["innerRef"];function Ef(t){var e=t.innerRef,r=qt(t,Tf),a=Ku(r,"onExited","in","enter","exit","appear");return j("input",U({ref:e},a,{css:wi({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Cf=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function _f(t){var e=t.isEnabled,r=t.onBottomArrive,a=t.onBottomLeave,n=t.onTopArrive,s=t.onTopLeave,l=E.useRef(!1),u=E.useRef(!1),o=E.useRef(0),c=E.useRef(null),p=E.useCallback(function(h,g){if(c.current!==null){var N=c.current,M=N.scrollTop,m=N.scrollHeight,O=N.clientHeight,A=c.current,I=g>0,P=m-O-M,$=!1;P>g&&l.current&&(a&&a(h),l.current=!1),I&&u.current&&(s&&s(h),u.current=!1),I&&g>P?(r&&!l.current&&r(h),A.scrollTop=m,$=!0,l.current=!0):!I&&-g>M&&(n&&!u.current&&n(h),A.scrollTop=0,$=!0,u.current=!0),$&&Cf(h)}},[r,a,n,s]),b=E.useCallback(function(h){p(h,h.deltaY)},[p]),S=E.useCallback(function(h){o.current=h.changedTouches[0].clientY},[]),T=E.useCallback(function(h){var g=o.current-h.changedTouches[0].clientY;p(h,g)},[p]),w=E.useCallback(function(h){if(h){var g=qu?{passive:!1}:!1;h.addEventListener("wheel",b,g),h.addEventListener("touchstart",S,g),h.addEventListener("touchmove",T,g)}},[T,S,b]),x=E.useCallback(function(h){h&&(h.removeEventListener("wheel",b,!1),h.removeEventListener("touchstart",S,!1),h.removeEventListener("touchmove",T,!1))},[T,S,b]);return E.useEffect(function(){if(e){var h=c.current;return w(h),function(){x(h)}}},[e,w,x]),function(h){c.current=h}}var js=["boxSizing","height","overflow","paddingRight","position"],Vs={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Us(t){t.cancelable&&t.preventDefault()}function $s(t){t.stopPropagation()}function Hs(){var t=this.scrollTop,e=this.scrollHeight,r=t+this.offsetHeight;t===0?this.scrollTop=1:r===e&&(this.scrollTop=t-1)}function zs(){return"ontouchstart"in window||navigator.maxTouchPoints}var Bs=!!(typeof window<"u"&&window.document&&window.document.createElement),wr=0,Hn={capture:!1,passive:!1};function Of(t){var e=t.isEnabled,r=t.accountForScrollbars,a=r===void 0?!0:r,n=E.useRef({}),s=E.useRef(null),l=E.useCallback(function(o){if(Bs){var c=document.body,p=c&&c.style;if(a&&js.forEach(function(w){var x=p&&p[w];n.current[w]=x}),a&&wr<1){var b=parseInt(n.current.paddingRight,10)||0,S=document.body?document.body.clientWidth:0,T=window.innerWidth-S+b||0;Object.keys(Vs).forEach(function(w){var x=Vs[w];p&&(p[w]=x)}),p&&(p.paddingRight="".concat(T,"px"))}c&&zs()&&(c.addEventListener("touchmove",Us,Hn),o&&(o.addEventListener("touchstart",Hs,Hn),o.addEventListener("touchmove",$s,Hn))),wr+=1}},[a]),u=E.useCallback(function(o){if(Bs){var c=document.body,p=c&&c.style;wr=Math.max(wr-1,0),a&&wr<1&&js.forEach(function(b){var S=n.current[b];p&&(p[b]=S)}),c&&zs()&&(c.removeEventListener("touchmove",Us,Hn),o&&(o.removeEventListener("touchstart",Hs,Hn),o.removeEventListener("touchmove",$s,Hn)))}},[a]);return E.useEffect(function(){if(e){var o=s.current;return l(o),function(){u(o)}}},[e,l,u]),function(o){s.current=o}}var If=function(e){var r=e.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},Nf={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Af(t){var e=t.children,r=t.lockEnabled,a=t.captureEnabled,n=a===void 0?!0:a,s=t.onBottomArrive,l=t.onBottomLeave,u=t.onTopArrive,o=t.onTopLeave,c=_f({isEnabled:n,onBottomArrive:s,onBottomLeave:l,onTopArrive:u,onTopLeave:o}),p=Of({isEnabled:r}),b=function(T){c(T),p(T)};return j(E.Fragment,null,r&&j("div",{onClick:If,css:Nf}),e(b))}var Rf={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Df=function(e){var r=e.name,a=e.onFocus;return j("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:Rf,value:"",onChange:function(){}})},Mf=Df;function Ei(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function kf(){return Ei(/^iPhone/i)}function Do(){return Ei(/^Mac/i)}function Pf(){return Ei(/^iPad/i)||Do()&&navigator.maxTouchPoints>1}function Lf(){return kf()||Pf()}function Ff(){return Do()||Lf()}var jf=function(e){return e.label},Vf=function(e){return e.label},Uf=function(e){return e.value},$f=function(e){return!!e.isDisabled},Hf={clearIndicator:Td,container:fd,control:Ad,dropdownIndicator:Sd,group:kd,groupHeading:Ld,indicatorsContainer:gd,indicatorSeparator:Cd,input:Ud,loadingIndicator:Id,loadingMessage:od,menu:ed,menuList:ad,menuPortal:ud,multiValue:Wd,multiValueLabel:qd,multiValueRemove:Gd,noOptionsMessage:sd,option:Qd,placeholder:nf,singleValue:sf,valueContainer:pd},zf={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Bf=4,Mo=4,Wf=38,qf=Mo*2,Gf={baseUnit:Mo,controlHeight:Wf,menuGutter:qf},Qa={borderRadius:Bf,colors:zf,spacing:Gf},Yf={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Ms(),captureMenuScroll:!Ms(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:wf(),formatGroupLabel:jf,getOptionLabel:Vf,getOptionValue:Uf,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:$f,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Bu(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var r=e.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Ws(t,e,r,a){var n=Lo(t,e,r),s=Fo(t,e,r),l=Po(t,e),u=va(t,e);return{type:"option",data:e,isDisabled:n,isSelected:s,label:l,value:u,index:a}}function fa(t,e){return t.options.map(function(r,a){if("options"in r){var n=r.options.map(function(l,u){return Ws(t,l,e,u)}).filter(function(l){return Gs(t,l)});return n.length>0?{type:"group",data:r,options:n,index:a}:void 0}var s=Ws(t,r,e,a);return Gs(t,s)?s:void 0}).filter(Gu)}function ko(t){return t.reduce(function(e,r){return r.type==="group"?e.push.apply(e,bi(r.options.map(function(a){return a.data}))):e.push(r.data),e},[])}function qs(t,e){return t.reduce(function(r,a){return a.type==="group"?r.push.apply(r,bi(a.options.map(function(n){return{data:n.data,id:"".concat(e,"-").concat(a.index,"-").concat(n.index)}}))):r.push({data:a.data,id:"".concat(e,"-").concat(a.index)}),r},[])}function Kf(t,e){return ko(fa(t,e))}function Gs(t,e){var r=t.inputValue,a=r===void 0?"":r,n=e.data,s=e.isSelected,l=e.label,u=e.value;return(!Vo(t)||!s)&&jo(t,{label:l,value:u,data:n},a)}function Xf(t,e){var r=t.focusedValue,a=t.selectValue,n=a.indexOf(r);if(n>-1){var s=e.indexOf(r);if(s>-1)return r;if(n<e.length)return e[n]}return null}function Zf(t,e){var r=t.focusedOption;return r&&e.indexOf(r)>-1?r:e[0]}var ei=function(e,r){var a,n=(a=e.find(function(s){return s.data===r}))===null||a===void 0?void 0:a.id;return n||null},Po=function(e,r){return e.getOptionLabel(r)},va=function(e,r){return e.getOptionValue(r)};function Lo(t,e,r){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,r):!1}function Fo(t,e,r){if(r.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,r);var a=va(t,e);return r.some(function(n){return va(t,n)===a})}function jo(t,e,r){return t.filterOption?t.filterOption(e,r):!0}var Vo=function(e){var r=e.hideSelectedOptions,a=e.isMulti;return r===void 0?a:r},Jf=1,Uo=(function(t){Dc(r,t);var e=Pc(r);function r(a){var n;if(Ac(this,r),n=e.call(this,a),n.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},n.blockOptionHover=!1,n.isComposing=!1,n.commonProps=void 0,n.initialTouchX=0,n.initialTouchY=0,n.openAfterFocus=!1,n.scrollToFocusedOptionOnUpdate=!1,n.userIsDragging=void 0,n.controlRef=null,n.getControlRef=function(o){n.controlRef=o},n.focusedOptionRef=null,n.getFocusedOptionRef=function(o){n.focusedOptionRef=o},n.menuListRef=null,n.getMenuListRef=function(o){n.menuListRef=o},n.inputRef=null,n.getInputRef=function(o){n.inputRef=o},n.focus=n.focusInput,n.blur=n.blurInput,n.onChange=function(o,c){var p=n.props,b=p.onChange,S=p.name;c.name=S,n.ariaOnChange(o,c),b(o,c)},n.setValue=function(o,c,p){var b=n.props,S=b.closeMenuOnSelect,T=b.isMulti,w=b.inputValue;n.onInputChange("",{action:"set-value",prevInputValue:w}),S&&(n.setState({inputIsHiddenAfterUpdate:!T}),n.onMenuClose()),n.setState({clearFocusValueOnUpdate:!0}),n.onChange(o,{action:c,option:p})},n.selectOption=function(o){var c=n.props,p=c.blurInputOnSelect,b=c.isMulti,S=c.name,T=n.state.selectValue,w=b&&n.isOptionSelected(o,T),x=n.isOptionDisabled(o,T);if(w){var h=n.getOptionValue(o);n.setValue(T.filter(function(g){return n.getOptionValue(g)!==h}),"deselect-option",o)}else if(!x)b?n.setValue([].concat(bi(T),[o]),"select-option",o):n.setValue(o,"select-option");else{n.ariaOnChange(o,{action:"select-option",option:o,name:S});return}p&&n.blurInput()},n.removeValue=function(o){var c=n.props.isMulti,p=n.state.selectValue,b=n.getOptionValue(o),S=p.filter(function(w){return n.getOptionValue(w)!==b}),T=aa(c,S,S[0]||null);n.onChange(T,{action:"remove-value",removedValue:o}),n.focusInput()},n.clearValue=function(){var o=n.state.selectValue;n.onChange(aa(n.props.isMulti,[],null),{action:"clear",removedValues:o})},n.popValue=function(){var o=n.props.isMulti,c=n.state.selectValue,p=c[c.length-1],b=c.slice(0,c.length-1),S=aa(o,b,b[0]||null);p&&n.onChange(S,{action:"pop-value",removedValue:p})},n.getFocusedOptionId=function(o){return ei(n.state.focusableOptionsWithIds,o)},n.getFocusableOptionsWithIds=function(){return qs(fa(n.props,n.state.selectValue),n.getElementId("option"))},n.getValue=function(){return n.state.selectValue},n.cx=function(){for(var o=arguments.length,c=new Array(o),p=0;p<o;p++)c[p]=arguments[p];return Vu.apply(void 0,[n.props.classNamePrefix].concat(c))},n.getOptionLabel=function(o){return Po(n.props,o)},n.getOptionValue=function(o){return va(n.props,o)},n.getStyles=function(o,c){var p=n.props.unstyled,b=Hf[o](c,p);b.boxSizing="border-box";var S=n.props.styles[o];return S?S(b,c):b},n.getClassNames=function(o,c){var p,b;return(p=(b=n.props.classNames)[o])===null||p===void 0?void 0:p.call(b,c)},n.getElementId=function(o){return"".concat(n.state.instancePrefix,"-").concat(o)},n.getComponents=function(){return uf(n.props)},n.buildCategorizedOptions=function(){return fa(n.props,n.state.selectValue)},n.getCategorizedOptions=function(){return n.props.menuIsOpen?n.buildCategorizedOptions():[]},n.buildFocusableOptions=function(){return ko(n.buildCategorizedOptions())},n.getFocusableOptions=function(){return n.props.menuIsOpen?n.buildFocusableOptions():[]},n.ariaOnChange=function(o,c){n.setState({ariaSelection:V({value:o},c)})},n.onMenuMouseDown=function(o){o.button===0&&(o.stopPropagation(),o.preventDefault(),n.focusInput())},n.onMenuMouseMove=function(o){n.blockOptionHover=!1},n.onControlMouseDown=function(o){if(!o.defaultPrevented){var c=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&n.onMenuClose():c&&n.openMenu("first"):(c&&(n.openAfterFocus=!0),n.focusInput()),o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&o.preventDefault()}},n.onDropdownIndicatorMouseDown=function(o){if(!(o&&o.type==="mousedown"&&o.button!==0)&&!n.props.isDisabled){var c=n.props,p=c.isMulti,b=c.menuIsOpen;n.focusInput(),b?(n.setState({inputIsHiddenAfterUpdate:!p}),n.onMenuClose()):n.openMenu("first"),o.preventDefault()}},n.onClearIndicatorMouseDown=function(o){o&&o.type==="mousedown"&&o.button!==0||(n.clearValue(),o.preventDefault(),n.openAfterFocus=!1,o.type==="touchend"?n.focusInput():setTimeout(function(){return n.focusInput()}))},n.onScroll=function(o){typeof n.props.closeMenuOnScroll=="boolean"?o.target instanceof HTMLElement&&wa(o.target)&&n.props.onMenuClose():typeof n.props.closeMenuOnScroll=="function"&&n.props.closeMenuOnScroll(o)&&n.props.onMenuClose()},n.onCompositionStart=function(){n.isComposing=!0},n.onCompositionEnd=function(){n.isComposing=!1},n.onTouchStart=function(o){var c=o.touches,p=c&&c.item(0);p&&(n.initialTouchX=p.clientX,n.initialTouchY=p.clientY,n.userIsDragging=!1)},n.onTouchMove=function(o){var c=o.touches,p=c&&c.item(0);if(p){var b=Math.abs(p.clientX-n.initialTouchX),S=Math.abs(p.clientY-n.initialTouchY),T=5;n.userIsDragging=b>T||S>T}},n.onTouchEnd=function(o){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(o.target)&&n.menuListRef&&!n.menuListRef.contains(o.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)},n.onControlTouchEnd=function(o){n.userIsDragging||n.onControlMouseDown(o)},n.onClearIndicatorTouchEnd=function(o){n.userIsDragging||n.onClearIndicatorMouseDown(o)},n.onDropdownIndicatorTouchEnd=function(o){n.userIsDragging||n.onDropdownIndicatorMouseDown(o)},n.handleInputChange=function(o){var c=n.props.inputValue,p=o.currentTarget.value;n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange(p,{action:"input-change",prevInputValue:c}),n.props.menuIsOpen||n.onMenuOpen()},n.onInputFocus=function(o){n.props.onFocus&&n.props.onFocus(o),n.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1},n.onInputBlur=function(o){var c=n.props.inputValue;if(n.menuListRef&&n.menuListRef.contains(document.activeElement)){n.inputRef.focus();return}n.props.onBlur&&n.props.onBlur(o),n.onInputChange("",{action:"input-blur",prevInputValue:c}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1})},n.onOptionHover=function(o){if(!(n.blockOptionHover||n.state.focusedOption===o)){var c=n.getFocusableOptions(),p=c.indexOf(o);n.setState({focusedOption:o,focusedOptionId:p>-1?n.getFocusedOptionId(o):null})}},n.shouldHideSelectedOptions=function(){return Vo(n.props)},n.onValueInputFocus=function(o){o.preventDefault(),o.stopPropagation(),n.focus()},n.onKeyDown=function(o){var c=n.props,p=c.isMulti,b=c.backspaceRemovesValue,S=c.escapeClearsValue,T=c.inputValue,w=c.isClearable,x=c.isDisabled,h=c.menuIsOpen,g=c.onKeyDown,N=c.tabSelectsValue,M=c.openMenuOnFocus,m=n.state,O=m.focusedOption,A=m.focusedValue,I=m.selectValue;if(!x&&!(typeof g=="function"&&(g(o),o.defaultPrevented))){switch(n.blockOptionHover=!0,o.key){case"ArrowLeft":if(!p||T)return;n.focusValue("previous");break;case"ArrowRight":if(!p||T)return;n.focusValue("next");break;case"Delete":case"Backspace":if(T)return;if(A)n.removeValue(A);else{if(!b)return;p?n.popValue():w&&n.clearValue()}break;case"Tab":if(n.isComposing||o.shiftKey||!h||!N||!O||M&&n.isOptionSelected(O,I))return;n.selectOption(O);break;case"Enter":if(o.keyCode===229)break;if(h){if(!O||n.isComposing)return;n.selectOption(O);break}return;case"Escape":h?(n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange("",{action:"menu-close",prevInputValue:T}),n.onMenuClose()):w&&S&&n.clearValue();break;case" ":if(T)return;if(!h){n.openMenu("first");break}if(!O)return;n.selectOption(O);break;case"ArrowUp":h?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":h?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!h)return;n.focusOption("pageup");break;case"PageDown":if(!h)return;n.focusOption("pagedown");break;case"Home":if(!h)return;n.focusOption("first");break;case"End":if(!h)return;n.focusOption("last");break;default:return}o.preventDefault()}},n.state.instancePrefix="react-select-"+(n.props.instanceId||++Jf),n.state.selectValue=Rs(a.value),a.menuIsOpen&&n.state.selectValue.length){var s=n.getFocusableOptionsWithIds(),l=n.buildFocusableOptions(),u=l.indexOf(n.state.selectValue[0]);n.state.focusableOptionsWithIds=s,n.state.focusedOption=l[u],n.state.focusedOptionId=ei(s,l[u])}return n}return Rc(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Ds(this.menuListRef,this.focusedOptionRef),Ff()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(n){var s=this.props,l=s.isDisabled,u=s.menuIsOpen,o=this.state.isFocused;(o&&!l&&n.isDisabled||o&&u&&!n.menuIsOpen)&&this.focusInput(),o&&l&&!n.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!o&&!l&&n.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Ds(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(n,s){this.props.onInputChange(n,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(n){var s=this,l=this.state,u=l.selectValue,o=l.isFocused,c=this.buildFocusableOptions(),p=n==="first"?0:c.length-1;if(!this.props.isMulti){var b=c.indexOf(u[0]);b>-1&&(p=b)}this.scrollToFocusedOptionOnUpdate=!(o&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[p],focusedOptionId:this.getFocusedOptionId(c[p])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(n){var s=this.state,l=s.selectValue,u=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var o=l.indexOf(u);u||(o=-1);var c=l.length-1,p=-1;if(l.length){switch(n){case"previous":o===0?p=0:o===-1?p=c:p=o-1;break;case"next":o>-1&&o<c&&(p=o+1);break}this.setState({inputIsHidden:p!==-1,focusedValue:l[p]})}}}},{key:"focusOption",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,l=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var o=0,c=u.indexOf(l);l||(c=-1),n==="up"?o=c>0?c-1:u.length-1:n==="down"?o=(c+1)%u.length:n==="pageup"?(o=c-s,o<0&&(o=0)):n==="pagedown"?(o=c+s,o>u.length-1&&(o=u.length-1)):n==="last"&&(o=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[o],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[o])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Qa):V(V({},Qa),this.props.theme):Qa})},{key:"getCommonProps",value:function(){var n=this.clearValue,s=this.cx,l=this.getStyles,u=this.getClassNames,o=this.getValue,c=this.selectOption,p=this.setValue,b=this.props,S=b.isMulti,T=b.isRtl,w=b.options,x=this.hasValue();return{clearValue:n,cx:s,getStyles:l,getClassNames:u,getValue:o,hasValue:x,isMulti:S,isRtl:T,options:w,selectOption:c,selectProps:b,setValue:p,theme:this.getTheme()}}},{key:"hasValue",value:function(){var n=this.state.selectValue;return n.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var n=this.props,s=n.isClearable,l=n.isMulti;return s===void 0?l:s}},{key:"isOptionDisabled",value:function(n,s){return Lo(this.props,n,s)}},{key:"isOptionSelected",value:function(n,s){return Fo(this.props,n,s)}},{key:"filterOption",value:function(n,s){return jo(this.props,n,s)}},{key:"formatOptionLabel",value:function(n,s){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(n,{context:s,inputValue:l,selectValue:u})}else return this.getOptionLabel(n)}},{key:"formatGroupLabel",value:function(n){return this.props.formatGroupLabel(n)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var n=this.props,s=n.isDisabled,l=n.isSearchable,u=n.inputId,o=n.inputValue,c=n.tabIndex,p=n.form,b=n.menuIsOpen,S=n.required,T=this.getComponents(),w=T.Input,x=this.state,h=x.inputIsHidden,g=x.ariaSelection,N=this.commonProps,M=u||this.getElementId("input"),m=V(V(V({"aria-autocomplete":"list","aria-expanded":b,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":S,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},b&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(g==null?void 0:g.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?E.createElement(w,U({},N,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:M,innerRef:this.getInputRef,isDisabled:s,isHidden:h,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:p,type:"text",value:o},m)):E.createElement(Ef,U({id:M,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ga,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:p,value:""},m))})},{key:"renderPlaceholderOrValue",value:function(){var n=this,s=this.getComponents(),l=s.MultiValue,u=s.MultiValueContainer,o=s.MultiValueLabel,c=s.MultiValueRemove,p=s.SingleValue,b=s.Placeholder,S=this.commonProps,T=this.props,w=T.controlShouldRenderValue,x=T.isDisabled,h=T.isMulti,g=T.inputValue,N=T.placeholder,M=this.state,m=M.selectValue,O=M.focusedValue,A=M.isFocused;if(!this.hasValue()||!w)return g?null:E.createElement(b,U({},S,{key:"placeholder",isDisabled:x,isFocused:A,innerProps:{id:this.getElementId("placeholder")}}),N);if(h)return m.map(function(P,$){var W=P===O,z="".concat(n.getOptionLabel(P),"-").concat(n.getOptionValue(P));return E.createElement(l,U({},S,{components:{Container:u,Label:o,Remove:c},isFocused:W,isDisabled:x,key:z,index:$,removeProps:{onClick:function(){return n.removeValue(P)},onTouchEnd:function(){return n.removeValue(P)},onMouseDown:function(ie){ie.preventDefault()}},data:P}),n.formatOptionLabel(P,"value"))});if(g)return null;var I=m[0];return E.createElement(p,U({},S,{data:I,isDisabled:x}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var n=this.getComponents(),s=n.ClearIndicator,l=this.commonProps,u=this.props,o=u.isDisabled,c=u.isLoading,p=this.state.isFocused;if(!this.isClearable()||!s||o||!this.hasValue()||c)return null;var b={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return E.createElement(s,U({},l,{innerProps:b,isFocused:p}))}},{key:"renderLoadingIndicator",value:function(){var n=this.getComponents(),s=n.LoadingIndicator,l=this.commonProps,u=this.props,o=u.isDisabled,c=u.isLoading,p=this.state.isFocused;if(!s||!c)return null;var b={"aria-hidden":"true"};return E.createElement(s,U({},l,{innerProps:b,isDisabled:o,isFocused:p}))}},{key:"renderIndicatorSeparator",value:function(){var n=this.getComponents(),s=n.DropdownIndicator,l=n.IndicatorSeparator;if(!s||!l)return null;var u=this.commonProps,o=this.props.isDisabled,c=this.state.isFocused;return E.createElement(l,U({},u,{isDisabled:o,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var n=this.getComponents(),s=n.DropdownIndicator;if(!s)return null;var l=this.commonProps,u=this.props.isDisabled,o=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return E.createElement(s,U({},l,{innerProps:c,isDisabled:u,isFocused:o}))}},{key:"renderMenu",value:function(){var n=this,s=this.getComponents(),l=s.Group,u=s.GroupHeading,o=s.Menu,c=s.MenuList,p=s.MenuPortal,b=s.LoadingMessage,S=s.NoOptionsMessage,T=s.Option,w=this.commonProps,x=this.state.focusedOption,h=this.props,g=h.captureMenuScroll,N=h.inputValue,M=h.isLoading,m=h.loadingMessage,O=h.minMenuHeight,A=h.maxMenuHeight,I=h.menuIsOpen,P=h.menuPlacement,$=h.menuPosition,W=h.menuPortalTarget,z=h.menuShouldBlockScroll,G=h.menuShouldScrollIntoView,ie=h.noOptionsMessage,he=h.onMenuScrollToTop,ue=h.onMenuScrollToBottom;if(!I)return null;var me=function(B,Qe){var q=B.type,ve=B.data,ke=B.isDisabled,Ue=B.isSelected,wt=B.label,jt=B.value,Gt=x===ve,et=ke?void 0:function(){return n.onOptionHover(ve)},Nt=ke?void 0:function(){return n.selectOption(ve)},$e="".concat(n.getElementId("option"),"-").concat(Qe),pt={id:$e,onClick:Nt,onMouseMove:et,onMouseOver:et,tabIndex:-1,role:"option","aria-selected":n.state.isAppleDevice?void 0:Ue};return E.createElement(T,U({},w,{innerProps:pt,data:ve,isDisabled:ke,isSelected:Ue,key:$e,label:wt,type:q,value:jt,isFocused:Gt,innerRef:Gt?n.getFocusedOptionRef:void 0}),n.formatOptionLabel(B.data,"menu"))},Ve;if(this.hasOptions())Ve=this.getCategorizedOptions().map(function(oe){if(oe.type==="group"){var B=oe.data,Qe=oe.options,q=oe.index,ve="".concat(n.getElementId("group"),"-").concat(q),ke="".concat(ve,"-heading");return E.createElement(l,U({},w,{key:ve,data:B,options:Qe,Heading:u,headingProps:{id:ke,data:oe.data},label:n.formatGroupLabel(oe.data)}),oe.options.map(function(Ue){return me(Ue,"".concat(q,"-").concat(Ue.index))}))}else if(oe.type==="option")return me(oe,"".concat(oe.index))});else if(M){var Me=m({inputValue:N});if(Me===null)return null;Ve=E.createElement(b,w,Me)}else{var st=ie({inputValue:N});if(st===null)return null;Ve=E.createElement(S,w,st)}var Je={minMenuHeight:O,maxMenuHeight:A,menuPlacement:P,menuPosition:$,menuShouldScrollIntoView:G},de=E.createElement(td,U({},w,Je),function(oe){var B=oe.ref,Qe=oe.placerProps,q=Qe.placement,ve=Qe.maxHeight;return E.createElement(o,U({},w,Je,{innerRef:B,innerProps:{onMouseDown:n.onMenuMouseDown,onMouseMove:n.onMenuMouseMove},isLoading:M,placement:q}),E.createElement(Af,{captureEnabled:g,onTopArrive:he,onBottomArrive:ue,lockEnabled:z},function(ke){return E.createElement(c,U({},w,{innerRef:function(wt){n.getMenuListRef(wt),ke(wt)},innerProps:{role:"listbox","aria-multiselectable":w.isMulti,id:n.getElementId("listbox")},isLoading:M,maxHeight:ve,focusedOption:x}),Ve)}))});return W||$==="fixed"?E.createElement(p,U({},w,{appendTo:W,controlElement:this.controlRef,menuPlacement:P,menuPosition:$}),de):de}},{key:"renderFormField",value:function(){var n=this,s=this.props,l=s.delimiter,u=s.isDisabled,o=s.isMulti,c=s.name,p=s.required,b=this.state.selectValue;if(p&&!this.hasValue()&&!u)return E.createElement(Mf,{name:c,onFocus:this.onValueInputFocus});if(!(!c||u))if(o)if(l){var S=b.map(function(x){return n.getOptionValue(x)}).join(l);return E.createElement("input",{name:c,type:"hidden",value:S})}else{var T=b.length>0?b.map(function(x,h){return E.createElement("input",{key:"i-".concat(h),name:c,type:"hidden",value:n.getOptionValue(x)})}):E.createElement("input",{name:c,type:"hidden",value:""});return E.createElement("div",null,T)}else{var w=b[0]?this.getOptionValue(b[0]):"";return E.createElement("input",{name:c,type:"hidden",value:w})}}},{key:"renderLiveRegion",value:function(){var n=this.commonProps,s=this.state,l=s.ariaSelection,u=s.focusedOption,o=s.focusedValue,c=s.isFocused,p=s.selectValue,b=this.getFocusableOptions();return E.createElement(vf,U({},n,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:u,focusedValue:o,isFocused:c,selectValue:p,focusableOptions:b,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var n=this.getComponents(),s=n.Control,l=n.IndicatorsContainer,u=n.SelectContainer,o=n.ValueContainer,c=this.props,p=c.className,b=c.id,S=c.isDisabled,T=c.menuIsOpen,w=this.state.isFocused,x=this.commonProps=this.getCommonProps();return E.createElement(u,U({},x,{className:p,innerProps:{id:b,onKeyDown:this.onKeyDown},isDisabled:S,isFocused:w}),this.renderLiveRegion(),E.createElement(s,U({},x,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:S,isFocused:w,menuIsOpen:T}),E.createElement(o,U({},x,{isDisabled:S}),this.renderPlaceholderOrValue(),this.renderInput()),E.createElement(l,U({},x,{isDisabled:S}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(n,s){var l=s.prevProps,u=s.clearFocusValueOnUpdate,o=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,p=s.isFocused,b=s.prevWasFocused,S=s.instancePrefix,T=n.options,w=n.value,x=n.menuIsOpen,h=n.inputValue,g=n.isMulti,N=Rs(w),M={};if(l&&(w!==l.value||T!==l.options||x!==l.menuIsOpen||h!==l.inputValue)){var m=x?Kf(n,N):[],O=x?qs(fa(n,N),"".concat(S,"-option")):[],A=u?Xf(s,N):null,I=Zf(s,m),P=ei(O,I);M={selectValue:N,focusedOption:I,focusedOptionId:P,focusableOptionsWithIds:O,focusedValue:A,clearFocusValueOnUpdate:!1}}var $=o!=null&&n!==l?{inputIsHidden:o,inputIsHiddenAfterUpdate:void 0}:{},W=c,z=p&&b;return p&&!z&&(W={value:aa(g,N,N[0]||null),options:N,action:"initial-input-focus"},z=!b),(c==null?void 0:c.action)==="initial-input-focus"&&(W=null),V(V(V({},M),$),{},{prevProps:n,ariaSelection:W,prevWasFocused:z})}}]),r})(E.Component);Uo.defaultProps=Yf;var Qf=E.forwardRef(function(t,e){var r=Nc(t);return E.createElement(Uo,U({ref:e},r))}),$o=Qf;function em({label:t,users:e,value:r,onChange:a,onBlur:n,disabled:s,required:l,hint:u,error:o,placeholder:c}){const p=E.useMemo(()=>e.map(w=>({value:w.telegram_id,label:w.name||w.telegram_username||w.username||String(w.telegram_id)})),[e]),b=E.useId(),S=p.filter(w=>r.includes(w.value)),T=o?"".concat(b,"-error"):u?"".concat(b,"-hint"):void 0;return d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium",htmlFor:b,children:[t,l?d.jsx("span",{className:"text-red-600",children:" *"}):null]}),d.jsx($o,{isMulti:!0,isDisabled:s,options:p,value:S,inputId:b,placeholder:c!=null?c:"Выберите",onChange:w=>{const x=w.map(h=>h.value);a(x)},onBlur:n,className:"mt-1",classNamePrefix:"select","aria-invalid":!!o,"aria-describedby":T,"aria-required":l,noOptionsMessage:()=>"Нет совпадений"}),u&&!o?d.jsx("p",{id:T,className:"mt-1 text-xs text-slate-500",children:u}):null,o?d.jsx("p",{id:T,className:"mt-1 text-xs text-red-600",children:o}):null]})}function Ys({label:t,options:e,value:r,onChange:a,onBlur:n,disabled:s,placeholder:l,hint:u,error:o,required:c}){var w;const p=E.useId(),b=E.useMemo(()=>e.map(x=>({...x})),[e]),S=r!==null&&(w=b.find(x=>x.value===r))!=null?w:null,T=o?"".concat(p,"-error"):u?"".concat(p,"-hint"):void 0;return d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium",htmlFor:p,children:[t,c?d.jsx("span",{className:"text-red-600",children:" *"}):null]}),d.jsx($o,{options:b,value:S,inputId:p,isDisabled:s,placeholder:l!=null?l:"Выберите",onChange:x=>a(x||null),onBlur:n,className:"mt-1",classNamePrefix:"select","aria-invalid":!!o,"aria-describedby":T,"aria-required":c,noOptionsMessage:()=>"Нет совпадений"}),u&&!o?d.jsx("p",{id:T,className:"mt-1 text-xs text-slate-500",children:u}):null,o?d.jsx("p",{id:T,className:"mt-1 text-xs text-red-600",children:o}):null]})}const Ho=new Set([".png",".jpg",".jpeg",".gif",".webp",".bmp",".svg",".heic",".heif",".pdf",".doc",".docx",".docm",".dotx",".dotm",".xls",".xlsx",".xlsm",".xlsb",".xltm",".xltx",".xlam",".ppt",".pptx",".pptm",".potx",".potm",".ppsx",".ppsm",".txt",".csv",".odt",".ods",".odp",".zip",".rar",".7z",".mp4",".mov",".mkv"]),tm=["image/*","video/*",...Array.from(Ho)],ti=t=>{t.startsWith("blob:")&&URL.revokeObjectURL(t)},ln=t=>{if(!t)return;if(t.startsWith("blob:")||t.startsWith("data:")||t.includes("mode=inline"))return t;const e=t.includes("?")?"&":"?";return"".concat(t).concat(e,"mode=inline")};function nm({disabled:t,onUploaded:e,onRemove:r,taskId:a}){const[n,s]=y.useState([]),{t:l}=Js(),u=y.useId(),o=y.useRef(null),c=g=>{Array.from(g).forEach(N=>{const M=N.name.lastIndexOf("."),m=M===-1?"":N.name.slice(M).toLowerCase();if(!Ho.has(m)){ai(l("invalidFileType"),"error");return}const O={file:N,url:URL.createObjectURL(N),name:N.name,isImage:N.type.startsWith("image/"),size:N.size,progress:0};s(A=>[...A,O]),x(N,A=>{s(I=>I.map(P=>P===O?{...P,progress:A}:P))}).then(A=>{let I=null;s(P=>P.map($=>{if($!==O)return $;I=$.url;const W=ln(A.thumbnailUrl)||ln(A.url)||$.url;return{...$,attachment:A,progress:100,url:W,isImage:A.type.startsWith("image/")}})),I&&ti(I),e(A)}).catch(A=>{s(P=>P.filter($=>$!==O));const I=A instanceof Error&&A.message?A.message:l("uploadFailed");ai(I,"error"),ti(O.url)})})},p=g=>{g.target.files&&c(g.target.files)},b=()=>{if(t)return;const g=o.current;if(!g)return;const N=g.showPicker;if(typeof N=="function"){N.call(g);return}g.click()},S=g=>{if(t){g.preventDefault();return}const N=g.target;N!=null&&N.closest("label")||(g.preventDefault(),b())},T=g=>{t||(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),b())},w=g=>{g.preventDefault(),!t&&c(g.dataTransfer.files)},x=async(g,N)=>{const m=Math.ceil(g.size/1048576),O="".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2));let A;for(let I=0;I<m;I++){const P=g.slice(I*1048576,(I+1)*1048576),$=new FormData;$.append("fileId",O),$.append("chunkIndex",String(I)),$.append("totalChunks",String(m)),$.append("file",P,g.name),a&&typeof a=="string"&&a.trim()&&$.append("taskId",a);const W=await qn("/api/v1/tasks/upload-chunk",{method:"POST",body:$});if(!W.ok){const z=W.clone();let G=l("uploadFailed");try{const ie=await z.json();typeof(ie==null?void 0:ie.error)=="string"&&ie.error.trim()&&(G=ie.error)}catch(ie){try{const he=await W.text();he.trim()&&(G=he.trim())}catch(he){}}throw new Error(G)}I===m-1&&(A=await W.json()),N(Math.round((I+1)/m*100))}return A},h=g=>{s(N=>N.filter(M=>M!==g)),ti(g.url),g.attachment&&r(g.attachment)};return d.jsxs("div",{children:[d.jsxs("div",{onDragOver:g=>{g.preventDefault(),t||(g.dataTransfer.dropEffect="copy")},onDrop:w,onClick:S,onKeyDown:T,role:"button",tabIndex:t?-1:0,"aria-disabled":t,"aria-label":l("dragFilesOrSelect"),className:"mt-2 flex w-full flex-col items-center justify-center rounded-lg border-2 border-dashed p-4 text-center text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accentPrimary focus-visible:ring-offset-2 focus-visible:ring-offset-white ".concat(t?"cursor-not-allowed border-slate-300 bg-slate-100 text-slate-400 opacity-70":"cursor-pointer border-accentPrimary/60 bg-accentPrimary/5 text-slate-700 hover:border-accentPrimary hover:bg-accentPrimary/10"),children:[d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx("p",{className:"text-base font-medium",children:l("dragFilesOrSelect")}),d.jsx("label",{htmlFor:u,className:"rounded-full border border-accentPrimary px-4 py-1.5 text-sm font-semibold text-accentPrimary transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white ".concat(t?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-accentPrimary/10 focus-visible:ring-accentPrimary"),children:l("chooseFiles")}),d.jsx("p",{className:"text-xs text-slate-500",children:l("uploadTapHint")})]}),d.jsx("input",{ref:o,id:u,name:"attachments",type:"file",multiple:!0,onChange:p,disabled:t,accept:tm.join(","),className:"sr-only"})]}),n.length>0&&d.jsx("ul",{className:"mt-2 space-y-2",children:n.map((g,N)=>{var M,m,O,A,I,P;return d.jsxs("li",{className:"flex items-center gap-2",children:[g.isImage&&d.jsx("img",{srcSet:"".concat(ln((M=g.attachment)==null?void 0:M.thumbnailUrl)||ln((m=g.attachment)==null?void 0:m.url)||g.url," 1x, ").concat(ln((O=g.attachment)==null?void 0:O.url)||ln((A=g.attachment)==null?void 0:A.thumbnailUrl)||g.url," 2x"),sizes:"48px",src:ln((I=g.attachment)==null?void 0:I.thumbnailUrl)||ln((P=g.attachment)==null?void 0:P.url)||g.url,alt:g.name,className:"h-12 w-12 rounded object-cover"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("p",{className:"text-sm",children:[g.name," (",(g.size/1024/1024).toFixed(1)," ",l("mb"),")"]}),d.jsx("div",{className:"h-2 rounded bg-gray-200",children:d.jsx("div",{className:"bg-accentPrimary h-2 rounded",style:{width:"".concat(g.progress,"%")}})})]}),d.jsx("button",{type:"button",className:"text-red-500",onClick:()=>h(g),children:l("delete")})]},N)})})]})}const rm=t=>{const{startDateValue:e,setValue:r,formatInputDate:a,defaultOffsetMs:n,autoSync:s=!0}=t,[l,u]=y.useState(n);y.useEffect(()=>{if(!s||!e||!Number.isFinite(l))return;const p=new Date(e).getTime();if(Number.isNaN(p))return;const b=new Date(p+l);Number.isNaN(b.getTime())||r("dueDate",a(b))},[e,l,r,a,s]);const o=y.useCallback(c=>{const p=c.target.value;if(r("dueDate",p),!e)return;const b=new Date(e).getTime(),S=new Date(p).getTime();Number.isNaN(b)||Number.isNaN(S)||u(S-b)},[r,e]);return{dueOffset:l,setDueOffset:u,handleDueDateChange:o}},Nr=t=>{if(!t)return;if(t.startsWith("blob:")||t.startsWith("data:")||t.includes("mode=inline"))return t;const e=t.includes("?")?"&":"?";return"".concat(t).concat(e,"mode=inline")},am=/\/(?:api\/v1\/files)\/([0-9a-f]{24})/i,zo=t=>{if(typeof t!="string")return null;const e=am.exec(t.trim());return e?e[1].toLowerCase():null},pi=t=>{const e=zo(t);if(e)return e;const r=t.trim();if(!r)return"";const[a]=r.split("#"),[n]=a.split("?");return n.toLowerCase()},im=t=>{var u,o;const e=typeof t.name=="string"&&t.name.trim()?t.name.trim():"Файл",r=typeof t.type=="string"&&t.type.trim()?t.type:"application/octet-stream",a=typeof t.size=="number"&&Number.isFinite(t.size)?t.size:0,n=(u=Nr(t.url))!=null?u:t.url,s={...t,name:e,url:n,type:r,size:a},l=(o=Nr(t.thumbnailUrl))!=null?o:t.thumbnailUrl;return l?s.thumbnailUrl=l:"thumbnailUrl"in s&&delete s.thumbnailUrl,s},En=(t,e)=>{const r=[],a=new Map,n=s=>{s.forEach(l=>{const u=im(l),o=pi(u.url);a.has(o)||r.push(o),a.set(o,u)})};return n(t),n(e),r.map(s=>a.get(s)).filter(Boolean)},sm=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t.values())if(!e.has(r))return!1;return!0},om=t=>t?t.split(/[,;\s]+/).map(e=>e.trim().toLowerCase()).filter(e=>e.length===24&&/^[0-9a-f]+$/.test(e)):[],lm=t=>{var s;if(!t||!t.trim())return[];const e=new Set,r=l=>{if(!l)return;const u=zo(l);u&&e.add(u)};if(typeof window<"u"&&typeof DOMParser<"u")try{const u=new DOMParser().parseFromString(t,"text/html");u.querySelectorAll("img[src]").forEach(c=>{r(c.getAttribute("src"))}),u.querySelectorAll("source[src]").forEach(c=>{r(c.getAttribute("src"))}),u.querySelectorAll("img[srcset],source[srcset]").forEach(c=>{const p=c.getAttribute("srcset");p&&p.split(",").map(b=>b.trim().split(/\s+/,1)[0]).forEach(b=>r(b))}),u.querySelectorAll("a[href]").forEach(c=>{r(c.getAttribute("href"))}),["data-attachment-id","data-attachment-ids","data-file-id","data-file-ids"].forEach(c=>{u.querySelectorAll("[".concat(c,"]")).forEach(p=>{om(p.getAttribute(c)).forEach(b=>e.add(b))})})}catch(l){}const a=/\/api\/v1\/files\/([0-9a-f]{24})/gi;let n;for(;(n=a.exec(t))!==null;)e.add(((s=n[1])!=null?s:"").toLowerCase());return Array.from(e)},Bo=t=>lm(t).map(r=>{var s;const a="/api/v1/files/".concat(r),n=(s=Nr(a))!=null?s:a;return{name:"Изображение",url:n,thumbnailUrl:n,type:"image/*",size:0}}),cm=(t,e,r)=>{const a=Array.isArray(t)?t.filter(l=>!!(l&&typeof l.url=="string")):[];let n=En([],a);if(Array.isArray(e)){const l=e.map(u=>typeof u=="string"?u.trim():"").filter(u=>u.startsWith("/api/v1/files/")).map(u=>({name:"Файл",url:u,type:"application/octet-stream",size:0}));n=En(n,l)}const s=Bo(r);return n=En(n,s),n},um=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:Vl}),Ar=t=>"".concat(um.format(t).replace(", "," ")," ").concat(Rl),ni=t=>t&&typeof t=="object"&&!Array.isArray(t)?t:{},hi=t=>{if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const e=t.trim();if(!e)return null;const r=Number(e);return Number.isFinite(r)?r:null}return null},ia=t=>{if(!Array.isArray(t))return[];const e=t.map(r=>hi(r)).filter(r=>r!==null);return Array.from(new Set(e))},dm=t=>{if(typeof t!="string")return;const e=t.trim();if(e)return/^бессроч/i.test(e)?"До выполнения":e},Ke=t=>{const e=t.trim().replace(/\s+/g,"").replace(/,/g,".");if(!e)return null;const r=Number(e);return Number.isFinite(r)&&r>=0?r:null},Tr=t=>t==null?"":typeof t=="number"?Number.isFinite(t)?String(t):"":typeof t=="string"?t:"",ri=(t,e)=>{if(t==null)return null;const r=typeof e=="number"?e:typeof e=="string"?Number(e.trim()):NaN;if(!Number.isFinite(r)||r<=0)return null;const a=typeof t=="number"?t.toString():typeof t=="string"?t.trim():"";return a?a.startsWith("@")?"https://t.me/".concat(a.slice(1),"/").concat(r):/^-100\d+$/.test(a)?"https://t.me/c/".concat(a.slice(4),"/").concat(r):/^\d+$/.test(a)?"https://t.me/c/".concat(a,"/").concat(r):null:null},Wn="Заявка",fm=t=>t&&((typeof t.kind=="string"?t.kind.trim().toLowerCase():"")==="request"||(typeof t.task_type=="string"?t.task_type.trim():"")===Wn)?"request":"task",zn=new Intl.NumberFormat("uk-UA",{minimumFractionDigits:2,maximumFractionDigits:2}),gi=t=>{if(!t.trim())return 0;const e=t.replace(/\s*грн\.?/gi,"").trim(),r=Ke(e);return r===null||!Number.isFinite(r)?null:Number(r.toFixed(2))},Er=t=>{if(t==null)return zn.format(0);if(typeof t=="number")return zn.format(t);if(typeof t=="string"){const e=t.trim();if(!e)return zn.format(0);const r=gi(e);return r===null?e.replace(/\s*грн\.?/gi,"").trim()||zn.format(0):zn.format(r)}return zn.format(0)},mm=t=>{if(!t)return"";const e=Gn(t);return e?Ar(e):t},Gn=t=>{if(!t)return null;const e=new Date(t);return Number.isNaN(e.getTime())?null:e},ma=t=>{if(t instanceof Date)return t.toISOString();if(typeof t=="number"){const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toISOString()}if(t&&typeof t=="object"&&"$date"in t){const e=t.$date;return typeof e=="string"?e:""}return typeof t=="string"?t:""},Ks=t=>t?(Array.isArray(t)?t:typeof t=="object"?Object.values(t):[]).filter(r=>r!==null&&typeof r=="object").map(r=>{const a=r,n=ni(a.changes),s=ni(n.from),l=ni(n.to),u=a.changed_by,o=typeof u=="number"?u:Number(u)||0;return{changed_at:ma(a.changed_at),changed_by:o,changes:{from:s,to:l}}}).sort((r,a)=>{const n=Date.parse(r.changed_at),s=Date.parse(a.changed_at);return Number.isNaN(n)&&Number.isNaN(s)?0:Number.isNaN(n)?1:Number.isNaN(s)?-1:s-n}):[],pm=t=>{const e=Date.parse(t);return Number.isNaN(e)?t||"":Ar(new Date(e))},Bn=t=>{if(t==null)return"—";if(t instanceof Date)return Ar(t);if(typeof t=="string"){const e=Gn(t);return e?Ar(e):t}if(typeof t=="number"||typeof t=="boolean")return String(t);try{return JSON.stringify(t)}catch(e){return String(t)}},hm=t=>{const e=t.trim();return e&&(/^бессроч/i.test(e)?"До выполнения":e)},gm=t=>{const e=t.trim().toLowerCase();return e==="status"?"status":e==="priority"||e==="priority_label"||e==="prioritylabel"?"priority":e==="task_type"||e==="tasktype"||e==="type"?"taskType":null},bm=(t,e)=>{var s,l,u;const r=gm(t);if(!r)return null;const a=e.trim();if(!a||a==="—")return null;if(r==="status"){const o=(s=Bl(a))!=null?s:Va;return d.jsx("span",{className:o,children:a})}if(r==="priority"){const o=(l=Wl(a))!=null?l:"".concat(Va," normal-case");return d.jsx("span",{className:o,children:hm(a)})}const n=(u=ql(a))!=null?u:"".concat(Va," normal-case");return d.jsx("span",{className:n,children:a})},sa=(t,e,r)=>{const n=(typeof e=="string"?e:String(e!=null?e:"")).trim();if(!n||n==="—")return r==="prev"?d.jsx("span",{className:"text-gray-400 line-through decoration-gray-300",children:"—"}):d.jsx("span",{className:"text-gray-500",children:"—"});const s=bm(t,n);if(!s){const l=r==="prev"?"text-gray-500 line-through decoration-gray-400":"font-semibold text-gray-900";return d.jsx("span",{className:l,children:n})}return r==="prev"?d.jsx("span",{className:"inline-flex items-center gap-1 text-gray-500 line-through decoration-gray-400",children:s}):r==="next"?d.jsx("span",{className:"inline-flex items-center gap-1 font-semibold text-gray-900",children:s}):s},vm=(t,e,r,a,n)=>[t,e,r,a,n].some(s=>typeof s=="string"&&s.trim().length>0),ym=3600*1e3,Xs=8;function xm({onClose:t,onSave:e,id:r,kind:a}){var Ui,$i,Hi,zi,Bi,Wi,qi,Gi,Yi,Ki,Xi,Zi;const[n,s]=y.useState(()=>r!=null?r:null),l=y.useCallback(i=>{s(v=>{const _=Tn(i);return _||v||(i!=null?i:null)})},[]),u=y.useMemo(()=>{var i,v,_,D;return(D=(_=(v=Tn((i=n!=null?n:r)!=null?i:null))!=null?v:n)!=null?_:r)!=null?D:null},[n,r]),o=!!u,{user:c}=Nl(),p=(c==null?void 0:c.role)==="admin",b=typeof(c==null?void 0:c.access)=="number"?c.access:typeof(c==null?void 0:c.access)=="string"?Number.parseInt(c.access,10):Number.NaN,S=Number.isFinite(b)&&(b&Xs)===Xs,T=p||(c==null?void 0:c.role)==="manager",{t:w,i18n:x}=Js(),h=y.useMemo(()=>a!=null?a:"task",[a]),[g,N]=y.useState(h),M=y.useCallback(i=>g!=="request"?i:[[/\bЗадачи\b/g,"Заявки"],[/\bзадачи\b/g,"заявки"],[/\bЗадачу\b/g,"Заявку"],[/\bзадачу\b/g,"заявку"],[/\bЗадаче\b/g,"Заявке"],[/\bзадаче\b/g,"заявке"],[/\bЗадачей\b/g,"Заявкой"],[/\bзадачей\b/g,"заявкой"],[/\bЗадача\b/g,"Заявка"],[/\bзадача\b/g,"заявка"]].reduce((_,[D,k])=>_.replace(D,k),i),[g]),m=y.useCallback((...i)=>M(String(w(...i))),[w,M]);x.language,y.useEffect(()=>{a&&a!==g&&N(a)},[a,g]);const[O,A]=y.useState(!0),I=y.useRef(null),[P,$]=y.useState({start:"",due:""}),[W,z]=y.useState(""),[G,ie]=y.useState(""),[he,ue]=y.useState(""),[me,Ve]=y.useState([]),[Me,st]=y.useState(!1),Je=y.useId(),de=y.useCallback(async i=>{const v=typeof i.title=="string"?i.title.trim():"",_=typeof i.description=="string"?i.description:"",D=ia(i.assignees),k=typeof i.startDate=="string"?i.startDate.trim():"",R=typeof i.dueDate=="string"?i.dueDate.trim():"",ce={title:v,description:_,assignees:D,startDate:k||void 0,dueDate:R||void 0},we={};if(v||(we.title={type:"required",message:m("titleRequired")}),D.length===0&&(we.assignees={type:"required",message:m("assigneeRequiredError")}),ce.startDate&&ce.dueDate){const Re=new Date(ce.startDate).getTime(),Te=new Date(ce.dueDate).getTime();Number.isFinite(Re)&&Number.isFinite(Te)&&Te<Re&&(we.dueDate={type:"validate",message:m("dueBeforeStart")})}return{values:Object.keys(we).length?{}:ce,errors:we}},[m]),{register:oe,control:B,handleSubmit:Qe,getValues:q,reset:ve,watch:ke,setValue:Ue,setError:wt,formState:{errors:jt}}=Ol({resolver:de,defaultValues:{title:"",description:"",assignees:[],startDate:"",dueDate:""}}),Gt=y.useRef(ve);y.useEffect(()=>{Gt.current=ve},[ve]);const et=y.useCallback((...i)=>Gt.current(...i),[]),Nt=((Ui=Ot.find(i=>i.name==="task_type"))==null?void 0:Ui.default)||"",$e=(($i=Ot.find(i=>i.name==="priority"))==null?void 0:$i.default)||"",pt=((Hi=Ot.find(i=>i.name==="transport_type"))==null?void 0:Hi.default)||"",Vt=((zi=Ot.find(i=>i.name==="payment_method"))==null?void 0:zi.default)||"",ot=((Bi=Ot.find(i=>i.name==="payment_amount"))==null?void 0:Bi.default)||"0",ht=((Wi=Ot.find(i=>i.name==="status"))==null?void 0:Wi.default)||"",{requestTypeOptions:cn,taskTypeOptions:un}=y.useMemo(()=>{var v;const i=((v=Ot.find(_=>_.name==="task_type"))==null?void 0:v.options)||[];return{requestTypeOptions:i.filter(_=>_===Wn),taskTypeOptions:i.filter(_=>_!==Wn)}},[]),gt=(qi=cn[0])!=null?qi:Wn,dn=Nt&&Nt!==Wn?Nt:(Gi=un[0])!=null?Gi:"",Ie=y.useCallback(i=>{const v=i.getFullYear(),_="".concat(i.getMonth()+1).padStart(2,"0"),D="".concat(i.getDate()).padStart(2,"0"),k="".concat(i.getHours()).padStart(2,"0"),R="".concat(i.getMinutes()).padStart(2,"0");return"".concat(v,"-").concat(_,"-").concat(D,"T").concat(k,":").concat(R)},[]),Yt=y.useCallback(i=>{if(!i)return"";const v=new Date(i);return Number.isNaN(v.getTime())?"":Ie(v)},[Ie]),lt=y.useCallback(Gn,[]),Pe=300*60*1e3,_n=y.useCallback(i=>{const v=i?new Date(i):new Date,_=new Date(v.getTime()+ym),D=new Date(_.getTime()+Pe);return{start:Ie(_),due:Ie(D)}},[Ie,Pe]),Dr=ke(),Ut=ke("startDate"),fn=ke("dueDate"),Mr=y.useMemo(()=>{if(!Ut)return!1;if(!o)return!0;const i=typeof fn=="string"?fn:"",v=P.due;return v?i===v:i.trim().length===0},[Ut,o,fn,P.due]),{setDueOffset:At,handleDueDateChange:On}=rm({startDateValue:Ut,setValue:Ue,defaultOffsetMs:Pe,formatInputDate:Ie,autoSync:Mr}),[tt,Tt]=y.useState(h==="request"?gt:dn),[Rt,mn]=y.useState(""),[In,Kt]=y.useState($e),[nt,Zn]=y.useState(pt),[Ne,pn]=y.useState(""),[rt,re]=y.useState(""),[ge,Xt]=y.useState(""),[Le,He]=y.useState(""),[We,qe]=y.useState(""),[kr,bt]=y.useState([]),[Et,Pr]=y.useState([]),[Nn,An]=y.useState(!1),[Jn,vt]=y.useState(null),[Qn,Rn]=y.useState(!1),[hn,Dn]=y.useState(Vt),[Zt,F]=y.useState(()=>Er(ot)),[f,C]=y.useState(ht),[L,Q]=y.useState(ht),[ye,fe]=y.useState([]),[pe,at]=y.useState(""),[Ge,Jt]=y.useState(""),[le,gn]=y.useState(""),[ct,Mn]=y.useState(""),[kn,Lr]=y.useState(""),[er,Fr]=y.useState(!1),[$t,tr]=y.useState(""),nr=typeof(c==null?void 0:c.telegram_id)=="number"?c.telegram_id:null,Wo=y.useMemo(()=>{const i=Number($t);return Number.isFinite(i)?i:null},[$t]),jr=nr!==null&&Wo===nr,Ta=y.useMemo(()=>nr!==null&&ye.includes(nr),[ye,nr]),Ea=T||Ta||jr&&L==="Новая",qo=T||Ta||jr,Qt=T||jr,Go=((Yi=Ot.find(i=>i.name==="priority"))==null?void 0:Yi.options)||[],Yo=((Ki=Ot.find(i=>i.name==="transport_type"))==null?void 0:Ki.options)||[],Ko=((Xi=Ot.find(i=>i.name==="payment_method"))==null?void 0:Xi.options)||[],Xo=((Zi=Ot.find(i=>i.name==="status"))==null?void 0:Zi.options)||[],[Ca,Pn]=y.useState([]),[rr,ar]=y.useState([]),Ci=y.useRef(new Set),[Vr,Ur]=y.useState(null),[Zo,Ln]=y.useState(null),[Jo,$r]=y.useState(!1),[Qo,_i]=y.useState(!1),[el,ir]=y.useState(!1),bn=y.useRef(null),sr=y.useRef(0),vn=y.useRef(!0),[or,lr]=y.useState(null),[en,_a]=y.useState(null),ut=y.useMemo(()=>nt==="Легковой"||nt==="Грузовой",[nt]),Oa=y.useCallback(async(i=!1)=>{if(!(Nn||Qn&&!i)){An(!0),vt(null);try{const v=await Al();bt(v.drivers),Pr(v.vehicles),Rn(!0)}catch(v){const _=v instanceof Error&&v.message?v.message:"Не удалось загрузить транспорт";vt(_),i&&Rn(!1)}finally{An(!1)}}},[Qn,Nn]);y.useEffect(()=>{ut&&Oa()},[ut,Oa]),y.useEffect(()=>{Ne||rt&&re("")},[Ne,rt]),y.useEffect(()=>{if(!ge){Le&&He(""),We&&qe("");return}const i=Et.find(v=>v.id===ge);i&&(i.name!==Le&&He(i.name),i.registrationNumber!==We&&qe(i.registrationNumber))},[ge,Et,Le,We]);const Oi=y.useRef(ut);y.useEffect(()=>{Oi.current&&!ut&&(pn(""),re(""),Xt(""),He(""),qe("")),Oi.current=ut},[ut]);const Hr=y.useMemo(()=>{const i=[...kr];if(Ne){const v=Number.parseInt(Ne,10);Number.isFinite(v)&&!i.some(_=>_.id===v)&&i.push({id:v,name:rt||String(v),username:null})}return i.map(v=>{const _=v.name.trim(),D=_.length>0?_:String(v.id);return{...v,name:D}}).sort((v,_)=>v.name.localeCompare(_.name,"ru"))},[kr,Ne,rt]),tl=y.useMemo(()=>Hr.map(i=>({value:String(i.id),label:i.name})),[Hr]),zr=y.useMemo(()=>{var i;return(i=Hr.find(v=>String(v.id)===Ne))!=null?i:null},[Hr,Ne]);y.useEffect(()=>{zr&&zr.name!==rt&&re(zr.name)},[zr,rt]);const cr=y.useMemo(()=>{const i=nt==="Грузовой"?"Грузовой":"Легковой",v=Et.filter(_=>_.transportType===i).slice();return ge&&!v.some(_=>_.id===ge)&&v.push({id:ge,name:Le||ge,registrationNumber:We||"",transportType:i}),v.sort((_,D)=>_.name.localeCompare(D.name,"ru"))},[Et,ge,Le,We,nt]),nl=y.useMemo(()=>cr.map(i=>({value:i.id,label:i.registrationNumber?"".concat(i.name," (").concat(i.registrationNumber,")"):i.name})),[cr]);y.useEffect(()=>{if(!ut||!ge)return;cr.some(v=>v.id===ge)||(Xt(""),He(""),qe(""))},[ut,ge,cr]);const rl=ut||!!(Ne||ge||rt||Le),Ia=O&&(T||jr||Ta),al=[{value:"full",label:m("doneFull")},{value:"partial",label:m("donePartial")},{value:"changed",label:m("doneChanged")}],[Na,Aa]=y.useState(!1),[Ii,Ni]=y.useState(""),[Ai,Br]=y.useState(!1),[ur,Wr]=y.useState(null),dr=y.useRef(null),tn=y.useRef(null);y.useEffect(()=>{if(typeof document>"u")return;const{body:i,documentElement:v}=document,_=i.style.overflow,D=i.style.paddingRight,k=typeof window<"u"?window.innerWidth-v.clientWidth:0;return i.style.overflow="hidden",k>0&&(i.style.paddingRight="".concat(k,"px")),()=>{i.style.overflow=_,i.style.paddingRight=D}},[]),y.useEffect(()=>{if(typeof document>"u")return;const i=v=>{v.key==="Escape"&&(v.preventDefault(),t())};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[t]),y.useEffect(()=>{r&&l(r)},[r,l]);const{ref:Ri,...il}=oe("title"),qr=ke("title",""),Di=y.useMemo(()=>typeof qr=="string"?qr.trim().length>0:!1,[qr]),sl=O&&Di,Mi=y.useRef(null),ol=y.useCallback(i=>{Mi.current=i,Ri(i)},[Ri]);y.useEffect(()=>{const i=Mi.current;i&&(i.style.height="",i.style.height="".concat(i.scrollHeight,"px"))},[qr]),y.useEffect(()=>{!o&&g==="request"&&Tt(gt)},[gt,g,o]),y.useEffect(()=>{const i=Bo(Rt),v=new Set(i.map(D=>pi(D.url))),_=Ci.current;sm(_,v)||(ar(D=>{const k=D.filter(R=>!_.has(pi(R.url)));return En(k,i)}),Ci.current=v)},[Rt]);const ki=y.useCallback(i=>{const v=Ca.find(_=>_.telegram_id===i);return(v==null?void 0:v.name)||(v==null?void 0:v.telegram_username)||(v==null?void 0:v.username)||String(i)},[Ca]),Pi=i=>{ar(v=>v.filter(_=>_.url!==i.url)),Ur(v=>v&&v.url===i.url?null:v)},fr=y.useCallback((i,v)=>{var kt,X,te,yt,Sn,Fa;const _=fm(i);N(_);const D=typeof i.task_type=="string"?i.task_type:"",k=_==="request"?D===Wn?D:gt:D&&un.includes(D)?D:dn,R=dm(i.priority)||$e,ce=i.transport_type||pt,we=i.payment_method||Vt,Re=Er((kt=i.payment_amount)!=null?kt:ot),Te=i.status||ht,Ee=(X=i.completed_at)!=null?X:i.completedAt,Y=ma(Ee),K=(()=>{const wn=ia(i.assignees),on=hi(i.assigned_user_id);return on!==null&&wn.push(on),Array.from(new Set(wn))})();fe(K);const be=hi(i.transport_driver_id),ae=be!==null?String(be):"",Ce=i.transport_driver_name,_e=typeof Ce=="string"?Ce.trim():"",dt=be!==null&&v?v[String(be)]:void 0,xe=_e||(dt?dt.name||dt.telegram_username||dt.username||String(be):be!==null?String(be):""),De=typeof i.transport_vehicle_id=="string"?i.transport_vehicle_id:"",Ht=typeof i.transport_vehicle_name=="string"?i.transport_vehicle_name:"",Dt=typeof i.transport_vehicle_registration=="string"?i.transport_vehicle_registration:"",zt=i.createdAt||G||"",ze=lt(zt);ze&&ie(ze.toISOString());const ft=lt((te=i.start_date)!=null?te:null),Fe=ze?ft&&ft.getTime()>=ze.getTime()?ft:ze:ft,Ct=Fe?Ie(Fe):ze?Ie(ze):"",jn=lt((yt=i.due_date)!=null?yt:null),ee=Fe&&jn?jn.getTime()>=Fe.getTime()?jn:Fe:jn,Mt=ee?Ie(ee):Fe?Ie(new Date(Fe.getTime()+Pe)):"",Yr=Ct&&Mt?new Date(Mt).getTime()-new Date(Ct).getTime():Pe;At(Yr),$({start:Ct,due:Mt}),et({title:i.title||"",description:i.task_description||"",assignees:K,startDate:Ct,dueDate:Mt}),Tt(k);const nn=i.comment||"",mr=cm(i.attachments,i.files,nn);mn(nn),Kt(R),Zn(ce),pn(ae),re(_e||xe),Xt(De),He(Ht),qe(Dt),Dn(we),F(Re),Q(Te),C(Te),ue(Y),fe(K);const Vn=Tr(i.cargo_length_m),Un=Tr(i.cargo_width_m),rn=Tr(i.cargo_height_m),an=Tr(i.cargo_weight_kg),sn=typeof i.cargo_volume_m3=="number"?String(i.cargo_volume_m3):Tr(i.cargo_volume_m3);at(Vn),Jt(Un),gn(rn),Lr(an),Mn(sn);const Kr=vm(Vn,Un,rn,sn,an),yn=typeof i.route_distance_km=="number"?i.route_distance_km:null,$n=i.logistics_enabled,xn=typeof $n=="boolean"?$n:!!(yn!==null||ce!==pt||Kr);Fr(xn),tr(String(i.created_by||"")),ar(mr);const _t=i.telegram_photos_chat_id,Ae=i.telegram_photos_message_id;lr(ri(_t,Ae)),v&&Pn(wn=>{const on=[...wn];return Object.values(v).forEach(Ji=>{on.some(Tl=>Tl.telegram_id===Ji.telegram_id)||on.push(Ji)}),on}),_a(yn),I.current={title:i.title||"",taskType:k,description:i.task_description||"",comment:nn,priority:R,transportType:ce,paymentMethod:we,paymentAmount:Re,status:Te,completedAt:Y,creator:String(i.created_by||""),assignees:K,startDate:Ct,dueDate:Mt,attachments:En([],mr),distanceKm:typeof yn=="number"?yn:null,cargoLength:Vn,cargoWidth:Un,cargoHeight:rn,cargoVolume:sn,cargoWeight:an,transportDriverId:ae,transportDriverName:_e||xe,transportVehicleId:De,transportVehicleName:Ht,transportVehicleRegistration:Dt,showLogistics:xn,photosLink:ri(_t,Ae),photosChatId:_t,photosMessageId:Ae},Wr(null),l((Fa=(Sn=i._id)!=null?Sn:i.id)!=null?Fa:null)},[dn,$e,pt,Vt,ot,ht,Pe,gt,un,G,Ie,lt,et,At,$,l]),ll=i=>{Fr(i)};y.useEffect(()=>{if(!o){A(!0);return}A(Ea)},[o,Ea]),y.useEffect(()=>{const i=Ke(pe),v=Ke(Ge),_=Ke(le);if(i!==null&&v!==null&&_!==null){const D=i*v*_;if(Number.isFinite(D)){const k=D.toFixed(3);k!==ct&&Mn(k)}else ct!==""&&Mn("");return}(pe.trim()||Ge.trim()||le.trim())&&ct!==""&&Mn("")},[pe,Ge,le,ct]);const Ra=i=>{if(typeof i=="number"&&Number.isFinite(i))return i;if(typeof i=="string"){const v=i.trim();if(!v)return null;const _=Number(v);return Number.isFinite(_)?_:null}return null},Fn=y.useCallback(()=>{const i=q(),v=typeof i.title=="string"?i.title.trim():"",_=typeof i.description=="string"?i.description:"",D=ye.length>0?ye:ia(i.assignees),R={title:v,task_type:g==="request"?gt:tt,task_description:_,comment:Rt,priority:In,transport_type:nt,payment_method:hn,status:f,logistics_enabled:er,attachments:rr};D.length>0&&(R.assignees=D,R.assigned_user_id=D[0]);const ce=Ra($t);ce!==null?R.created_by=ce:$t.trim()&&(R.created_by=$t.trim()),i.startDate&&(R.start_date=i.startDate),i.dueDate&&(R.due_date=i.dueDate),en!==null&&(R.route_distance_km=en);const we=Ne.trim();if(we){const De=Ra(Ne);R.transport_driver_id=De!==null?De:we}else R.transport_driver_id=null;const Re=rt.trim();Re?R.transport_driver_name=Re:we||(R.transport_driver_name=null);const Te=ge.trim();Te?R.transport_vehicle_id=Te:R.transport_vehicle_id=null;const Ee=Le.trim();Ee?R.transport_vehicle_name=Ee:Te||(R.transport_vehicle_name=null);const Y=We.trim();Y?R.transport_vehicle_registration=Y:Te||(R.transport_vehicle_registration=null),W&&(g==="request"?R.request_id=W:R.task_number=W);const K=gi(Zt);K!==null?R.payment_amount=K:Zt.trim()&&(R.payment_amount=Zt.trim());const be=Ke(pe);be!==null?R.cargo_length_m=be:pe.trim()&&(R.cargo_length_m=pe.trim());const ae=Ke(Ge);ae!==null?R.cargo_width_m=ae:Ge.trim()&&(R.cargo_width_m=Ge.trim());const Ce=Ke(le);Ce!==null?R.cargo_height_m=Ce:le.trim()&&(R.cargo_height_m=le.trim());const _e=Ke(ct);_e!==null?R.cargo_volume_m3=_e:ct.trim()&&(R.cargo_volume_m3=ct.trim());const dt=Ke(kn);dt!==null?R.cargo_weight_kg=dt:kn.trim()&&(R.cargo_weight_kg=kn.trim()),he&&(R.completed_at=he);const xe={};return rt.trim()&&(xe.transportDriverName=rt.trim()),Le.trim()&&(xe.transportVehicleName=Le.trim()),We.trim()&&(xe.transportVehicleRegistration=We.trim()),or&&(xe.photosLink=or),Object.keys(xe).length>0&&(R.draftMeta=xe),R.kind=g,R},[rr,le,pe,ct,kn,Ge,Rt,he,$t,en,g,q,Zt,hn,or,In,er,ye,tt,Ne,rt,nt,ge,Le,We,f,W]);y.useEffect(()=>{var Re,Te;const i=u;if(o&&i){tn.current=null;const Ee=(Re=Tn(i))!=null?Re:i;if(dr.current===Ee)return;dr.current=Ee,qn("/api/v1/tasks/".concat(i)).then(Y=>Y.ok?Y.json():null).then(Y=>{var dt,xe,De,Ht,Dt;if(!Y){dr.current=null;return}const K=Y.task||Y;Pn(zt=>{const ze=[...zt],ft=Y.users||{};return Object.values(ft).forEach(Fe=>{ze.some(Ct=>Ct.telegram_id===Fe.telegram_id)||ze.push(Fe)}),ze}),z(K.task_number||K.request_id);const be=(xe=(dt=K.createdAt)!=null?dt:K.created_at)!=null?xe:null,ae=ma(be),Ce=lt(ae);ie(Ce?Ce.toISOString():ae||(zt=>zt||new Date().toISOString())),Ve(Ks(K.history)),fr(K,Y.users);const _e=(Dt=Tn((Ht=(De=K._id)!=null?De:K.id)!=null?Ht:null))!=null?Dt:null;_e&&(dr.current=_e)});return}dr.current=null,N(h);const v=new Date,{start:_,due:D}=_n(v);ie(Ee=>Ee||v.toISOString()),ue(""),Ve([]),s(null);const k=h==="request"?"/api/v1/tasks/report/summary?kind=request":"/api/v1/tasks/report/summary";tn.current=((Te=tn.current)==null?void 0:Te.kind)===h?tn.current:{kind:h,completed:!1};const R=tn.current;R&&!R.completed&&(R.completed=!0,qn(k).then(Ee=>Ee.ok?Ee.json():{count:0}).then(Ee=>{const Y=String((Ee.count||0)+1).padStart(6,"0"),K=h==="request"?"REQ":"ERM";z("".concat(K,"_").concat(Y))}).catch(()=>{tn.current&&tn.current.kind===h&&(tn.current.completed=!1)})),F(Er(ot)),lr(null);const ce=Gn(_);Wr(ce?Ar(ce):null);const we=[];fe(we),Q(ht),I.current={title:"",taskType:h==="request"?gt:dn,description:"",comment:"",priority:$e,transportType:pt,paymentMethod:Vt,paymentAmount:Er(ot),status:ht,completedAt:"",creator:c?String(c.telegram_id):"",assignees:we,startDate:_,dueDate:D,attachments:[],distanceKm:null,cargoLength:"",cargoWidth:"",cargoHeight:"",cargoVolume:"",cargoWeight:"",transportDriverId:"",transportDriverName:"",transportVehicleId:"",transportVehicleName:"",transportVehicleRegistration:"",showLogistics:!1,photosLink:null,photosChatId:void 0,photosMessageId:void 0},$({start:_,due:D}),et({title:"",description:"",assignees:we,startDate:_,dueDate:D}),at(""),Jt(""),gn(""),Mn(""),Lr(""),Fr(!1),pn(""),re(""),Xt(""),He(""),qe(""),At(Pe)},[o,u,c,dn,gt,$e,pt,Vt,ot,ht,Pe,_n,lt,et,At,$,fr,h]),y.useEffect(()=>{var v;if(o){ur&&Wr(null);return}const i=(v=I.current)==null?void 0:v.startDate;!i||!ur||Ut&&Ut!==i&&Wr(null)},[o,ur,Ut]),y.useEffect(()=>{if(g==="request"){c&&tr(String(c.telegram_id)),Dl().then(i=>{Pn(i)}).catch(()=>{Pn([])});return}T?qn("/api/v1/users").then(i=>i.ok?i.json():[]).then(i=>{Pn(i),c&&tr(String(c.telegram_id))}):c&&(tr(String(c.telegram_id)),Pn([c]))},[c,T,g]),y.useEffect(()=>{if(o){Ln(null);return}let i=!1;return $r(!0),Ml(g).then(v=>{var _;if(!i)if(v){Ln(v);const D=v.payload||{};fr(D);const k=(_=D.draftMeta)!=null?_:{};typeof k.transportDriverName=="string"&&re(k.transportDriverName),typeof k.transportVehicleName=="string"&&He(k.transportVehicleName),typeof k.transportVehicleRegistration=="string"&&qe(k.transportVehicleRegistration),typeof k.photosLink=="string"&&lr(k.photosLink),se(R=>R!=null?R:m("taskDraftLoaded")),ir(!0),vn.current=!0,window.setTimeout(()=>{if(!i)try{bn.current=JSON.stringify(Fn())}catch(R){console.warn("Не удалось зафиксировать состояние черновика",R)}},0)}else Ln(null),vn.current=!0,bn.current=null,ir(!1)}).catch(v=>{i||console.warn("Не удалось загрузить черновик задачи",v)}).finally(()=>{i||$r(!1)}),()=>{i=!0}},[fr,g,o,lr,re,He,qe,m]);const cl=y.useCallback(async()=>{$r(!0);try{await ns(g),Ln(null),se(m("taskDraftCleared")),ir(!1),vn.current=!0;try{bn.current=JSON.stringify(Fn())}catch(i){console.warn("Не удалось сбросить состояние черновика",i)}}catch(i){console.error("Не удалось удалить черновик",i),i instanceof pr?se(m("taskDraftClearFailedWithReason",{reason:i.message})):i instanceof Error&&i.message?se(m("taskDraftClearFailedWithReason",{reason:i.message})):se(m("taskDraftClearFailed"))}finally{$r(!1)}},[Fn,g,m]),ul=Qe(async i=>{var v,_,D,k,R,ce,we,Re,Te,Ee;try{const Y=Gn(G);if(i.startDate&&Y){const X=Gn(i.startDate);if(X){const te=Math.floor(X.getTime()/6e4),yt=Math.floor(Y.getTime()/6e4);if(te<yt){wt("startDate",{type:"validate",message:m("startBeforeCreated")}),se(m("startBeforeCreated"));return}}}const K=I.current,be=(K==null?void 0:K.startDate)||"",ae=(K==null?void 0:K.dueDate)||"",Ce=i.startDate||"",_e=i.dueDate||"",dt=!o;let xe=Ce,De=_e,Ht=!1,Dt=!1,zt=!1,ze=!1;if(dt){const X=_n(Y!=null?Y:void 0),te=!!Ce&&!!be&&Ce===be,yt=!Ce&&!!be;xe=Ce||X.start,te||!Ce&&!be?xe=Ie(new Date):yt&&(xe=Ie(new Date));const Sn=!!_e&&!!ae&&_e===ae;if(De=_e||X.due,!_e&&!ae||Sn){const wn=new Date(xe).getTime(),on=be&&ae?new Date(ae).getTime()-new Date(be).getTime():Pe;Number.isFinite(wn)&&(De=Ie(new Date(wn+on)))}Ht=!0,Dt=!0,zt=!0,ze=!0}else{const X=Ce!==be,te=_e!==ae;X||(xe=be),te||(De=ae),X&&(Ht=!0,zt=!0),te&&(Dt=!0,ze=!0)}let ft=Number.NaN,Fe=Number.NaN;xe&&(ft=new Date(xe).getTime()),De&&(Fe=new Date(De).getTime()),!Number.isNaN(ft)&&!Number.isNaN(Fe)&&Fe<ft&&(De=Ie(new Date(ft+Pe)),Dt=!0,ze=!0,Fe=new Date(De).getTime()),!Number.isNaN(ft)&&!Number.isNaN(Fe)&&At(Fe-ft),Ht&&Ue("startDate",xe),Dt&&Ue("dueDate",De);const Ct=ia(i.assignees);if(Ct.length===0){wt("assignees",{type:"required",message:m("assigneeRequiredError")}),se(m("assigneeRequiredError"));return}const jn=g==="request"?gt:tt,ee={title:i.title,task_type:jn,task_description:i.description,comment:Rt,priority:In,transport_type:nt,payment_method:hn,status:f,created_by:Ra($t),assigned_user_id:Ct[0],assignees:Ct,logistics_enabled:er},Mt=Ne.trim();if(Mt){const X=Number.parseInt(Mt,10);ee.transport_driver_id=Number.isFinite(X)?X:Mt}else ee.transport_driver_id=null;const Yr=rt.trim();Yr?ee.transport_driver_name=Yr:Mt||(ee.transport_driver_name=null);const nn=ge.trim();nn?ee.transport_vehicle_id=nn:ee.transport_vehicle_id=null;const mr=Le.trim();mr?ee.transport_vehicle_name=mr:nn||(ee.transport_vehicle_name=null);const Vn=We.trim();Vn?ee.transport_vehicle_registration=Vn:nn||(ee.transport_vehicle_registration=null),!dt&&ee.created_by===null&&delete ee.created_by,zt&&(ee.start_date=xe||""),ze&&(ee.due_date=De||"");const Un=gi(Zt);if(Un===null){se(m("paymentAmountInvalid"));return}ee.payment_amount=Un;const rn=Ke(pe),an=Ke(Ge),sn=Ke(le),Kr=Ke(kn),yn=rn!==null&&an!==null&&sn!==null?rn*an*sn:Ke(ct);rn!==null?ee.cargo_length_m=rn:o&&(ee.cargo_length_m=""),an!==null?ee.cargo_width_m=an:o&&(ee.cargo_width_m=""),sn!==null?ee.cargo_height_m=sn:o&&(ee.cargo_height_m=""),yn!==null?ee.cargo_volume_m3=yn:o&&(ee.cargo_volume_m3=""),Kr!==null?ee.cargo_weight_kg=Kr:o&&(ee.cargo_weight_kg=""),en!==null&&(ee.route_distance_km=en);const $n={...ee,attachments:rr};let Xr=null;const xn=u!=null?u:"";let _t=xn;if(o&&xn){const X=await ja(xn,$n);if(!X.ok)throw new Error("SAVE_FAILED");const te=await X.json();Xr=te;const yt=(_=(v=te._id)!=null?v:te.id)!=null?_:xn;_t=(k=(D=Tn(yt))!=null?D:yt)!=null?k:""}else{const X=await(g==="request"?kl($n):Pl($n));if(!X)throw new Error("SAVE_FAILED");Xr=X;const te=(ce=(R=X._id)!=null?R:X.id)!=null?ce:_t;_t=(Re=(we=Tn(te))!=null?we:te)!=null?Re:""}let Ae=null;if(_t){l(_t);try{const X=(Te=Tn(_t))!=null?Te:_t;Ae=await qn("/api/v1/tasks/".concat(X)).then(te=>te.ok?te.json():null)}catch(X){Ae=null}}const kt=(Ae==null?void 0:Ae.task)||Ae||Xr;if(kt){fr(kt,Ae==null?void 0:Ae.users);const X=kt.createdAt||((Ee=Ae==null?void 0:Ae.task)==null?void 0:Ee.createdAt);if(X){const Sn=new Date(X);Number.isNaN(Sn.getTime())||ie(Sn.toISOString())}const te=Ae==null?void 0:Ae.task;te!=null&&te.history&&Ve(Ks(te.history));const yt=(te==null?void 0:te.task_number)||(te==null?void 0:te.request_id)||kt.task_number||kt.request_id;yt&&z(yt)}if(se(m(o?"taskUpdated":"taskCreated")),!o)try{await ns(g),Ln(null),ir(!1),vn.current=!0;try{bn.current=JSON.stringify(Fn())}catch(X){console.warn("Не удалось обновить состояние черновика",X)}}catch(X){console.warn("Не удалось удалить сохранённый черновик",X)}kt&&e&&e(kt)}catch(Y){if(console.error(Y),Y instanceof pr){const K=Y.message.trim();se(K?m("taskSaveFailedWithReason",{reason:K}):m("taskSaveFailed"))}else Y instanceof Error&&Y.message?se(m("taskSaveFailedWithReason",{reason:Y.message})):se(m("taskSaveFailed"))}finally{Br(!1)}},i=>{i.assignees&&(Br(!1),se(m("assigneeRequiredError")))}),[Li,se]=y.useState(null),[dl,Da]=y.useState(!1),[fl,Ma]=y.useState(!1),[ml,ka]=y.useState(!1),[Pa,Gr]=y.useState(!1),[pl,hl]=y.useState("");y.useEffect(()=>{!Qt&&Na&&Aa(!1),!Qt&&Pa&&Gr(!1)},[Qt,Pa,Na]),y.useEffect(()=>{if(o||!O)return;const i=Fn(),v=JSON.stringify(i);if(vn.current){vn.current=!1,bn.current=v;return}if(bn.current===v)return;ir(!0);const _=window.setTimeout(()=>{const D=sr.current+1;sr.current=D,_i(!0),Ll(g,i).then(k=>{sr.current===D&&(bn.current=v,Ln(k))}).catch(k=>{sr.current===D&&(console.error("Не удалось сохранить черновик",k),k instanceof pr?se(m("taskDraftSaveFailedWithReason",{reason:k.message})):k instanceof Error&&k.message?se(m("taskDraftSaveFailedWithReason",{reason:k.message})):se(m("taskDraftSaveFailed")))}).finally(()=>{sr.current===D&&_i(!1)})},800);return()=>{window.clearTimeout(_)}},[Fn,O,g,o,m,Dr]);const gl=async()=>{const i=u;i&&(await jl(i),e&&e(null),t(),se(m("taskDeleted")))},bl=()=>{var v;const i=I.current;i&&(ve({title:i.title,description:i.description,assignees:i.assignees,startDate:i.startDate,dueDate:i.dueDate}),Tt(i.taskType),mn(i.comment),Kt(i.priority),Zn(i.transportType),pn(i.transportDriverId),re(i.transportDriverName),Xt(i.transportVehicleId),He(i.transportVehicleName),qe(i.transportVehicleRegistration),Dn(i.paymentMethod),F(i.paymentAmount),Q(i.status),C(i.status),ue(i.completedAt),fe(i.assignees),tr(i.creator),at(i.cargoLength),Jt(i.cargoWidth),gn(i.cargoHeight),Mn(i.cargoVolume),Lr(i.cargoWeight),ar(En([],i.attachments)),lr((v=ri(i.photosChatId,i.photosMessageId))!=null?v:typeof i.photosLink=="string"?i.photosLink:null),_a(i.distanceKm),Fr(!!i.showLogistics),vn.current=!0)},vl=async()=>{const i=u;if(!i)return;const v=f;C("В работе");try{const[_]=await Promise.all([ja(i,{status:"В работе"}).then(D=>D.ok?D.json():null),is(i,"В работе")]);_?(e&&e(_),I.current&&(I.current.status="В работе"),Q("В работе")):(C(v),se(m("taskSaveFailed")))}catch(_){if(console.error(_),C(v),_ instanceof pr){const D=_.message.trim();se(D?m("taskSaveFailedWithReason",{reason:D}):m("taskSaveFailed"))}else _ instanceof Error&&_.message?se(m("taskSaveFailedWithReason",{reason:_.message})):se(m("taskSaveFailed"))}finally{Ni("accept")}},yl=async i=>{var D;const v=u;if(!v)return;if(!Qt){se(m("taskSaveFailed"));return}const _=f;C("Выполнена");try{const[k]=await Promise.all([ja(v,{status:"Выполнена",completed_at:new Date().toISOString(),completion_result:i}).then(R=>R.ok?R.json():null),is(v,"Выполнена")]);if(k){const R=ma((D=k==null?void 0:k.completed_at)!=null?D:k==null?void 0:k.completedAt),ce=new Date().toISOString();ue(R||ce),I.current&&(I.current.status="Выполнена",I.current.completedAt=R||ce),Q("Выполнена"),e&&e(k)}else C(_),se(m("taskSaveFailed"))}catch(k){if(console.error(k),C(_),k instanceof pr){const R=k.message.trim();se(R?m("taskSaveFailedWithReason",{reason:R}):m("taskSaveFailed"))}else k instanceof Error&&k.message?se(m("taskSaveFailedWithReason",{reason:k.message})):se(m("taskSaveFailed"))}finally{Aa(!1),Ni("done")}},La=Number($t),Fi=Number.isFinite(La)&&$t.trim().length>0,xl=Fi?ki(La):"",Sl=y.useMemo(()=>{const i=[m("task")];W&&i.push(W);const v=G?mm(G):"";return v&&i.push(v),i.join(" ").trim()},[G,W,m]),wl=y.useCallback(i=>{i.target===i.currentTarget&&t()},[t]);if(typeof document>"u")return null;const ji=document.getElementById("task-start"),Vi=document.getElementById("task-end");return ji&&ji.value.trim().length,Vi&&Vi.value.trim().length,Zs.createPortal(d.jsxs("div",{className:"fixed inset-0 z-[1000]",children:[d.jsx("div",{"aria-hidden":"true",onClick:wl,className:"absolute inset-0 h-full w-full cursor-default bg-slate-950/70 backdrop-blur-sm"}),d.jsx("div",{className:"pointer-events-none absolute inset-0",children:d.jsx("div",{className:"flex min-h-full items-start justify-center p-4 sm:p-6",children:d.jsxs("div",{className:"pointer-events-auto relative mx-auto w-full max-w-6xl space-y-6 overflow-y-auto rounded-2xl bg-white p-4 shadow-lg sm:p-6",style:{WebkitOverflowScrolling:"touch",maxHeight:"calc(100vh - 2rem)"},role:"dialog","aria-modal":"true","aria-labelledby":Je,children:[d.jsxs("div",{className:"pr-16",children:[d.jsx("h3",{id:Je,className:"text-lg leading-snug font-semibold break-words text-gray-900 sm:overflow-hidden sm:text-ellipsis sm:whitespace-nowrap",children:Sl}),Fi?d.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-1 text-sm text-gray-600",children:[d.jsx("span",{children:m("taskCreatedBy")}),d.jsx(Hl,{employeeId:La,className:zl,children:xl})]}):d.jsx("span",{className:"mt-1 block text-sm text-gray-500",children:m("taskCreatorUnknown")})]}),d.jsxs("div",{className:"absolute top-4 right-4 flex flex-wrap justify-end gap-2",children:[o&&!O&&Ea&&d.jsx("button",{type:"button",onClick:()=>A(!0),className:"flex h-10 w-10 items-center justify-center rounded-full text-sm font-semibold text-gray-600 transition hover:bg-gray-100",title:m("edit"),"aria-label":m("edit"),children:"✎"}),d.jsx("button",{type:"button",onClick:bl,className:"flex h-10 w-10 items-center justify-center rounded-full text-gray-600 transition hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-60",disabled:!O,title:m("reset"),"aria-label":m("reset"),children:d.jsx(Gl,{className:"h-5 w-5"})}),d.jsx("button",{type:"button",onClick:t,className:"flex h-10 w-10 items-center justify-center rounded-full text-gray-600 transition hover:bg-gray-100",title:m("close"),"aria-label":m("close"),children:d.jsx(rs,{className:"h-5 w-5"})})]}),d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1.8fr)_minmax(0,1fr)] xl:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[d.jsxs("div",{className:"space-y-5",children:[d.jsx("div",{children:d.jsx(ts,{name:"assignees",control:B,render:({field:i})=>{var v,_;return d.jsx(em,{label:m("assignees"),users:Ca,value:Array.isArray(i.value)?i.value:[],onChange:D=>{fe(D),i.onChange(D)},onBlur:i.onBlur,disabled:!O,required:!0,placeholder:m("assigneeSelectPlaceholder"),hint:jt.assignees?void 0:m("assigneeSelectHint"),error:(_=(v=jt.assignees)==null?void 0:v.message)!=null?_:null})}})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:m("taskTitle")}),d.jsx("textarea",{...il,ref:ol,rows:1,placeholder:m("title"),className:"focus:ring-brand-200 focus:border-accentPrimary min-h-[44px] w-full resize-none rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-[0.95rem] font-semibold focus:ring focus:outline-none sm:text-base",disabled:!O,onKeyDown:i=>{i.key==="Enter"&&i.preventDefault()}}),jt.title&&d.jsx("p",{className:"text-sm text-red-600",children:jt.title.message})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:m("taskSection")}),d.jsx(ts,{name:"description",control:B,render:({field:i})=>d.jsx(ys,{value:i.value||"",onChange:i.onChange,readOnly:!O})})]}),d.jsxs("div",{className:"space-y-4 rounded-xl border border-dashed border-gray-300 p-5",children:[d.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium",children:[d.jsx("input",{type:"checkbox",id:"task-show-logistics",name:"showLogistics",className:"h-4 w-4",checked:er,onChange:i=>ll(i.target.checked),disabled:!O}),m("logisticsToggle")]}),er&&d.jsxs("div",{className:"grid gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4",children:[d.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-google-maps",children:m("googleMapsButton")}),d.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3",children:[d.jsx("a",{id:"task-google-maps",href:"https://www.google.com/maps",target:"_blank",rel:"noopener noreferrer",className:hr(as({variant:"default",size:"sm"}),"rounded-2xl px-3 shrink-0 whitespace-nowrap h-10"),children:"Google Maps"}),d.jsx("span",{className:"text-xs text-slate-600",children:m("googleMapsHint")})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-distance",children:m("distance")}),d.jsx("input",{id:"task-distance",name:"distanceKm",value:en!=null?en:"",onChange:i=>_a(Ke(i.target.value)),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",placeholder:"0",inputMode:"decimal",disabled:!O})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-transport-type",children:m("transportType")}),d.jsx("select",{id:"task-transport-type",value:nt,onChange:i=>Zn(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",disabled:!O,children:Yo.map(i=>d.jsx("option",{value:i,children:i},i))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-cargo-length",children:m("cargoLength")}),d.jsx("input",{id:"task-cargo-length",name:"cargoLength",value:pe,onChange:i=>at(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",placeholder:"0",inputMode:"decimal",disabled:!O})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-cargo-width",children:m("cargoWidth")}),d.jsx("input",{id:"task-cargo-width",name:"cargoWidth",value:Ge,onChange:i=>Jt(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",placeholder:"0",inputMode:"decimal",disabled:!O})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-cargo-height",children:m("cargoHeight")}),d.jsx("input",{id:"task-cargo-height",name:"cargoHeight",value:le,onChange:i=>gn(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",placeholder:"0",inputMode:"decimal",disabled:!O})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-cargo-volume",children:m("cargoVolume")}),d.jsx("input",{id:"task-cargo-volume",name:"cargoVolume",value:ct,readOnly:!0,className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-gray-100 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",placeholder:"—"})]}),d.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-cargo-weight",children:m("cargoWeight")}),d.jsx("input",{id:"task-cargo-weight",name:"cargoWeight",value:kn,onChange:i=>Lr(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",placeholder:"0",inputMode:"decimal",disabled:!O})]}),d.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[d.jsx("label",{className:"block text-sm font-medium",children:m("paymentMethod")}),d.jsx("select",{value:hn,onChange:i=>Dn(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",disabled:!O,children:Ko.map(i=>d.jsx("option",{value:i,children:i},i))})]}),d.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-payment-amount",children:m("paymentAmount")}),d.jsxs("div",{className:"focus-within:border-accentPrimary focus-within:ring-brand-200 flex items-center rounded-md border border-slate-200 bg-slate-50 text-sm transition focus-within:ring ".concat(O?"":"opacity-80"),children:[d.jsx("input",{id:"task-payment-amount",name:"paymentAmount",value:Zt,onChange:i=>F(i.target.value),onBlur:i=>F(Er(i.target.value)),className:"flex-1 bg-transparent px-2.5 py-1.5 text-sm focus:outline-none disabled:cursor-not-allowed",placeholder:"0",inputMode:"decimal",disabled:!O}),d.jsx("span",{className:"px-2 text-sm font-semibold text-slate-500",children:"грн"})]}),d.jsx("p",{className:"mt-1 text-xs text-slate-500",children:m("paymentAmountFormat")})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:m("comment")}),d.jsx(ys,{value:Rt,onChange:mn,readOnly:!O})]}),rr.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium",children:m("attachments")}),d.jsx("ul",{className:"flex flex-wrap gap-3",children:rr.map(i=>{var ce;const v=Nr(i.thumbnailUrl),_=(ce=Nr(i.url))!=null?ce:i.url,D=_.split(/[?#]/,1)[0]||_,k=!!v||/\.(png|jpe?g|gif|webp|bmp|svg)$/i.test(D),R=v!=null?v:_;return d.jsxs("li",{className:"flex flex-col items-start gap-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[k?d.jsx("button",{type:"button",onClick:()=>Ur({name:i.name||"Изображение",url:_}),className:"group relative flex h-20 w-20 items-center justify-center overflow-hidden rounded-lg border border-slate-200 bg-slate-100 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring focus:ring-indigo-200",title:i.name||"Изображение",children:d.jsx("img",{srcSet:"".concat(R," 1x, ").concat(_," 2x"),sizes:"80px",src:R,alt:i.name||"Изображение",className:"h-full w-full object-cover transition group-hover:scale-105"})}):d.jsx("a",{href:i.url,target:"_blank",rel:"noopener",className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-sm text-accentPrimary transition hover:bg-slate-100",children:i.name||"Файл"}),O&&d.jsx(xt,{type:"button",variant:"ghost",className:"px-0 text-red-500",onClick:()=>Pi(i),children:m("delete")})]}),i.name?d.jsx("span",{className:"max-w-[12rem] truncate text-xs text-slate-500",children:i.name}):null]},i.url)})})]}),or?d.jsx("div",{children:d.jsx("a",{href:or,target:"_blank",rel:"noopener noreferrer",className:hr(as({variant:"outline",size:"pill"}),"inline-flex w-fit"),children:"Фото"})}):null,d.jsx(nm,{disabled:!sl,onUploaded:i=>ar(v=>En(v,[i])),onRemove:i=>Pi(i),taskId:u}),O&&!Di?d.jsx("p",{className:"mt-1 text-xs text-slate-500",children:m("fillTitleToUpload")}):null,d.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[o&&d.jsx(xt,{type:"button",variant:"outline",size:"pill",onClick:()=>st(!0),children:m("history")}),d.jsxs("div",{className:"ml-auto flex flex-wrap gap-2",children:[O&&!o&&(Zo||el)&&d.jsx(xt,{variant:"ghost",size:"pill",onClick:cl,disabled:Jo||Qo,children:m("clearDraft")}),o&&S&&O&&d.jsx(xt,{variant:"destructive",size:"pill",onClick:()=>Ma(!0),children:m("delete")}),O&&d.jsx(xt,{variant:"default",size:"pill",disabled:Ai,onClick:()=>Da(!0),children:Ai?d.jsx($l,{}):m(o?"save":"create")})]})]}),O&&d.jsx(Jr,{open:dl,message:m(o?"saveChangesQuestion":"createTaskQuestion"),confirmText:m(o?"save":"create"),cancelText:m("cancel"),onConfirm:async()=>{Da(!1),Br(!0);try{await ul()}catch(i){console.warn("Не удалось сохранить задачу",i),Br(!1)}},onCancel:()=>Da(!1)})]}),d.jsxs("aside",{className:"space-y-5 rounded-xl border border-slate-200 bg-slate-50/80 p-5",children:[d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-dialog-start-date",children:m("startDate")}),d.jsx("input",{id:"task-dialog-start-date",type:"datetime-local",...oe("startDate"),min:Yt(G),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-white px-2.5 py-1.5 text-sm focus:ring focus:outline-none",disabled:!O}),!o&&ur?d.jsx("p",{className:"mt-1 text-xs font-medium text-amber-600",children:m("startDateAutoNotice",{date:ur})}):null]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-dialog-due-date",children:m("dueDate")}),d.jsx("input",{id:"task-dialog-due-date",type:"datetime-local",...oe("dueDate",{onChange:On}),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-white px-2.5 py-1.5 text-sm focus:ring focus:outline-none",disabled:!O})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:m("taskType")}),d.jsx("select",{value:tt,onChange:i=>Tt(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-white px-2.5 py-1.5 text-sm focus:ring focus:outline-none",disabled:!O||g==="request",children:(g==="request"?cn:un).map(i=>d.jsx("option",{value:i,children:i},i))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:m("priority")}),d.jsx("select",{value:In,onChange:i=>Kt(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-white px-2.5 py-1.5 text-sm focus:ring focus:outline-none",disabled:!O,children:Go.map(i=>d.jsx("option",{value:i,children:i},i))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",children:m("status")}),d.jsx("select",{value:f,onChange:i=>C(i.target.value),className:"focus:ring-brand-200 focus:border-accentPrimary w-full rounded-md border border-slate-200 bg-white px-2.5 py-1.5 text-sm focus:ring focus:outline-none",disabled:!O,children:Xo.map(i=>d.jsx("option",{value:i,children:i},i))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium",htmlFor:"task-dialog-completed-at",children:m("actualTime")}),d.jsx("input",{type:"datetime-local",id:"task-dialog-completed-at",name:"completedAtDisplay",value:he?Yt(he):"",readOnly:!0,placeholder:"—",className:"w-full rounded-md border border-slate-200 bg-slate-100 px-2.5 py-1.5 text-sm text-slate-700 focus:outline-none"})]})]}),rl&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx(Ys,{label:m("transportDriver"),options:tl,value:Ne||null,onChange:i=>{var _,D;const v=(_=i==null?void 0:i.value)!=null?_:"";if(pn(v),!v){re("");return}re((D=i==null?void 0:i.label)!=null?D:v)},disabled:!Ia||!ut,placeholder:m("transportDriverPlaceholder")}),Nn&&ut?d.jsx("p",{className:"mt-1 text-xs text-slate-500",children:m("transportOptionsLoading")}):null,Jn?d.jsxs("p",{className:"mt-1 text-xs text-red-600",children:[Jn,Ia?d.jsx("button",{type:"button",className:"ml-2 text-accentPrimary underline decoration-dotted",onClick:()=>{Rn(!1),Oa(!0)},children:m("transportOptionsReload")}):null]}):null]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx(Ys,{label:m("transportVehicle"),options:nl,value:ge||null,onChange:i=>{var D,k;const v=(D=i==null?void 0:i.value)!=null?D:"";if(Xt(v),!v){He(""),qe("");return}const _=cr.find(R=>R.id===v);_?(He(_.name),qe(_.registrationNumber)):(He((k=i==null?void 0:i.label)!=null?k:v),qe(""))},disabled:!Ia||!ut,placeholder:m("transportVehiclePlaceholder")}),!ut&&Le?d.jsx("p",{className:"mt-1 text-xs text-slate-500",children:We?"".concat(Le," (").concat(We,")"):Le}):null]})]})]})]}),S&&d.jsx(Jr,{open:fl,message:m("deleteTaskQuestion"),confirmText:m("delete"),cancelText:m("cancel"),onConfirm:()=>{Ma(!1),gl()},onCancel:()=>Ma(!1)}),o&&!O&&qo&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:hr("mt-2 grid gap-2",Qt?"grid-cols-2":"grid-cols-1"),children:[d.jsx(xt,{className:hr("rounded-lg",Ii==="accept"&&"ring-accentPrimary ring-2"),variant:f==="В работе"?"success":"default",onClick:()=>ka(!0),children:m("accept")}),Qt?d.jsx(xt,{className:hr("rounded-lg",Ii==="done"&&"ring-accentPrimary ring-2"),variant:f==="Выполнена"?"success":"default",onClick:()=>Aa(i=>!i),children:m("done")}):null]}),Qt&&Na&&d.jsx(d.Fragment,{children:d.jsxs("select",{onChange:i=>{const v=i.target.value;v&&(hl(v),Gr(!0))},className:"focus:ring-brand-200 focus:border-accentPrimary mt-1 mb-2 w-full rounded-md border border-slate-200 bg-slate-50 px-2.5 py-1.5 text-sm focus:ring focus:outline-none",children:[d.jsx("option",{value:"",children:m("selectOption")}),al.map(i=>d.jsx("option",{value:i.value,children:i.label},i.value))]})}),d.jsx(Jr,{open:ml,message:m("acceptTaskQuestion"),confirmText:m("accept"),cancelText:m("cancel"),onConfirm:()=>{ka(!1),vl()},onCancel:()=>ka(!1)}),Qt?d.jsx(Jr,{open:Pa,message:m("completeTaskQuestion"),confirmText:m("done"),cancelText:m("cancel"),onConfirm:()=>{Gr(!1),yl(pl)},onCancel:()=>Gr(!1)}):null]})]})]})})}),Vr&&d.jsx("div",{className:"fixed inset-0 z-[1150] flex items-center justify-center bg-slate-950/80 p-4",onClick:()=>Ur(null),children:d.jsxs("div",{className:"relative max-h-[85vh] w-full max-w-5xl",onClick:i=>i.stopPropagation(),children:[d.jsx("button",{type:"button",className:"absolute right-4 top-4 rounded-full bg-black/60 p-2 text-white transition hover:bg-black/80 focus:outline-none focus:ring focus:ring-white/40",onClick:()=>Ur(null),"aria-label":m("close"),children:d.jsx(rs,{className:"h-6 w-6"})}),d.jsx("img",{src:Vr.url,alt:Vr.name,className:"max-h-[75vh] w-full rounded-xl object-contain shadow-2xl"}),d.jsx("p",{className:"mt-3 text-center text-sm text-white/80",children:Vr.name})]})}),Me&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:d.jsxs("div",{className:"max-h-[80vh] w-full max-w-lg overflow-y-auto rounded border-2 border-red-500 bg-white p-4",children:[d.jsx("h4",{className:"mb-2 font-semibold",children:m("history")}),d.jsx("ul",{className:"space-y-2 text-xs sm:text-sm",children:me.length===0?d.jsx("li",{className:"text-gray-500",children:m("historyEmpty")}):me.map((i,v)=>{const _=pm(i.changed_at),D=ki(i.changed_by),k=i.changes.from||{},R=i.changes.to||{},ce=k.status,we=R.status,Re=Bn(ce),Te=Bn(we),Ee=Re!=="—"&&Te!=="—"&&Re!==Te,Y=Array.from(new Set([...Object.keys(k),...Object.keys(R)])),K=Ee?Y.filter(ae=>ae!=="status"):Y,be=K.some(ae=>{const Ce=Bn(k[ae]),_e=Bn(R[ae]);return Ce!==_e});return d.jsxs("li",{className:"rounded border border-gray-200 bg-white p-2 shadow-sm",children:[d.jsxs("div",{className:"flex flex-wrap items-baseline gap-1 text-xs font-medium text-gray-700 sm:text-sm",children:[d.jsx("span",{children:_||"—"}),d.jsx("span",{className:"text-gray-500",children:D})]}),Ee&&d.jsxs("p",{className:"mt-1 flex flex-wrap items-center gap-1 text-xs text-gray-700 sm:text-sm",children:[d.jsx("span",{children:"Изменил статус с"}),sa("status",Re,"plain"),d.jsx("span",{children:"на"}),sa("status",Te,"plain")]}),K.length>0&&d.jsx("ul",{className:"mt-1 space-y-0.5 text-xs text-gray-700 sm:text-sm",children:K.map(ae=>{const Ce=Bn(k[ae]),_e=Bn(R[ae]);return Ce===_e?null:d.jsxs("li",{className:"flex flex-wrap items-baseline gap-1",children:[d.jsxs("span",{className:"font-medium text-gray-600",children:[ae,":"]}),sa(ae,Ce,"prev"),d.jsx("span",{className:"text-gray-400",children:"→"}),sa(ae,_e,"next")]},ae)})}),!Ee&&!be&&d.jsx("p",{className:"mt-1 text-xs text-gray-500 sm:text-sm",children:"Детали изменений отсутствуют"})]},"".concat(i.changed_at,"-").concat(i.changed_by,"-").concat(v))})}),d.jsx(xt,{className:"mt-2 rounded-lg",onClick:()=>st(!1),children:m("close")})]})}),d.jsx(Fl,{open:Li!==null,message:Li||"",onClose:()=>se(null),closeText:m("close")})]}),document.body)}const Dm=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"}));export{xm as T,U as _,Dm as a};
//# sourceMappingURL=TaskDialog-CppwfZMN.js.map
