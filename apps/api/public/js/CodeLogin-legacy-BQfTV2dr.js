!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function u(t,o,i,a){var u=o&&o.prototype instanceof l?o:l,f=Object.create(u.prototype);return e(f,"_invoke",function(t,e,o){var i,a,u,l=0,f=o||[],s=!1,p={p:0,n:0,v:r,a:y,f:y.bind(r,4),d:function(t,e){return i=t,a=0,u=r,p.n=e,c}};function y(t,e){for(a=t,u=e,n=0;!s&&l&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,d=i[2];t>3?(o=d===e)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=r):i[0]<=y&&((o=t<2&&y<i[1])?(a=0,p.v=e,p.n=i[1]):y<d&&(o=t<3||i[0]>e||e>d)&&(i[4]=t,i[5]=e,p.n=d,a=0))}if(o||t>1)return c;throw s=!0,e}return function(o,f,d){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&y(f,d),a=f,u=d;(n=a<2?r:u)||!s;){i||(a?a<3?(a>1&&(p.n=-1),y(a,u)):p.n=u:p.v=u);try{if(l=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=r}else if((n=(s=p.n<0)?u:t.call(e,p))!==c)break}catch(n){i=r,a=1,u=n}finally{l=1}}return{value:n,done:s}}}(t,i,a),!0),f}var c={};function l(){}function f(){}function s(){}n=Object.getPrototypeOf;var p=[][i]?n(n([][i]())):(e(n={},i,function(){return this}),n),y=s.prototype=l.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,e(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t}return f.prototype=s,e(y,"constructor",s),e(s,"constructor",f),f.displayName="GeneratorFunction",e(s,a,"GeneratorFunction"),e(y),e(y,a,"Generator"),e(y,i,function(){return this}),e(y,"toString",function(){return"[object Generator]"}),(t=function(){return{w:u,m:d}})()}function e(t,r,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}e=function(t,r,n,o){function a(r,n){e(t,r,function(t){return this._invoke(r,n,t)})}r?i?i(t,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[r]=n:(a("next",0),a("throw",1),a("return",2))},e(t,r,n,o)}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}System.register(["./index-legacy-CEOCQCnd.js","./vendor-legacy-B8gM1TaO.js","./useToast-legacy-CJ_TNtAI.js","./App-legacy-QJVPl7Ns.js"],function(e,r){"use strict";var i,a,u,c,l;return{setters:[function(t){i=t.j},function(t){a=t.b,u=t.i},function(t){c=t.u},function(t){l=t.h}],execute:function(){e("default",function(){var e=o(a.useState(""),2),r=e[0],f=e[1],s=o(a.useState(""),2),p=s[0],y=s[1],d=o(a.useState(!1),2),h=d[0],v=d[1],m=c().addToast,b=o(u(),1)[0].get("expired");function g(){return(g=n(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:return null==n||n.preventDefault(),t.n=1,l("/api/v1/auth/send_code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telegramId:Number(r)})});case 1:t.v.ok?(v(!0),m("Код отправлен")):m("Не удалось отправить код","error");case 2:return t.a(2)}},e)}))).apply(this,arguments)}function j(){return(j=n(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:return null==n||n.preventDefault(),t.n=1,l("/api/v1/auth/verify_code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telegramId:Number(r),code:p})});case 1:t.v.ok?window.location.href="/":m("Неверный код","error");case 2:return t.a(2)}},e)}))).apply(this,arguments)}return a.useEffect(function(){b&&m("Сессия истекла, войдите снова","error")},[b,m]),i.jsxs("form",{className:"flex flex-col gap-2 p-4",onSubmit:h?function(t){return j.apply(this,arguments)}:function(t){return g.apply(this,arguments)},children:[i.jsx("input",{id:"code-login-telegram-id",name:"telegramId",className:"border p-2",placeholder:"Telegram ID",value:r,onChange:function(t){return f(t.target.value)}}),i.jsx("a",{className:"text-primary underline",href:"https://telegram.me/userinfobot",target:"_blank",rel:"noopener",children:"Узнать свой ID через @userinfobot"}),h&&i.jsx("input",{id:"code-login-code",name:"verificationCode",className:"border p-2",placeholder:"Код",value:p,onChange:function(t){return y(t.target.value)}}),i.jsx("button",{type:"submit",className:"bg-primary p-2 text-white",children:h?"Войти по коду":"Отправить код"})]})})}}})}();
//# sourceMappingURL=CodeLogin-legacy-BQfTV2dr.js.map
