{"version":3,"file":"taskColumns-legacy-DEYfZPSc.js","sources":["../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/QuestionMarkCircleIcon.js","../../../web/src/columns/taskColumns.tsx","../../../web/src/columns/taskDeadline.ts"],"sourcesContent":["import * as React from \"react\";\nfunction QuestionMarkCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(QuestionMarkCircleIcon);\nexport default ForwardRef;","// Конфигурация колонок задач для React Table\n// Модули: React, @tanstack/react-table, heroicons, EmployeeLink\nimport React from 'react';\nimport type { ColumnDef } from '@tanstack/react-table';\nimport { PROJECT_TIMEZONE, PROJECT_TIMEZONE_LABEL, type Task } from 'shared';\nimport { QuestionMarkCircleIcon } from '@heroicons/react/20/solid';\nimport EmployeeLink from '../components/EmployeeLink';\nimport { getDeadlineState, type DeadlineState } from './taskDeadline';\nimport type { User as AppUser } from '../types/user';\n\n// Оформление бейджей статусов и приоритетов на дизайн-токенах\nconst badgeBaseClass =\n  'inline-flex min-w-0 items-center gap-0.5 whitespace-nowrap rounded-full px-1.5 py-0.5 text-center text-[0.66rem] font-semibold uppercase tracking-wide shadow-xs';\nconst badgeTextClass = 'text-black dark:text-white';\n\nconst buildBadgeClass = (tones: string, extraClass = '') =>\n  [badgeBaseClass, 'transition-colors', badgeTextClass, extraClass, tones]\n    .filter(Boolean)\n    .join(' ');\n\nconst focusableBadgeClass =\n  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background';\n\nconst pillBadgeBaseClass =\n  'inline-flex max-w-full min-w-0 items-center gap-0.5 whitespace-nowrap rounded-full px-1.5 py-0.5 text-left text-[0.7rem] font-semibold leading-tight tracking-normal shadow-xs sm:px-1.5 sm:text-[0.76rem]';\n\nconst dateBadgeClass = `${pillBadgeBaseClass} font-mono normal-case ${badgeTextClass} ring-1 ring-slate-500/30 bg-slate-500/10 dark:bg-slate-500/20 dark:ring-slate-400/30`;\n\nconst dateBadgeTimeClass =\n  'text-[0.65rem] font-semibold text-slate-500 dark:text-slate-200';\n\nconst numberBadgeClass = `${pillBadgeBaseClass} justify-center font-mono uppercase tracking-[0.18em] text-[0.68rem] ${badgeTextClass} ring-1 ring-slate-500/30 bg-slate-500/10 dark:bg-slate-500/20 dark:ring-slate-400/30`;\n\nconst titleBadgeClass = `${pillBadgeBaseClass} justify-start normal-case ${badgeTextClass} ring-1 ring-indigo-500/40 bg-indigo-500/15 dark:bg-indigo-400/25 dark:ring-indigo-300/45`;\n\nexport const creatorBadgeClass = `${pillBadgeBaseClass} w-full max-w-full justify-start normal-case ${badgeTextClass} ring-1 ring-blue-500/40 bg-blue-500/15 dark:bg-blue-400/20 dark:ring-blue-300/45`;\n\nconst assigneeBadgeClass = `${pillBadgeBaseClass} normal-case ${badgeTextClass} ring-1 ring-violet-500/35 bg-violet-500/20 dark:bg-violet-400/30 dark:ring-violet-300/45`;\n\nexport const fallbackBadgeClass = buildBadgeClass(\n  'bg-muted/60 ring-1 ring-muted-foreground/30 dark:bg-slate-700/60 dark:ring-slate-500/35',\n);\n\nconst locationBadgeClass = `${pillBadgeBaseClass} normal-case ${badgeTextClass} ring-1 ring-emerald-500/30 bg-emerald-500/15 dark:bg-emerald-400/20 dark:ring-emerald-300/30`;\n\nconst locationLinkBadgeClass = `${locationBadgeClass} ${focusableBadgeClass} no-underline underline-offset-4 hover:underline`;\n\nconst statusBadgeClassMap: Record<Task['status'], string> = {\n  Новая: buildBadgeClass(\n    'bg-sky-500/20 ring-1 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45',\n  ),\n  'В работе': buildBadgeClass(\n    'bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45',\n  ),\n  Выполнена: buildBadgeClass(\n    'bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45',\n  ),\n  Отменена: buildBadgeClass(\n    'bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45',\n  ),\n};\n\nconst urgentPriorityBadgeClass = buildBadgeClass(\n  'bg-accent/80 ring-1 ring-destructive/40 dark:bg-accent/60 dark:ring-destructive/40',\n);\n\nconst highPriorityBadgeClass = buildBadgeClass(\n  'bg-accent/75 ring-1 ring-primary/40 dark:bg-accent/55 dark:ring-primary/40',\n);\n\nconst normalPriorityBadgeClass = buildBadgeClass(\n  'bg-accent/65 ring-1 ring-primary/30 dark:bg-accent/45 dark:ring-primary/30',\n);\n\nconst lowPriorityBadgeClass = buildBadgeClass(\n  'bg-accent/50 ring-1 ring-primary/20 dark:bg-accent/35 dark:ring-primary/20',\n);\n\nconst priorityBadgeClassMap: Record<string, string> = {\n  срочно: buildBadgeClass(\n    'bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45',\n  ),\n  'в течение дня': buildBadgeClass(\n    'bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45',\n  ),\n  'до выполнения': buildBadgeClass(\n    'bg-slate-500/25 ring-1 ring-slate-500/45 dark:bg-slate-400/25 dark:ring-slate-300/45',\n    'normal-case',\n  ),\n};\n\nconst hasOwn = <T extends Record<PropertyKey, unknown>>(\n  obj: T,\n  key: PropertyKey,\n): key is keyof T => Object.prototype.hasOwnProperty.call(obj, key);\n\nexport const getStatusBadgeClass = (value: string) => {\n  if (hasOwn(statusBadgeClassMap, value)) {\n    return statusBadgeClassMap[value];\n  }\n  return null;\n};\n\nexport const getPriorityBadgeClass = (value: string) => {\n  const normalized = value.trim().toLowerCase();\n  if (!normalized) {\n    return null;\n  }\n  if (hasOwn(priorityBadgeClassMap, normalized)) {\n    return priorityBadgeClassMap[normalized];\n  }\n  if (/сроч|urgent/.test(normalized)) {\n    return urgentPriorityBadgeClass;\n  }\n  if (/высок|повыш|high/.test(normalized)) {\n    return highPriorityBadgeClass;\n  }\n  if (/низк|бесср|без\\s+срок|до\\s+выполн|low|minor/.test(normalized)) {\n    return lowPriorityBadgeClass;\n  }\n  if (/обыч|дня|сутк|norm|stand/.test(normalized)) {\n    return normalPriorityBadgeClass;\n  }\n  return null;\n};\n\nconst normalizePriorityLabel = (value: string) => {\n  const trimmed = value.trim();\n  if (!trimmed) {\n    return trimmed;\n  }\n  if (/^бессроч/i.test(trimmed)) {\n    return 'До выполнения';\n  }\n  return trimmed;\n};\n\nconst completionNoteTextClass =\n  'text-[11px] font-medium text-slate-600 dark:text-slate-300';\n\nconst typeBadgeClassMap: Record<string, string> = {\n  доставить: buildBadgeClass(\n    'bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45',\n  ),\n  купить: buildBadgeClass(\n    'bg-violet-500/20 ring-1 ring-violet-500/40 dark:bg-violet-400/25 dark:ring-violet-300/45',\n  ),\n  выполнить: buildBadgeClass(\n    'bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45',\n  ),\n  построить: buildBadgeClass(\n    'bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45',\n  ),\n  починить: buildBadgeClass(\n    'bg-orange-500/20 ring-1 ring-orange-500/40 dark:bg-orange-400/25 dark:ring-orange-300/45',\n  ),\n};\n\nexport const getTypeBadgeClass = (value: string) => {\n  const normalized = value.trim().toLowerCase();\n  if (!normalized) {\n    return null;\n  }\n  if (hasOwn(typeBadgeClassMap, normalized)) {\n    return typeBadgeClassMap[normalized];\n  }\n  if (/стро|монтаж/.test(normalized)) {\n    return typeBadgeClassMap['построить'];\n  }\n  if (/ремонт|чин/.test(normalized)) {\n    return typeBadgeClassMap['починить'];\n  }\n  if (/закуп|покуп|приобр/.test(normalized)) {\n    return typeBadgeClassMap['купить'];\n  }\n  if (/достав|курьер/.test(normalized)) {\n    return typeBadgeClassMap['доставить'];\n  }\n  if (/исполн|выполн/.test(normalized)) {\n    return typeBadgeClassMap['выполнить'];\n  }\n  return null;\n};\n\nconst parseDistance = (value: unknown) => {\n  if (typeof value === 'number') {\n    return Number.isFinite(value) ? value : null;\n  }\n  if (typeof value === 'string') {\n    const trimmed = value.trim();\n    if (!trimmed) {\n      return null;\n    }\n    const normalized = Number(trimmed.replace(/\\s+/g, '').replace(/,/g, '.'));\n    return Number.isFinite(normalized) ? normalized : null;\n  }\n  return null;\n};\n\nconst formatDistanceLabel = (value: unknown) => {\n  const numeric = parseDistance(value);\n  if (numeric !== null) {\n    return numeric.toLocaleString('ru-RU', {\n      maximumFractionDigits: 2,\n      minimumFractionDigits: 2,\n    });\n  }\n  if (typeof value === 'string') {\n    return value.trim();\n  }\n  if (typeof value === 'number') {\n    return value.toString();\n  }\n  return '';\n};\n\nconst shortDistanceBadgeClass = buildBadgeClass(\n  'bg-emerald-500/20 ring-1 ring-emerald-500/40 dark:bg-emerald-400/25 dark:ring-emerald-300/45',\n);\n\nconst mediumDistanceBadgeClass = buildBadgeClass(\n  'bg-sky-500/20 ring-1 ring-sky-500/40 dark:bg-sky-400/25 dark:ring-sky-300/45',\n);\n\nconst longDistanceBadgeClass = buildBadgeClass(\n  'bg-amber-500/25 ring-1 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45',\n);\n\nconst extraLongDistanceBadgeClass = buildBadgeClass(\n  'bg-rose-500/20 ring-1 ring-rose-500/40 dark:bg-rose-400/25 dark:ring-rose-300/45',\n);\n\nconst getDistanceBadgeClass = (value: unknown) => {\n  const numeric = parseDistance(value);\n  if (numeric === null) {\n    return null;\n  }\n  if (numeric < 5) {\n    return shortDistanceBadgeClass;\n  }\n  if (numeric < 25) {\n    return mediumDistanceBadgeClass;\n  }\n  if (numeric < 100) {\n    return longDistanceBadgeClass;\n  }\n  return extraLongDistanceBadgeClass;\n};\n\nconst fullDateTimeFmt = new Intl.DateTimeFormat('ru-RU', {\n  day: '2-digit',\n  month: '2-digit',\n  year: 'numeric',\n  hour: '2-digit',\n  minute: '2-digit',\n  hour12: false,\n  timeZone: PROJECT_TIMEZONE,\n});\n\nconst datePartFmt = new Intl.DateTimeFormat('ru-RU', {\n  day: '2-digit',\n  month: '2-digit',\n  year: 'numeric',\n  timeZone: PROJECT_TIMEZONE,\n});\n\nconst timePartFmt = new Intl.DateTimeFormat('ru-RU', {\n  hour: '2-digit',\n  minute: '2-digit',\n  hour12: false,\n  timeZone: PROJECT_TIMEZONE,\n});\n\nconst parseDateInput = (value?: string | null) => {\n  if (!value) {\n    return null;\n  }\n  const date = new Date(value);\n  return Number.isNaN(date.getTime()) ? null : date;\n};\n\nconst formatDate = (value?: string) => {\n  const date = parseDateInput(value);\n  if (!date) return null;\n  const full = `${fullDateTimeFmt.format(date).replace(', ', ' ')} ${PROJECT_TIMEZONE_LABEL}`;\n  const datePart = datePartFmt.format(date);\n  const timePart = timePartFmt.format(date);\n  return {\n    full,\n    date: datePart || full,\n    time: timePart,\n  };\n};\n\nconst renderDateCell = (value?: string) => {\n  const formatted = formatDate(value);\n  if (!formatted) return '';\n  return (\n    <span className={dateBadgeClass} title={formatted.full}>\n      <time\n        dateTime={value}\n        className=\"flex w-full items-baseline gap-1 truncate tabular-nums\"\n      >\n        <span className=\"truncate\">{formatted.date}</span>\n        {formatted.time ? (\n          <span className={dateBadgeTimeClass}>{formatted.time}</span>\n        ) : null}\n      </time>\n    </span>\n  );\n};\n\n// Делает текст компактнее, добавляя многоточие по необходимости\nconst compactText = (value: string, maxLength: number) => {\n  const trimmed = value.trim();\n  if (!trimmed || maxLength < 2 || trimmed.length <= maxLength) {\n    return trimmed;\n  }\n  const shortened = trimmed.slice(0, maxLength - 1).trimEnd();\n  return `${shortened}…`;\n};\n\nexport type EntityKind = 'task' | 'request';\n\nexport interface TaskRow extends Task {\n  id: string;\n  created_by?: number | string | null;\n  createdBy?: number | string | null;\n  creator?: number | string | null;\n  assigned_user_id?: number | null;\n  assignees?: number[];\n  start_date?: string | null;\n  due_date?: string | null;\n  start_location?: string | null;\n  start_location_link?: string | null;\n  end_location?: string | null;\n  end_location_link?: string | null;\n}\n\ntype EntityCase = 'nominative' | 'accusative' | 'genitive';\n\nconst ENTITY_WORDS: Record<EntityKind, Record<EntityCase, string>> = {\n  task: {\n    nominative: 'Задача',\n    accusative: 'Задачу',\n    genitive: 'задачи',\n  },\n  request: {\n    nominative: 'Заявка',\n    accusative: 'Заявку',\n    genitive: 'заявки',\n  },\n};\n\nconst entityWord = (\n  kind: EntityKind,\n  form: EntityCase,\n  options?: { lower?: boolean },\n) => {\n  const base = ENTITY_WORDS[kind][form];\n  return options?.lower ? base.toLowerCase() : base;\n};\n\nconst resolveEntityKind = (\n  value: unknown,\n  fallback: EntityKind,\n): EntityKind => {\n  if (typeof value === 'string' && value.trim().toLowerCase() === 'request') {\n    return 'request';\n  }\n  return fallback;\n};\n\nconst escapeRegExp = (value: string) =>\n  value.replace(/[.*+?^${}()|[\\\\]\\\\]/g, '\\\\$&');\n\ntype CountdownLikeState = Extract<\n  DeadlineState,\n  { kind: 'countdown' | 'pending' | 'overdue' }\n>;\n\nconst countdownBadgeBaseClass = `${pillBadgeBaseClass} min-w-0 justify-start normal-case ${badgeTextClass} tabular-nums ring-1`;\n\nconst countdownToneClassMap: Record<\n  'safe' | 'warn' | 'danger' | 'overdue' | 'pending',\n  string\n> = {\n  safe: `${countdownBadgeBaseClass} bg-emerald-500/25 ring-emerald-500/45 dark:bg-emerald-400/25 dark:ring-emerald-300/45`,\n  warn: `${countdownBadgeBaseClass} bg-amber-500/25 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45`,\n  danger: `${countdownBadgeBaseClass} bg-orange-500/25 ring-orange-500/45 dark:bg-orange-400/25 dark:ring-orange-300/45`,\n  overdue: `${countdownBadgeBaseClass} bg-rose-500/30 ring-rose-500/55 dark:bg-rose-400/30 dark:ring-rose-300/50`,\n  pending: `${countdownBadgeBaseClass} bg-sky-500/20 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45`,\n};\n\nconst neutralCountdownBadgeClass = `${countdownBadgeBaseClass} bg-slate-500/15 ring-slate-500/35 dark:bg-slate-500/25 dark:ring-slate-400/35`;\n\nconst formatCountdownParts = (remainingMs: number) => {\n  const absValue = Math.abs(remainingMs);\n  const totalMinutes = Math.max(0, Math.floor(absValue / (60 * 1000)));\n  const days = Math.floor(totalMinutes / (24 * 60));\n  const hours = Math.floor((totalMinutes % (24 * 60)) / 60);\n  const minutes = totalMinutes % 60;\n  const pad = (value: number) => value.toString().padStart(2, '0');\n  return {\n    days,\n    hours,\n    minutes,\n    paddedDays: pad(days),\n    paddedHours: pad(hours),\n    paddedMinutes: pad(minutes),\n  };\n};\n\nconst getRussianPlural = (value: number, forms: [string, string, string]) => {\n  const absValue = Math.abs(value) % 100;\n  if (absValue >= 11 && absValue <= 14) {\n    return forms[2];\n  }\n  const lastDigit = absValue % 10;\n  if (lastDigit === 1) {\n    return forms[0];\n  }\n  if (lastDigit >= 2 && lastDigit <= 4) {\n    return forms[1];\n  }\n  return forms[2];\n};\n\nconst getCountdownToneKey = (\n  state: CountdownLikeState,\n): keyof typeof countdownToneClassMap => {\n  if (state.kind === 'overdue') {\n    return 'overdue';\n  }\n  if (state.kind === 'pending') {\n    return 'pending';\n  }\n  return state.level;\n};\n\nconst buildCountdownLabel = (state: CountdownLikeState) => {\n  const { days, hours, minutes } = formatCountdownParts(state.remainingMs);\n  if (state.kind === 'overdue') {\n    return `Просрочено на ${days} ${getRussianPlural(days, [\n      'день',\n      'дня',\n      'дней',\n    ])} ${hours} ${getRussianPlural(hours, [\n      'час',\n      'часа',\n      'часов',\n    ])} ${minutes} ${getRussianPlural(minutes, ['минута', 'минуты', 'минут'])}`;\n  }\n  if (state.kind === 'pending') {\n    return `Начало через ${days} ${getRussianPlural(days, [\n      'день',\n      'дня',\n      'дней',\n    ])} ${hours} ${getRussianPlural(hours, [\n      'час',\n      'часа',\n      'часов',\n    ])} ${minutes} ${getRussianPlural(minutes, ['минута', 'минуты', 'минут'])}`;\n  }\n  return `До дедлайна ${days} ${getRussianPlural(days, [\n    'день',\n    'дня',\n    'дней',\n  ])} ${hours} ${getRussianPlural(hours, [\n    'час',\n    'часа',\n    'часов',\n  ])} ${minutes} ${getRussianPlural(minutes, ['минута', 'минуты', 'минут'])}`;\n};\n\nconst buildCountdownTitle = (\n  state: CountdownLikeState,\n  formatted: ReturnType<typeof formatDate>,\n  rawDue?: string,\n) => {\n  if (!formatted) {\n    return rawDue ? rawDue.trim() : undefined;\n  }\n  if (state.kind === 'overdue') {\n    return `Просрочено с ${formatted.full}`;\n  }\n  if (state.kind === 'pending') {\n    const note =\n      state.issue === 'missing-start'\n        ? 'Не указана дата начала'\n        : 'Диапазон дат некорректен';\n    return `${note}. Срок ${formatted.full}`;\n  }\n  return `Выполнить до ${formatted.full}`;\n};\n\nconst COMPLETION_THRESHOLD_MS = 60_000;\n\nconst formatCompletionOffset = (diffMs: number) => {\n  const absValue = Math.abs(diffMs);\n  if (absValue < COMPLETION_THRESHOLD_MS) {\n    return 'менее минуты';\n  }\n  const { days, hours, minutes } = formatCountdownParts(absValue);\n  const parts: string[] = [];\n  if (days) {\n    parts.push(`${days} ${getRussianPlural(days, ['день', 'дня', 'дней'])}`);\n  }\n  if (hours) {\n    parts.push(`${hours} ${getRussianPlural(hours, ['час', 'часа', 'часов'])}`);\n  }\n  if (minutes && parts.length < 2) {\n    parts.push(\n      `${minutes} ${getRussianPlural(minutes, ['минута', 'минуты', 'минут'])}`,\n    );\n  }\n  if (!parts.length) {\n    return 'менее минуты';\n  }\n  return parts.slice(0, 2).join(' ');\n};\n\nconst buildCompletionNote = (\n  status: Task['status'] | undefined,\n  dueValue?: string,\n  completedValue?: string | null,\n) => {\n  if (status !== 'Выполнена') {\n    return null;\n  }\n  const dueDate = parseDateInput(dueValue);\n  const completedDate = parseDateInput(completedValue);\n  if (!dueDate || !completedDate) {\n    return null;\n  }\n  const diff = completedDate.getTime() - dueDate.getTime();\n  if (!Number.isFinite(diff)) {\n    return null;\n  }\n  if (Math.abs(diff) < COMPLETION_THRESHOLD_MS) {\n    return 'Выполнена точно в срок';\n  }\n  const offset = formatCompletionOffset(diff);\n  if (!offset) {\n    return 'Выполнена точно в срок';\n  }\n  return diff < 0\n    ? `Выполнена досрочно на ${offset}`\n    : `Выполнена с опозданием на ${offset}`;\n};\n\n// Fast Refresh обрабатывает вспомогательные компоненты как часть конфигурации таблицы\n\nexport function DeadlineCountdownBadge({\n  startValue,\n  dueValue,\n  rawDue,\n  status,\n  completedAt,\n}: {\n  startValue?: string;\n  dueValue?: string;\n  rawDue?: string;\n  status?: Task['status'];\n  completedAt?: string | null;\n}) {\n  const completedDate = React.useMemo(\n    () => parseDateInput(completedAt),\n    [completedAt],\n  );\n  const isCompleted = status === 'Выполнена';\n\n  const [now, setNow] = React.useState<Date>(() => completedDate ?? new Date());\n\n  React.useEffect(() => {\n    if (isCompleted) {\n      if (completedDate) {\n        setNow(completedDate);\n      }\n      return;\n    }\n    const update = () => setNow(new Date());\n    update();\n    const timer = window.setInterval(update, 60_000);\n    return () => window.clearInterval(timer);\n  }, [isCompleted, completedDate, startValue, dueValue]);\n\n  const referenceDate = completedDate ?? now;\n\n  const state = React.useMemo(\n    () => getDeadlineState(startValue, dueValue, referenceDate),\n    [startValue, dueValue, referenceDate],\n  );\n\n  const formatted = React.useMemo(() => formatDate(dueValue), [dueValue]);\n  const completionNote = React.useMemo(\n    () => buildCompletionNote(status, dueValue, completedAt),\n    [status, dueValue, completedAt],\n  );\n\n  if (state.kind === 'invalid') {\n    return (\n      <span\n        className={`${neutralCountdownBadgeClass} inline-flex items-center gap-1.5`}\n        title={\n          state.reason === 'missing'\n            ? 'Срок не назначен'\n            : 'Срок указан некорректно'\n        }\n      >\n        <QuestionMarkCircleIcon\n          className=\"size-4 flex-shrink-0 text-black dark:text-white\"\n          aria-hidden\n        />\n        <span className=\"truncate\">Нет данных</span>\n      </span>\n    );\n  }\n\n  const toneKey = getCountdownToneKey(state);\n  const className = countdownToneClassMap[toneKey];\n  const parts = formatCountdownParts(state.remainingMs);\n  const label = buildCountdownLabel(state);\n  const title = completionNote\n    ? `${completionNote}. ${buildCountdownTitle(state, formatted, rawDue)}`\n    : buildCountdownTitle(state, formatted, rawDue);\n  return (\n    <span\n      className={`${className} inline-flex items-center gap-1.5`}\n      title={title}\n    >\n      <span className=\"sr-only\">{label}</span>\n      <span\n        aria-hidden\n        className=\"flex items-end gap-1 text-black dark:text-white\"\n      >\n        <span className=\"flex flex-col items-center leading-tight\">\n          <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n            {parts.paddedDays}\n          </span>\n          <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n            {getRussianPlural(parts.days, ['день', 'дня', 'дней'])}\n          </span>\n        </span>\n        <span className=\"flex flex-col items-center leading-tight\">\n          <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n            {parts.paddedHours}\n          </span>\n          <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n            {getRussianPlural(parts.hours, ['час', 'часа', 'часов'])}\n          </span>\n        </span>\n        <span className=\"flex flex-col items-center leading-tight\">\n          <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n            {parts.paddedMinutes}\n          </span>\n          <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n            {getRussianPlural(parts.minutes, ['минута', 'минуты', 'минут'])}\n          </span>\n        </span>\n      </span>\n      {completionNote ? (\n        <span className=\"sr-only\">{completionNote}</span>\n      ) : null}\n    </span>\n  );\n}\n\nconst durationToneClassMap: Record<\n  'completed' | 'cancelled' | 'active' | 'planned' | 'idle',\n  string\n> = {\n  completed: `${countdownBadgeBaseClass} bg-emerald-500/25 ring-emerald-500/45 dark:bg-emerald-400/25 dark:ring-emerald-300/45`,\n  cancelled: `${countdownBadgeBaseClass} bg-rose-500/30 ring-rose-500/55 dark:bg-rose-400/30 dark:ring-rose-300/50`,\n  active: `${countdownBadgeBaseClass} bg-amber-500/25 ring-amber-500/45 dark:bg-amber-400/25 dark:ring-amber-300/45`,\n  planned: `${countdownBadgeBaseClass} bg-sky-500/20 ring-sky-500/45 dark:bg-sky-400/25 dark:ring-sky-300/45`,\n  idle: neutralCountdownBadgeClass,\n};\n\nconst formatDurationPhrase = (\n  parts: ReturnType<typeof formatCountdownParts>,\n  variant: 'completed' | 'running',\n  entityKind: EntityKind,\n) => {\n  const { days, hours, minutes } = parts;\n  if (!days && !hours && !minutes) {\n    return variant === 'completed'\n      ? `${entityWord(entityKind, 'nominative')} завершена менее чем за минуту`\n      : 'Затрачено менее минуты';\n  }\n  const dayLabel = `${days} ${getRussianPlural(days, ['день', 'дня', 'дней'])}`;\n  const hourLabel = `${hours} ${getRussianPlural(hours, [\n    'час',\n    'часа',\n    'часов',\n  ])}`;\n  const minuteLabel = `${minutes} ${getRussianPlural(minutes, [\n    'минута',\n    'минуты',\n    'минут',\n  ])}`;\n  const phrase = `${dayLabel} ${hourLabel} ${minuteLabel}`;\n  return variant === 'completed'\n    ? `${entityWord(entityKind, 'nominative')} завершена за ${phrase}`\n    : `Затрачено ${phrase}`;\n};\n\nconst buildDurationTitle = (\n  variant: 'completed' | 'running' | 'idle',\n  startValue?: string,\n  endValue?: string,\n  parts?: ReturnType<typeof formatCountdownParts>,\n  entityKind: EntityKind = 'task',\n) => {\n  const titleParts: string[] = [];\n  const startFormatted = startValue ? formatDate(startValue) : null;\n  const endFormatted = endValue ? formatDate(endValue) : null;\n  if (startFormatted) {\n    titleParts.push(`Начало: ${startFormatted.full}`);\n  }\n  if (endFormatted) {\n    titleParts.push(\n      variant === 'completed'\n        ? `Завершено: ${endFormatted.full}`\n        : `Текущее время: ${endFormatted.full}`,\n    );\n  }\n  if (parts) {\n    const phrase = formatDurationPhrase(\n      parts,\n      variant === 'completed' ? 'completed' : 'running',\n      entityKind,\n    );\n    const normalized =\n      variant === 'completed'\n        ? phrase.replace(\n            new RegExp(\n              `^${escapeRegExp(\n                `${entityWord(entityKind, 'nominative')} завершена за `,\n              )}`,\n            ),\n            'Продолжительность: ',\n          )\n        : phrase.replace(/^Затрачено\\s/, 'Продолжительность: ');\n    titleParts.push(\n      variant === 'idle' ? `Продолжительность: ${phrase}` : normalized,\n    );\n  }\n  if (!titleParts.length) {\n    return variant === 'idle'\n      ? 'Продолжительность появится после указания даты начала'\n      : 'Нет данных о продолжительности';\n  }\n  return titleParts.join('\\n');\n};\n\ntype ActualTimeCellProps = {\n  progressStartValue?: string | null;\n  plannedStartValue?: string | null;\n  completedValue?: string | null;\n  status?: Task['status'];\n  entityKind: EntityKind;\n};\n\nfunction ActualTimeCell({\n  progressStartValue,\n  plannedStartValue,\n  completedValue,\n  status,\n  entityKind,\n}: ActualTimeCellProps) {\n  const plannedStartDate = React.useMemo(\n    () => parseDateInput(plannedStartValue),\n    [plannedStartValue],\n  );\n  const progressStartDate = React.useMemo(\n    () => parseDateInput(progressStartValue),\n    [progressStartValue],\n  );\n  const completedDate = React.useMemo(\n    () => parseDateInput(completedValue),\n    [completedValue],\n  );\n  const isFinished = status === 'Выполнена' || status === 'Отменена';\n  const isCancelled = status === 'Отменена';\n  const isNotStarted = status === 'Новая';\n\n  const timerStartDate = React.useMemo(() => {\n    if (isNotStarted) {\n      return null;\n    }\n    return progressStartDate ?? plannedStartDate ?? null;\n  }, [isNotStarted, progressStartDate, plannedStartDate]);\n\n  const [referenceDate, setReferenceDate] = React.useState<Date>(() => {\n    if (isFinished && completedDate) {\n      return completedDate;\n    }\n    return new Date();\n  });\n\n  React.useEffect(() => {\n    if (isFinished) {\n      if (completedDate) {\n        setReferenceDate(completedDate);\n      }\n      return undefined;\n    }\n    if (!timerStartDate) {\n      return undefined;\n    }\n    const update = () => setReferenceDate(new Date());\n    update();\n    const timer = window.setInterval(update, 60_000);\n    return () => window.clearInterval(timer);\n  }, [isFinished, completedDate, timerStartDate]);\n\n  const effectiveEndDate =\n    isFinished && completedDate ? completedDate : referenceDate;\n  const durationMs = timerStartDate\n    ? Math.max(0, effectiveEndDate.getTime() - timerStartDate.getTime())\n    : null;\n  const durationParts = React.useMemo(() => {\n    if (isNotStarted) {\n      return formatCountdownParts(0);\n    }\n    return durationMs !== null ? formatCountdownParts(durationMs) : null;\n  }, [durationMs, isNotStarted]);\n\n  const endIso = React.useMemo(\n    () => effectiveEndDate.toISOString(),\n    [effectiveEndDate],\n  );\n\n  const variant: 'completed' | 'running' | 'idle' =\n    isNotStarted || !timerStartDate\n      ? 'idle'\n      : isFinished\n        ? 'completed'\n        : 'running';\n\n  const toneKey: keyof typeof durationToneClassMap =\n    isNotStarted || !timerStartDate\n      ? 'idle'\n      : isFinished\n        ? isCancelled\n          ? 'cancelled'\n          : 'completed'\n        : status === 'В работе'\n          ? 'active'\n          : 'planned';\n\n  const label = isNotStarted\n    ? `${entityWord(entityKind, 'nominative')} ещё не начата`\n    : durationParts\n      ? formatDurationPhrase(\n          durationParts,\n          variant === 'completed' ? 'completed' : 'running',\n          entityKind,\n        )\n      : 'Продолжительность появится после начала';\n\n  const startValueForTooltip =\n    progressStartValue ?? plannedStartValue ?? undefined;\n\n  const durationBadgeTitle = isNotStarted\n    ? `Таймер запустится после перевода ${entityWord(entityKind, 'genitive', { lower: true })} в статус «В работе»`\n    : buildDurationTitle(\n        variant,\n        startValueForTooltip,\n        variant === 'completed' ? (completedValue ?? undefined) : endIso,\n        durationParts ?? undefined,\n        entityKind,\n      );\n\n  const renderStopBadge = () => {\n    if (isFinished && completedDate && completedValue) {\n      return renderDateCell(completedValue);\n    }\n    if (isFinished) {\n      return (\n        <span className={dateBadgeClass} title=\"Нет отметки о завершении\">\n          <span className=\"truncate\">Нет данных</span>\n        </span>\n      );\n    }\n    if (!timerStartDate) {\n      const placeholder =\n        status === 'Новая'\n          ? 'Не начата'\n          : status === 'В работе'\n            ? 'В работе'\n            : 'В ожидании';\n      const title =\n        status === 'Новая'\n          ? `${entityWord(entityKind, 'nominative')} ещё не начата`\n          : status === 'В работе'\n            ? 'Таймер запустится после фиксации начала'\n            : 'Дата начала отсутствует';\n      return (\n        <span className={dateBadgeClass} title={title}>\n          <span className=\"truncate\">{placeholder}</span>\n        </span>\n      );\n    }\n    const placeholder = status === 'В работе' ? 'В работе' : 'В ожидании';\n    return (\n      <span\n        className={dateBadgeClass}\n        title={`${entityWord(entityKind, 'nominative')} ещё не завершена`}\n      >\n        <span className=\"truncate\">{placeholder}</span>\n      </span>\n    );\n  };\n\n  return (\n    <div className=\"flex flex-col items-start gap-1\">\n      {renderStopBadge()}\n      <span\n        className={`${durationToneClassMap[toneKey]} inline-flex items-center gap-1.5`}\n        title={durationBadgeTitle}\n      >\n        <span className=\"sr-only\">{label}</span>\n        {durationParts ? (\n          <span\n            aria-hidden\n            className=\"flex items-end gap-1 text-black dark:text-white\"\n          >\n            <span className=\"flex flex-col items-center leading-tight\">\n              <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n                {durationParts.paddedDays}\n              </span>\n              <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n                {getRussianPlural(durationParts.days, ['день', 'дня', 'дней'])}\n              </span>\n            </span>\n            <span className=\"flex flex-col items-center leading-tight\">\n              <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n                {durationParts.paddedHours}\n              </span>\n              <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n                {getRussianPlural(durationParts.hours, [\n                  'час',\n                  'часа',\n                  'часов',\n                ])}\n              </span>\n            </span>\n            <span className=\"flex flex-col items-center leading-tight\">\n              <span className=\"text-[0.8rem] font-semibold tabular-nums\">\n                {durationParts.paddedMinutes}\n              </span>\n              <span className=\"text-[9px] font-medium text-black/80 dark:text-white/80\">\n                {getRussianPlural(durationParts.minutes, [\n                  'минута',\n                  'минуты',\n                  'минут',\n                ])}\n              </span>\n            </span>\n          </span>\n        ) : (\n          <span className=\"text-xs font-medium text-black dark:text-white\">\n            {label}\n          </span>\n        )}\n      </span>\n    </div>\n  );\n}\n\nexport default function taskColumns(\n  users: Record<number, AppUser>,\n  defaultKind: EntityKind = 'task',\n): ColumnDef<TaskRow>[] {\n  const cols: ColumnDef<TaskRow>[] = [\n    {\n      header: 'Номер',\n      id: 'number',\n      accessorFn: (row) => {\n        const rowKind = resolveEntityKind(row.kind, defaultKind);\n        const rawValue =\n          rowKind === 'request'\n            ? row.request_id || row.task_number || row._id\n            : row.task_number || row.request_id || row._id;\n        if (typeof rawValue === 'string') {\n          return rawValue;\n        }\n        if (rawValue === undefined || rawValue === null) {\n          return '';\n        }\n        return String(rawValue);\n      },\n      meta: {\n        width: 'clamp(4.25rem, 8vw, 6.25rem)',\n        minWidth: '4rem',\n        maxWidth: '6.5rem',\n        cellClassName:\n          'whitespace-nowrap text-center font-mono tabular-nums sm:text-left sm:pl-1.5',\n        headerClassName: 'whitespace-nowrap text-center sm:text-left',\n      },\n      cell: (p) => {\n        const row = p.row.original as TaskRow;\n        const rowKind = resolveEntityKind(row.kind, defaultKind);\n        const value = (p.getValue<string>() || '').trim();\n        const fallback =\n          rowKind === 'request'\n            ? ((row.request_id as string | undefined) ??\n              (row.task_number as string | undefined) ??\n              String(row._id))\n            : ((row.task_number as string | undefined) ??\n              (row.request_id as string | undefined) ??\n              String(row._id));\n        const display = value || fallback || '';\n        const numericMatch = display.match(/\\d+/);\n        const shortValue = numericMatch ? numericMatch[0] : display;\n        return (\n          <span\n            className={`${numberBadgeClass} justify-center`}\n            title={display}\n          >\n            <span className=\"truncate\">{shortValue}</span>\n          </span>\n        );\n      },\n    },\n    {\n      header: `${entityWord(defaultKind, 'accusative')} создал`,\n      accessorKey: 'createdAt',\n      meta: {\n        width: 'clamp(9rem, 18vw, 14rem)',\n        minWidth: '8.5rem',\n        maxWidth: '16rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: ({ row }) => {\n        const rawCreator =\n          (row.original.created_by as unknown) ??\n          (row.original.createdBy as unknown) ??\n          (row.original.creator as unknown);\n        const creatorId =\n          typeof rawCreator === 'number'\n            ? rawCreator\n            : typeof rawCreator === 'string' && rawCreator.trim()\n              ? Number(rawCreator)\n              : NaN;\n        if (!Number.isFinite(creatorId)) {\n          return <span className=\"text-muted-foreground\">—</span>;\n        }\n        const id = creatorId as number;\n        const user = users[id];\n        const label =\n          (user?.name as string | undefined) ||\n          (user?.telegram_username as string | undefined) ||\n          (user?.username as string | undefined) ||\n          String(id);\n        const title = label.trim() || String(id);\n        return (\n          <EmployeeLink\n            employeeId={id}\n            stopPropagation\n            title={title}\n            className={`${creatorBadgeClass} ${focusableBadgeClass} no-underline`}\n          >\n            <span className=\"truncate\">{compactText(label, 32)}</span>\n          </EmployeeLink>\n        );\n      },\n    },\n    {\n      header: 'Название',\n      accessorKey: 'title',\n      meta: {\n        width: 'clamp(8rem, 18vw, 18rem)',\n        minWidth: '7rem',\n        maxWidth: '18rem',\n        cellClassName: 'align-top',\n      },\n      cell: (p) => {\n        const v = p.getValue<string>() || '';\n        const compact = compactText(v, 72);\n        const row = p.row.original as TaskRow;\n        const completionNote = buildCompletionNote(\n          row.status,\n          row.due_date ?? undefined,\n          row.completed_at ?? undefined,\n        );\n        return (\n          <div className=\"flex flex-col items-start gap-1\">\n            <span title={v} className={`${titleBadgeClass} whitespace-normal`}>\n              <span\n                className=\"block max-w-full break-words text-left leading-snug\"\n                style={{\n                  display: '-webkit-box',\n                  WebkitLineClamp: 2,\n                  WebkitBoxOrient: 'vertical',\n                  overflow: 'hidden',\n                }}\n              >\n                {compact}\n              </span>\n            </span>\n            {completionNote ? (\n              <span className={completionNoteTextClass}>{completionNote}</span>\n            ) : null}\n          </div>\n        );\n      },\n    },\n    {\n      header: 'Исполнители',\n      accessorKey: 'assignees',\n      meta: {\n        width: 'clamp(7rem, 20vw, 13rem)',\n        minWidth: '6rem',\n        maxWidth: '13rem',\n      },\n      cell: ({ row }) => {\n        const ids = Array.isArray(row.original.assignees)\n          ? row.original.assignees\n          : typeof row.original.assigned_user_id === 'number'\n            ? [row.original.assigned_user_id]\n            : [];\n        if (!ids.length) {\n          return <span className=\"text-muted-foreground\">—</span>;\n        }\n        const labels = ids.map((id) => ({\n          id,\n          label:\n            users[id]?.name ||\n            users[id]?.telegram_username ||\n            users[id]?.username ||\n            String(id),\n        }));\n        const tooltip = labels.map((item) => item.label).join(', ');\n        return (\n          <div\n            className=\"flex w-full flex-wrap items-start gap-1 leading-tight\"\n            title={tooltip}\n          >\n            {labels.map(({ id, label }) => (\n              <EmployeeLink\n                key={id}\n                employeeId={id}\n                stopPropagation\n                className={`${assigneeBadgeClass} ${focusableBadgeClass} no-underline`}\n              >\n                <span className=\"truncate\">{compactText(label, 18)}</span>\n              </EmployeeLink>\n            ))}\n          </div>\n        );\n      },\n    },\n    {\n      header: 'Статус',\n      accessorKey: 'status',\n      meta: {\n        width: 'clamp(4.5rem, 8vw, 6.5rem)',\n        minWidth: '4.5rem',\n        maxWidth: '6.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: (p) => {\n        const value = p.getValue<string>() || '';\n        if (!value) {\n          return '';\n        }\n        const badgeClass = getStatusBadgeClass(value);\n        if (!badgeClass) {\n          return <span className={fallbackBadgeClass}>{value}</span>;\n        }\n        return <span className={badgeClass}>{value}</span>;\n      },\n    },\n    {\n      header: 'Приоритет',\n      accessorKey: 'priority',\n      meta: {\n        width: 'clamp(8.5rem, 15vw, 12.5rem)',\n        minWidth: '8.5rem',\n        maxWidth: '12.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: (p) => {\n        const value = p.getValue<string>() || '';\n        if (!value.trim()) {\n          return '';\n        }\n        const display = normalizePriorityLabel(value);\n        const badgeClass = getPriorityBadgeClass(value);\n        const className = badgeClass || `${fallbackBadgeClass} normal-case`;\n        return (\n          <span className={className} title={display}>\n            {display}\n          </span>\n        );\n      },\n    },\n    {\n      header: 'Начало',\n      accessorKey: 'start_date',\n      meta: {\n        width: 'clamp(6.75rem, 11vw, 8.75rem)',\n        minWidth: '6.5rem',\n        maxWidth: '9rem',\n        cellClassName: 'whitespace-nowrap text-xs sm:text-sm',\n      },\n      cell: (p) => renderDateCell(p.getValue<string>()),\n    },\n    {\n      header: 'Дедлайн',\n      accessorKey: 'due_date',\n      meta: {\n        width: 'clamp(10.5rem, 20vw, 15.5rem)',\n        minWidth: '10rem',\n        maxWidth: '16.5rem',\n        cellClassName: 'whitespace-nowrap text-xs sm:text-sm',\n      },\n      cell: (p) => {\n        const dueValue = p.getValue<string>();\n        const row = p.row.original;\n        const countdown = (\n          <DeadlineCountdownBadge\n            startValue={row.start_date ?? undefined}\n            dueValue={row.due_date ?? undefined}\n            rawDue={dueValue}\n            status={row.status}\n            completedAt={row.completed_at ?? undefined}\n          />\n        );\n        if (!dueValue) {\n          return countdown;\n        }\n        const dateCell = renderDateCell(dueValue);\n        if (typeof dateCell === 'string') {\n          if (!dateCell) {\n            return countdown;\n          }\n          return (\n            <div className=\"flex flex-col items-start gap-1\">\n              {dateCell ? <span>{dateCell}</span> : null}\n              {countdown}\n            </div>\n          );\n        }\n        return (\n          <div className=\"flex flex-col items-start gap-1\">\n            {dateCell}\n            {countdown}\n          </div>\n        );\n      },\n    },\n    {\n      header: 'Время выполнения',\n      accessorKey: 'completed_at',\n      meta: {\n        width: 'clamp(10.5rem, 20vw, 15.5rem)',\n        minWidth: '10rem',\n        maxWidth: '16.5rem',\n        cellClassName: 'whitespace-nowrap text-xs sm:text-sm',\n      },\n      cell: (p) => {\n        const row = p.row.original;\n        const rowKind = resolveEntityKind(row.kind, defaultKind);\n        return (\n          <ActualTimeCell\n            progressStartValue={row.in_progress_at ?? undefined}\n            plannedStartValue={row.start_date ?? undefined}\n            completedValue={p.getValue<string | null>() ?? undefined}\n            status={row.status}\n            entityKind={rowKind}\n          />\n        );\n      },\n    },\n    {\n      header: 'Тип',\n      accessorKey: 'task_type',\n      meta: {\n        width: 'clamp(4.5rem, 8vw, 6.5rem)',\n        minWidth: '4.5rem',\n        maxWidth: '6.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: (p) => {\n        const value = p.getValue<string>() || '';\n        const trimmed = value.trim();\n        if (!trimmed) {\n          return '';\n        }\n        const badgeClass = getTypeBadgeClass(trimmed);\n        const className = badgeClass || `${fallbackBadgeClass} normal-case`;\n        return (\n          <span className={className} title={trimmed}>\n            {trimmed}\n          </span>\n        );\n      },\n    },\n    {\n      header: 'Старт',\n      accessorKey: 'start_location',\n      meta: {\n        width: 'clamp(5.5rem, 14vw, 9.5rem)',\n        minWidth: '5rem',\n        maxWidth: '9.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: ({ row }) => {\n        const name = row.original.start_location ?? '';\n        const trimmed = name.trim();\n        const firstToken =\n          trimmed.split(/[\\s,;]+/).filter(Boolean)[0] || trimmed;\n        const compact = compactText(firstToken, 24);\n        const link = row.original.start_location_link ?? undefined;\n        return link ? (\n          <a\n            href={link}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className={locationLinkBadgeClass}\n            title={name}\n          >\n            <span className=\"truncate\">{compact}</span>\n          </a>\n        ) : (\n          <span title={name} className={locationBadgeClass}>\n            <span className=\"truncate\">{compact}</span>\n          </span>\n        );\n      },\n    },\n    {\n      header: 'Финиш',\n      accessorKey: 'end_location',\n      meta: {\n        width: 'clamp(5.5rem, 14vw, 9.5rem)',\n        minWidth: '5rem',\n        maxWidth: '9.5rem',\n        cellClassName: 'whitespace-nowrap',\n      },\n      cell: ({ row }) => {\n        const name = row.original.end_location ?? '';\n        const trimmed = name.trim();\n        const firstToken =\n          trimmed.split(/[\\s,;]+/).filter(Boolean)[0] || trimmed;\n        const compact = compactText(firstToken, 24);\n        const link = row.original.end_location_link ?? undefined;\n        return link ? (\n          <a\n            href={link}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className={locationLinkBadgeClass}\n            title={name}\n          >\n            <span className=\"truncate\">{compact}</span>\n          </a>\n        ) : (\n          <span title={name} className={locationBadgeClass}>\n            <span className=\"truncate\">{compact}</span>\n          </span>\n        );\n      },\n    },\n    {\n      header: 'Км',\n      accessorKey: 'route_distance_km',\n      meta: {\n        width: 'clamp(3.25rem, 6vw, 4.75rem)',\n        minWidth: '3rem',\n        maxWidth: '4.75rem',\n        cellClassName: 'whitespace-nowrap text-center sm:text-left',\n        headerClassName: 'text-center sm:text-left',\n      },\n      cell: (p) => {\n        const raw = p.getValue<number | string | null>();\n        if (\n          raw === null ||\n          raw === undefined ||\n          (typeof raw === 'string' && !raw.trim())\n        ) {\n          return '';\n        }\n        const display = formatDistanceLabel(raw);\n        if (!display) {\n          return '';\n        }\n        const badgeClass = getDistanceBadgeClass(raw);\n        const className = badgeClass || fallbackBadgeClass;\n        return (\n          <span className={className} title={`${display} км`}>\n            {display}\n          </span>\n        );\n      },\n    },\n  ];\n  return cols;\n}\n","// Назначение файла: функции расчёта и форматирования сроков задач.\n// Основные модули: стандартный объект Date.\n\nexport type DeadlineLevel = 'safe' | 'warn' | 'danger';\n\ntype PendingIssue = 'missing-start' | 'invalid-range';\n\ntype InvalidReason = 'missing' | 'invalid';\n\nexport interface DeadlineStateBase {\n  dueDate: Date | null;\n  startDate: Date | null;\n  remainingMs: number | null;\n}\n\nexport interface CountdownState extends DeadlineStateBase {\n  kind: 'countdown';\n  remainingMs: number;\n  ratio: number;\n  level: DeadlineLevel;\n}\n\nexport interface PendingState extends DeadlineStateBase {\n  kind: 'pending';\n  remainingMs: number;\n  issue: PendingIssue;\n}\n\nexport interface OverdueState extends DeadlineStateBase {\n  kind: 'overdue';\n  remainingMs: number;\n}\n\nexport interface InvalidState extends DeadlineStateBase {\n  kind: 'invalid';\n  reason: InvalidReason;\n}\n\nexport type DeadlineState =\n  | CountdownState\n  | PendingState\n  | OverdueState\n  | InvalidState;\n\nconst DAY = 24 * 60 * 60 * 1000;\nconst HOUR = 60 * 60 * 1000;\nconst MINUTE = 60 * 1000;\n\nconst parseDateValue = (value?: string) => {\n  if (!value) {\n    return null;\n  }\n  const date = new Date(value);\n  return Number.isNaN(date.getTime()) ? null : date;\n};\n\nconst clampRatio = (value: number) => {\n  if (Number.isNaN(value)) {\n    return 0;\n  }\n  if (value > 1) {\n    return 1;\n  }\n  if (value < 0) {\n    return 0;\n  }\n  return value;\n};\n\nexport const getDeadlineState = (\n  startValue?: string,\n  dueValue?: string,\n  referenceDate = new Date(),\n): DeadlineState => {\n  const dueDate = parseDateValue(dueValue);\n  const startDate = parseDateValue(startValue);\n\n  if (!dueDate) {\n    return {\n      kind: 'invalid',\n      reason: dueValue ? 'invalid' : 'missing',\n      dueDate: null,\n      startDate,\n      remainingMs: null,\n    };\n  }\n\n  const remainingMs = dueDate.getTime() - referenceDate.getTime();\n\n  if (remainingMs < 0) {\n    return {\n      kind: 'overdue',\n      dueDate,\n      startDate,\n      remainingMs,\n    };\n  }\n\n  if (!startDate) {\n    return {\n      kind: 'pending',\n      issue: 'missing-start',\n      dueDate,\n      startDate: null,\n      remainingMs,\n    };\n  }\n\n  if (startDate.getTime() >= dueDate.getTime()) {\n    return {\n      kind: 'pending',\n      issue: 'invalid-range',\n      dueDate,\n      startDate,\n      remainingMs,\n    };\n  }\n\n  const totalMs = dueDate.getTime() - startDate.getTime();\n  const ratio = clampRatio(remainingMs / totalMs);\n  let level: DeadlineLevel;\n  if (ratio > 0.6) {\n    level = 'safe';\n  } else if (ratio >= 0.2) {\n    level = 'warn';\n  } else {\n    level = 'danger';\n  }\n\n  return {\n    kind: 'countdown',\n    ratio,\n    level,\n    dueDate,\n    startDate,\n    remainingMs,\n  };\n};\n\nexport const formatDurationShort = (value: number) => {\n  if (!Number.isFinite(value) || value === 0) {\n    return '0м';\n  }\n  const abs = Math.abs(value);\n  const parts: string[] = [];\n  let rest = abs;\n\n  const pushPart = (divisor: number, suffix: string) => {\n    const amount = Math.floor(rest / divisor);\n    if (amount > 0) {\n      parts.push(`${amount}${suffix}`);\n      rest -= amount * divisor;\n    }\n  };\n\n  pushPart(DAY, 'д');\n  if (parts.length < 2) {\n    pushPart(HOUR, 'ч');\n  }\n  if (parts.length < 2) {\n    pushPart(MINUTE, 'м');\n  }\n\n  if (parts.length === 0) {\n    return '<1м';\n  }\n\n  return parts.slice(0, 2).join(' ');\n};\n"],"names":["QuestionMarkCircleIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React.createElement","Object","assign","xmlns","viewBox","fill","ref","id","fillRule","d","clipRule","users","defaultKind","arguments","length","undefined","header","accessorFn","row","rawValue","resolveEntityKind","kind","request_id","task_number","_id","String","meta","width","minWidth","maxWidth","cellClassName","headerClassName","cell","p","_ref6","_row$request_id","_ref7","_row$task_number","original","rowKind","value","getValue","trim","fallback","display","numericMatch","match","shortValue","jsx","className","concat","numberBadgeClass","children","entityWord","accessorKey","_ref8","_ref9","_row$original$created","rawCreator","created_by","createdBy","creator","creatorId","Number","NaN","isFinite","user","label","name","telegram_username","username","EmployeeLink","employeeId","stopPropagation","creatorBadgeClass","focusableBadgeClass","compactText","_row$due_date","_row$completed_at","v","compact","completionNote","buildCompletionNote","status","due_date","completed_at","jsxs","titleBadgeClass","style","WebkitLineClamp","WebkitBoxOrient","overflow","completionNoteTextClass","_ref0","ids","Array","isArray","assignees","assigned_user_id","labels","map","_users$id","_users$id2","_users$id3","tooltip","item","join","_ref1","assigneeBadgeClass","badgeClass","getStatusBadgeClass","fallbackBadgeClass","normalizePriorityLabel","getPriorityBadgeClass","renderDateCell","_row$start_date","_row$due_date2","_row$completed_at2","dueValue","countdown","DeadlineCountdownBadge","startValue","start_date","rawDue","completedAt","dateCell","_row$in_progress_at","_row$start_date2","_p$getValue","ActualTimeCell","progressStartValue","in_progress_at","plannedStartValue","completedValue","entityKind","trimmed","getTypeBadgeClass","_ref10","_row$original$start_l","_row$original$start_l2","start_location","firstToken","split","filter","Boolean","link","start_location_link","href","target","rel","locationLinkBadgeClass","locationBadgeClass","_ref11","_row$original$end_loc","_row$original$end_loc2","end_location","end_location_link","raw","formatDistanceLabel","getDistanceBadgeClass","ForwardRef","React.forwardRef","parseDateValue","date","Date","isNaN","getTime","getDeadlineState","referenceDate","dueDate","startDate","reason","remainingMs","issue","totalMs","ratio","level","badgeBaseClass","badgeTextClass","buildBadgeClass","tones","pillBadgeBaseClass","dateBadgeClass","exports","statusBadgeClassMap","Новая","Выполнена","Отменена","urgentPriorityBadgeClass","highPriorityBadgeClass","normalPriorityBadgeClass","lowPriorityBadgeClass","priorityBadgeClassMap","срочно","hasOwn","obj","key","prototype","hasOwnProperty","call","normalized","toLowerCase","test","typeBadgeClassMap","доставить","купить","выполнить","построить","починить","parseDistance","replace","numeric","toLocaleString","maximumFractionDigits","minimumFractionDigits","toString","shortDistanceBadgeClass","mediumDistanceBadgeClass","longDistanceBadgeClass","extraLongDistanceBadgeClass","fullDateTimeFmt","Intl","DateTimeFormat","day","month","year","hour","minute","hour12","timeZone","PROJECT_TIMEZONE","datePartFmt","timePartFmt","parseDateInput","formatDate","full","format","PROJECT_TIMEZONE_LABEL","time","formatted","dateTime","maxLength","shortened","slice","trimEnd","ENTITY_WORDS","task","nominative","accusative","genitive","request","form","options","base","lower","countdownBadgeBaseClass","countdownToneClassMap","safe","warn","danger","overdue","pending","neutralCountdownBadgeClass","formatCountdownParts","absValue","Math","abs","totalMinutes","max","floor","days","hours","minutes","pad","padStart","paddedDays","paddedHours","paddedMinutes","getRussianPlural","forms","lastDigit","getCountdownToneKey","state","buildCountdownLabel","_formatCountdownParts","buildCountdownTitle","note","completedDate","diff","offset","diffMs","_formatCountdownParts2","parts","push","formatCompletionOffset","_ref2","React","useMemo","isCompleted","_React$useState2","_slicedToArray","useState","now","setNow","useEffect","update","timer","window","setInterval","clearInterval","toneKey","durationToneClassMap","completed","cancelled","active","planned","idle","formatDurationPhrase","variant","dayLabel","hourLabel","minuteLabel","phrase","buildDurationTitle","endValue","titleParts","startFormatted","endFormatted","RegExp","_ref3","_ref5","plannedStartDate","progressStartDate","isFinished","isCancelled","isNotStarted","timerStartDate","_ref4","_React$useState4","setReferenceDate","effectiveEndDate","durationMs","durationParts","endIso","toISOString","startValueForTooltip","durationBadgeTitle","placeholder","renderStopBadge"],"mappings":"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","x_google_ignoreList":[0]}