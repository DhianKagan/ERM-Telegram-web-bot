Унификация дизайна фронтенда (Tailwind + DaisyUI)
Цель

Привести весь фронтенд (apps/web) к единому, выдержанному стилю на базе Tailwind CSS + DaisyUI. Поддержать две темы (erm-light, erm-dark), стандартизировать все элементы интерфейса (кнопки, формы, таблицы, карточки, модалки, фильтры, экспорт, пагинация, skeletons, навигация и т.д.) через общий набор Ui-примитивов в src/components/ui/. Не менять бизнес-логику.

Коротко — ожидаемый результат

Единый набор токенов (цвета, радиусы, тени, размеры) — центр правды.

Все визуальные элементы делаются через DaisyUI классы или через наши Ui-обёртки (UiButton, UiInput, UiFormGroup, UiCard, UiModal, UiTable, UiPagination, UiSkeleton, UiBadge, UiFilterRow, ThemeToggle и т.д.).

Тема переключается data-theme="erm-light" / data-theme="erm-dark".

Мелкие PR, тесты, визуальная приёмка для каждой итерации.

Обязательные правила (конкретно и без воды)
Tokens и тема

Единый файл токенов (_tokens.css) — все цвета, радиусы, отступы, размеры кнопок и тени.

В JSX и компонентах нельзя использовать var(--color-...) напрямую: только через токены/темы.

DaisyUI конфигурация должна определять темы erm-light и erm-dark и получать значения от токенов.

Шрифты и типографика

Использовать системный стек / Inter (через Tailwind). Базовый текст — text-base. Заголовки — предопределённые размеры (text-title-*).

Межстрочный интервал и отступы использовать утилиты Tailwind, не хардкодить значения.

Ui-примитивы (обязательный контракт)

Все переиспользуемые компоненты живут в src/components/ui/ и export'ят стандартный API: className, variant, size, asChild, ref.

Компоненты должны быть forwardRef-совместимыми и использовать DaisyUI классы внутри.

Любой новый UI-компонент — только как UiXxx, опираясь на DaisyUI. Нельзя добавлять ad-hoc стили.

Кнопки

Все кнопки — через UiButton. Варианты: primary, secondary, accent, neutral, ghost, link, outline, destructive, success, pill, icon. Размеры: xs, sm, md, lg, pill, icon.

Запрещено: прямой class="btn" и прямое использование старого buttonVariants в страницах.

Дефолтное поведение: hover/active/disabled — через UiButton.

Формы

Все поля — через UiInput, UiSelect, UiTextarea, UiCheckbox, UiRadio.

Группировка — через UiFormGroup (label + field + helper + error). Error отображать с input-error и text-error.

Фильтры — использовать UiFilterRow (контейнер с area inputs + actions). Layout фильтров — grid с responsive breakpoints.

Модалки и диалоги

Только UiModal. Обязателен focus trap, aria-атрибуты, esc-закрытие и возврат фокуса.

Алерты — через DaisyUI alert или UiAlert. Подтверждения — через UiModal + UiButton.

Таблицы и пагинация

Таблицы — UiTable/UiTableContainer с поддержкой sticky header, zebra, responsive scroll. Вёрстка semantic <thead>/<tbody>.

Пагинация — UiPagination реализуется через DaisyUI join + btn join-item / btn-active для текущей страницы. Старый Pagination.tsx заменить.

Skeletons / Loading

Использовать DaisyUI skeleton (обёртка UiSkeleton). Не делать loading-элементы через bg-gray-* и animate-pulse вручную.

Навигация и layout

Header — DaisyUI navbar. Sidebar/drawer — DaisyUI drawer. Контент — UiCard/card.

Избегать bespoke классов (например, border-stroke, rounded-badge) — заменять на border, rounded, card и токены.

Иконки

Использовать единый набор (например, heroicons). Размер в кнопках — 16px (h-4 w-4), gap между иконкой и текстом — gap-2.

Доступность

ARIA на модалках, таблицах, фильтрах. Фокус видим (focus-visible). Цветовой контраст не ниже 4.5:1 для основного текста.

Запрещено (коротко)

Прямое использование кастомных цветов и переменных в JSX (var(--color-...)), кроме токенов.

Самодельные стили вместо DaisyUI/Ui-обёрток.

Прямое использование старых устаревших компонентов/вариантов вместо Ui-примитивов.

Большие PR без визуальной проверки.

Mapping (старое → новое)

Button (старый) → UiButton

Inline <input>/select → UiInput / UiSelect внутри UiFormGroup

Modal/ConfirmDialog → UiModal

card-divs → UiCard

Custom Pagination → UiPagination (join + btn)

ad-hoc skeletons → UiSkeleton (skeleton class)

border-stroke, bg-white p-4 shadow-sm → UiCard / токены

Фазовый план (микро-PRы)
Фаза A — Tokens & Theme

Уточнить/дополнить _tokens.css. Настроить DaisyUI темы erm-light/erm-dark. darkMode: 'class'. Тест: ThemeToggle меняет data-theme и внешний вид.

Фаза B — Buttons & Card

Финализировать UiButton. Мигрировать Header, Sidebar, основные экраны (до 20 файлов/PR). Visual check.

Фаза C — Forms & Filters

Реализовать UiFormGroup, UiInput, UiSelect. Мигрировать формы /cp/settings (первый блок). Проверить валидацию.

Фаза D — Modals & Alerts

Реализовать UiModal. Заменить ConfirmDialog/AlertDialog и CKEditor popup. Accessibility check.

Фаза E — Tables, Pagination, Skeletons

UiTable, UiPagination, UiSkeleton. Мигрировать ключевые таблицы и фильтры.

Фаза F — Sweep

Grep всех старых классов, удалить/перенести, пометить deprecated компоненты. Финальное визуальное сканирование.

Automation / Discovery (grep patterns)

Искать и собрать список файлов по шаблонам:

import { Button } from '@/components/ui/button'

import Modal from './Modal' / ConfirmDialog

className="bg-white p-4 shadow-sm" / border-stroke / rounded-badge

Inline input/select с кастомными классами

Pagination.tsx, SkeletonCard, TableSkeleton

Собрать таблицу: файл → найденный элемент → предложенная замена.

PR требования и чеклист (обязательно)

Перед мержем:

Build проходит.

TypeScript компиляция проходит.

Unit tests green (если есть).

Smoke тесты: create/save/open modal/filter/export работает.

Visual: скриншоты до/после для desktop/mobile/dark.

Accessibility: модалки focus, aria, contrast.

PR описывает: что сделано, mapping старое→новое, страницы для проверки, команды для запуска, скриншоты.

Acceptance criteria (финальный «done»)

Все критичные страницы используют Ui-примитивы для кнопок, форм, модалей, таблиц и карточек.

Тема erm-light/erm-dark корректно работает через data-theme.

Нет оставшихся ad-hoc стилей для основных элементов в ключевых файлах.

PRs малы, с тестами и визуальной проверкой; accessibility соблюдена.

Быстрые рекомендации для выполнения (Codex / автоматизация)

Менять импорт, а не JSX, где возможно: import { UiButton as Button } ... — минимизировать diff.

Использовать cva / class-variance-authority для вариантности компонентов.

Каждый новый компонент — forwardRef и API variant/size/className.

Распараллеливать миграцию: кнопки → формы → модалки → таблицы → sweep.
