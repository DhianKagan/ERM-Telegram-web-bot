{"version":3,"file":"index-legacy-DFSzv-fz.js","sources":["../../../../node_modules/.pnpm/match-sorter@8.1.0/node_modules/match-sorter/dist/match-sorter.esm.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/AdjustmentsHorizontalIcon.js","../../../web/src/pages/Settings/CollectionsPage.tsx","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/ArchiveBoxIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/BuildingOffice2Icon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/CheckIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/DocumentDuplicateIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/IdentificationIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/KeyIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/RectangleStackIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/Squares2X2Icon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/TruckIcon.js","../../../../node_modules/.pnpm/@heroicons+react@2.2.0_react@18.2.0/node_modules/@heroicons/react/24/outline/esm/UserGroupIcon.js","../../../../node_modules/.pnpm/remove-accents@0.5.0/node_modules/remove-accents/index.js","../../../../node_modules/.pnpm/@radix-ui+react-tabs@1.1.13_9a0a28c0fe72a405cc6b65427e0d242f/node_modules/@radix-ui/react-tabs/dist/index.mjs","../../../web/src/components/ui/tabs.tsx","../../../web/src/components/ActionBar.tsx","../../../web/src/components/CopyableId.tsx","../../../web/src/pages/Settings/CollectionForm.tsx","../../../web/src/pages/Settings/FleetVehicleDialog.tsx","../../../web/src/columns/fleetVehicleColumns.tsx","../../../web/src/pages/Settings/badgeStyles.ts","../../../web/src/pages/Settings/FleetVehiclesTab.tsx","../../../web/src/pages/Settings/TaskSettingsTab.tsx","../../../web/src/services/analytics.ts","../../../web/src/pages/AnalyticsDashboard.tsx","../../../web/src/columns/collectionColumns.tsx","../../../web/src/columns/settingsUserColumns.tsx","../../../web/src/columns/settingsEmployeeColumns.tsx","../../../web/src/utils/employeeRow.ts","../../../web/src/pages/Settings/UserForm.tsx"],"sourcesContent":["import removeAccents from 'remove-accents';\n\n/**\n * @name match-sorter\n * @license MIT license.\n * @copyright (c) 2020 Kent C. Dodds\n * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)\n */\nconst rankings = {\n  CASE_SENSITIVE_EQUAL: 7,\n  EQUAL: 6,\n  STARTS_WITH: 5,\n  WORD_STARTS_WITH: 4,\n  CONTAINS: 3,\n  ACRONYM: 2,\n  MATCHES: 1,\n  NO_MATCH: 0\n};\nconst defaultBaseSortFn = (a, b) => String(a.rankedValue).localeCompare(String(b.rankedValue));\n\n/**\n * Takes an array of items and a value and returns a new array with the items that match the given value\n * @param {Array} items - the items to sort\n * @param {String} value - the value to use for ranking\n * @param {Object} options - Some options to configure the sorter\n * @return {Array} - the new sorted array\n */\nfunction matchSorter(items, value, options = {}) {\n  const {\n    keys,\n    threshold = rankings.MATCHES,\n    baseSort = defaultBaseSortFn,\n    sorter = matchedItems => matchedItems.sort((a, b) => sortRankedValues(a, b, baseSort))\n  } = options;\n  const matchedItems = items.reduce(reduceItemsToRanked, []);\n  return sorter(matchedItems).map(({\n    item\n  }) => item);\n  function reduceItemsToRanked(matches, item, index) {\n    const rankingInfo = getHighestRanking(item, keys, value, options);\n    const {\n      rank,\n      keyThreshold = threshold\n    } = rankingInfo;\n    if (rank >= keyThreshold) {\n      matches.push({\n        ...rankingInfo,\n        item,\n        index\n      });\n    }\n    return matches;\n  }\n}\nmatchSorter.rankings = rankings;\n\n/**\n * Gets the highest ranking for value for the given item based on its values for the given keys\n * @param {*} item - the item to rank\n * @param {Array} keys - the keys to get values from the item for the ranking\n * @param {String} value - the value to rank against\n * @param {Object} options - options to control the ranking\n * @return {{rank: Number, keyIndex: Number, keyThreshold: Number}} - the highest ranking\n */\nfunction getHighestRanking(item, keys, value, options) {\n  if (!keys) {\n    // if keys is not specified, then we assume the item given is ready to be matched\n    const stringItem = item;\n    return {\n      // ends up being duplicate of 'item' in matches but consistent\n      rankedValue: stringItem,\n      rank: getMatchRanking(stringItem, value, options),\n      keyIndex: -1,\n      keyThreshold: options.threshold\n    };\n  }\n  const valuesToRank = getAllValuesToRank(item, keys);\n  return valuesToRank.reduce(({\n    rank,\n    rankedValue,\n    keyIndex,\n    keyThreshold\n  }, {\n    itemValue,\n    attributes\n  }, i) => {\n    let newRank = getMatchRanking(itemValue, value, options);\n    let newRankedValue = rankedValue;\n    const {\n      minRanking,\n      maxRanking,\n      threshold\n    } = attributes;\n    if (newRank < minRanking && newRank >= rankings.MATCHES) {\n      newRank = minRanking;\n    } else if (newRank > maxRanking) {\n      newRank = maxRanking;\n    }\n    if (newRank > rank) {\n      rank = newRank;\n      keyIndex = i;\n      keyThreshold = threshold;\n      newRankedValue = itemValue;\n    }\n    return {\n      rankedValue: newRankedValue,\n      rank,\n      keyIndex,\n      keyThreshold\n    };\n  }, {\n    rankedValue: item,\n    rank: rankings.NO_MATCH,\n    keyIndex: -1,\n    keyThreshold: options.threshold\n  });\n}\nfunction* indexesOf(testString, stringToRank) {\n  let index = -1;\n  while ((index = testString.indexOf(stringToRank, index + 1)) > -1) {\n    yield index;\n  }\n  return -1;\n}\n\n/**\n * Gives a rankings score based on how well the two strings match.\n * @param {String} testString - the string to test against\n * @param {String} stringToRank - the string to rank\n * @param {Object} options - options for the match (like keepDiacritics for comparison)\n * @returns {Number} the ranking for how well stringToRank matches testString\n */\nfunction getMatchRanking(testString, stringToRank, options) {\n  testString = prepareValueForComparison(testString, options);\n  stringToRank = prepareValueForComparison(stringToRank, options);\n\n  // too long\n  if (stringToRank.length > testString.length) {\n    return rankings.NO_MATCH;\n  }\n\n  // case sensitive equals\n  if (testString === stringToRank) {\n    return rankings.CASE_SENSITIVE_EQUAL;\n  }\n\n  // Lower casing before further comparison\n  testString = testString.toLowerCase();\n  stringToRank = stringToRank.toLowerCase();\n\n  // Use indexOf to check for equality/includes\n  const indexesOfStringToRankInTestString = indexesOf(testString, stringToRank);\n  const firstIndexOfStringToRankInTestStringResult = indexesOfStringToRankInTestString.next();\n  const indexOfStringToRankInTestString = firstIndexOfStringToRankInTestStringResult.value;\n\n  // case insensitive equals\n  if (testString.length === stringToRank.length && indexOfStringToRankInTestString === 0) {\n    return rankings.EQUAL;\n  }\n\n  // starts with\n  if (indexOfStringToRankInTestString === 0) {\n    return rankings.STARTS_WITH;\n  }\n\n  // word starts with\n  let indexOfStringToRankInTestStringResult = firstIndexOfStringToRankInTestStringResult;\n  while (!indexOfStringToRankInTestStringResult.done) {\n    if (indexOfStringToRankInTestStringResult.value > 0 && testString[indexOfStringToRankInTestStringResult.value - 1] === ' ') {\n      return rankings.WORD_STARTS_WITH;\n    }\n    indexOfStringToRankInTestStringResult = indexesOfStringToRankInTestString.next();\n  }\n\n  // contains\n  if (indexOfStringToRankInTestString > 0) {\n    return rankings.CONTAINS;\n  } else if (stringToRank.length === 1) {\n    // If the only character in the given stringToRank\n    //   isn't even contained in the testString, then\n    //   it's definitely not a match.\n    return rankings.NO_MATCH;\n  }\n\n  // acronym\n  if (getAcronym(testString).includes(stringToRank)) {\n    return rankings.ACRONYM;\n  }\n\n  // will return a number between rankings.MATCHES and\n  // rankings.MATCHES + 1 depending  on how close of a match it is.\n  return getClosenessRanking(testString, stringToRank);\n}\n\n/**\n * Generates an acronym for a string.\n *\n * Segment starts ︱ at the beginning of the phrase, after a **space**, or after a **hyphen**.\n * We capture the first non-delimiter character of every segment and skip runs of delimiters.\n *\n * @example\n *   getAcronym('The Tail-spin Test')  // → \"TTsT\"\n *   getAcronym('edge-case')           // → \"ec\"\n *   getAcronym('multiple  spaces')    // → \"ms\"\n *\n * @param {String} string the string for which to produce the acronym\n * @returns {String} the acronym\n */\nfunction getAcronym(string) {\n  let acronym = '';\n  let prev = ' '; // virtual delimiter so the very first char qualifies\n\n  for (let i = 0; i < string.length; i++) {\n    const ch = string.charAt(i);\n    const prevWasDelimiter = prev === ' ' || prev === '-';\n    const currIsDelimiter = ch === ' ' || ch === '-';\n    if (prevWasDelimiter && !currIsDelimiter) {\n      acronym += ch;\n    }\n    prev = ch;\n  }\n  return acronym;\n}\n\n/**\n * Returns a score based on how spread apart the\n * characters from the stringToRank are within the testString.\n * A number close to rankings.MATCHES represents a loose match. A number close\n * to rankings.MATCHES + 1 represents a tighter match.\n * @param {String} testString - the string to test against\n * @param {String} stringToRank - the string to rank\n * @returns {Number} the number between rankings.MATCHES and\n * rankings.MATCHES + 1 for how well stringToRank matches testString\n */\nfunction getClosenessRanking(testString, stringToRank) {\n  let matchingInOrderCharCount = 0;\n  let charNumber = 0;\n  function findMatchingCharacter(matchChar, string, index) {\n    for (let j = index, J = string.length; j < J; j++) {\n      const stringChar = string[j];\n      if (stringChar === matchChar) {\n        matchingInOrderCharCount += 1;\n        return j + 1;\n      }\n    }\n    return -1;\n  }\n  function getRanking(spread) {\n    const spreadPercentage = 1 / spread;\n    const inOrderPercentage = matchingInOrderCharCount / stringToRank.length;\n    const ranking = rankings.MATCHES + inOrderPercentage * spreadPercentage;\n    return ranking;\n  }\n  const firstIndex = findMatchingCharacter(stringToRank[0], testString, 0);\n  if (firstIndex < 0) {\n    return rankings.NO_MATCH;\n  }\n  charNumber = firstIndex;\n  for (let i = 1, I = stringToRank.length; i < I; i++) {\n    const matchChar = stringToRank[i];\n    charNumber = findMatchingCharacter(matchChar, testString, charNumber);\n    const found = charNumber > -1;\n    if (!found) {\n      return rankings.NO_MATCH;\n    }\n  }\n  const spread = charNumber - firstIndex;\n  return getRanking(spread);\n}\n\n/**\n * Sorts items that have a rank, index, and keyIndex\n * @param {Object} a - the first item to sort\n * @param {Object} b - the second item to sort\n * @return {Number} -1 if a should come first, 1 if b should come first, 0 if equal\n */\nfunction sortRankedValues(a, b, baseSort) {\n  const aFirst = -1;\n  const bFirst = 1;\n  const {\n    rank: aRank,\n    keyIndex: aKeyIndex\n  } = a;\n  const {\n    rank: bRank,\n    keyIndex: bKeyIndex\n  } = b;\n  const same = aRank === bRank;\n  if (same) {\n    if (aKeyIndex === bKeyIndex) {\n      // use the base sort function as a tie-breaker\n      return baseSort(a, b);\n    } else {\n      return aKeyIndex < bKeyIndex ? aFirst : bFirst;\n    }\n  } else {\n    return aRank > bRank ? aFirst : bFirst;\n  }\n}\n\n/**\n * Prepares value for comparison by stringifying it, removing diacritics (if specified)\n * @param {String} value - the value to clean\n * @param {Object} options - {keepDiacritics: whether to remove diacritics}\n * @return {String} the prepared value\n */\nfunction prepareValueForComparison(value, {\n  keepDiacritics\n}) {\n  // value might not actually be a string at this point (we don't get to choose)\n  // so part of preparing the value for comparison is ensure that it is a string\n  value = `${value}`; // toString\n  if (!keepDiacritics) {\n    value = removeAccents(value);\n  }\n  return value;\n}\n\n/**\n * Gets value for key in item at arbitrarily nested keypath\n * @param {Object} item - the item\n * @param {Object|Function} key - the potentially nested keypath or property callback\n * @return {Array} - an array containing the value(s) at the nested keypath\n */\nfunction getItemValues(item, key) {\n  if (typeof key === 'object') {\n    key = key.key;\n  }\n  let value;\n  if (typeof key === 'function') {\n    value = key(item);\n  } else if (item == null) {\n    value = null;\n  } else if (Object.hasOwnProperty.call(item, key)) {\n    value = item[key];\n  } else if (key.includes('.')) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    return getNestedValues(key, item);\n  } else {\n    value = null;\n  }\n\n  // because `value` can also be undefined\n  if (value == null) {\n    return [];\n  }\n  if (Array.isArray(value)) {\n    return value;\n  }\n  return [String(value)];\n}\n\n/**\n * Given path: \"foo.bar.baz\"\n * And item: {foo: {bar: {baz: 'buzz'}}}\n *   -> 'buzz'\n * @param path a dot-separated set of keys\n * @param item the item to get the value from\n */\nfunction getNestedValues(path, item) {\n  const keys = path.split('.');\n  let values = [item];\n  for (let i = 0, I = keys.length; i < I; i++) {\n    const nestedKey = keys[i];\n    let nestedValues = [];\n    for (let j = 0, J = values.length; j < J; j++) {\n      const nestedItem = values[j];\n      if (nestedItem == null) continue;\n      if (Object.hasOwnProperty.call(nestedItem, nestedKey)) {\n        const nestedValue = nestedItem[nestedKey];\n        if (nestedValue != null) {\n          nestedValues.push(nestedValue);\n        }\n      } else if (nestedKey === '*') {\n        // ensure that values is an array\n        nestedValues = nestedValues.concat(nestedItem);\n      }\n    }\n    values = nestedValues;\n  }\n  if (Array.isArray(values[0])) {\n    // keep allowing the implicit wildcard for an array of strings at the end of\n    // the path; don't use `.flat()` because that's not available in node.js v10\n    const result = [];\n    return result.concat(...values);\n  }\n  // Based on our logic it should be an array of strings by now...\n  // assuming the user's path terminated in strings\n  return values;\n}\n\n/**\n * Gets all the values for the given keys in the given item and returns an array of those values\n * @param item - the item from which the values will be retrieved\n * @param keys - the keys to use to retrieve the values\n * @return objects with {itemValue, attributes}\n */\nfunction getAllValuesToRank(item, keys) {\n  const allValues = [];\n  for (let j = 0, J = keys.length; j < J; j++) {\n    const key = keys[j];\n    const attributes = getKeyAttributes(key);\n    const itemValues = getItemValues(item, key);\n    for (let i = 0, I = itemValues.length; i < I; i++) {\n      allValues.push({\n        itemValue: itemValues[i],\n        attributes\n      });\n    }\n  }\n  return allValues;\n}\nconst defaultKeyAttributes = {\n  maxRanking: Infinity,\n  minRanking: -Infinity\n};\n/**\n * Gets all the attributes for the given key\n * @param key - the key from which the attributes will be retrieved\n * @return object containing the key's attributes\n */\nfunction getKeyAttributes(key) {\n  if (typeof key === 'string') {\n    return defaultKeyAttributes;\n  }\n  return {\n    ...defaultKeyAttributes,\n    ...key\n  };\n}\n\n/*\neslint\n  no-continue: \"off\",\n*/\n\nexport { defaultBaseSortFn, matchSorter, rankings };\n","import * as React from \"react\";\nfunction AdjustmentsHorizontalIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(AdjustmentsHorizontalIcon);\nexport default ForwardRef;","// Назначение: страница управления коллекциями настроек\r\n// Основные модули: React, match-sorter, Tabs, services/collections\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport { matchSorter, rankings } from \"match-sorter\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { z } from \"zod\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n} from \"../../components/Tabs\";\r\nimport ActionBar from \"../../components/ActionBar\";\r\nimport Breadcrumbs from \"../../components/Breadcrumbs\";\r\nimport CopyableId from \"../../components/CopyableId\";\r\nimport DataTable from \"../../components/DataTable\";\r\nimport Spinner from \"../../components/Spinner\";\r\nimport {\r\n  fetchCollectionItems,\r\n  fetchAllCollectionItems,\r\n  createCollectionItem,\r\n  updateCollectionItem,\r\n  removeCollectionItem,\r\n  CollectionItem,\r\n} from \"../../services/collections\";\r\nimport CollectionForm from \"./CollectionForm\";\r\nimport ConfirmDialog from \"../../components/ConfirmDialog\";\r\nimport EmployeeCardForm from \"../../components/EmployeeCardForm\";\r\nimport Modal from \"../../components/Modal\";\r\nimport FleetVehiclesTab from \"./FleetVehiclesTab\";\r\nimport TaskSettingsTab from \"./TaskSettingsTab\";\r\nimport AnalyticsDashboard from \"../AnalyticsDashboard\";\r\nimport ArchivePage from \"../Archive\";\r\nimport LogsPage from \"../Logs\";\r\nimport StoragePage from \"../Storage\";\r\nimport {\r\n  collectionColumns,\r\n  type CollectionTableRow,\r\n} from \"../../columns/collectionColumns\";\r\nimport { settingsUserColumns } from \"../../columns/settingsUserColumns\";\r\nimport {\r\n  settingsEmployeeColumns,\r\n  type EmployeeRow,\r\n} from \"../../columns/settingsEmployeeColumns\";\r\nimport {\r\n  fetchUsers,\r\n  createUser as createUserApi,\r\n  updateUser as updateUserApi,\r\n  deleteUser as deleteUserApi,\r\n  type UserDetails,\r\n} from \"../../services/users\";\r\nimport { fetchRoles, type Role } from \"../../services/roles\";\r\nimport { formatRoleName } from \"../../utils/roleDisplay\";\r\nimport { buildEmployeeRow } from \"../../utils/employeeRow\";\r\nimport UserForm, { UserFormData } from \"./UserForm\";\r\nimport type { User } from \"../../types/user\";\r\nimport { useAuth } from \"../../context/useAuth\";\r\nimport {\r\n  SETTINGS_BADGE_CLASS,\r\n  SETTINGS_BADGE_EMPTY,\r\n  SETTINGS_BADGE_WRAPPER_CLASS,\r\n} from \"./badgeStyles\";\r\nimport { hasAccess, ACCESS_ADMIN } from \"../../utils/access\";\r\nimport { showToast } from \"../../utils/toast\";\r\nimport {\r\n  BuildingOffice2Icon,\r\n  Squares2X2Icon,\r\n  IdentificationIcon,\r\n  UserGroupIcon,\r\n  TruckIcon,\r\n  KeyIcon,\r\n  ClipboardDocumentListIcon,\r\n  AdjustmentsHorizontalIcon,\r\n  ChartPieIcon,\r\n  ArchiveBoxIcon,\r\n  DocumentTextIcon,\r\n  RectangleStackIcon,\r\n} from \"@heroicons/react/24/outline\";\r\n\r\nconst moduleTabs = [\r\n  {\r\n    key: \"directories\",\r\n    label: \"Справочники\",\r\n    description: \"Структура компании и доступы\",\r\n    icon: AdjustmentsHorizontalIcon,\r\n  },\r\n  {\r\n    key: \"reports\",\r\n    label: \"Отчёты\",\r\n    description: \"Аналитика процессов и KPI\",\r\n    icon: ChartPieIcon,\r\n  },\r\n  {\r\n    key: \"archive\",\r\n    label: \"Архив\",\r\n    description: \"История задач и записей\",\r\n    icon: ArchiveBoxIcon,\r\n  },\r\n  {\r\n    key: \"logs\",\r\n    label: \"Логи\",\r\n    description: \"Журнал действий и событий\",\r\n    icon: DocumentTextIcon,\r\n  },\r\n  {\r\n    key: \"storage\",\r\n    label: \"Файлы\",\r\n    description: \"Управление вложениями\",\r\n    icon: RectangleStackIcon,\r\n  },\r\n] as const;\r\n\r\ntype SettingsModuleKey = (typeof moduleTabs)[number][\"key\"];\r\n\r\nconst isValidModuleKey = (\r\n  value: string | null,\r\n): value is SettingsModuleKey =>\r\n  moduleTabs.some((module) => module.key === value);\r\n\r\nconst types = [\r\n  {\r\n    key: \"departments\",\r\n    label: \"Департамент\",\r\n    description: \"Структура компании и направления\",\r\n  },\r\n  {\r\n    key: \"divisions\",\r\n    label: \"Отдел\",\r\n    description: \"Команды внутри департаментов\",\r\n  },\r\n  {\r\n    key: \"positions\",\r\n    label: \"Должность\",\r\n    description: \"Роли и рабочие позиции\",\r\n  },\r\n  {\r\n    key: \"employees\",\r\n    label: \"Сотрудник\",\r\n    description: \"Карточки и доступы сотрудников\",\r\n  },\r\n  {\r\n    key: \"fleets\",\r\n    label: \"Автопарк\",\r\n    description: \"Транспорт и связанный состав\",\r\n  },\r\n  {\r\n    key: \"users\",\r\n    label: \"Пользователь\",\r\n    description: \"Учётные записи в системе\",\r\n  },\r\n  {\r\n    key: \"tasks\",\r\n    label: \"Задачи\",\r\n    description: \"Поля формы и темы публикаций\",\r\n  },\r\n] as const;\r\n\r\ntype CollectionKey = (typeof types)[number][\"key\"];\r\n\r\nconst createInitialQueries = (): Record<CollectionKey, string> =>\r\n  types.reduce(\r\n    (acc, type) => {\r\n      acc[type.key as CollectionKey] = \"\";\r\n      return acc;\r\n    },\r\n    {} as Record<CollectionKey, string>,\r\n  );\r\n\r\nconst emptyUser: UserFormData = {\r\n  telegram_id: undefined,\r\n  username: \"\",\r\n  name: \"\",\r\n  phone: \"\",\r\n  mobNumber: \"\",\r\n  email: \"\",\r\n  role: \"user\",\r\n  access: 1,\r\n  roleId: \"\",\r\n  departmentId: \"\",\r\n  divisionId: \"\",\r\n  positionId: \"\",\r\n};\r\n\r\nconst tabIcons: Record<\r\n  CollectionKey,\r\n  React.ComponentType<React.SVGProps<SVGSVGElement>>\r\n> = {\r\n  departments: BuildingOffice2Icon,\r\n  divisions: Squares2X2Icon,\r\n  positions: IdentificationIcon,\r\n  employees: UserGroupIcon,\r\n  fleets: TruckIcon,\r\n  users: KeyIcon,\r\n  tasks: ClipboardDocumentListIcon,\r\n};\r\n\r\nconst renderBadgeList = (items: string[]) => {\r\n  if (!items.length) {\r\n    return (\r\n      <span className={SETTINGS_BADGE_CLASS} title={SETTINGS_BADGE_EMPTY}>\r\n        {SETTINGS_BADGE_EMPTY}\r\n      </span>\r\n    );\r\n  }\r\n  return (\r\n    <div className={SETTINGS_BADGE_WRAPPER_CLASS}>\r\n      {items.map((item, index) => (\r\n        <span\r\n          key={`${item}-${index}`}\r\n          className={SETTINGS_BADGE_CLASS}\r\n          title={item}\r\n        >\r\n          {item}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface ItemForm {\r\n  _id?: string;\r\n  name: string;\r\n  value: string;\r\n}\r\n\r\nconst normalizeId = (value: string) => {\r\n  const trimmed = value.trim();\r\n  if (!trimmed) return \"\";\r\n  const withoutQuotes = trimmed.replace(/^['\"]+|['\"]+$/g, \"\");\r\n  const withoutBrackets = withoutQuotes.replace(/^\\[+|\\]+$/g, \"\");\r\n  const withoutBraces = withoutBrackets.replace(/^[{}]+|[{}]+$/g, \"\");\r\n  const withoutTrailingComma = withoutBraces.replace(/,+$/g, \"\");\r\n  return withoutTrailingComma.trim();\r\n};\r\n\r\nconst collectStringIds = (value: unknown): string[] => {\r\n  if (typeof value === \"string\") {\r\n    return [value];\r\n  }\r\n  if (Array.isArray(value)) {\r\n    return value.flatMap(collectStringIds);\r\n  }\r\n  if (value && typeof value === \"object\") {\r\n    const result: string[] = [];\r\n    Object.entries(value as Record<string, unknown>).forEach(([key, entry]) => {\r\n      if (Array.isArray(entry) || (entry && typeof entry === \"object\")) {\r\n        result.push(...collectStringIds(entry));\r\n        return;\r\n      }\r\n      if (typeof entry === \"string\") {\r\n        const trimmed = entry.trim();\r\n        if (!trimmed) return;\r\n        const lowerKey = key.toLowerCase();\r\n        if (lowerKey.includes(\"id\") || !/\\s/.test(trimmed)) {\r\n          result.push(trimmed);\r\n        }\r\n        return;\r\n      }\r\n      if (typeof entry === \"boolean\" || typeof entry === \"number\") {\r\n        if (entry) {\r\n          result.push(key);\r\n        }\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n  return [];\r\n};\r\n\r\nconst KEY_LABEL_OVERRIDES: Record<string, string> = {\r\n  telegram_id: \"Telegram ID\",\r\n  telegram_username: \"Логин Telegram\",\r\n  username: \"Логин\",\r\n  name: \"Имя\",\r\n  phone: \"Телефон\",\r\n  mobNumber: \"Моб. номер\",\r\n  email: \"E-mail\",\r\n  role: \"Роль\",\r\n  access: \"Доступ\",\r\n  roleId: \"Роль ID\",\r\n  departmentId: \"Департамент\",\r\n  departmentName: \"Департамент\",\r\n  divisionId: \"Отдел\",\r\n  divisionName: \"Отдел\",\r\n  positionId: \"Должность\",\r\n  positionName: \"Должность\",\r\n  permissions: \"Права\",\r\n  fleetId: \"Автопарк\",\r\n  source: \"Источник\",\r\n  sourceId: \"ID источника\",\r\n  readonly: \"Только чтение\",\r\n  readonlyReason: \"Причина ограничения\",\r\n  invalid: \"Некорректен\",\r\n  invalidReason: \"Причина ошибки\",\r\n  invalidCode: \"Код ошибки\",\r\n  invalidAt: \"Ошибка от\",\r\n  syncPending: \"Ожидает синхронизации\",\r\n  syncWarning: \"Предупреждение\",\r\n  syncError: \"Ошибка синхронизации\",\r\n  syncFailedAt: \"Сбой синхронизации\",\r\n  defaultLabel: \"Название по умолчанию\",\r\n  fieldType: \"Тип поля\",\r\n  required: \"Обязательное\",\r\n  order: \"Порядок\",\r\n  virtual: \"Системный элемент\",\r\n  tg_theme_url: \"Тема Telegram\",\r\n  tg_chat_id: \"ID чата\",\r\n  tg_topic_id: \"ID темы\",\r\n  tg_photos_url: \"Тема для фото\",\r\n  tg_photos_chat_id: \"ID чата фото\",\r\n  tg_photos_topic_id: \"ID темы фото\",\r\n};\r\n\r\nconst formatKeyLabel = (key: string): string => {\r\n  const override = KEY_LABEL_OVERRIDES[key];\r\n  if (override) return override;\r\n  const normalized = key\r\n    .replace(/[_-]+/g, \" \")\r\n    .replace(/([a-z])([A-Z])/g, \"$1 $2\")\r\n    .trim();\r\n  if (!normalized) return key;\r\n  return normalized.charAt(0).toUpperCase() + normalized.slice(1);\r\n};\r\n\r\nconst formatSummaryValue = (value: unknown): string => {\r\n  if (value === null || value === undefined) return \"\";\r\n  if (typeof value === \"boolean\") {\r\n    return value ? \"Да\" : \"Нет\";\r\n  }\r\n  if (typeof value === \"number\") {\r\n    return Number.isFinite(value) ? String(value) : \"\";\r\n  }\r\n  if (typeof value === \"string\") {\r\n    const trimmed = value.trim();\r\n    return trimmed;\r\n  }\r\n  if (Array.isArray(value)) {\r\n    const formatted = value\r\n      .map((item) => formatSummaryValue(item))\r\n      .filter(Boolean);\r\n    return formatted.join(\", \");\r\n  }\r\n  if (value instanceof Date) {\r\n    return value.toISOString();\r\n  }\r\n  if (typeof value === \"object\") {\r\n    const entries = Object.entries(value as Record<string, unknown>)\r\n      .map(([key, nested]) => {\r\n        const formatted = formatSummaryValue(nested);\r\n        if (!formatted) return \"\";\r\n        return `${formatKeyLabel(key)}=${formatted}`;\r\n      })\r\n      .filter(Boolean);\r\n    return entries.join(\"; \");\r\n  }\r\n  return \"\";\r\n};\r\n\r\nconst summarizeRecord = (record?: Record<string, unknown>): string => {\r\n  if (!record) return \"\";\r\n  const entries = Object.entries(record)\r\n    .map(([key, value]) => {\r\n      const formatted = formatSummaryValue(value);\r\n      if (!formatted) return \"\";\r\n      return `${formatKeyLabel(key)}: ${formatted}`;\r\n    })\r\n    .filter(Boolean);\r\n  return entries.join(\"\\n\");\r\n};\r\n\r\nconst tryParseJsonValue = (raw: string): unknown => {\r\n  try {\r\n    return JSON.parse(raw);\r\n  } catch {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nconst formatCollectionRawValue = (raw: string): string => {\r\n  const trimmed = raw.trim();\r\n  if (!trimmed) return \"\";\r\n  const parsed =\r\n    trimmed.startsWith(\"{\") || trimmed.startsWith(\"[\")\r\n      ? tryParseJsonValue(trimmed)\r\n      : undefined;\r\n  if (Array.isArray(parsed)) {\r\n    const formatted = parsed\r\n      .map((item) => formatSummaryValue(item))\r\n      .filter(Boolean);\r\n    if (formatted.length) {\r\n      return formatted.join(\"\\n\");\r\n    }\r\n  } else if (parsed && typeof parsed === \"object\") {\r\n    const summary = summarizeRecord(parsed as Record<string, unknown>);\r\n    if (summary) {\r\n      return summary;\r\n    }\r\n  }\r\n  if (trimmed.includes(\",\")) {\r\n    const parts = trimmed\r\n      .split(\",\")\r\n      .map((part) => part.trim())\r\n      .filter(Boolean);\r\n    if (parts.length > 1) {\r\n      return parts.join(\"\\n\");\r\n    }\r\n  }\r\n  return trimmed;\r\n};\r\n\r\nconst IdsSchema = z\r\n  .preprocess((input) => {\r\n    if (input === null || input === undefined) {\r\n      return [];\r\n    }\r\n    if (typeof input === \"string\") {\r\n      const trimmed = input.trim();\r\n      if (!trimmed) {\r\n        return [];\r\n      }\r\n      if (trimmed.startsWith(\"{\") || trimmed.startsWith(\"[\")) {\r\n        try {\r\n          const parsed = JSON.parse(trimmed);\r\n          return collectStringIds(parsed);\r\n        } catch {\r\n          // игнорируем ошибки парсинга и переходим к разбору по разделителю\r\n        }\r\n      }\r\n      return trimmed\r\n        .split(\",\")\r\n        .map((part) => part.trim())\r\n        .filter(Boolean);\r\n    }\r\n    if (Array.isArray(input) || (input && typeof input === \"object\")) {\r\n      return collectStringIds(input);\r\n    }\r\n    return [String(input)];\r\n  }, z.array(z.string()))\r\n  .transform((values) => {\r\n    const normalized = values\r\n      .map((value) => normalizeId(String(value)))\r\n      .filter((value) => value.length > 0);\r\n    return Array.from(new Set(normalized));\r\n  });\r\n\r\nconst safeParseIds = (value: unknown): string[] => {\r\n  const result = IdsSchema.safeParse(value);\r\n  return result.success ? result.data : [];\r\n};\r\n\r\nconst mergeById = <T extends { _id: string }>(\r\n  current: T[],\r\n  incoming: T[],\r\n): T[] => {\r\n  if (!incoming.length) {\r\n    return current;\r\n  }\r\n  const merged = current.slice();\r\n  const indexById = new Map<string, number>();\r\n  merged.forEach((item, index) => {\r\n    indexById.set(item._id, index);\r\n  });\r\n  let changed = false;\r\n  incoming.forEach((item) => {\r\n    const index = indexById.get(item._id);\r\n    if (typeof index === \"number\") {\r\n      if (merged[index] !== item) {\r\n        merged[index] = item;\r\n        changed = true;\r\n      }\r\n      return;\r\n    }\r\n    indexById.set(item._id, merged.length);\r\n    merged.push(item);\r\n    changed = true;\r\n  });\r\n  return changed ? merged : current;\r\n};\r\n\r\nconst resolveReferenceName = (\r\n  map: Map<string, string>,\r\n  id?: string | null,\r\n  fallbackName?: string | null,\r\n): string => {\r\n  const directName =\r\n    typeof fallbackName === \"string\" && fallbackName.trim().length\r\n      ? fallbackName.trim()\r\n      : \"\";\r\n  if (directName) return directName;\r\n  if (typeof id !== \"string\") return \"\";\r\n  const trimmed = id.trim();\r\n  if (!trimmed) return \"\";\r\n  return map.get(trimmed) ?? trimmed;\r\n};\r\n\r\ntype EmployeeDetailsIndex = {\r\n  byId: Map<string, Partial<User>>;\r\n  byTelegramUsername: Map<string, Partial<User>>;\r\n  byUsername: Map<string, Partial<User>>;\r\n};\r\n\r\nconst readValue = (\r\n  source: Record<string, unknown>,\r\n  keys: string[],\r\n): unknown => {\r\n  for (const key of keys) {\r\n    if (key in source) return source[key];\r\n  }\r\n  const lowerCaseSource: Record<string, unknown> = {};\r\n  Object.entries(source).forEach(([key, value]) => {\r\n    lowerCaseSource[key.toLowerCase()] = value;\r\n  });\r\n  for (const key of keys) {\r\n    const lowerKey = key.toLowerCase();\r\n    if (lowerKey in lowerCaseSource) return lowerCaseSource[lowerKey];\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst pickString = (\r\n  source: Record<string, unknown>,\r\n  keys: string[],\r\n  fallback?: string,\r\n): string | undefined => {\r\n  const raw = readValue(source, keys);\r\n  if (typeof raw === \"string\") {\r\n    const trimmed = raw.trim();\r\n    if (trimmed.length) return trimmed;\r\n  }\r\n  if (typeof raw === \"number\" && Number.isFinite(raw)) {\r\n    return String(raw);\r\n  }\r\n  if (typeof fallback === \"string\") {\r\n    const trimmed = fallback.trim();\r\n    if (trimmed.length) return trimmed;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst pickNumber = (\r\n  source: Record<string, unknown>,\r\n  keys: string[],\r\n): number | undefined => {\r\n  const raw = readValue(source, keys);\r\n  if (typeof raw === \"number\" && Number.isFinite(raw)) {\r\n    return raw;\r\n  }\r\n  if (typeof raw === \"string\") {\r\n    const trimmed = raw.trim();\r\n    if (!trimmed) return undefined;\r\n    const parsed = Number(trimmed);\r\n    if (Number.isFinite(parsed)) {\r\n      return parsed;\r\n    }\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst pickStringArray = (\r\n  source: Record<string, unknown>,\r\n  keys: string[],\r\n): string[] | undefined => {\r\n  const raw = readValue(source, keys);\r\n  if (!Array.isArray(raw)) return undefined;\r\n  const normalized = raw\r\n    .filter((item): item is string => typeof item === \"string\")\r\n    .map((item) => item.trim())\r\n    .filter((item) => item.length > 0);\r\n  return normalized.length ? normalized : undefined;\r\n};\r\n\r\nconst collectEmployeeDetails = (\r\n  item: CollectionItem,\r\n): Partial<User> | undefined => {\r\n  if (item.type !== \"employees\") return undefined;\r\n  const parts: Record<string, unknown>[] = [];\r\n  if (item.meta && typeof item.meta === \"object\") {\r\n    parts.push(item.meta as Record<string, unknown>);\r\n  }\r\n  const rawValue = item.value;\r\n  if (typeof rawValue === \"string\") {\r\n    const trimmed = rawValue.trim();\r\n    if (trimmed) {\r\n      try {\r\n        const parsed = JSON.parse(trimmed);\r\n        if (parsed && typeof parsed === \"object\" && !Array.isArray(parsed)) {\r\n          parts.push(parsed as Record<string, unknown>);\r\n        }\r\n      } catch {\r\n        // игнорируем значения, которые не являются JSON\r\n      }\r\n    }\r\n  } else if (rawValue && typeof rawValue === \"object\" && !Array.isArray(rawValue)) {\r\n    parts.push(rawValue as Record<string, unknown>);\r\n  }\r\n\r\n  if (!parts.length) {\r\n    const name = item.name?.trim();\r\n    return name ? { name } : undefined;\r\n  }\r\n\r\n  const combined = parts.reduce<Record<string, unknown>>(\r\n    (acc, part) => ({ ...acc, ...part }),\r\n    {},\r\n  );\r\n\r\n  const details: Partial<User> = {};\r\n  const telegramId = pickNumber(combined, [\"telegram_id\", \"telegramId\", \"id\"]);\r\n  if (typeof telegramId === \"number\") {\r\n    details.telegram_id = telegramId;\r\n  }\r\n  const telegramUsername = pickString(combined, [\r\n    \"telegram_username\",\r\n    \"telegramUsername\",\r\n    \"telegram_login\",\r\n    \"telegramLogin\",\r\n  ]);\r\n  if (telegramUsername) {\r\n    details.telegram_username = telegramUsername;\r\n  }\r\n  const username = pickString(combined, [\"username\", \"login\"]);\r\n  if (username) {\r\n    details.username = username;\r\n  }\r\n  const name = pickString(combined, [\"name\", \"fullName\"], item.name);\r\n  const firstName = pickString(combined, [\"firstName\", \"first_name\"]);\r\n  const lastName = pickString(combined, [\r\n    \"lastName\",\r\n    \"last_name\",\r\n    \"surname\",\r\n    \"familyName\",\r\n  ]);\r\n  const middleName = pickString(combined, [\r\n    \"middleName\",\r\n    \"middle_name\",\r\n    \"patronymic\",\r\n  ]);\r\n  if (name) {\r\n    details.name = name;\r\n  } else {\r\n    const parts = [lastName, firstName, middleName].filter(\r\n      (part): part is string => typeof part === \"string\" && part.trim().length > 0,\r\n    );\r\n    if (parts.length) {\r\n      details.name = parts.join(\" \");\r\n    }\r\n  }\r\n  const phone = pickString(combined, [\"phone\", \"phone_number\", \"phoneNumber\"]);\r\n  if (phone) {\r\n    details.phone = phone;\r\n  }\r\n  const mobNumber = pickString(combined, [\r\n    \"mobNumber\",\r\n    \"mobile\",\r\n    \"mobile_phone\",\r\n    \"mobilePhone\",\r\n  ]);\r\n  if (mobNumber) {\r\n    details.mobNumber = mobNumber;\r\n  }\r\n  const email = pickString(combined, [\"email\", \"mail\"]);\r\n  if (email) {\r\n    details.email = email;\r\n  }\r\n  const role = pickString(combined, [\"role\", \"roleName\"]);\r\n  if (role) {\r\n    details.role = role;\r\n  }\r\n  const access = pickNumber(combined, [\"access\", \"access_level\", \"accessLevel\"]);\r\n  if (typeof access === \"number\") {\r\n    details.access = access;\r\n  }\r\n  const roleId = pickString(combined, [\"roleId\", \"role_id\"]);\r\n  if (roleId) {\r\n    details.roleId = roleId;\r\n  }\r\n  const roleName = pickString(combined, [\"roleName\"]);\r\n  if (roleName) {\r\n    details.roleName = roleName;\r\n  }\r\n  const departmentId = pickString(combined, [\"departmentId\", \"department_id\"]);\r\n  if (departmentId) {\r\n    details.departmentId = departmentId;\r\n  }\r\n  const departmentName = pickString(combined, [\"departmentName\"]);\r\n  if (departmentName) {\r\n    details.departmentName = departmentName;\r\n  }\r\n  const divisionId = pickString(combined, [\"divisionId\", \"division_id\"]);\r\n  if (divisionId) {\r\n    details.divisionId = divisionId;\r\n  }\r\n  const divisionName = pickString(combined, [\"divisionName\"]);\r\n  if (divisionName) {\r\n    details.divisionName = divisionName;\r\n  }\r\n  const positionId = pickString(combined, [\"positionId\", \"position_id\"]);\r\n  if (positionId) {\r\n    details.positionId = positionId;\r\n  }\r\n  const positionName = pickString(combined, [\"positionName\"]);\r\n  if (positionName) {\r\n    details.positionName = positionName;\r\n  }\r\n  const permissions = pickStringArray(combined, [\"permissions\"]);\r\n  if (permissions) {\r\n    details.permissions = permissions;\r\n  }\r\n\r\n  return Object.keys(details).length ? details : undefined;\r\n};\r\n\r\nconst buildEmployeeDetailsIndex = (\r\n  items: CollectionItem[],\r\n): EmployeeDetailsIndex => {\r\n  const index: EmployeeDetailsIndex = {\r\n    byId: new Map(),\r\n    byTelegramUsername: new Map(),\r\n    byUsername: new Map(),\r\n  };\r\n  items.forEach((item) => {\r\n    const details = collectEmployeeDetails(item);\r\n    if (!details) return;\r\n    if (typeof details.telegram_id === \"number\") {\r\n      index.byId.set(String(details.telegram_id), details);\r\n    }\r\n    if (typeof details.telegram_username === \"string\") {\r\n      index.byTelegramUsername.set(details.telegram_username.toLowerCase(), details);\r\n    }\r\n    if (typeof details.username === \"string\") {\r\n      index.byUsername.set(details.username.toLowerCase(), details);\r\n    }\r\n  });\r\n  return index;\r\n};\r\n\r\nconst mergeEmployeeDetails = (\r\n  user: User,\r\n  details?: Partial<User>,\r\n): User => {\r\n  if (!details) return user;\r\n  const result: User = { ...user };\r\n  const assignNumber = <K extends keyof User>(key: K) => {\r\n    const next = details[key];\r\n    if (typeof next !== \"number\" || !Number.isFinite(next)) return;\r\n    const current = result[key];\r\n    if (typeof current === \"number\" && Number.isFinite(current)) return;\r\n    result[key] = next as User[K];\r\n  };\r\n  const assignString = <K extends keyof User>(key: K) => {\r\n    const next = details[key];\r\n    if (next === undefined || next === null) return;\r\n    const normalized =\r\n      typeof next === \"string\"\r\n        ? next.trim()\r\n        : typeof next === \"number\" && Number.isFinite(next)\r\n          ? String(next)\r\n          : \"\";\r\n    if (!normalized) return;\r\n    const current = result[key];\r\n    if (\r\n      current === undefined ||\r\n      current === null ||\r\n      (typeof current === \"string\" && !current.trim())\r\n    ) {\r\n      result[key] = normalized as User[K];\r\n    }\r\n  };\r\n\r\n  assignNumber(\"telegram_id\");\r\n  assignString(\"telegram_username\");\r\n  assignString(\"username\");\r\n  assignString(\"name\");\r\n  assignString(\"phone\");\r\n  assignString(\"mobNumber\");\r\n  assignString(\"email\");\r\n  assignString(\"role\");\r\n  assignNumber(\"access\");\r\n  assignString(\"roleId\");\r\n  assignString(\"roleName\");\r\n  assignString(\"departmentId\");\r\n  assignString(\"departmentName\");\r\n  assignString(\"divisionId\");\r\n  assignString(\"divisionName\");\r\n  assignString(\"positionId\");\r\n  assignString(\"positionName\");\r\n  if (\r\n    (!result.permissions || !result.permissions.length) &&\r\n    Array.isArray(details.permissions) &&\r\n    details.permissions.length\r\n  ) {\r\n    result.permissions = details.permissions.slice();\r\n  }\r\n  return result;\r\n};\r\n\r\nconst TOKEN_SPLIT_REGEX = /[\\s,.;:/\\\\|_-]+/u;\r\n\r\nconst buildUserSearchTokens = (user: User): string[] => {\r\n  const tokens = new Set<string>();\r\n  const addValue = (value?: string | number | null) => {\r\n    if (value === undefined || value === null) return;\r\n    let text: string;\r\n    if (typeof value === \"number\") {\r\n      if (!Number.isFinite(value)) return;\r\n      text = String(value);\r\n    } else if (typeof value === \"string\") {\r\n      text = value.trim();\r\n    } else {\r\n      return;\r\n    }\r\n    if (!text) return;\r\n    tokens.add(text);\r\n    text\r\n      .split(TOKEN_SPLIT_REGEX)\r\n      .map((part) => part.trim())\r\n      .filter((part) => part.length > 0)\r\n      .forEach((part) => tokens.add(part));\r\n  };\r\n\r\n  addValue(user.username ?? undefined);\r\n  addValue(user.telegram_username ?? undefined);\r\n  addValue(user.telegram_id ?? undefined);\r\n  addValue(user.name ?? undefined);\r\n  addValue(user.phone ?? undefined);\r\n  addValue(user.mobNumber ?? undefined);\r\n  addValue(user.email ?? undefined);\r\n  addValue(user.role ?? undefined);\r\n  addValue(user.roleName ?? undefined);\r\n  addValue(user.departmentName ?? undefined);\r\n  addValue(user.divisionName ?? undefined);\r\n  addValue(user.positionName ?? undefined);\r\n  if (Array.isArray(user.permissions)) {\r\n    user.permissions.forEach((permission) => addValue(permission));\r\n  }\r\n\r\n  return Array.from(tokens);\r\n};\r\n\r\nconst findEmployeeDetails = (\r\n  user: User | undefined,\r\n  index: EmployeeDetailsIndex,\r\n  fallbackId?: string,\r\n): Partial<User> | undefined => {\r\n  const candidateId = fallbackId\r\n    ? fallbackId.trim()\r\n    : typeof user?.telegram_id === \"number\"\r\n      ? String(user.telegram_id)\r\n      : undefined;\r\n  if (candidateId) {\r\n    const direct = index.byId.get(candidateId);\r\n    if (direct) return direct;\r\n  }\r\n  const telegramUsername =\r\n    typeof user?.telegram_username === \"string\"\r\n      ? user.telegram_username.trim().toLowerCase()\r\n      : undefined;\r\n  if (telegramUsername) {\r\n    const direct = index.byTelegramUsername.get(telegramUsername);\r\n    if (direct) return direct;\r\n  }\r\n  const username =\r\n    typeof user?.username === \"string\"\r\n      ? user.username.trim().toLowerCase()\r\n      : undefined;\r\n  if (username) {\r\n    const direct = index.byUsername.get(username);\r\n    if (direct) return direct;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst USERS_ERROR_HINT = \"Не удалось загрузить пользователей\";\r\nconst DUPLICATE_DIVISION_HINT_PREFIX = \"Обнаружены дублирующиеся отделы\";\r\nconst TASK_SETTINGS_ERROR_HINT = \"Не удалось загрузить настройки задач\";\r\nconst TASK_FIELD_SAVE_ERROR = \"Не удалось сохранить поле задачи\";\r\nconst TASK_TYPE_SAVE_ERROR = \"Не удалось сохранить тип задачи\";\r\nconst TASK_SETTINGS_DELETE_ERROR = \"Не удалось удалить настройку задачи\";\r\nconst USER_DELETE_SUCCESS = \"Пользователь удалён\";\r\nconst USER_DELETE_ERROR = \"Не удалось удалить пользователя\";\r\nconst EMPLOYEE_DELETE_SUCCESS = \"Сотрудник удалён\";\r\nconst EMPLOYEE_DELETE_ERROR = \"Не удалось удалить сотрудника\";\r\n\r\ntype CollectionColumn = (typeof collectionColumns)[number];\r\n\r\nconst hasAccessorKey = (\r\n  column: CollectionColumn,\r\n): column is CollectionColumn & { accessorKey: string } =>\r\n  typeof (column as { accessorKey?: unknown }).accessorKey === \"string\";\r\n\r\nexport default function CollectionsPage() {\r\n  const { t } = useTranslation();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [activeModule, setActiveModule] = useState<SettingsModuleKey>(() => {\r\n    const param = searchParams.get(\"module\");\r\n    return isValidModuleKey(param) ? param : \"directories\";\r\n  });\r\n  const [active, setActive] = useState<CollectionKey>(\"departments\");\r\n  const [items, setItems] = useState<CollectionItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [total, setTotal] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [queries, setQueries] = useState<Record<CollectionKey, string>>(() =>\r\n    createInitialQueries(),\r\n  );\r\n  const [searchDrafts, setSearchDrafts] = useState<Record<CollectionKey, string>>(\r\n    () => createInitialQueries(),\r\n  );\r\n  const [form, setForm] = useState<ItemForm>({ name: \"\", value: \"\" });\r\n  const [hint, setHint] = useState(\"\");\r\n  const [allDepartments, setAllDepartments] = useState<CollectionItem[]>([]);\r\n  const [allDivisions, setAllDivisions] = useState<CollectionItem[]>([]);\r\n  const [allPositions, setAllPositions] = useState<CollectionItem[]>([]);\r\n  const [allRoles, setAllRoles] = useState<Role[]>([]);\r\n  const limit = 10;\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [userPage, setUserPage] = useState(1);\r\n  const [userQuery, setUserQuery] = useState(\"\");\r\n  const [userSearchDraft, setUserSearchDraft] = useState(\"\");\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [userForm, setUserForm] = useState<UserFormData>(emptyUser);\r\n  const [collectionModalOpen, setCollectionModalOpen] = useState(false);\r\n  const [selectedCollection, setSelectedCollection] = useState<\r\n    CollectionItem | null\r\n  >(null);\r\n  const collectionSearchTimer = useRef<number>();\r\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState<\r\n    string | undefined\r\n  >(undefined);\r\n  const [isEmployeeModalOpen, setIsEmployeeModalOpen] = useState(false);\r\n  const [employeeFormMode, setEmployeeFormMode] = useState<\"create\" | \"update\">(\r\n    \"create\",\r\n  );\r\n  const [taskFieldItems, setTaskFieldItems] = useState<CollectionItem[]>([]);\r\n  const [taskTypeItems, setTaskTypeItems] = useState<CollectionItem[]>([]);\r\n  const [tasksLoading, setTasksLoading] = useState(false);\r\n  const { user: currentUser } = useAuth();\r\n  const [confirmUserDelete, setConfirmUserDelete] = useState(false);\r\n  const [confirmEmployeeDelete, setConfirmEmployeeDelete] = useState(false);\r\n  const canManageUsers = hasAccess(currentUser?.access, ACCESS_ADMIN);\r\n  const actionButtonClass =\r\n    \"h-10 w-full max-w-[11rem] px-3 text-sm font-semibold sm:w-auto lg:h-8 lg:text-xs\";\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (collectionSearchTimer.current) {\r\n        window.clearTimeout(collectionSearchTimer.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const param = searchParams.get(\"module\");\r\n    const next = isValidModuleKey(param) ? param : \"directories\";\r\n    if (next !== activeModule) {\r\n      setActiveModule(next);\r\n    }\r\n  }, [searchParams, activeModule]);\r\n\r\n  const handleModuleChange = useCallback(\r\n    (value: SettingsModuleKey) => {\r\n      setActiveModule(value);\r\n      const next = new URLSearchParams(searchParams.toString());\r\n      if (value === \"directories\") {\r\n        next.delete(\"module\");\r\n      } else {\r\n        next.set(\"module\", value);\r\n      }\r\n      setSearchParams(next, { replace: true });\r\n    },\r\n    [searchParams, setSearchParams],\r\n  );\r\n  const selectedCollectionInfo = useMemo(() => {\r\n    if (!selectedCollection?.meta || typeof selectedCollection.meta !== \"object\") {\r\n      return { readonly: false, notice: undefined as string | undefined };\r\n    }\r\n    const meta = selectedCollection.meta as {\r\n      readonly?: unknown;\r\n      legacy?: unknown;\r\n      readonlyReason?: unknown;\r\n    };\r\n    const readonly = Boolean(meta.readonly ?? meta.legacy);\r\n    const notice = readonly\r\n      ? typeof meta.readonlyReason === \"string\"\r\n        ? meta.readonlyReason\r\n        : meta.legacy\r\n          ? \"Элемент перенесён из старой коллекции и доступен только для чтения.\"\r\n          : undefined\r\n      : undefined;\r\n    return { readonly, notice };\r\n  }, [selectedCollection]);\r\n\r\n  const breadcrumbs = useMemo(\r\n    () => [\r\n      { label: t(\"nav.settings\"), href: \"/settings\" },\r\n      { label: t(\"collections.page.title\") },\r\n    ],\r\n    [t],\r\n  );\r\n\r\n  const currentQuery = queries[active] ?? \"\";\r\n  const currentSearchDraft = searchDrafts[active] ?? \"\";\r\n  const isCollectionSearchSupported =\r\n    activeModule === \"directories\" &&\r\n    active !== \"users\" &&\r\n    active !== \"fleets\" &&\r\n    active !== \"tasks\";\r\n  const isUserSearchActive =\r\n    activeModule === \"directories\" && active === \"users\";\r\n  const isEmployeeSearchActive =\r\n    activeModule === \"directories\" && active === \"employees\";\r\n\r\n  const applyCollectionSearch = useCallback(\r\n    (raw: string) => {\r\n      const normalized = raw.trim();\r\n      setPage(1);\r\n      setQueries((prev) => {\r\n        if (prev[active] === normalized) {\r\n          return prev;\r\n        }\r\n        return { ...prev, [active]: normalized };\r\n      });\r\n    },\r\n    [active],\r\n  );\r\n\r\n  useEffect(() => {\r\n    setSearchDrafts((prev) => ({ ...prev, [active]: currentQuery }));\r\n  }, [active, currentQuery]);\r\n\r\n  useEffect(() => {\r\n    if (!isCollectionSearchSupported) {\r\n      return;\r\n    }\r\n    if (collectionSearchTimer.current) {\r\n      window.clearTimeout(collectionSearchTimer.current);\r\n    }\r\n    collectionSearchTimer.current = window.setTimeout(() => {\r\n      applyCollectionSearch(currentSearchDraft);\r\n    }, 400);\r\n    return () => {\r\n      if (collectionSearchTimer.current) {\r\n        window.clearTimeout(collectionSearchTimer.current);\r\n      }\r\n    };\r\n  }, [\r\n    applyCollectionSearch,\r\n    currentSearchDraft,\r\n    isCollectionSearchSupported,\r\n  ]);\r\n\r\n  const load = useCallback(async () => {\r\n    if (active === \"users\" || active === \"tasks\") {\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    try {\r\n      if (active === \"fleets\") {\r\n        setItems([]);\r\n        setTotal(0);\r\n        setHint(\"\");\r\n        return;\r\n      }\r\n      if (active === \"employees\") {\r\n        const list = await fetchAllCollectionItems(\"employees\");\r\n        setItems(list);\r\n        setTotal(list.length);\r\n        setHint(\"\");\r\n        return;\r\n      }\r\n      const d = (await fetchCollectionItems(\r\n        active,\r\n        currentQuery,\r\n        page,\r\n        limit,\r\n      )) as { items: CollectionItem[]; total: number };\r\n      setItems(d.items);\r\n      setTotal(d.total);\r\n      if (active === \"departments\") {\r\n        setAllDepartments((prev) => mergeById(prev, d.items));\r\n      }\r\n      if (active === \"divisions\") {\r\n        setAllDivisions((prev) => mergeById(prev, d.items));\r\n      }\r\n      if (active === \"positions\") {\r\n        setAllPositions((prev) => mergeById(prev, d.items));\r\n      }\r\n      setHint(\"\");\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error\r\n          ? error.message\r\n          : \"Не удалось загрузить элементы\";\r\n      setItems([]);\r\n      setTotal(0);\r\n      setHint(message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [active, currentQuery, page]);\r\n\r\n  const loadUsers = useCallback(async () => {\r\n    try {\r\n      const list = await fetchUsers();\r\n      setUsers(list);\r\n      setHint((prev) => (prev === USERS_ERROR_HINT ? \"\" : prev));\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : USERS_ERROR_HINT;\r\n      setUsers([]);\r\n      setHint(message || USERS_ERROR_HINT);\r\n    }\r\n  }, []);\r\n\r\n  const loadTaskSettings = useCallback(async () => {\r\n    setTasksLoading(true);\r\n    try {\r\n      const [fields, types] = await Promise.all([\r\n        fetchAllCollectionItems(\"task_fields\"),\r\n        fetchAllCollectionItems(\"task_types\"),\r\n      ]);\r\n      setTaskFieldItems(fields);\r\n      setTaskTypeItems(types);\r\n      setHint((prev) => (prev === TASK_SETTINGS_ERROR_HINT ? \"\" : prev));\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : TASK_SETTINGS_ERROR_HINT;\r\n      setTaskFieldItems([]);\r\n      setTaskTypeItems([]);\r\n      setHint(message || TASK_SETTINGS_ERROR_HINT);\r\n    } finally {\r\n      setTasksLoading(false);\r\n    }\r\n  }, [setHint]);\r\n\r\n  useEffect(() => {\r\n    if (active === \"tasks\") {\r\n      void loadTaskSettings();\r\n    }\r\n  }, [active, loadTaskSettings]);\r\n\r\n  const saveTaskField = useCallback(\r\n    async (item: CollectionItem, label: string) => {\r\n      const trimmed = label.trim();\r\n      if (!trimmed) {\r\n        throw new Error(\"Название не может быть пустым\");\r\n      }\r\n      try {\r\n        if (item.meta?.virtual) {\r\n          await createCollectionItem(\"task_fields\", {\r\n            name: item.name,\r\n            value: trimmed,\r\n          });\r\n        } else {\r\n          await updateCollectionItem(\r\n            item._id,\r\n            { name: item.name, value: trimmed },\r\n            { collectionType: \"task_fields\" },\r\n          );\r\n        }\r\n        await loadTaskSettings();\r\n      } catch (error) {\r\n        const message =\r\n          error instanceof Error ? error.message : TASK_FIELD_SAVE_ERROR;\r\n        throw new Error(message || TASK_FIELD_SAVE_ERROR);\r\n      }\r\n    },\r\n    [loadTaskSettings],\r\n  );\r\n\r\n  const deleteTaskField = useCallback(\r\n    async (item: CollectionItem) => {\r\n      if (item.meta?.virtual) {\r\n        return;\r\n      }\r\n      try {\r\n        await removeCollectionItem(item._id);\r\n        await loadTaskSettings();\r\n      } catch (error) {\r\n        const message =\r\n          error instanceof Error ? error.message : TASK_SETTINGS_DELETE_ERROR;\r\n        throw new Error(message || TASK_SETTINGS_DELETE_ERROR);\r\n      }\r\n    },\r\n    [loadTaskSettings],\r\n  );\r\n\r\n  const saveTaskType = useCallback(\r\n    async (\r\n      item: CollectionItem,\r\n      payload: { label: string; tg_theme_url: string; tg_photos_url: string },\r\n    ) => {\r\n      const trimmedLabel = payload.label.trim();\r\n      if (!trimmedLabel) {\r\n        throw new Error(\"Название не может быть пустым\");\r\n      }\r\n      const trimmedUrl = payload.tg_theme_url.trim();\r\n      const trimmedPhotosUrl = payload.tg_photos_url.trim();\r\n      try {\r\n        const buildMeta = () => {\r\n          const meta: Record<string, string> = {};\r\n          if (trimmedUrl) meta.tg_theme_url = trimmedUrl;\r\n          if (trimmedPhotosUrl) meta.tg_photos_url = trimmedPhotosUrl;\r\n          return meta;\r\n        };\r\n        if (item.meta?.virtual) {\r\n          const meta = buildMeta();\r\n          await createCollectionItem(\"task_types\", {\r\n            name: item.name,\r\n            value: trimmedLabel,\r\n            ...(Object.keys(meta).length ? { meta } : {}),\r\n          });\r\n        } else {\r\n          const meta = buildMeta();\r\n          if (!trimmedUrl) {\r\n            meta.tg_theme_url = \"\";\r\n          }\r\n          if (!trimmedPhotosUrl) {\r\n            meta.tg_photos_url = \"\";\r\n          }\r\n          await updateCollectionItem(\r\n            item._id,\r\n            {\r\n              name: item.name,\r\n              value: trimmedLabel,\r\n              meta,\r\n            },\r\n            { collectionType: \"task_types\" },\r\n          );\r\n        }\r\n        await loadTaskSettings();\r\n      } catch (error) {\r\n        const message =\r\n          error instanceof Error ? error.message : TASK_TYPE_SAVE_ERROR;\r\n        throw new Error(message || TASK_TYPE_SAVE_ERROR);\r\n      }\r\n    },\r\n    [loadTaskSettings],\r\n  );\r\n\r\n  const deleteTaskType = useCallback(\r\n    async (item: CollectionItem) => {\r\n      if (item.meta?.virtual) {\r\n        return;\r\n      }\r\n      try {\r\n        await removeCollectionItem(item._id);\r\n        await loadTaskSettings();\r\n      } catch (error) {\r\n        const message =\r\n          error instanceof Error ? error.message : TASK_SETTINGS_DELETE_ERROR;\r\n        throw new Error(message || TASK_SETTINGS_DELETE_ERROR);\r\n      }\r\n    },\r\n    [loadTaskSettings],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (active === \"users\" || active === \"employees\") {\r\n      setUserSearchDraft(userQuery);\r\n    }\r\n  }, [active, userQuery]);\r\n\r\n  useEffect(() => {\r\n    if (collectionModalOpen && selectedCollection?.type === \"divisions\") {\r\n      void loadUsers();\r\n    }\r\n  }, [collectionModalOpen, selectedCollection, loadUsers]);\r\n\r\n  useEffect(() => {\r\n    const loadReferenceCollections = async () => {\r\n      const [departmentsResult, divisionsResult, positionsResult] =\r\n        await Promise.allSettled([\r\n          fetchAllCollectionItems(\"departments\"),\r\n          fetchAllCollectionItems(\"divisions\"),\r\n          fetchAllCollectionItems(\"positions\"),\r\n        ]);\r\n\r\n      const applyResult = (\r\n        result: PromiseSettledResult<CollectionItem[]>,\r\n        setter: React.Dispatch<React.SetStateAction<CollectionItem[]>>,\r\n        fallbackMessage: string,\r\n      ) => {\r\n        if (result.status === \"fulfilled\") {\r\n          setter(result.value);\r\n          return;\r\n        }\r\n        const reason = result.reason;\r\n        const message =\r\n          reason instanceof Error && reason.message\r\n            ? reason.message\r\n            : fallbackMessage;\r\n        setHint((prev) => prev || message);\r\n      };\r\n\r\n      applyResult(\r\n        departmentsResult,\r\n        setAllDepartments,\r\n        \"Не удалось загрузить департаменты\",\r\n      );\r\n      applyResult(\r\n        divisionsResult,\r\n        setAllDivisions,\r\n        \"Не удалось загрузить отделы\",\r\n      );\r\n      applyResult(\r\n        positionsResult,\r\n        setAllPositions,\r\n        \"Не удалось загрузить должности\",\r\n      );\r\n    };\r\n\r\n    void loadReferenceCollections();\r\n    fetchRoles()\r\n      .then((list) => setAllRoles(list))\r\n      .catch((error) => {\r\n        setAllRoles([]);\r\n        const message =\r\n          error instanceof Error\r\n            ? error.message\r\n            : \"Не удалось загрузить роли\";\r\n        setHint((prev) => prev || message);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (active !== \"users\" && active !== \"tasks\") {\r\n      void load();\r\n      if (active !== \"fleets\") {\r\n        setForm({ name: \"\", value: \"\" });\r\n      }\r\n    } else {\r\n      setHint(\"\");\r\n    }\r\n  }, [load, active]);\r\n\r\n  useEffect(() => {\r\n    if (active === \"users\") {\r\n      void loadUsers();\r\n      setUserForm(emptyUser);\r\n      setSelectedEmployeeId(undefined);\r\n    }\r\n    if (active === \"employees\") {\r\n      void loadUsers();\r\n      setSelectedEmployeeId(undefined);\r\n      setEmployeeFormMode(\"create\");\r\n      setIsEmployeeModalOpen(false);\r\n    }\r\n    if (active !== \"employees\") {\r\n      setIsEmployeeModalOpen(false);\r\n    }\r\n    if (\r\n      active === \"users\" ||\r\n      active === \"employees\" ||\r\n      active === \"fleets\" ||\r\n      active === \"tasks\"\r\n    ) {\r\n      setCollectionModalOpen(false);\r\n    }\r\n    if (active !== \"users\") {\r\n      setUserModalOpen(false);\r\n      setUserForm(emptyUser);\r\n    }\r\n  }, [active, loadUsers]);\r\n\r\n  const openCollectionModal = (item?: CollectionItem) => {\r\n    if (item) {\r\n      setForm({ _id: item._id, name: item.name, value: item.value });\r\n      setSelectedCollection(item);\r\n    } else {\r\n      setForm({ name: \"\", value: \"\" });\r\n      setSelectedCollection(null);\r\n    }\r\n    setCollectionModalOpen(true);\r\n  };\r\n\r\n  const closeCollectionModal = () => {\r\n    setCollectionModalOpen(false);\r\n    setSelectedCollection(null);\r\n    setForm({ name: \"\", value: \"\" });\r\n  };\r\n\r\n  const mapUserToForm = (user?: User): UserFormData => ({\r\n    telegram_id: user?.telegram_id,\r\n    username: user?.telegram_username ?? user?.username ?? \"\",\r\n    name: user?.name ?? \"\",\r\n    phone: user?.phone ?? \"\",\r\n    mobNumber: user?.mobNumber ?? \"\",\r\n    email: user?.email ?? \"\",\r\n    role: user?.role ?? \"user\",\r\n    access: user?.access ?? 1,\r\n    roleId: user?.roleId ?? \"\",\r\n    departmentId: user?.departmentId ?? \"\",\r\n    divisionId: user?.divisionId ?? \"\",\r\n    positionId: user?.positionId ?? \"\",\r\n  });\r\n\r\n  const openUserModal = (user?: User) => {\r\n    setUserForm(user ? mapUserToForm(user) : emptyUser);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const closeUserModal = useCallback(() => {\r\n    setUserModalOpen(false);\r\n    setUserForm(emptyUser);\r\n  }, []);\r\n\r\n  const openEmployeeModal = (user?: User) => {\r\n    if (user) {\r\n      setSelectedEmployeeId(String(user.telegram_id));\r\n      setEmployeeFormMode(\"update\");\r\n    } else {\r\n      setSelectedEmployeeId(undefined);\r\n      setEmployeeFormMode(\"create\");\r\n    }\r\n    setIsEmployeeModalOpen(true);\r\n  };\r\n\r\n  const updateCollectionSearchDraft = useCallback(\r\n    (value: string) => {\r\n      setSearchDrafts((prev) => ({ ...prev, [active]: value }));\r\n    },\r\n    [active],\r\n  );\r\n\r\n  const submitCollectionSearch = useCallback(\r\n    (value?: string) => {\r\n      if (collectionSearchTimer.current) {\r\n        window.clearTimeout(collectionSearchTimer.current);\r\n      }\r\n      applyCollectionSearch(value ?? currentSearchDraft);\r\n    },\r\n    [applyCollectionSearch, currentSearchDraft],\r\n  );\r\n\r\n  const handleCollectionSearchKeyDown = useCallback(\r\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (!isCollectionSearchSupported) {\r\n        return;\r\n      }\r\n      if (event.key === \"Enter\") {\r\n        event.preventDefault();\r\n        submitCollectionSearch(event.currentTarget.value);\r\n      }\r\n      if (event.key === \"Escape\") {\r\n        event.preventDefault();\r\n        updateCollectionSearchDraft(\"\");\r\n        submitCollectionSearch(\"\");\r\n      }\r\n    },\r\n    [\r\n      isCollectionSearchSupported,\r\n      submitCollectionSearch,\r\n      updateCollectionSearchDraft,\r\n    ],\r\n  );\r\n\r\n  const resetCollectionSearch = useCallback(() => {\r\n    updateCollectionSearchDraft(\"\");\r\n    submitCollectionSearch(\"\");\r\n  }, [submitCollectionSearch, updateCollectionSearchDraft]);\r\n\r\n  const submitUserSearch = useCallback(\r\n    (event?: React.FormEvent) => {\r\n      event?.preventDefault();\r\n      setUserPage(1);\r\n      setUserQuery(userSearchDraft.trim());\r\n      setSelectedEmployeeId(undefined);\r\n    },\r\n    [userSearchDraft],\r\n  );\r\n\r\n  const handleUserSearchKeyDown = useCallback(\r\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (!isUserSearchActive) {\r\n        return;\r\n      }\r\n      if (event.key === \"Enter\") {\r\n        event.preventDefault();\r\n        submitUserSearch();\r\n      }\r\n      if (event.key === \"Escape\") {\r\n        event.preventDefault();\r\n        setUserSearchDraft(\"\");\r\n        submitUserSearch();\r\n      }\r\n    },\r\n    [isUserSearchActive, submitUserSearch],\r\n  );\r\n\r\n  const handleEmployeeSaved = (updated: UserDetails) => {\r\n    void loadUsers();\r\n    if (updated.telegram_id !== undefined) {\r\n      setSelectedEmployeeId(String(updated.telegram_id));\r\n      setEmployeeFormMode(\"update\");\r\n    }\r\n  };\r\n\r\n  const executeUserDelete = useCallback(async () => {\r\n    if (!userForm.telegram_id) {\r\n      setConfirmUserDelete(false);\r\n      return;\r\n    }\r\n    try {\r\n      await deleteUserApi(userForm.telegram_id);\r\n      showToast(USER_DELETE_SUCCESS, \"success\");\r\n      setSelectedEmployeeId((prev) =>\r\n        prev === String(userForm.telegram_id) ? undefined : prev,\r\n      );\r\n      closeUserModal();\r\n      await loadUsers();\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : USER_DELETE_ERROR;\r\n      showToast(message || USER_DELETE_ERROR, \"error\");\r\n    } finally {\r\n      setConfirmUserDelete(false);\r\n    }\r\n  }, [\r\n    userForm.telegram_id,\r\n    closeUserModal,\r\n    loadUsers,\r\n    setSelectedEmployeeId,\r\n  ]);\r\n\r\n  const executeEmployeeDelete = useCallback(async () => {\r\n    if (!selectedEmployeeId) {\r\n      setConfirmEmployeeDelete(false);\r\n      return;\r\n    }\r\n    try {\r\n      await deleteUserApi(selectedEmployeeId);\r\n      showToast(EMPLOYEE_DELETE_SUCCESS, \"success\");\r\n      setIsEmployeeModalOpen(false);\r\n      setSelectedEmployeeId(undefined);\r\n      setEmployeeFormMode(\"create\");\r\n      await loadUsers();\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : EMPLOYEE_DELETE_ERROR;\r\n      showToast(message || EMPLOYEE_DELETE_ERROR, \"error\");\r\n    } finally {\r\n      setConfirmEmployeeDelete(false);\r\n    }\r\n  }, [\r\n    selectedEmployeeId,\r\n    loadUsers,\r\n  ]);\r\n\r\n  const submit = async () => {\r\n    if (active === \"fleets\") return;\r\n    const trimmedName = form.name.trim();\r\n    if (!trimmedName) return;\r\n    if (form._id && selectedCollectionInfo.readonly) {\r\n      setHint(\r\n        selectedCollectionInfo.notice ??\r\n          \"Элемент перенесён из старой коллекции и доступен только для чтения.\",\r\n      );\r\n      return;\r\n    }\r\n    let valueToSave = form.value;\r\n    if (active === \"departments\") {\r\n      valueToSave = safeParseIds(form.value).join(\",\");\r\n    } else {\r\n      valueToSave = form.value.trim();\r\n      if (!valueToSave) {\r\n        setHint(\"Заполните значение элемента.\");\r\n        return;\r\n      }\r\n    }\r\n    try {\r\n      let saved: CollectionItem | null = null;\r\n      if (form._id) {\r\n        saved = await updateCollectionItem(form._id, {\r\n          name: trimmedName,\r\n          value: valueToSave,\r\n        }, { collectionType: active });\r\n      } else {\r\n        saved = await createCollectionItem(active, {\r\n          name: trimmedName,\r\n          value: valueToSave,\r\n        });\r\n      }\r\n      if (!saved) {\r\n        throw new Error(\"Сервер не вернул сохранённый элемент\");\r\n      }\r\n      setHint(\"\");\r\n      await load();\r\n      closeCollectionModal();\r\n    } catch (error) {\r\n      const message =\r\n        error instanceof Error ? error.message : \"Не удалось сохранить элемент\";\r\n      setHint(message);\r\n    }\r\n  };\r\n\r\n  const remove = async () => {\r\n    if (!form._id) return;\r\n    if (selectedCollectionInfo.readonly) {\r\n      setHint(\r\n        selectedCollectionInfo.notice ??\r\n          \"Элемент перенесён из старой коллекции и доступен только для чтения.\",\r\n      );\r\n      return;\r\n    }\r\n    try {\r\n      await removeCollectionItem(form._id);\r\n      setHint(\"\");\r\n      await load();\r\n      closeCollectionModal();\r\n    } catch (e) {\r\n      const msg = e instanceof Error ? e.message : \"\";\r\n      setHint(msg);\r\n    }\r\n  };\r\n\r\n  const submitUser = async () => {\r\n    if (!userForm.telegram_id) return;\r\n    const id = userForm.telegram_id;\r\n    if (!users.find((u) => u.telegram_id === id)) {\r\n      await createUserApi(id, userForm.username, userForm.roleId);\r\n    }\r\n    const { telegram_id: _telegramId, ...data } = userForm;\r\n    await updateUserApi(id, data);\r\n    void loadUsers();\r\n    closeUserModal();\r\n  };\r\n\r\n  const departmentMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    allDepartments.forEach((d) => map.set(d._id, d.name));\r\n    return map;\r\n  }, [allDepartments]);\r\n\r\n  const divisionMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    allDivisions.forEach((d) => map.set(d._id, d.name));\r\n    return map;\r\n  }, [allDivisions]);\r\n\r\n  const positionMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    allPositions.forEach((position) => map.set(position._id, position.name));\r\n    return map;\r\n  }, [allPositions]);\r\n\r\n  const employeeDetailsIndex = useMemo(\r\n    () => buildEmployeeDetailsIndex(items),\r\n    [items],\r\n  );\r\n\r\n  const enrichUserWithEmployeeDetails = useCallback(\r\n    (user: User) =>\r\n      mergeEmployeeDetails(user, findEmployeeDetails(user, employeeDetailsIndex)),\r\n    [employeeDetailsIndex],\r\n  );\r\n\r\n  const enrichedUsers = useMemo(\r\n    () => users.map((user) => enrichUserWithEmployeeDetails(user)),\r\n    [users, enrichUserWithEmployeeDetails],\r\n  );\r\n\r\n  const roleMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    allRoles.forEach((role) => map.set(role._id, role.name));\r\n    return map;\r\n  }, [allRoles]);\r\n\r\n  const { divisionOwners, duplicateDivisionIds } = useMemo(() => {\r\n    const owners = new Map<string, string>();\r\n    const duplicates = new Set<string>();\r\n    allDepartments.forEach((department) => {\r\n      safeParseIds(department.value).forEach((divisionId) => {\r\n        const currentOwner = owners.get(divisionId);\r\n        if (currentOwner && currentOwner !== department._id) {\r\n          duplicates.add(divisionId);\r\n          return;\r\n        }\r\n        if (!currentOwner) {\r\n          owners.set(divisionId, department._id);\r\n        }\r\n      });\r\n    });\r\n    return { divisionOwners: owners, duplicateDivisionIds: Array.from(duplicates) };\r\n  }, [allDepartments]);\r\n\r\n  const duplicateDivisionHint = useMemo(() => {\r\n    if (!duplicateDivisionIds.length) return \"\";\r\n    const names = duplicateDivisionIds\r\n      .map(\r\n        (id) =>\r\n          divisionMap.get(id) ??\r\n          allDivisions.find((division) => division._id === id)?.name ??\r\n          id,\r\n      )\r\n      .filter((name): name is string => Boolean(name));\r\n    const suffix = names.length ? `: ${names.join(\", \")}.` : \".\";\r\n    return `${DUPLICATE_DIVISION_HINT_PREFIX}${suffix}`;\r\n  }, [duplicateDivisionIds, divisionMap, allDivisions]);\r\n\r\n  useEffect(() => {\r\n    if (duplicateDivisionHint) {\r\n      setHint((prev) => (prev ? prev : duplicateDivisionHint));\r\n      return;\r\n    }\r\n    setHint((prev) =>\r\n      prev && prev.startsWith(DUPLICATE_DIVISION_HINT_PREFIX) ? \"\" : prev,\r\n    );\r\n  }, [duplicateDivisionHint]);\r\n\r\n  const getItemDisplayValue = useCallback(\r\n    (item: CollectionItem, type: CollectionKey) => {\r\n      if (type === \"departments\") {\r\n        const ids = safeParseIds(item.value);\r\n        if (!ids.length) return SETTINGS_BADGE_EMPTY;\r\n        const names = ids\r\n          .map(\r\n            (id) =>\r\n              divisionMap.get(id) ??\r\n              allDivisions.find((division) => division._id === id)?.name ??\r\n              id,\r\n          )\r\n          .filter((name): name is string => Boolean(name));\r\n        return names.length ? names.join(\"\\n\") : SETTINGS_BADGE_EMPTY;\r\n      }\r\n      if (type === \"divisions\") {\r\n        const departmentName =\r\n          departmentMap.get(item.value) ??\r\n          allDepartments.find((department) => department._id === item.value)?.name ??\r\n          item.value;\r\n        return departmentName ? formatCollectionRawValue(departmentName) : SETTINGS_BADGE_EMPTY;\r\n      }\r\n      if (type === \"positions\") {\r\n        const divisionName =\r\n          divisionMap.get(item.value) ??\r\n          allDivisions.find((division) => division._id === item.value)?.name ??\r\n          item.value;\r\n        return divisionName ? formatCollectionRawValue(divisionName) : SETTINGS_BADGE_EMPTY;\r\n      }\r\n      const formatted = formatCollectionRawValue(item.value ?? \"\");\r\n      return formatted || SETTINGS_BADGE_EMPTY;\r\n    },\r\n    [\r\n      allDepartments,\r\n      allDivisions,\r\n      departmentMap,\r\n      divisionMap,\r\n    ],\r\n  );\r\n\r\n  const formatMetaSummary = useCallback((meta?: CollectionItem[\"meta\"]) => {\r\n    if (!meta) return SETTINGS_BADGE_EMPTY;\r\n    const summary = summarizeRecord(meta as Record<string, unknown>);\r\n    return summary || SETTINGS_BADGE_EMPTY;\r\n  }, []);\r\n\r\n  const copyIdLabel = t(\"collections.actions.copyId\");\r\n  const copiedIdLabel = t(\"collections.actions.copiedId\");\r\n\r\n  const localizedCollectionColumns = useMemo(\r\n    () =>\r\n      collectionColumns.map((column) => {\r\n        if (!hasAccessorKey(column)) {\r\n          return column;\r\n        }\r\n        switch (column.accessorKey) {\r\n          case \"name\":\r\n            return { ...column, header: t(\"collections.table.columns.name\") };\r\n          case \"value\":\r\n            return { ...column, header: t(\"collections.table.columns.value\") };\r\n          case \"displayValue\":\r\n            return {\r\n              ...column,\r\n              header: t(\"collections.table.columns.relations\"),\r\n            };\r\n          case \"type\":\r\n            return { ...column, header: t(\"collections.table.columns.type\") };\r\n          case \"_id\":\r\n            return {\r\n              ...column,\r\n              header: t(\"collections.table.columns.id\"),\r\n              cell: ({ getValue }) => {\r\n                const raw = getValue<string>();\r\n                const safeValue = typeof raw === \"string\" ? raw : \"\";\r\n                if (!safeValue) {\r\n                  return (\r\n                    <span className=\"text-xs text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\">\r\n                      {SETTINGS_BADGE_EMPTY}\r\n                    </span>\r\n                  );\r\n                }\r\n                return (\r\n                  <CopyableId\r\n                    value={safeValue}\r\n                    copyHint={copyIdLabel}\r\n                    copiedHint={copiedIdLabel}\r\n                  />\r\n                );\r\n              },\r\n            };\r\n          case \"metaSummary\":\r\n            return {\r\n              ...column,\r\n              header: t(\"collections.table.columns.meta\"),\r\n            };\r\n          default:\r\n            return column;\r\n        }\r\n      }),\r\n    [copiedIdLabel, copyIdLabel, t],\r\n  );\r\n\r\n  const collectionSearchPlaceholder = t(\"collections.search.placeholder\");\r\n  const collectionSearchHint = t(\"collections.search.hint\");\r\n  const collectionSearchCta = t(\"collections.actions.search\");\r\n  const collectionResetCta = t(\"collections.actions.reset\");\r\n  const collectionAddCta = t(\"collections.actions.add\");\r\n  const collectionEmptyTitle = t(\"collections.table.empty.title\");\r\n  const collectionEmptyDescription = t(\"collections.table.empty.description\");\r\n  const collectionEmptyAction = t(\"collections.table.empty.action\");\r\n  const userSearchPlaceholder = t(\"collections.users.searchPlaceholder\");\r\n  const userAddCta = t(\"collections.users.add\");\r\n  const employeeSearchPlaceholder = t(\"collections.employees.searchPlaceholder\");\r\n  const employeeAddCta = t(\"collections.employees.add\");\r\n\r\n  const buildCollectionColumns = useCallback(\r\n    (excludedKeys: string[]) =>\r\n      localizedCollectionColumns.filter(\r\n        (column) =>\r\n          !hasAccessorKey(column) ||\r\n          !excludedKeys.includes(column.accessorKey),\r\n      ),\r\n    [localizedCollectionColumns],\r\n  );\r\n\r\n  const departmentColumns = useMemo(\r\n    () => buildCollectionColumns([\"value\", \"type\", \"metaSummary\"]),\r\n    [buildCollectionColumns],\r\n  );\r\n\r\n  const divisionColumns = useMemo(\r\n    () => buildCollectionColumns([\"type\", \"metaSummary\"]),\r\n    [buildCollectionColumns],\r\n  );\r\n\r\n  const positionColumns = useMemo(\r\n    () => buildCollectionColumns([\"type\", \"metaSummary\"]),\r\n    [buildCollectionColumns],\r\n  );\r\n\r\n  const renderDepartmentValueField = useCallback(\r\n    (\r\n      currentForm: ItemForm,\r\n      handleChange: (next: ItemForm) => void,\r\n      options?: { readonly?: boolean },\r\n    ) => {\r\n      const selected = safeParseIds(currentForm.value);\r\n      const handleSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const values = Array.from(event.target.selectedOptions).map(\r\n          (option) => option.value,\r\n        );\r\n        handleChange({ ...currentForm, value: values.join(\",\") });\r\n      };\r\n      return (\r\n        <select\r\n          multiple\r\n          className=\"min-h-[8rem] w-full rounded border px-3 py-2\"\r\n          value={selected}\r\n          onChange={handleSelect}\r\n          disabled={options?.readonly}\r\n        >\r\n          {allDivisions\r\n            .filter((division) => {\r\n              const ownerId = divisionOwners.get(division._id);\r\n              if (!ownerId) return true;\r\n              const isSelected = selected.includes(division._id);\r\n              if (isSelected) return true;\r\n              if (!currentForm._id) return false;\r\n              return ownerId === currentForm._id;\r\n            })\r\n            .map((division) => (\r\n              <option key={division._id} value={division._id}>\r\n                {division.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      );\r\n    },\r\n    [allDivisions, divisionOwners],\r\n  );\r\n\r\n  const renderDivisionValueField = useCallback(\r\n    (\r\n      currentForm: ItemForm,\r\n      handleChange: (next: ItemForm) => void,\r\n      options?: { readonly?: boolean },\r\n    ) => (\r\n      <select\r\n        className=\"h-10 w-full rounded border px-3\"\r\n        value={currentForm.value}\r\n        onChange={(event) =>\r\n          handleChange({ ...currentForm, value: event.target.value })\r\n        }\r\n        required\r\n        disabled={options?.readonly}\r\n      >\r\n        <option value=\"\" disabled>\r\n          Выберите департамент\r\n        </option>\r\n        {allDepartments.map((department) => (\r\n          <option key={department._id} value={department._id}>\r\n            {department.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    ),\r\n    [allDepartments],\r\n  );\r\n\r\n  const renderPositionValueField = useCallback(\r\n    (\r\n      currentForm: ItemForm,\r\n      handleChange: (next: ItemForm) => void,\r\n      options?: { readonly?: boolean },\r\n    ) => (\r\n      <select\r\n        className=\"h-10 w-full rounded border px-3\"\r\n        value={currentForm.value}\r\n        onChange={(event) =>\r\n          handleChange({ ...currentForm, value: event.target.value })\r\n        }\r\n        required\r\n        disabled={options?.readonly}\r\n      >\r\n        <option value=\"\" disabled>\r\n          Выберите отдел\r\n        </option>\r\n        {allDivisions.map((division) => (\r\n          <option key={division._id} value={division._id}>\r\n            {division.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    ),\r\n    [allDivisions],\r\n  );\r\n\r\n  const totalPages = Math.ceil(total / limit) || 1;\r\n  const filteredUsers = useMemo(() => {\r\n    const trimmed = userQuery.trim();\r\n    if (!trimmed) {\r\n      return enrichedUsers;\r\n    }\r\n    return matchSorter<User>(enrichedUsers, trimmed, {\r\n      keys: [\r\n        {\r\n          key: (item: User) => item.username ?? \"\",\r\n          threshold: rankings.STARTS_WITH,\r\n        },\r\n        {\r\n          key: (item: User) => item.telegram_username ?? \"\",\r\n          threshold: rankings.STARTS_WITH,\r\n        },\r\n        {\r\n          key: (item: User) =>\r\n            item.telegram_id !== undefined && item.telegram_id !== null\r\n              ? String(item.telegram_id)\r\n              : \"\",\r\n          threshold: rankings.STARTS_WITH,\r\n        },\r\n        {\r\n          key: (item: User) => buildUserSearchTokens(item),\r\n          threshold: rankings.CONTAINS,\r\n        },\r\n      ],\r\n    });\r\n  }, [userQuery, enrichedUsers]);\r\n  const userTotalPages = Math.ceil(filteredUsers.length / limit) || 1;\r\n  const paginatedUsers = filteredUsers.slice(\r\n    (userPage - 1) * limit,\r\n    userPage * limit,\r\n  );\r\n\r\n\r\n  const employeeRows = useMemo<EmployeeRow[]>(\r\n    () =>\r\n      paginatedUsers.map((user) => {\r\n        const mergedUser = enrichUserWithEmployeeDetails(user);\r\n        const roleId =\r\n          typeof mergedUser.roleId === \"string\"\r\n            ? mergedUser.roleId.trim()\r\n            : \"\";\r\n        const departmentId =\r\n          typeof mergedUser.departmentId === \"string\"\r\n            ? mergedUser.departmentId.trim()\r\n            : \"\";\r\n        const divisionId =\r\n          typeof mergedUser.divisionId === \"string\"\r\n            ? mergedUser.divisionId.trim()\r\n            : \"\";\r\n        const positionId =\r\n          typeof mergedUser.positionId === \"string\"\r\n            ? mergedUser.positionId.trim()\r\n            : \"\";\r\n        const roleNameFromMap = resolveReferenceName(\r\n          roleMap,\r\n          roleId,\r\n          mergedUser.roleName,\r\n        );\r\n        const departmentName = resolveReferenceName(\r\n          departmentMap,\r\n          departmentId,\r\n          mergedUser.departmentName,\r\n        );\r\n        const divisionName = resolveReferenceName(\r\n          divisionMap,\r\n          divisionId,\r\n          mergedUser.divisionName,\r\n        );\r\n        const positionName = resolveReferenceName(\r\n          positionMap,\r\n          positionId,\r\n          mergedUser.positionName,\r\n        );\r\n        const roleLabel =\r\n          roleNameFromMap ||\r\n          (mergedUser.role ? formatRoleName(mergedUser.role) : \"\");\r\n        return buildEmployeeRow({\r\n          ...mergedUser,\r\n          roleId,\r\n          departmentId,\r\n          divisionId,\r\n          positionId,\r\n          roleName: roleLabel,\r\n          departmentName,\r\n          divisionName,\r\n          positionName,\r\n        });\r\n      }),\r\n    [\r\n      paginatedUsers,\r\n      roleMap,\r\n      departmentMap,\r\n      divisionMap,\r\n      positionMap,\r\n      enrichUserWithEmployeeDetails,\r\n    ],\r\n  );\r\n\r\n  const selectedEmployee = useMemo(() => {\r\n    if (!selectedEmployeeId) return undefined;\r\n    const base = enrichedUsers.find(\r\n      (u) => String(u.telegram_id) === selectedEmployeeId,\r\n    );\r\n    if (base) {\r\n      return base;\r\n    }\r\n    const fallbackDetails = findEmployeeDetails(\r\n      undefined,\r\n      employeeDetailsIndex,\r\n      selectedEmployeeId,\r\n    );\r\n    if (!fallbackDetails) return undefined;\r\n    const fallbackUser: User = {};\r\n    if (typeof fallbackDetails.telegram_id === \"number\") {\r\n      fallbackUser.telegram_id = fallbackDetails.telegram_id;\r\n    } else {\r\n      const parsedId = Number(selectedEmployeeId);\r\n      if (Number.isFinite(parsedId)) {\r\n        fallbackUser.telegram_id = parsedId;\r\n      }\r\n    }\r\n    if (fallbackDetails.username) {\r\n      fallbackUser.username = fallbackDetails.username;\r\n    }\r\n    if (fallbackDetails.telegram_username) {\r\n      fallbackUser.telegram_username = fallbackDetails.telegram_username;\r\n    }\r\n    return mergeEmployeeDetails(fallbackUser, fallbackDetails);\r\n  }, [employeeDetailsIndex, enrichedUsers, selectedEmployeeId]);\r\n\r\n  const selectedDepartmentDivisionNames = useMemo(() => {\r\n    if (!selectedCollection || selectedCollection.type !== \"departments\") {\r\n      return [] as string[];\r\n    }\r\n    const ids = safeParseIds(selectedCollection.value);\r\n    return ids\r\n      .map(\r\n        (id) =>\r\n          divisionMap.get(id) ??\r\n          allDivisions.find((division) => division._id === id)?.name ??\r\n          id,\r\n      )\r\n      .filter((name): name is string => Boolean(name));\r\n  }, [selectedCollection, divisionMap, allDivisions]);\r\n\r\n  const selectedDivisionDepartmentName = useMemo(() => {\r\n    if (!selectedCollection || selectedCollection.type !== \"divisions\") {\r\n      return SETTINGS_BADGE_EMPTY;\r\n    }\r\n    const departmentId = selectedCollection.value;\r\n    if (!departmentId) return SETTINGS_BADGE_EMPTY;\r\n    return (\r\n      departmentMap.get(departmentId) ??\r\n      allDepartments.find((department) => department._id === departmentId)?.name ??\r\n      departmentId\r\n    );\r\n  }, [selectedCollection, departmentMap, allDepartments]);\r\n\r\n  const selectedDivisionPositionNames = useMemo(() => {\r\n    if (!selectedCollection || selectedCollection.type !== \"divisions\") {\r\n      return [] as string[];\r\n    }\r\n    return allPositions\r\n      .filter((position) => position.value === selectedCollection._id)\r\n      .map((position) => position.name)\r\n      .filter((name): name is string => Boolean(name));\r\n  }, [selectedCollection, allPositions]);\r\n\r\n  const selectedDivisionEmployeeNames = useMemo(() => {\r\n    if (!selectedCollection || selectedCollection.type !== \"divisions\") {\r\n      return [] as string[];\r\n    }\r\n    return enrichedUsers\r\n      .filter((user) => user.divisionId === selectedCollection._id)\r\n      .map((user) => {\r\n        if (user.name && user.name.trim()) return user.name.trim();\r\n        if (user.username && user.username.trim()) return user.username.trim();\r\n        if (user.telegram_id !== undefined && user.telegram_id !== null)\r\n          return `ID ${user.telegram_id}`;\r\n        return \"Без имени\";\r\n      });\r\n  }, [selectedCollection, enrichedUsers]);\r\n\r\n  const directoriesToolbar = (() => {\r\n    if (activeModule !== \"directories\") {\r\n      return null;\r\n    }\r\n    if (isUserSearchActive || isEmployeeSearchActive) {\r\n      const isEmployee = isEmployeeSearchActive;\r\n      const placeholder = isEmployee\r\n        ? employeeSearchPlaceholder\r\n        : userSearchPlaceholder;\r\n      const addLabel = isEmployee ? employeeAddCta : userAddCta;\r\n      const handleAdd = isEmployee\r\n        ? () => openEmployeeModal()\r\n        : () => openUserModal();\r\n      return (\r\n        <div className=\"flex w-full flex-col gap-2 sm:flex-row sm:items-end sm:justify-between\">\r\n          <div className=\"flex w-full flex-col gap-1 sm:w-72\">\r\n            <label htmlFor=\"settings-users-search\" className=\"sr-only\">\r\n              {collectionSearchCta}\r\n            </label>\r\n            <input\r\n              id=\"settings-users-search\"\r\n              className=\"h-10 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm text-[color:var(--color-gray-900)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white\"\r\n              value={userSearchDraft}\r\n              onChange={(event) => setUserSearchDraft(event.target.value)}\r\n              onKeyDown={handleUserSearchKeyDown}\r\n              placeholder={placeholder}\r\n            />\r\n            <span className=\"text-[11px] text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\">\r\n              {collectionSearchHint}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            <Button size=\"sm\" onClick={() => submitUserSearch()}>\r\n              {collectionSearchCta}\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setUserSearchDraft(\"\");\r\n                submitUserSearch();\r\n              }}\r\n            >\r\n              {collectionResetCta}\r\n            </Button>\r\n            <Button size=\"sm\" variant=\"success\" onClick={handleAdd}>\r\n              {addLabel}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (isCollectionSearchSupported) {\r\n      return (\r\n        <div className=\"flex w-full flex-col gap-2 sm:flex-row sm:items-end sm:justify-between\">\r\n          <div className=\"flex w-full flex-col gap-1 sm:w-72\">\r\n            <label htmlFor=\"settings-collections-search\" className=\"sr-only\">\r\n              {collectionSearchCta}\r\n            </label>\r\n            <input\r\n              id=\"settings-collections-search\"\r\n              className=\"h-10 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm text-[color:var(--color-gray-900)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white\"\r\n              value={currentSearchDraft}\r\n              onChange={(event) => updateCollectionSearchDraft(event.target.value)}\r\n              onKeyDown={handleCollectionSearchKeyDown}\r\n              placeholder={collectionSearchPlaceholder}\r\n            />\r\n            <span className=\"text-[11px] text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\">\r\n              {collectionSearchHint}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            <Button size=\"sm\" onClick={() => submitCollectionSearch()}>\r\n              {collectionSearchCta}\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={resetCollectionSearch}\r\n            >\r\n              {collectionResetCta}\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"success\"\r\n              onClick={() => openCollectionModal()}\r\n            >\r\n              {collectionAddCta}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"flex flex-wrap items-center gap-2\">\r\n        <Button\r\n          size=\"sm\"\r\n          variant=\"success\"\r\n          onClick={() => openCollectionModal()}\r\n        >\r\n          {collectionAddCta}\r\n        </Button>\r\n      </div>\r\n    );\r\n  })();\r\n\r\n  return (\r\n    <div className=\"mx-auto flex w-full max-w-screen-2xl flex-col gap-6 px-3 pb-12 pt-4 sm:px-4 lg:px-8\">\r\n      <Tabs\r\n        value={activeModule}\r\n        onValueChange={(value) => handleModuleChange(value as SettingsModuleKey)}\r\n        className=\"space-y-6\"\r\n      >\r\n        <ActionBar\r\n          breadcrumbs={<Breadcrumbs items={breadcrumbs} />}\r\n          title={t(\"collections.page.title\")}\r\n          description={t(\"collections.page.description\")}\r\n          toolbar={directoriesToolbar}\r\n        >\r\n          <div className=\"flex flex-col gap-3\">\r\n            <div className=\"sm:hidden\">\r\n              <label htmlFor=\"settings-module-select\" className=\"sr-only\">\r\n                {t(\"collections.moduleSelectLabel\")}\r\n              </label>\r\n              <select\r\n                id=\"settings-module-select\"\r\n                className=\"h-11 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm font-semibold text-[color:var(--color-gray-800)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white\"\r\n                value={activeModule}\r\n                onChange={(event) => handleModuleChange(event.target.value as SettingsModuleKey)}\r\n              >\r\n                {moduleTabs.map((tab) => (\r\n                  <option key={tab.key} value={tab.key}>\r\n                    {tab.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <TabsList className=\"hidden h-auto gap-2 bg-transparent p-0 sm:grid sm:gap-2 sm:p-1 sm:[grid-template-columns:repeat(5,minmax(11rem,1fr))]\">\r\n              {moduleTabs.map((tab) => {\r\n                const Icon = tab.icon;\r\n                const labelId = `${tab.key}-module-tab-label`;\r\n                return (\r\n                  <TabsTrigger\r\n                    key={tab.key}\r\n                    value={tab.key}\r\n                    aria-labelledby={labelId}\r\n                    className=\"group flex h-full min-h-[3.4rem] w-full flex-col items-center justify-center gap-1.5 rounded-xl border border-transparent px-3 py-2 text-sm font-semibold text-[color:var(--color-gray-700)] transition-colors duration-200 ease-out hover:bg-[color:var(--color-gray-50)] focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-400)] focus-visible:ring-offset-2 dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)] data-[state=active]:border-[color:var(--color-gray-200)] data-[state=active]:bg-white data-[state=active]:text-[color:var(--color-brand-600)] data-[state=active]:shadow-sm dark:data-[state=active]:border-[color:var(--color-gray-700)] dark:data-[state=active]:bg-[color:var(--color-gray-dark)] dark:data-[state=active]:text-[color:var(--color-brand-300)]\"\r\n                  >\r\n                    <Icon className=\"size-5 flex-shrink-0 text-[color:var(--color-gray-500)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-300)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)] sm:size-6\" />\r\n                    <span\r\n                      id={labelId}\r\n                      className=\"truncate text-sm font-semibold leading-5 text-[color:var(--color-gray-800)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-100)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)]\"\r\n                    >\r\n                      {tab.label}\r\n                    </span>\r\n                    {tab.description ? (\r\n                      <span className=\"hidden text-xs font-medium text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-400)] sm:block\">\r\n                        {tab.description}\r\n                      </span>\r\n                    ) : null}\r\n                  </TabsTrigger>\r\n                );\r\n              })}\r\n            </TabsList>\r\n          </div>\r\n        </ActionBar>\r\n        <TabsContent value=\"directories\" className=\"mt-0 space-y-6\">\r\n          {hint ? (\r\n            <div className=\"rounded-2xl border border-[color:var(--color-error-200)] bg-[color:var(--color-error-25)] p-4 text-sm text-[color:var(--color-error-600)] dark:border-[color:var(--color-error-700)] dark:bg-[color:var(--color-error-900)]/40 dark:text-[color:var(--color-error-200)]\">\r\n              {hint}\r\n            </div>\r\n          ) : null}\r\n          <Tabs\r\n            value={active}\r\n            onValueChange={(value) => {\r\n              setActive(value as CollectionKey);\r\n              setPage(1);\r\n            }}\r\n            className=\"space-y-5\"\r\n          >\r\n            <div className=\"sm:hidden\">\r\n              <label htmlFor=\"settings-section-select\" className=\"sr-only\">\r\n                {t(\"collections.directorySelectLabel\")}\r\n              </label>\r\n              <select\r\n                id=\"settings-section-select\"\r\n                className=\"h-11 w-full rounded-2xl border border-[color:var(--color-gray-200)] bg-white px-3 text-sm font-semibold text-[color:var(--color-gray-800)] shadow-sm outline-none transition focus:border-[color:var(--color-brand-400)] focus:ring-2 focus:ring-[color:var(--color-brand-200)] dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-white\"\r\n                value={active}\r\n                onChange={(event) => {\r\n                  setActive(event.target.value as CollectionKey);\r\n                  setPage(1);\r\n                }}\r\n              >\r\n                {types.map((type) => (\r\n                  <option key={type.key} value={type.key}>\r\n                    {type.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <TabsList className=\"hidden gap-2 sm:grid sm:gap-2 sm:overflow-visible sm:p-1 sm:[grid-template-columns:repeat(7,minmax(9.5rem,1fr))]\">\r\n              {types.map((type) => {\r\n                const Icon = tabIcons[type.key as CollectionKey];\r\n                const labelId = `${type.key}-tab-label`;\r\n                return (\r\n                  <TabsTrigger\r\n                    key={type.key}\r\n                    value={type.key}\r\n                    aria-labelledby={labelId}\r\n                    className=\"group flex h-full min-h-[3.1rem] w-full flex-col items-center justify-center gap-1.5 rounded-xl border border-transparent px-3 py-2 text-sm font-semibold text-[color:var(--color-gray-700)] transition-colors duration-200 ease-out hover:bg-[color:var(--color-gray-50)] focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-400)] focus-visible:ring-offset-2 dark:text-[color:var(--color-gray-200)] dark:hover:bg-[color:var(--color-gray-800)] data-[state=active]:border-[color:var(--color-gray-200)] data-[state=active]:bg-white data-[state=active]:text-[color:var(--color-brand-600)] data-[state=active]:shadow-sm dark:data-[state=active]:border-[color:var(--color-gray-700)] dark:data-[state=active]:bg-[color:var(--color-gray-dark)] dark:data-[state=active]:text-[color:var(--color-brand-300)]\"\r\n                  >\r\n                    {Icon ? (\r\n                      <Icon className=\"size-5 flex-shrink-0 text-[color:var(--color-gray-500)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-300)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)] sm:size-6\" />\r\n                    ) : null}\r\n                    <span\r\n                      id={labelId}\r\n                      className=\"truncate text-sm font-semibold leading-5 text-[color:var(--color-gray-800)] transition-colors group-data-[state=active]:text-[color:var(--color-brand-600)] dark:text-[color:var(--color-gray-100)] dark:group-data-[state=active]:text-[color:var(--color-brand-300)]\"\r\n                    >\r\n                      {type.label}\r\n                    </span>\r\n                    {type.description ? (\r\n                      <span\r\n                        aria-hidden=\"true\"\r\n                        className=\"hidden text-xs font-medium text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-400)] sm:block\"\r\n                      >\r\n                        {type.description}\r\n                      </span>\r\n                    ) : null}\r\n                  </TabsTrigger>\r\n                );\r\n              })}\r\n            </TabsList>\r\n            {types.map((type) => {\r\n              const isActiveTab = type.key === active;\r\n              const rows: CollectionTableRow[] = isActiveTab\r\n                ? items.map((item) => ({\r\n                    ...item,\r\n                    displayValue: getItemDisplayValue(item, type.key as CollectionKey),\r\n                    metaSummary: formatMetaSummary(item.meta),\r\n                  }))\r\n                : [];\r\n              const columnsForType =\r\n                type.key === \"departments\"\r\n                  ? departmentColumns\r\n                  : type.key === \"divisions\"\r\n                    ? divisionColumns\r\n                    : type.key === \"positions\"\r\n                      ? positionColumns\r\n                      : localizedCollectionColumns;\r\n\r\n              if (type.key === \"users\") {\r\n                const showEmpty = paginatedUsers.length === 0;\r\n                return (\r\n                  <TabsContent key={type.key} value={type.key} className=\"mt-0 flex flex-col gap-4\">\r\n                    {showEmpty ? (\r\n                      <div className=\"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\">\r\n                        <h3 className=\"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white\">\r\n                          {collectionEmptyTitle}\r\n                        </h3>\r\n                        <p className=\"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n                          {collectionEmptyDescription}\r\n                        </p>\r\n                        <Button variant=\"success\" onClick={() => openUserModal()}>\r\n                          {userAddCta}\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <DataTable\r\n                        columns={settingsUserColumns}\r\n                        data={paginatedUsers}\r\n                        pageIndex={userPage - 1}\r\n                        pageSize={limit}\r\n                        pageCount={userTotalPages}\r\n                        onPageChange={(index) => setUserPage(index + 1)}\r\n                        showGlobalSearch={false}\r\n                        showFilters={false}\r\n                        onRowClick={(row) => openUserModal(row)}\r\n                        wrapCellsAsBadges\r\n                        badgeClassName={SETTINGS_BADGE_CLASS}\r\n                        badgeWrapperClassName={SETTINGS_BADGE_WRAPPER_CLASS}\r\n                        badgeEmptyPlaceholder={SETTINGS_BADGE_EMPTY}\r\n                      />\r\n                    )}\r\n                  </TabsContent>\r\n                );\r\n              }\r\n\r\n              if (type.key === \"employees\") {\r\n                const showEmpty = employeeRows.length === 0;\r\n                return (\r\n                  <TabsContent key={type.key} value={type.key} className=\"mt-0 flex flex-col gap-4\">\r\n                    {showEmpty ? (\r\n                      <div className=\"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\">\r\n                        <h3 className=\"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white\">\r\n                          {collectionEmptyTitle}\r\n                        </h3>\r\n                        <p className=\"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n                          {collectionEmptyDescription}\r\n                        </p>\r\n                        <Button variant=\"success\" onClick={() => openEmployeeModal()}>\r\n                          {employeeAddCta}\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <DataTable\r\n                        columns={settingsEmployeeColumns}\r\n                        data={employeeRows}\r\n                        pageIndex={userPage - 1}\r\n                        pageSize={limit}\r\n                        pageCount={userTotalPages}\r\n                        onPageChange={(index) => setUserPage(index + 1)}\r\n                        showGlobalSearch={false}\r\n                        showFilters={false}\r\n                        onRowClick={(row) => openEmployeeModal(row)}\r\n                        wrapCellsAsBadges\r\n                        badgeClassName={SETTINGS_BADGE_CLASS}\r\n                        badgeWrapperClassName={SETTINGS_BADGE_WRAPPER_CLASS}\r\n                        badgeEmptyPlaceholder={SETTINGS_BADGE_EMPTY}\r\n                      />\r\n                    )}\r\n                  </TabsContent>\r\n                );\r\n              }\r\n\r\n              if (type.key === \"tasks\") {\r\n                return (\r\n                  <TabsContent key={type.key} value={type.key} className=\"mt-0\">\r\n                    <TaskSettingsTab\r\n                      fields={taskFieldItems}\r\n                      types={taskTypeItems}\r\n                      loading={tasksLoading}\r\n                      onSaveField={saveTaskField}\r\n                      onDeleteField={deleteTaskField}\r\n                      onSaveType={saveTaskType}\r\n                      onDeleteType={deleteTaskType}\r\n                    />\r\n                  </TabsContent>\r\n                );\r\n              }\r\n\r\n              if (type.key === \"fleets\") {\r\n                return (\r\n                  <TabsContent key={type.key} value={type.key} className=\"mt-0\">\r\n                    <FleetVehiclesTab />\r\n                  </TabsContent>\r\n                );\r\n              }\r\n\r\n              const showEmpty = rows.length === 0;\r\n              return (\r\n                <TabsContent key={type.key} value={type.key} className=\"mt-0 flex flex-col gap-4\">\r\n                  {isActiveTab && isLoading ? (\r\n                    <div className=\"flex min-h-[12rem] items-center justify-center rounded-2xl border border-[color:var(--color-gray-200)] bg-white shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\">\r\n                      <Spinner className=\"h-6 w-6 text-[color:var(--color-brand-500)]\" />\r\n                    </div>\r\n                  ) : showEmpty ? (\r\n                    <div className=\"flex flex-col items-center justify-center gap-3 rounded-2xl border border-[color:var(--color-gray-200)] bg-white p-8 text-center shadow-sm dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\">\r\n                      <h3 className=\"text-lg font-semibold text-[color:var(--color-gray-800)] dark:text-white\">\r\n                        {collectionEmptyTitle}\r\n                      </h3>\r\n                      <p className=\"max-w-md text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n                        {collectionEmptyDescription}\r\n                      </p>\r\n                      <Button variant=\"success\" onClick={() => openCollectionModal()}>\r\n                        {collectionEmptyAction}\r\n                      </Button>\r\n                    </div>\r\n                  ) : (\r\n                    <DataTable\r\n                      columns={columnsForType}\r\n                      data={rows}\r\n                      pageIndex={page - 1}\r\n                      pageSize={limit}\r\n                      pageCount={totalPages}\r\n                      onPageChange={(index) => setPage(index + 1)}\r\n                      showGlobalSearch={false}\r\n                      showFilters={false}\r\n                      onRowClick={(row) => openCollectionModal(row)}\r\n                      wrapCellsAsBadges\r\n                      badgeClassName={SETTINGS_BADGE_CLASS}\r\n                      badgeWrapperClassName={SETTINGS_BADGE_WRAPPER_CLASS}\r\n                      badgeEmptyPlaceholder={SETTINGS_BADGE_EMPTY}\r\n                    />\r\n                  )}\r\n                </TabsContent>\r\n              );\r\n            })}\r\n          </Tabs>\r\n        </TabsContent>\r\n        <Modal open={collectionModalOpen} onClose={closeCollectionModal}>\r\n          <div className=\"space-y-4\">\r\n            {selectedCollection ? (\r\n              <article className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm\">\r\n                {selectedCollection.type === \"departments\" ? (\r\n                  <>\r\n                    <h3 className=\"text-base font-semibold\">Информация о департаменте</h3>\r\n                    <dl className=\"mt-2 space-y-3 text-sm\">\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">ID</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection._id}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">Название</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection.name}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\">Отделы департамента</dt>\r\n                        <dd className=\"mt-2\">\r\n                          {renderBadgeList(selectedDepartmentDivisionNames)}\r\n                        </dd>\r\n                      </div>\r\n                    </dl>\r\n                  </>\r\n                ) : selectedCollection.type === \"divisions\" ? (\r\n                  <>\r\n                    <h3 className=\"text-base font-semibold\">Информация о департаменте</h3>\r\n                    <dl className=\"mt-2 space-y-3 text-sm\">\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">ID</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection._id}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">Название</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection.name}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">Департамент</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedDivisionDepartmentName || \"—\"}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\">Должности отдела</dt>\r\n                        <dd className=\"mt-2\">\r\n                          {renderBadgeList(selectedDivisionPositionNames)}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\">Сотрудники отдела</dt>\r\n                        <dd className=\"mt-2\">\r\n                          {renderBadgeList(selectedDivisionEmployeeNames)}\r\n                        </dd>\r\n                      </div>\r\n                    </dl>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <h3 className=\"text-base font-semibold\">Карточка элемента</h3>\r\n                    <dl className=\"mt-2 space-y-1 text-sm\">\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">ID</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection._id}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">Название</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection.name}\r\n                        </dd>\r\n                      </div>\r\n                      <div className=\"flex justify-between gap-4\">\r\n                        <dt className=\"font-medium text-slate-500\">Тип</dt>\r\n                        <dd className=\"text-right text-slate-900\">\r\n                          {selectedCollection.type}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\">Значение</dt>\r\n                        <dd className=\"mt-1 rounded bg-white p-2 font-mono text-xs text-slate-900\">\r\n                          {selectedCollection.value || \"—\"}\r\n                        </dd>\r\n                      </div>\r\n                      <div>\r\n                        <dt className=\"font-medium text-slate-500\">Meta</dt>\r\n                        <dd className=\"mt-1\">\r\n                          <pre className=\"max-h-48 overflow-auto rounded bg-white p-2 text-xs text-slate-800\">\r\n                            {selectedCollection.meta\r\n                              ? JSON.stringify(selectedCollection.meta, null, 2)\r\n                              : \"{}\"}\r\n                          </pre>\r\n                        </dd>\r\n                      </div>\r\n                    </dl>\r\n                  </>\r\n                )}\r\n              </article>\r\n            ) : null}\r\n            <CollectionForm\r\n              form={form}\r\n              onChange={setForm}\r\n              onSubmit={submit}\r\n              onDelete={remove}\r\n              onReset={() => setForm({ name: \"\", value: \"\" })}\r\n              valueLabel={\r\n                active === \"departments\"\r\n                  ? \"Отделы\"\r\n                  : active === \"divisions\"\r\n                    ? \"Департамент\"\r\n                    : active === \"positions\"\r\n                      ? \"Отдел\"\r\n                      : undefined\r\n              }\r\n              renderValueField={\r\n                active === \"departments\"\r\n                  ? renderDepartmentValueField\r\n                  : active === \"divisions\"\r\n                    ? renderDivisionValueField\r\n                    : active === \"positions\"\r\n                      ? renderPositionValueField\r\n                      : undefined\r\n              }\r\n              readonly={selectedCollectionInfo.readonly}\r\n              readonlyNotice={selectedCollectionInfo.notice}\r\n            />\r\n          </div>\r\n        </Modal>\r\n        <Modal open={userModalOpen} onClose={closeUserModal}>\r\n          <div className=\"space-y-4\">\r\n            <article className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm\">\r\n              <header className=\"flex items-start justify-between gap-3\">\r\n                <div>\r\n                  <h3 className=\"text-base font-semibold\">Карточка пользователя</h3>\r\n                  <p className=\"text-sm text-slate-500\">\r\n                    Telegram ID: {userForm.telegram_id ?? \"—\"}\r\n                  </p>\r\n                </div>\r\n                {canManageUsers && userForm.telegram_id ? (\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"destructive\"\r\n                    className=\"h-9 px-3 text-sm\"\r\n                    onClick={() => setConfirmUserDelete(true)}\r\n                  >\r\n                    Удалить\r\n                  </Button>\r\n                ) : null}\r\n              </header>\r\n              <dl className=\"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2\">\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Логин</dt>\r\n                  <dd className=\"text-slate-900\">{userForm.username || \"—\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Имя</dt>\r\n                  <dd className=\"text-slate-900\">{userForm.name || \"—\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Телефон</dt>\r\n                  <dd className=\"text-slate-900\">{userForm.phone || \"—\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Мобильный</dt>\r\n                  <dd className=\"text-slate-900\">{userForm.mobNumber || \"—\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Email</dt>\r\n                  <dd className=\"text-slate-900\">{userForm.email || \"—\"}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Роль</dt>\r\n                  <dd className=\"text-slate-900\">{formatRoleName(userForm.role)}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Доступ</dt>\r\n                  <dd className=\"text-slate-900\">{userForm.access}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Роль ID</dt>\r\n                  <dd className=\"text-slate-900\">\r\n                    {userForm.roleId\r\n                      ? formatRoleName(roleMap.get(userForm.roleId) ?? userForm.roleId)\r\n                      : \"—\"}\r\n                  </dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Департамент</dt>\r\n                  <dd className=\"text-slate-900\">\r\n                    {userForm.departmentId\r\n                      ? departmentMap.get(userForm.departmentId) ?? userForm.departmentId\r\n                      : \"—\"}\r\n                  </dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Отдел</dt>\r\n                  <dd className=\"text-slate-900\">\r\n                    {userForm.divisionId\r\n                      ? divisionMap.get(userForm.divisionId) ?? userForm.divisionId\r\n                      : \"—\"}\r\n                  </dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"font-medium text-slate-500\">Должность</dt>\r\n                  <dd className=\"text-slate-900\">\r\n                    {userForm.positionId\r\n                      ? positionMap.get(userForm.positionId) ?? userForm.positionId\r\n                      : \"—\"}\r\n                  </dd>\r\n                </div>\r\n              </dl>\r\n            </article>\r\n            <UserForm\r\n              form={userForm}\r\n              onChange={setUserForm}\r\n              onSubmit={submitUser}\r\n              onReset={() => setUserForm(emptyUser)}\r\n            />\r\n          </div>\r\n        </Modal>\r\n        <Modal\r\n          open={isEmployeeModalOpen}\r\n          onClose={() => setIsEmployeeModalOpen(false)}\r\n        >\r\n          <div className=\"space-y-4\">\r\n            {selectedEmployee ? (\r\n              <article className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm\">\r\n                <header className=\"flex items-start justify-between gap-3\">\r\n                  <div>\r\n                    <h3 className=\"text-base font-semibold\">Карточка сотрудника</h3>\r\n                    <p className=\"text-sm text-slate-500\">\r\n                      ID: {selectedEmployee.telegram_id ?? \"—\"}\r\n                    </p>\r\n                  </div>\r\n                  {canManageUsers && selectedEmployee.telegram_id ? (\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"destructive\"\r\n                      className=\"h-9 px-3 text-sm\"\r\n                      onClick={() => setConfirmEmployeeDelete(true)}\r\n                    >\r\n                      Удалить\r\n                    </Button>\r\n                  ) : null}\r\n                </header>\r\n                <dl className=\"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2\">\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Telegram ID</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.telegram_id}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Логин</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.username || \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Имя</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.name || \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Телефон</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.phone || \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Мобильный</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.mobNumber || \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Email</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.email || \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Роль</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {formatRoleName(selectedEmployee.role)}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Доступ</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.access ?? \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Роль ID</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.roleId\r\n                        ? formatRoleName(\r\n                            roleMap.get(selectedEmployee.roleId) ??\r\n                              selectedEmployee.roleId,\r\n                          )\r\n                        : \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Департамент</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.departmentId\r\n                        ? departmentMap.get(selectedEmployee.departmentId) ??\r\n                          selectedEmployee.departmentId\r\n                        : \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Отдел</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.divisionId\r\n                        ? divisionMap.get(selectedEmployee.divisionId) ??\r\n                          selectedEmployee.divisionId\r\n                        : \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"font-medium text-slate-500\">Должность</dt>\r\n                    <dd className=\"text-slate-900\">\r\n                      {selectedEmployee.positionId\r\n                        ? positionMap.get(selectedEmployee.positionId) ??\r\n                          selectedEmployee.positionId\r\n                        : \"—\"}\r\n                    </dd>\r\n                  </div>\r\n                </dl>\r\n              </article>\r\n            ) : null}\r\n            <EmployeeCardForm\r\n              telegramId={\r\n                employeeFormMode === \"update\" ? selectedEmployeeId : undefined\r\n              }\r\n              mode={employeeFormMode}\r\n              onSaved={handleEmployeeSaved}\r\n            />\r\n          </div>\r\n        </Modal>\r\n        <ConfirmDialog\r\n          open={confirmUserDelete}\r\n          message=\"Удалить пользователя? Это действие нельзя отменить.\"\r\n          onConfirm={executeUserDelete}\r\n          onCancel={() => setConfirmUserDelete(false)}\r\n          confirmText=\"Удалить\"\r\n        />\r\n        <ConfirmDialog\r\n          open={confirmEmployeeDelete}\r\n          message=\"Удалить сотрудника? Это действие нельзя отменить.\"\r\n          onConfirm={executeEmployeeDelete}\r\n          onCancel={() => setConfirmEmployeeDelete(false)}\r\n          confirmText=\"Удалить\"\r\n        />\r\n        <TabsContent value=\"reports\" className=\"mt-0\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\">\r\n            <AnalyticsDashboard />\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"archive\" className=\"mt-0\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\">\r\n            <ArchivePage />\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"logs\" className=\"mt-0\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\">\r\n            <LogsPage />\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"storage\" className=\"mt-0\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\">\r\n            <StoragePage />\r\n          </div>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\";\nfunction ArchiveBoxIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArchiveBoxIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction BuildingOffice2Icon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BuildingOffice2Icon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CheckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m4.5 12.75 6 6 9-13.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentDuplicateIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentDuplicateIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction IdentificationIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(IdentificationIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction KeyIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(KeyIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction RectangleStackIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(RectangleStackIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction Squares2X2Icon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(Squares2X2Icon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TruckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TruckIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction UserGroupIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserGroupIcon);\nexport default ForwardRef;","var characterMap = {\n\t\"À\": \"A\",\n\t\"Á\": \"A\",\n\t\"Â\": \"A\",\n\t\"Ã\": \"A\",\n\t\"Ä\": \"A\",\n\t\"Å\": \"A\",\n\t\"Ấ\": \"A\",\n\t\"Ắ\": \"A\",\n\t\"Ẳ\": \"A\",\n\t\"Ẵ\": \"A\",\n\t\"Ặ\": \"A\",\n\t\"Æ\": \"AE\",\n\t\"Ầ\": \"A\",\n\t\"Ằ\": \"A\",\n\t\"Ȃ\": \"A\",\n\t\"Ả\": \"A\",\n\t\"Ạ\": \"A\",\n\t\"Ẩ\": \"A\",\n\t\"Ẫ\": \"A\",\n\t\"Ậ\": \"A\",\n\t\"Ç\": \"C\",\n\t\"Ḉ\": \"C\",\n\t\"È\": \"E\",\n\t\"É\": \"E\",\n\t\"Ê\": \"E\",\n\t\"Ë\": \"E\",\n\t\"Ế\": \"E\",\n\t\"Ḗ\": \"E\",\n\t\"Ề\": \"E\",\n\t\"Ḕ\": \"E\",\n\t\"Ḝ\": \"E\",\n\t\"Ȇ\": \"E\",\n\t\"Ẻ\": \"E\",\n\t\"Ẽ\": \"E\",\n\t\"Ẹ\": \"E\",\n\t\"Ể\": \"E\",\n\t\"Ễ\": \"E\",\n\t\"Ệ\": \"E\",\n\t\"Ì\": \"I\",\n\t\"Í\": \"I\",\n\t\"Î\": \"I\",\n\t\"Ï\": \"I\",\n\t\"Ḯ\": \"I\",\n\t\"Ȋ\": \"I\",\n\t\"Ỉ\": \"I\",\n\t\"Ị\": \"I\",\n\t\"Ð\": \"D\",\n\t\"Ñ\": \"N\",\n\t\"Ò\": \"O\",\n\t\"Ó\": \"O\",\n\t\"Ô\": \"O\",\n\t\"Õ\": \"O\",\n\t\"Ö\": \"O\",\n\t\"Ø\": \"O\",\n\t\"Ố\": \"O\",\n\t\"Ṍ\": \"O\",\n\t\"Ṓ\": \"O\",\n\t\"Ȏ\": \"O\",\n\t\"Ỏ\": \"O\",\n\t\"Ọ\": \"O\",\n\t\"Ổ\": \"O\",\n\t\"Ỗ\": \"O\",\n\t\"Ộ\": \"O\",\n\t\"Ờ\": \"O\",\n\t\"Ở\": \"O\",\n\t\"Ỡ\": \"O\",\n\t\"Ớ\": \"O\",\n\t\"Ợ\": \"O\",\n\t\"Ù\": \"U\",\n\t\"Ú\": \"U\",\n\t\"Û\": \"U\",\n\t\"Ü\": \"U\",\n\t\"Ủ\": \"U\",\n\t\"Ụ\": \"U\",\n\t\"Ử\": \"U\",\n\t\"Ữ\": \"U\",\n\t\"Ự\": \"U\",\n\t\"Ý\": \"Y\",\n\t\"à\": \"a\",\n\t\"á\": \"a\",\n\t\"â\": \"a\",\n\t\"ã\": \"a\",\n\t\"ä\": \"a\",\n\t\"å\": \"a\",\n\t\"ấ\": \"a\",\n\t\"ắ\": \"a\",\n\t\"ẳ\": \"a\",\n\t\"ẵ\": \"a\",\n\t\"ặ\": \"a\",\n\t\"æ\": \"ae\",\n\t\"ầ\": \"a\",\n\t\"ằ\": \"a\",\n\t\"ȃ\": \"a\",\n\t\"ả\": \"a\",\n\t\"ạ\": \"a\",\n\t\"ẩ\": \"a\",\n\t\"ẫ\": \"a\",\n\t\"ậ\": \"a\",\n\t\"ç\": \"c\",\n\t\"ḉ\": \"c\",\n\t\"è\": \"e\",\n\t\"é\": \"e\",\n\t\"ê\": \"e\",\n\t\"ë\": \"e\",\n\t\"ế\": \"e\",\n\t\"ḗ\": \"e\",\n\t\"ề\": \"e\",\n\t\"ḕ\": \"e\",\n\t\"ḝ\": \"e\",\n\t\"ȇ\": \"e\",\n\t\"ẻ\": \"e\",\n\t\"ẽ\": \"e\",\n\t\"ẹ\": \"e\",\n\t\"ể\": \"e\",\n\t\"ễ\": \"e\",\n\t\"ệ\": \"e\",\n\t\"ì\": \"i\",\n\t\"í\": \"i\",\n\t\"î\": \"i\",\n\t\"ï\": \"i\",\n\t\"ḯ\": \"i\",\n\t\"ȋ\": \"i\",\n\t\"ỉ\": \"i\",\n\t\"ị\": \"i\",\n\t\"ð\": \"d\",\n\t\"ñ\": \"n\",\n\t\"ò\": \"o\",\n\t\"ó\": \"o\",\n\t\"ô\": \"o\",\n\t\"õ\": \"o\",\n\t\"ö\": \"o\",\n\t\"ø\": \"o\",\n\t\"ố\": \"o\",\n\t\"ṍ\": \"o\",\n\t\"ṓ\": \"o\",\n\t\"ȏ\": \"o\",\n\t\"ỏ\": \"o\",\n\t\"ọ\": \"o\",\n\t\"ổ\": \"o\",\n\t\"ỗ\": \"o\",\n\t\"ộ\": \"o\",\n\t\"ờ\": \"o\",\n\t\"ở\": \"o\",\n\t\"ỡ\": \"o\",\n\t\"ớ\": \"o\",\n\t\"ợ\": \"o\",\n\t\"ù\": \"u\",\n\t\"ú\": \"u\",\n\t\"û\": \"u\",\n\t\"ü\": \"u\",\n\t\"ủ\": \"u\",\n\t\"ụ\": \"u\",\n\t\"ử\": \"u\",\n\t\"ữ\": \"u\",\n\t\"ự\": \"u\",\n\t\"ý\": \"y\",\n\t\"ÿ\": \"y\",\n\t\"Ā\": \"A\",\n\t\"ā\": \"a\",\n\t\"Ă\": \"A\",\n\t\"ă\": \"a\",\n\t\"Ą\": \"A\",\n\t\"ą\": \"a\",\n\t\"Ć\": \"C\",\n\t\"ć\": \"c\",\n\t\"Ĉ\": \"C\",\n\t\"ĉ\": \"c\",\n\t\"Ċ\": \"C\",\n\t\"ċ\": \"c\",\n\t\"Č\": \"C\",\n\t\"č\": \"c\",\n\t\"C̆\": \"C\",\n\t\"c̆\": \"c\",\n\t\"Ď\": \"D\",\n\t\"ď\": \"d\",\n\t\"Đ\": \"D\",\n\t\"đ\": \"d\",\n\t\"Ē\": \"E\",\n\t\"ē\": \"e\",\n\t\"Ĕ\": \"E\",\n\t\"ĕ\": \"e\",\n\t\"Ė\": \"E\",\n\t\"ė\": \"e\",\n\t\"Ę\": \"E\",\n\t\"ę\": \"e\",\n\t\"Ě\": \"E\",\n\t\"ě\": \"e\",\n\t\"Ĝ\": \"G\",\n\t\"Ǵ\": \"G\",\n\t\"ĝ\": \"g\",\n\t\"ǵ\": \"g\",\n\t\"Ğ\": \"G\",\n\t\"ğ\": \"g\",\n\t\"Ġ\": \"G\",\n\t\"ġ\": \"g\",\n\t\"Ģ\": \"G\",\n\t\"ģ\": \"g\",\n\t\"Ĥ\": \"H\",\n\t\"ĥ\": \"h\",\n\t\"Ħ\": \"H\",\n\t\"ħ\": \"h\",\n\t\"Ḫ\": \"H\",\n\t\"ḫ\": \"h\",\n\t\"Ĩ\": \"I\",\n\t\"ĩ\": \"i\",\n\t\"Ī\": \"I\",\n\t\"ī\": \"i\",\n\t\"Ĭ\": \"I\",\n\t\"ĭ\": \"i\",\n\t\"Į\": \"I\",\n\t\"į\": \"i\",\n\t\"İ\": \"I\",\n\t\"ı\": \"i\",\n\t\"Ĳ\": \"IJ\",\n\t\"ĳ\": \"ij\",\n\t\"Ĵ\": \"J\",\n\t\"ĵ\": \"j\",\n\t\"Ķ\": \"K\",\n\t\"ķ\": \"k\",\n\t\"Ḱ\": \"K\",\n\t\"ḱ\": \"k\",\n\t\"K̆\": \"K\",\n\t\"k̆\": \"k\",\n\t\"Ĺ\": \"L\",\n\t\"ĺ\": \"l\",\n\t\"Ļ\": \"L\",\n\t\"ļ\": \"l\",\n\t\"Ľ\": \"L\",\n\t\"ľ\": \"l\",\n\t\"Ŀ\": \"L\",\n\t\"ŀ\": \"l\",\n\t\"Ł\": \"l\",\n\t\"ł\": \"l\",\n\t\"Ḿ\": \"M\",\n\t\"ḿ\": \"m\",\n\t\"M̆\": \"M\",\n\t\"m̆\": \"m\",\n\t\"Ń\": \"N\",\n\t\"ń\": \"n\",\n\t\"Ņ\": \"N\",\n\t\"ņ\": \"n\",\n\t\"Ň\": \"N\",\n\t\"ň\": \"n\",\n\t\"ŉ\": \"n\",\n\t\"N̆\": \"N\",\n\t\"n̆\": \"n\",\n\t\"Ō\": \"O\",\n\t\"ō\": \"o\",\n\t\"Ŏ\": \"O\",\n\t\"ŏ\": \"o\",\n\t\"Ő\": \"O\",\n\t\"ő\": \"o\",\n\t\"Œ\": \"OE\",\n\t\"œ\": \"oe\",\n\t\"P̆\": \"P\",\n\t\"p̆\": \"p\",\n\t\"Ŕ\": \"R\",\n\t\"ŕ\": \"r\",\n\t\"Ŗ\": \"R\",\n\t\"ŗ\": \"r\",\n\t\"Ř\": \"R\",\n\t\"ř\": \"r\",\n\t\"R̆\": \"R\",\n\t\"r̆\": \"r\",\n\t\"Ȓ\": \"R\",\n\t\"ȓ\": \"r\",\n\t\"Ś\": \"S\",\n\t\"ś\": \"s\",\n\t\"Ŝ\": \"S\",\n\t\"ŝ\": \"s\",\n\t\"Ş\": \"S\",\n\t\"Ș\": \"S\",\n\t\"ș\": \"s\",\n\t\"ş\": \"s\",\n\t\"Š\": \"S\",\n\t\"š\": \"s\",\n\t\"Ţ\": \"T\",\n\t\"ţ\": \"t\",\n\t\"ț\": \"t\",\n\t\"Ț\": \"T\",\n\t\"Ť\": \"T\",\n\t\"ť\": \"t\",\n\t\"Ŧ\": \"T\",\n\t\"ŧ\": \"t\",\n\t\"T̆\": \"T\",\n\t\"t̆\": \"t\",\n\t\"Ũ\": \"U\",\n\t\"ũ\": \"u\",\n\t\"Ū\": \"U\",\n\t\"ū\": \"u\",\n\t\"Ŭ\": \"U\",\n\t\"ŭ\": \"u\",\n\t\"Ů\": \"U\",\n\t\"ů\": \"u\",\n\t\"Ű\": \"U\",\n\t\"ű\": \"u\",\n\t\"Ų\": \"U\",\n\t\"ų\": \"u\",\n\t\"Ȗ\": \"U\",\n\t\"ȗ\": \"u\",\n\t\"V̆\": \"V\",\n\t\"v̆\": \"v\",\n\t\"Ŵ\": \"W\",\n\t\"ŵ\": \"w\",\n\t\"Ẃ\": \"W\",\n\t\"ẃ\": \"w\",\n\t\"X̆\": \"X\",\n\t\"x̆\": \"x\",\n\t\"Ŷ\": \"Y\",\n\t\"ŷ\": \"y\",\n\t\"Ÿ\": \"Y\",\n\t\"Y̆\": \"Y\",\n\t\"y̆\": \"y\",\n\t\"Ź\": \"Z\",\n\t\"ź\": \"z\",\n\t\"Ż\": \"Z\",\n\t\"ż\": \"z\",\n\t\"Ž\": \"Z\",\n\t\"ž\": \"z\",\n\t\"ſ\": \"s\",\n\t\"ƒ\": \"f\",\n\t\"Ơ\": \"O\",\n\t\"ơ\": \"o\",\n\t\"Ư\": \"U\",\n\t\"ư\": \"u\",\n\t\"Ǎ\": \"A\",\n\t\"ǎ\": \"a\",\n\t\"Ǐ\": \"I\",\n\t\"ǐ\": \"i\",\n\t\"Ǒ\": \"O\",\n\t\"ǒ\": \"o\",\n\t\"Ǔ\": \"U\",\n\t\"ǔ\": \"u\",\n\t\"Ǖ\": \"U\",\n\t\"ǖ\": \"u\",\n\t\"Ǘ\": \"U\",\n\t\"ǘ\": \"u\",\n\t\"Ǚ\": \"U\",\n\t\"ǚ\": \"u\",\n\t\"Ǜ\": \"U\",\n\t\"ǜ\": \"u\",\n\t\"Ứ\": \"U\",\n\t\"ứ\": \"u\",\n\t\"Ṹ\": \"U\",\n\t\"ṹ\": \"u\",\n\t\"Ǻ\": \"A\",\n\t\"ǻ\": \"a\",\n\t\"Ǽ\": \"AE\",\n\t\"ǽ\": \"ae\",\n\t\"Ǿ\": \"O\",\n\t\"ǿ\": \"o\",\n\t\"Þ\": \"TH\",\n\t\"þ\": \"th\",\n\t\"Ṕ\": \"P\",\n\t\"ṕ\": \"p\",\n\t\"Ṥ\": \"S\",\n\t\"ṥ\": \"s\",\n\t\"X́\": \"X\",\n\t\"x́\": \"x\",\n\t\"Ѓ\": \"Г\",\n\t\"ѓ\": \"г\",\n\t\"Ќ\": \"К\",\n\t\"ќ\": \"к\",\n\t\"A̋\": \"A\",\n\t\"a̋\": \"a\",\n\t\"E̋\": \"E\",\n\t\"e̋\": \"e\",\n\t\"I̋\": \"I\",\n\t\"i̋\": \"i\",\n\t\"Ǹ\": \"N\",\n\t\"ǹ\": \"n\",\n\t\"Ồ\": \"O\",\n\t\"ồ\": \"o\",\n\t\"Ṑ\": \"O\",\n\t\"ṑ\": \"o\",\n\t\"Ừ\": \"U\",\n\t\"ừ\": \"u\",\n\t\"Ẁ\": \"W\",\n\t\"ẁ\": \"w\",\n\t\"Ỳ\": \"Y\",\n\t\"ỳ\": \"y\",\n\t\"Ȁ\": \"A\",\n\t\"ȁ\": \"a\",\n\t\"Ȅ\": \"E\",\n\t\"ȅ\": \"e\",\n\t\"Ȉ\": \"I\",\n\t\"ȉ\": \"i\",\n\t\"Ȍ\": \"O\",\n\t\"ȍ\": \"o\",\n\t\"Ȑ\": \"R\",\n\t\"ȑ\": \"r\",\n\t\"Ȕ\": \"U\",\n\t\"ȕ\": \"u\",\n\t\"B̌\": \"B\",\n\t\"b̌\": \"b\",\n\t\"Č̣\": \"C\",\n\t\"č̣\": \"c\",\n\t\"Ê̌\": \"E\",\n\t\"ê̌\": \"e\",\n\t\"F̌\": \"F\",\n\t\"f̌\": \"f\",\n\t\"Ǧ\": \"G\",\n\t\"ǧ\": \"g\",\n\t\"Ȟ\": \"H\",\n\t\"ȟ\": \"h\",\n\t\"J̌\": \"J\",\n\t\"ǰ\": \"j\",\n\t\"Ǩ\": \"K\",\n\t\"ǩ\": \"k\",\n\t\"M̌\": \"M\",\n\t\"m̌\": \"m\",\n\t\"P̌\": \"P\",\n\t\"p̌\": \"p\",\n\t\"Q̌\": \"Q\",\n\t\"q̌\": \"q\",\n\t\"Ř̩\": \"R\",\n\t\"ř̩\": \"r\",\n\t\"Ṧ\": \"S\",\n\t\"ṧ\": \"s\",\n\t\"V̌\": \"V\",\n\t\"v̌\": \"v\",\n\t\"W̌\": \"W\",\n\t\"w̌\": \"w\",\n\t\"X̌\": \"X\",\n\t\"x̌\": \"x\",\n\t\"Y̌\": \"Y\",\n\t\"y̌\": \"y\",\n\t\"A̧\": \"A\",\n\t\"a̧\": \"a\",\n\t\"B̧\": \"B\",\n\t\"b̧\": \"b\",\n\t\"Ḑ\": \"D\",\n\t\"ḑ\": \"d\",\n\t\"Ȩ\": \"E\",\n\t\"ȩ\": \"e\",\n\t\"Ɛ̧\": \"E\",\n\t\"ɛ̧\": \"e\",\n\t\"Ḩ\": \"H\",\n\t\"ḩ\": \"h\",\n\t\"I̧\": \"I\",\n\t\"i̧\": \"i\",\n\t\"Ɨ̧\": \"I\",\n\t\"ɨ̧\": \"i\",\n\t\"M̧\": \"M\",\n\t\"m̧\": \"m\",\n\t\"O̧\": \"O\",\n\t\"o̧\": \"o\",\n\t\"Q̧\": \"Q\",\n\t\"q̧\": \"q\",\n\t\"U̧\": \"U\",\n\t\"u̧\": \"u\",\n\t\"X̧\": \"X\",\n\t\"x̧\": \"x\",\n\t\"Z̧\": \"Z\",\n\t\"z̧\": \"z\",\n\t\"й\":\"и\",\n\t\"Й\":\"И\",\n\t\"ё\":\"е\",\n\t\"Ё\":\"Е\",\n};\n\nvar chars = Object.keys(characterMap).join('|');\nvar allAccents = new RegExp(chars, 'g');\nvar firstAccent = new RegExp(chars, '');\n\nfunction matcher(match) {\n\treturn characterMap[match];\n}\n\nvar removeAccents = function(string) {\n\treturn string.replace(allAccents, matcher);\n};\n\nvar hasAccents = function(string) {\n\treturn !!string.match(firstAccent);\n};\n\nmodule.exports = removeAccents;\nmodule.exports.has = hasAccents;\nmodule.exports.remove = removeAccents;\n","\"use client\";\n\n// src/tabs.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { jsx } from \"react/jsx-runtime\";\nvar TABS_NAME = \"Tabs\";\nvar [createTabsContext, createTabsScope] = createContextScope(TABS_NAME, [\n  createRovingFocusGroupScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar [TabsProvider, useTabsContext] = createTabsContext(TABS_NAME);\nvar Tabs = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTabs,\n      value: valueProp,\n      onValueChange,\n      defaultValue,\n      orientation = \"horizontal\",\n      dir,\n      activationMode = \"automatic\",\n      ...tabsProps\n    } = props;\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      onChange: onValueChange,\n      defaultProp: defaultValue ?? \"\",\n      caller: TABS_NAME\n    });\n    return /* @__PURE__ */ jsx(\n      TabsProvider,\n      {\n        scope: __scopeTabs,\n        baseId: useId(),\n        value,\n        onValueChange: setValue,\n        orientation,\n        dir: direction,\n        activationMode,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            dir: direction,\n            \"data-orientation\": orientation,\n            ...tabsProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabs.displayName = TABS_NAME;\nvar TAB_LIST_NAME = \"TabsList\";\nvar TabsList = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, loop = true, ...listProps } = props;\n    const context = useTabsContext(TAB_LIST_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Root,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        orientation: context.orientation,\n        dir: context.dir,\n        loop,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            role: \"tablist\",\n            \"aria-orientation\": context.orientation,\n            ...listProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabsList.displayName = TAB_LIST_NAME;\nvar TRIGGER_NAME = \"TabsTrigger\";\nvar TabsTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, disabled = false, ...triggerProps } = props;\n    const context = useTabsContext(TRIGGER_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !disabled,\n        active: isSelected,\n        children: /* @__PURE__ */ jsx(\n          Primitive.button,\n          {\n            type: \"button\",\n            role: \"tab\",\n            \"aria-selected\": isSelected,\n            \"aria-controls\": contentId,\n            \"data-state\": isSelected ? \"active\" : \"inactive\",\n            \"data-disabled\": disabled ? \"\" : void 0,\n            disabled,\n            id: triggerId,\n            ...triggerProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!disabled && event.button === 0 && event.ctrlKey === false) {\n                context.onValueChange(value);\n              } else {\n                event.preventDefault();\n              }\n            }),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if ([\" \", \"Enter\"].includes(event.key)) context.onValueChange(value);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => {\n              const isAutomaticActivation = context.activationMode !== \"manual\";\n              if (!isSelected && !disabled && isAutomaticActivation) {\n                context.onValueChange(value);\n              }\n            })\n          }\n        )\n      }\n    );\n  }\n);\nTabsTrigger.displayName = TRIGGER_NAME;\nvar CONTENT_NAME = \"TabsContent\";\nvar TabsContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, forceMount, children, ...contentProps } = props;\n    const context = useTabsContext(CONTENT_NAME, __scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    const isMountAnimationPreventedRef = React.useRef(isSelected);\n    React.useEffect(() => {\n      const rAF = requestAnimationFrame(() => isMountAnimationPreventedRef.current = false);\n      return () => cancelAnimationFrame(rAF);\n    }, []);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || isSelected, children: ({ present }) => /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": isSelected ? \"active\" : \"inactive\",\n        \"data-orientation\": context.orientation,\n        role: \"tabpanel\",\n        \"aria-labelledby\": triggerId,\n        hidden: !present,\n        id: contentId,\n        tabIndex: 0,\n        ...contentProps,\n        ref: forwardedRef,\n        style: {\n          ...props.style,\n          animationDuration: isMountAnimationPreventedRef.current ? \"0s\" : void 0\n        },\n        children: present && children\n      }\n    ) });\n  }\n);\nTabsContent.displayName = CONTENT_NAME;\nfunction makeTriggerId(baseId, value) {\n  return `${baseId}-trigger-${value}`;\n}\nfunction makeContentId(baseId, value) {\n  return `${baseId}-content-${value}`;\n}\nvar Root2 = Tabs;\nvar List = TabsList;\nvar Trigger = TabsTrigger;\nvar Content = TabsContent;\nexport {\n  Content,\n  List,\n  Root2 as Root,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n  Trigger,\n  createTabsScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn(\"flex flex-col gap-2\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn(\"flex-1 outline-none\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\r\n","// Назначение файла: компонент панели действий с хлебными крошками, вкладками и тулбаром\r\n// Основные модули: React, cn util\r\nimport React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface ActionBarProps {\r\n  breadcrumbs?: React.ReactNode;\r\n  title?: React.ReactNode;\r\n  description?: React.ReactNode;\r\n  toolbar?: React.ReactNode;\r\n  children?: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport default function ActionBar({\r\n  breadcrumbs,\r\n  title,\r\n  description,\r\n  toolbar,\r\n  children,\r\n  className,\r\n}: ActionBarProps) {\r\n  return (\r\n    <section\r\n      className={cn(\r\n        \"flex flex-col gap-3 rounded-3xl border border-[color:var(--color-gray-200)]\",\r\n        \"bg-[color:var(--color-gray-25)] p-4 shadow-[var(--shadow-theme-sm)] sm:p-6\",\r\n        \"dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)]\",\r\n        className,\r\n      )}\r\n    >\r\n      {breadcrumbs ? (\r\n        <div className=\"text-xs font-semibold uppercase tracking-wide text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\">\r\n          {breadcrumbs}\r\n        </div>\r\n      ) : null}\r\n      {(title || description || toolbar) ? (\r\n        <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between\">\r\n          <div className=\"min-w-0 space-y-1\">\r\n            {title ? (\r\n              <h1 className=\"text-lg font-semibold text-[color:var(--color-gray-900)] dark:text-white sm:text-xl\">\r\n                {title}\r\n              </h1>\r\n            ) : null}\r\n            {description ? (\r\n              <p className=\"text-sm text-[color:var(--color-gray-600)] dark:text-[color:var(--color-gray-300)]\">\r\n                {description}\r\n              </p>\r\n            ) : null}\r\n          </div>\r\n          {toolbar ? (\r\n            <div className=\"flex flex-wrap items-center justify-end gap-2\">\r\n              {toolbar}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      ) : null}\r\n      {children ? <div className=\"space-y-3 sm:space-y-4\">{children}</div> : null}\r\n    </section>\r\n  );\r\n}\r\n","// Назначение файла: компонент кнопки-чипа для копирования идентификаторов\r\n// Основные модули: React, heroicons, cn util\r\nimport React from \"react\";\r\nimport { CheckIcon, DocumentDuplicateIcon } from \"@heroicons/react/24/outline\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface CopyableIdProps extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"value\"> {\r\n  value: string;\r\n  displayValue?: string;\r\n  copyHint?: string;\r\n  copiedHint?: string;\r\n  onCopy?: (payload: { value: string }) => void;\r\n}\r\n\r\nexport default function CopyableId({\r\n  value,\r\n  displayValue,\r\n  copyHint,\r\n  copiedHint,\r\n  onCopy,\r\n  className,\r\n  disabled,\r\n  ...props\r\n}: CopyableIdProps) {\r\n  const [copied, setCopied] = React.useState(false);\r\n  const resetTimerRef = React.useRef<number>();\r\n\r\n  const textToShow = displayValue ?? value;\r\n  const defaultCopyHint = copyHint ?? \"Copy\";\r\n  const defaultCopiedHint = copiedHint ?? \"Copied\";\r\n\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (resetTimerRef.current) {\r\n        window.clearTimeout(resetTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (!copied) return;\r\n    resetTimerRef.current = window.setTimeout(() => setCopied(false), 1600);\r\n    return () => {\r\n      if (resetTimerRef.current) {\r\n        window.clearTimeout(resetTimerRef.current);\r\n      }\r\n    };\r\n  }, [copied]);\r\n\r\n  const handleCopy = async () => {\r\n    if (!value || disabled) return;\r\n    const performCopy = async () => {\r\n      if (typeof navigator !== \"undefined\" && navigator.clipboard?.writeText) {\r\n        await navigator.clipboard.writeText(value);\r\n        return true;\r\n      }\r\n      if (typeof document === \"undefined\") {\r\n        return false;\r\n      }\r\n      const textarea = document.createElement(\"textarea\");\r\n      textarea.value = value;\r\n      textarea.setAttribute(\"readonly\", \"\");\r\n      textarea.style.position = \"absolute\";\r\n      textarea.style.left = \"-9999px\";\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n      try {\r\n        const result = document.execCommand(\"copy\");\r\n        return result;\r\n      } catch {\r\n        return false;\r\n      } finally {\r\n        document.body.removeChild(textarea);\r\n      }\r\n    };\r\n\r\n    try {\r\n      const success = await performCopy();\r\n      if (success) {\r\n        setCopied(true);\r\n      }\r\n    } finally {\r\n      onCopy?.({ value });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      className={cn(\r\n        \"inline-flex items-center gap-1.5 rounded-full border border-[color:var(--color-gray-300)]\",\r\n        \"bg-[color:var(--color-gray-25)] px-3 py-1 text-[11px] font-semibold tracking-wide text-[color:var(--color-gray-700)]\",\r\n        \"transition-colors duration-150 ease-out hover:border-[color:var(--color-brand-400)] hover:bg-[color:var(--color-brand-50)]\",\r\n        \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-brand-500)] focus-visible:ring-offset-2\",\r\n        \"disabled:cursor-not-allowed disabled:border-[color:var(--color-gray-200)] disabled:text-[color:var(--color-gray-400)]\",\r\n        \"dark:border-[color:var(--color-gray-700)] dark:bg-[color:var(--color-gray-dark)] dark:text-[color:var(--color-gray-100)]\",\r\n        \"dark:hover:border-[color:var(--color-brand-400)] dark:hover:bg-[color:var(--color-gray-800)]\",\r\n        className,\r\n      )}\r\n      onClick={handleCopy}\r\n      title={copied ? defaultCopiedHint : defaultCopyHint}\r\n      aria-pressed={copied}\r\n      aria-live=\"polite\"\r\n      disabled={disabled}\r\n      {...props}\r\n    >\r\n      <span className=\"inline-flex items-center gap-1\">\r\n        {copied ? (\r\n          <CheckIcon className=\"h-4 w-4 text-[color:var(--color-brand-500)] dark:text-[color:var(--color-brand-400)]\" aria-hidden=\"true\" />\r\n        ) : (\r\n          <DocumentDuplicateIcon className=\"h-4 w-4 text-[color:var(--color-gray-500)] dark:text-[color:var(--color-gray-300)]\" aria-hidden=\"true\" />\r\n        )}\r\n        <span className=\"truncate text-left\">{textToShow}</span>\r\n      </span>\r\n      <span className=\"sr-only\">{copied ? defaultCopiedHint : defaultCopyHint}</span>\r\n    </button>\r\n  );\r\n}\r\n","// Назначение: форма элемента коллекции с подтверждением действий\r\n// Основные модули: React, ConfirmDialog\r\nimport React from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport ConfirmDialog from \"../../components/ConfirmDialog\";\r\n\r\ninterface ItemForm {\r\n  _id?: string;\r\n  name: string;\r\n  value: string;\r\n}\r\n\r\ninterface Props {\r\n  form: ItemForm;\r\n  onChange: (form: ItemForm) => void;\r\n  onSubmit: () => void;\r\n  onDelete: () => void;\r\n  onReset: () => void;\r\n  valueLabel?: string;\r\n  renderValueField?: (\r\n    form: ItemForm,\r\n    onChange: (form: ItemForm) => void,\r\n    options?: { readonly?: boolean },\r\n  ) => React.ReactNode;\r\n  readonly?: boolean;\r\n  readonlyNotice?: string;\r\n}\r\n\r\nexport default function CollectionForm({\r\n  form,\r\n  onChange,\r\n  onSubmit,\r\n  onDelete,\r\n  onReset,\r\n  valueLabel = \"Значение\",\r\n  renderValueField,\r\n  readonly = false,\r\n  readonlyNotice,\r\n}: Props) {\r\n  const [confirmDelete, setConfirmDelete] = React.useState(false);\r\n  const [confirmSave, setConfirmSave] = React.useState(false);\r\n\r\n  const submit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (readonly) return;\r\n    setConfirmSave(true);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={submit} className=\"space-y-2\">\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Имя</label>\r\n        <input\r\n          id=\"collection-form-name\"\r\n          name=\"collectionName\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.name}\r\n          onChange={(e) => onChange({ ...form, name: e.target.value })}\r\n          required\r\n          disabled={readonly}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">{valueLabel}</label>\r\n        {renderValueField ? (\r\n          renderValueField(form, readonly ? () => undefined : onChange, {\r\n            readonly,\r\n          })\r\n        ) : (\r\n          <input\r\n            id=\"collection-form-value\"\r\n            name=\"collectionValue\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.value}\r\n            onChange={(e) => onChange({ ...form, value: e.target.value })}\r\n            required\r\n            disabled={readonly}\r\n          />\r\n        )}\r\n      </div>\r\n      {readonly ? (\r\n        <p className=\"rounded border border-amber-200 bg-amber-50 p-2 text-sm text-amber-900\">\r\n          {readonlyNotice ?? 'Элемент доступен только для чтения.'}\r\n        </p>\r\n      ) : null}\r\n      <div className=\"flex gap-2\">\r\n        <Button type=\"submit\" disabled={readonly}>\r\n          Сохранить\r\n        </Button>\r\n        {form._id ? (\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"destructive\"\r\n            disabled={readonly}\r\n            onClick={() => {\r\n              if (readonly) return;\r\n              setConfirmDelete(true);\r\n            }}\r\n          >\r\n            Удалить\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={onReset}\r\n            disabled={readonly}\r\n          >\r\n            Очистить\r\n          </Button>\r\n        )}\r\n      </div>\r\n      <ConfirmDialog\r\n        open={confirmSave}\r\n        message=\"Сохранить изменения?\"\r\n        onConfirm={() => {\r\n          setConfirmSave(false);\r\n          onSubmit();\r\n        }}\r\n        onCancel={() => setConfirmSave(false)}\r\n        confirmText=\"Сохранить\"\r\n      />\r\n      <ConfirmDialog\r\n        open={confirmDelete}\r\n        message=\"Удалить элемент?\"\r\n        onConfirm={() => {\r\n          setConfirmDelete(false);\r\n          onDelete();\r\n        }}\r\n        onCancel={() => setConfirmDelete(false)}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","// Назначение: модальное окно создания и редактирования транспорта\r\n// Основные модули: React, ConfirmDialog, services/fleets\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport ConfirmDialog from \"../../components/ConfirmDialog\";\r\nimport type { FleetVehicleDto } from \"shared\";\r\nimport type { FleetVehiclePayload } from \"../../services/fleets\";\r\n\r\ninterface FleetVehicleDialogProps {\r\n  open: boolean;\r\n  mode: \"create\" | \"update\";\r\n  vehicle: FleetVehicleDto | null;\r\n  saving: boolean;\r\n  onSubmit: (payload: FleetVehiclePayload, id?: string) => Promise<void>;\r\n  onDelete?: (id: string) => Promise<void>;\r\n  onClose: () => void;\r\n}\r\n\r\ninterface FormState {\r\n  name: string;\r\n  registrationNumber: string;\r\n  odometerInitial: string;\r\n  odometerCurrent: string;\r\n  mileageTotal: string;\r\n  transportType: \"Легковой\" | \"Грузовой\";\r\n  fuelType: \"Бензин\" | \"Дизель\" | \"Газ\";\r\n  fuelRefilled: string;\r\n  fuelAverageConsumption: string;\r\n  fuelSpentTotal: string;\r\n  currentTasks: string;\r\n}\r\n\r\nconst emptyForm: FormState = {\r\n  name: \"\",\r\n  registrationNumber: \"\",\r\n  odometerInitial: \"0\",\r\n  odometerCurrent: \"0\",\r\n  mileageTotal: \"0\",\r\n  transportType: \"Легковой\",\r\n  fuelType: \"Бензин\",\r\n  fuelRefilled: \"0\",\r\n  fuelAverageConsumption: \"0\",\r\n  fuelSpentTotal: \"0\",\r\n  currentTasks: \"\",\r\n};\r\n\r\nconst parseTasks = (value: string): string[] =>\r\n  value\r\n    .split(/[\\n,]/)\r\n    .map((item) => item.trim())\r\n    .filter(Boolean);\r\n\r\nexport default function FleetVehicleDialog({\r\n  open,\r\n  mode,\r\n  vehicle,\r\n  saving,\r\n  onSubmit,\r\n  onDelete,\r\n  onClose,\r\n}: FleetVehicleDialogProps) {\r\n  const [form, setForm] = useState<FormState>(emptyForm);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [confirmSave, setConfirmSave] = useState(false);\r\n  const [confirmDelete, setConfirmDelete] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open && vehicle) {\r\n      const currentTasks = Array.isArray(vehicle.currentTasks)\r\n        ? vehicle.currentTasks.filter(Boolean)\r\n        : [];\r\n      setForm({\r\n        name: vehicle.name,\r\n        registrationNumber: vehicle.registrationNumber,\r\n        odometerInitial: String(vehicle.odometerInitial),\r\n        odometerCurrent: String(vehicle.odometerCurrent),\r\n        mileageTotal: String(vehicle.mileageTotal),\r\n        transportType: vehicle.transportType,\r\n        fuelType: vehicle.fuelType,\r\n        fuelRefilled: String(vehicle.fuelRefilled),\r\n        fuelAverageConsumption: String(vehicle.fuelAverageConsumption),\r\n        fuelSpentTotal: String(vehicle.fuelSpentTotal),\r\n        currentTasks: currentTasks.join(\"\\n\"),\r\n      });\r\n      setError(null);\r\n      setConfirmSave(false);\r\n      setConfirmDelete(false);\r\n      return;\r\n    }\r\n    if (open && mode === \"create\") {\r\n      setForm(emptyForm);\r\n      setError(null);\r\n      setConfirmSave(false);\r\n      setConfirmDelete(false);\r\n    }\r\n    if (!open) {\r\n      setForm(emptyForm);\r\n      setError(null);\r\n      setConfirmSave(false);\r\n      setConfirmDelete(false);\r\n    }\r\n  }, [open, mode, vehicle]);\r\n\r\n  const isUpdate = mode === \"update\" && vehicle;\r\n\r\n  const payload = useMemo(() => {\r\n    const base: FleetVehiclePayload = {\r\n      name: form.name.trim(),\r\n      registrationNumber: form.registrationNumber.trim().toUpperCase(),\r\n      odometerInitial: Number(form.odometerInitial || \"0\"),\r\n      odometerCurrent: Number(form.odometerCurrent || \"0\"),\r\n      mileageTotal: Number(form.mileageTotal || \"0\"),\r\n      transportType: form.transportType,\r\n      fuelType: form.fuelType,\r\n      fuelRefilled: Number(form.fuelRefilled || \"0\"),\r\n      fuelAverageConsumption: Number(form.fuelAverageConsumption || \"0\"),\r\n      fuelSpentTotal: Number(form.fuelSpentTotal || \"0\"),\r\n      currentTasks: parseTasks(form.currentTasks),\r\n    };\r\n    return base;\r\n  }, [form]);\r\n\r\n  const handleSubmit = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    if (!form.name.trim()) {\r\n      setError(\"Название обязательно\");\r\n      return;\r\n    }\r\n    if (!/^[A-ZА-ЯІЇЄ]{2} \\d{4} [A-ZА-ЯІЇЄ]{2}$/u.test(payload.registrationNumber)) {\r\n      setError(\"Регистрационный номер должен быть в формате XX 0000 XX\");\r\n      return;\r\n    }\r\n    setError(null);\r\n    setConfirmSave(true);\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    try {\r\n      await onSubmit(payload, vehicle?.id);\r\n      setConfirmSave(false);\r\n      onClose();\r\n    } catch (submitError) {\r\n      const message =\r\n        submitError instanceof Error\r\n          ? submitError.message\r\n          : \"Не удалось сохранить транспорт\";\r\n      setError(message);\r\n      setConfirmSave(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!vehicle || !onDelete) return;\r\n    try {\r\n      await onDelete(vehicle.id);\r\n      setConfirmDelete(false);\r\n      onClose();\r\n    } catch (deleteError) {\r\n      const message =\r\n        deleteError instanceof Error\r\n          ? deleteError.message\r\n          : \"Не удалось удалить транспорт\";\r\n      setError(message);\r\n      setConfirmDelete(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-3\">\r\n      <div className=\"grid gap-3 md:grid-cols-2\">\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Название</span>\r\n          <input\r\n            id=\"fleet-vehicle-name\"\r\n            name=\"name\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.name}\r\n            onChange={(event) => setForm((prev) => ({ ...prev, name: event.target.value }))}\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Регистрационный номер</span>\r\n          <input\r\n            id=\"fleet-vehicle-registration\"\r\n            name=\"registrationNumber\"\r\n            className=\"h-10 w-full rounded border px-3 uppercase\"\r\n            value={form.registrationNumber}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, registrationNumber: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n            placeholder=\"AA 1234 BB\"\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Тип транспорта</span>\r\n          <select\r\n            id=\"fleet-vehicle-transport-type\"\r\n            name=\"transportType\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.transportType}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, transportType: event.target.value as FormState[\"transportType\"] }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          >\r\n            <option value=\"Легковой\">Легковой</option>\r\n            <option value=\"Грузовой\">Грузовой</option>\r\n          </select>\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Одометр начальный, км</span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-odometer-initial\"\r\n            name=\"odometerInitial\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.odometerInitial}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, odometerInitial: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Одометр текущий, км</span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-odometer-current\"\r\n            name=\"odometerCurrent\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.odometerCurrent}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, odometerCurrent: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Пробег общий, км</span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-mileage-total\"\r\n            name=\"mileageTotal\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.mileageTotal}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, mileageTotal: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Вид топлива</span>\r\n          <select\r\n            id=\"fleet-vehicle-fuel-type\"\r\n            name=\"fuelType\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.fuelType}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, fuelType: event.target.value as FormState[\"fuelType\"] }))\r\n            }\r\n            disabled={saving}\r\n          >\r\n            <option value=\"Бензин\">Бензин</option>\r\n            <option value=\"Дизель\">Дизель</option>\r\n            <option value=\"Газ\">Газ</option>\r\n          </select>\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Топлива заправлено</span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-fuel-refilled\"\r\n            name=\"fuelRefilled\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.fuelRefilled}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, fuelRefilled: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Расход средний, л/км</span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            id=\"fleet-vehicle-fuel-average\"\r\n            name=\"fuelAverageConsumption\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.fuelAverageConsumption}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, fuelAverageConsumption: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium\">Затрачено топлива всего, л</span>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            id=\"fleet-vehicle-fuel-spent\"\r\n            name=\"fuelSpentTotal\"\r\n            className=\"h-10 w-full rounded border px-3\"\r\n            value={form.fuelSpentTotal}\r\n            onChange={(event) =>\r\n              setForm((prev) => ({ ...prev, fuelSpentTotal: event.target.value }))\r\n            }\r\n            disabled={saving}\r\n            required\r\n          />\r\n        </label>\r\n      </div>\r\n      <label className=\"flex flex-col gap-1\">\r\n        <span className=\"text-sm font-medium\">Текущие задачи (ID через запятую или перенос строки)</span>\r\n        <textarea\r\n          id=\"fleet-vehicle-current-tasks\"\r\n          name=\"currentTasks\"\r\n          className=\"min-h-[5rem] w-full rounded border px-3 py-2\"\r\n          value={form.currentTasks}\r\n          onChange={(event) =>\r\n            setForm((prev) => ({ ...prev, currentTasks: event.target.value }))\r\n          }\r\n          disabled={saving}\r\n        />\r\n      </label>\r\n      {error ? <p className=\"text-sm text-red-600\">{error}</p> : null}\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        <Button type=\"submit\" disabled={saving}>\r\n          Сохранить\r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={onClose}\r\n          disabled={saving}\r\n        >\r\n          Отмена\r\n        </Button>\r\n        {isUpdate && onDelete ? (\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"destructive\"\r\n            onClick={() => setConfirmDelete(true)}\r\n            disabled={saving}\r\n          >\r\n            Удалить\r\n          </Button>\r\n        ) : null}\r\n      </div>\r\n      <ConfirmDialog\r\n        open={confirmSave}\r\n        message=\"Сохранить транспорт?\"\r\n        confirmText=\"Сохранить\"\r\n        onConfirm={handleConfirm}\r\n        onCancel={() => setConfirmSave(false)}\r\n      />\r\n      <ConfirmDialog\r\n        open={confirmDelete}\r\n        message=\"Удалить транспорт?\"\r\n        confirmText=\"Удалить\"\r\n        status=\"danger\"\r\n        onConfirm={handleDelete}\r\n        onCancel={() => setConfirmDelete(false)}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","// Назначение файла: колонки таблицы автопарка на странице настроек\r\n// Основные модули: @tanstack/react-table, shared/types\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport type { FleetVehicleDto } from \"shared\";\r\n\r\nconst stringify = (value: unknown) => {\r\n  if (value === undefined || value === null) return \"\";\r\n  if (Array.isArray(value)) {\r\n    return value.length ? value.join(\", \") : \"\";\r\n  }\r\n  if (typeof value === \"object\") {\r\n    try {\r\n      return JSON.stringify(value);\r\n    } catch {\r\n      return String(value);\r\n    }\r\n  }\r\n  return String(value);\r\n};\r\n\r\nexport type FleetVehicleRow = FleetVehicleDto & {\r\n  transportHistoryInfo: string;\r\n};\r\n\r\nexport const fleetVehicleColumns: ColumnDef<FleetVehicleRow>[] = [\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"Название\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"registrationNumber\",\r\n    header: \"Рег. номер\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"odometerInitial\",\r\n    header: \"Одометр начальный\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"14rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"odometerCurrent\",\r\n    header: \"Одометр текущий\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"14rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"mileageTotal\",\r\n    header: \"Пробег\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"transportType\",\r\n    header: \"Тип транспорта\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"14rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"fuelType\",\r\n    header: \"Тип топлива\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"fuelRefilled\",\r\n    header: \"Заправлено\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"fuelAverageConsumption\",\r\n    header: \"Расход\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"fuelSpentTotal\",\r\n    header: \"Израсходовано\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"currentTasks\",\r\n    header: \"Текущие задачи\",\r\n    cell: ({ getValue }) => stringify(getValue<string[] | undefined>()),\r\n    meta: { minWidth: \"10rem\", maxWidth: \"24rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"transportHistoryInfo\",\r\n    header: \"История задач\",\r\n    cell: ({ getValue }) => stringify(getValue<string | undefined>()),\r\n    meta: { minWidth: \"12rem\", maxWidth: \"28rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"createdAt\",\r\n    header: \"Создан\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"updatedAt\",\r\n    header: \"Обновлён\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"unitId\",\r\n    header: \"Устройство\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"remoteName\",\r\n    header: \"Удалённое имя\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"notes\",\r\n    header: \"Примечания\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"20rem\" },\r\n  },\r\n];\r\n\r\n","// Назначение файла: единые стили бейджей для таблиц настроек\r\n// Основные модули: DataTable badge helpers\r\n\r\nexport const SETTINGS_BADGE_EMPTY = \"Нет данных\";\r\n\r\nconst badgeBaseClass = [\r\n  \"inline-flex min-h-[1.65rem] min-w-0 max-w-full items-center justify-start gap-1\",\r\n  \"rounded-full px-2.5 py-0.5 text-[0.72rem] font-semibold leading-tight text-slate-900\",\r\n  \"ring-1 ring-slate-300/80 bg-slate-100/95 shadow-xs\",\r\n  \"dark:text-slate-100 dark:ring-slate-600/60 dark:bg-slate-800/80\",\r\n  \"truncate\",\r\n].join(\" \");\r\n\r\nexport const SETTINGS_BADGE_CLASS = `${badgeBaseClass}`;\r\n\r\nexport const SETTINGS_BADGE_WRAPPER_CLASS =\r\n  \"flex flex-wrap items-center gap-1.5\";\r\n\r\n","// Назначение: вкладка автопарка с ручным управлением транспортом\r\n// Основные модули: React, services/fleets, FleetVehicleDialog, Modal, DataTable\r\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport DataTable from \"../../components/DataTable\";\r\nimport Modal from \"../../components/Modal\";\r\nimport { showToast } from \"../../utils/toast\";\r\nimport {\r\n  listFleetVehicles,\r\n  createFleetVehicle,\r\n  updateFleetVehicle,\r\n  deleteFleetVehicle,\r\n  type FleetVehiclePayload,\r\n} from \"../../services/fleets\";\r\nimport type { FleetVehicleDto } from \"shared\";\r\nimport FleetVehicleDialog from \"./FleetVehicleDialog\";\r\nimport {\r\n  fleetVehicleColumns,\r\n  type FleetVehicleRow,\r\n} from \"../../columns/fleetVehicleColumns\";\r\nimport {\r\n  SETTINGS_BADGE_CLASS,\r\n  SETTINGS_BADGE_EMPTY,\r\n  SETTINGS_BADGE_WRAPPER_CLASS,\r\n} from \"./badgeStyles\";\r\n\r\nconst PAGE_LIMIT = 10;\r\n\r\nconst transportHistoryFormatter = new Intl.DateTimeFormat(\"ru-RU\", {\r\n  day: \"2-digit\",\r\n  month: \"2-digit\",\r\n  year: \"numeric\",\r\n  hour: \"2-digit\",\r\n  minute: \"2-digit\",\r\n});\r\n\r\nconst formatHistoryInstant = (value?: string): string => {\r\n  if (!value) {\r\n    return \"\";\r\n  }\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return \"\";\r\n  }\r\n  return transportHistoryFormatter.format(date);\r\n};\r\n\r\nconst buildHistoryLabel = (\r\n  entry: NonNullable<FleetVehicleDto[\"transportHistory\"]>[number],\r\n): string => {\r\n  const assigned = formatHistoryInstant(entry.assignedAt);\r\n  const removed = formatHistoryInstant(entry.removedAt);\r\n  const title = entry.taskTitle && entry.taskTitle.trim().length\r\n    ? entry.taskTitle.trim()\r\n    : entry.taskId;\r\n  if (assigned && removed) {\r\n    return `${assigned} — ${title} (до ${removed})`;\r\n  }\r\n  if (assigned) {\r\n    return `${assigned} — ${title}`;\r\n  }\r\n  if (removed) {\r\n    return `${title} (до ${removed})`;\r\n  }\r\n  return title;\r\n};\r\n\r\nconst formatTransportHistory = (\r\n  history?: FleetVehicleDto[\"transportHistory\"],\r\n): string => {\r\n  if (!history?.length) {\r\n    return \"\";\r\n  }\r\n  return history.map(buildHistoryLabel).join(\"; \");\r\n};\r\n\r\ntype VehicleCardField = {\r\n  id: string;\r\n  label: string;\r\n  render: (vehicle: FleetVehicleDto) => React.ReactNode;\r\n};\r\n\r\nconst vehicleCardFields: VehicleCardField[] = [\r\n  {\r\n    id: \"id\",\r\n    label: \"ID\",\r\n    render: (vehicle) => vehicle.id,\r\n  },\r\n  {\r\n    id: \"name\",\r\n    label: \"Название\",\r\n    render: (vehicle) => vehicle.name,\r\n  },\r\n  {\r\n    id: \"registrationNumber\",\r\n    label: \"Регистрационный номер\",\r\n    render: (vehicle) => vehicle.registrationNumber,\r\n  },\r\n  {\r\n    id: \"odometerInitial\",\r\n    label: \"Одометр начальный\",\r\n    render: (vehicle) => vehicle.odometerInitial,\r\n  },\r\n  {\r\n    id: \"odometerCurrent\",\r\n    label: \"Одометр текущий\",\r\n    render: (vehicle) => vehicle.odometerCurrent,\r\n  },\r\n  {\r\n    id: \"mileageTotal\",\r\n    label: \"Пробег\",\r\n    render: (vehicle) => vehicle.mileageTotal,\r\n  },\r\n  {\r\n    id: \"transportType\",\r\n    label: \"Тип транспорта\",\r\n    render: (vehicle) => vehicle.transportType,\r\n  },\r\n  {\r\n    id: \"fuelType\",\r\n    label: \"Тип топлива\",\r\n    render: (vehicle) => vehicle.fuelType,\r\n  },\r\n  {\r\n    id: \"fuelRefilled\",\r\n    label: \"Заправлено\",\r\n    render: (vehicle) => vehicle.fuelRefilled,\r\n  },\r\n  {\r\n    id: \"fuelAverageConsumption\",\r\n    label: \"Расход\",\r\n    render: (vehicle) => vehicle.fuelAverageConsumption,\r\n  },\r\n  {\r\n    id: \"fuelSpentTotal\",\r\n    label: \"Израсходовано\",\r\n    render: (vehicle) => vehicle.fuelSpentTotal,\r\n  },\r\n  {\r\n    id: \"currentTasks\",\r\n    label: \"Задачи\",\r\n    render: (vehicle) =>\r\n      vehicle.currentTasks.length ? vehicle.currentTasks.join(\", \") : \"—\",\r\n  },\r\n  {\r\n    id: \"transportHistory\",\r\n    label: \"История задач\",\r\n    render: (vehicle) =>\r\n      vehicle.transportHistory?.length ? (\r\n        <ul className=\"space-y-1 text-sm\">\r\n          {vehicle.transportHistory.map((entry) => (\r\n            <li\r\n              key={`${entry.taskId}-${entry.assignedAt}`}\r\n              className=\"leading-snug\"\r\n            >\r\n              {buildHistoryLabel(entry)}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        \"—\"\r\n      ),\r\n  },\r\n  {\r\n    id: \"createdAt\",\r\n    label: \"Создан\",\r\n    render: (vehicle) => vehicle.createdAt || \"—\",\r\n  },\r\n  {\r\n    id: \"updatedAt\",\r\n    label: \"Обновлён\",\r\n    render: (vehicle) => vehicle.updatedAt || \"—\",\r\n  },\r\n  {\r\n    id: \"unitId\",\r\n    label: \"Устройство\",\r\n    render: (vehicle) =>\r\n      vehicle.unitId !== undefined && vehicle.unitId !== null\r\n        ? vehicle.unitId\r\n        : \"—\",\r\n  },\r\n  {\r\n    id: \"remoteName\",\r\n    label: \"Удалённое имя\",\r\n    render: (vehicle) => vehicle.remoteName || \"—\",\r\n  },\r\n  {\r\n    id: \"notes\",\r\n    label: \"Примечания\",\r\n    render: (vehicle) => vehicle.notes || \"—\",\r\n  },\r\n];\r\n\r\nexport default function FleetVehiclesTab() {\r\n  const [items, setItems] = useState<FleetVehicleDto[]>([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [appliedSearch, setAppliedSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [mode, setMode] = useState<\"create\" | \"update\">(\"create\");\r\n  const [saving, setSaving] = useState(false);\r\n  const [selectedVehicle, setSelectedVehicle] = useState<FleetVehicleDto | null>(\r\n    null,\r\n  );\r\n\r\n  const totalPages = useMemo(() => Math.max(1, Math.ceil(total / PAGE_LIMIT)), [total]);\r\n  const rows = useMemo<FleetVehicleRow[]>(\r\n    () =>\r\n      items.map((item) => ({\r\n        ...item,\r\n        transportHistoryInfo: formatTransportHistory(item.transportHistory),\r\n      })),\r\n    [items],\r\n  );\r\n\r\n  const badgeClassName = useMemo(\r\n    () => `${SETTINGS_BADGE_CLASS} whitespace-nowrap sm:text-sm`,\r\n    [],\r\n  );\r\n  const badgeWrapperClassName = useMemo(\r\n    () => `${SETTINGS_BADGE_WRAPPER_CLASS} justify-start`,\r\n    [],\r\n  );\r\n\r\n  const load = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      const data = await listFleetVehicles(appliedSearch, page, PAGE_LIMIT);\r\n      setItems(data.items);\r\n      setTotal(data.total);\r\n    } catch (loadError) {\r\n      const message =\r\n        loadError instanceof Error ? loadError.message : \"Не удалось загрузить транспорт\";\r\n      setError(message);\r\n      setItems([]);\r\n      setTotal(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [appliedSearch, page]);\r\n\r\n  useEffect(() => {\r\n    void load();\r\n  }, [load]);\r\n\r\n  const openCreate = () => {\r\n    setMode(\"create\");\r\n    setSelectedVehicle(null);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const openEdit = (item: FleetVehicleDto) => {\r\n    setMode(\"update\");\r\n    setSelectedVehicle(item);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    if (saving) return;\r\n    setModalOpen(false);\r\n    setSelectedVehicle(null);\r\n  };\r\n\r\n  const submit = async (payload: FleetVehiclePayload, id?: string) => {\r\n    setSaving(true);\r\n    try {\r\n      if (mode === \"create\" || !id) {\r\n        await createFleetVehicle(payload);\r\n        showToast(\"Транспорт создан\", \"success\");\r\n      } else {\r\n        await updateFleetVehicle(id, payload);\r\n        showToast(\"Транспорт обновлён\", \"success\");\r\n      }\r\n      await load();\r\n      setSelectedVehicle(null);\r\n      setModalOpen(false);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const remove = async (id: string) => {\r\n    setSaving(true);\r\n    try {\r\n      await deleteFleetVehicle(id);\r\n      showToast(\"Транспорт удалён\", \"success\");\r\n      await load();\r\n      setSelectedVehicle(null);\r\n      setModalOpen(false);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchSubmit = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    setPage(1);\r\n    setAppliedSearch(search.trim());\r\n  };\r\n\r\n  const handlePageChange = (next: number) => {\r\n    if (next < 1 || next > totalPages) return;\r\n    setPage(next);\r\n  };\r\n\r\n  return (\r\n    <section className=\"space-y-4\">\r\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-start sm:gap-3 lg:items-center lg:gap-3\">\r\n        <form\r\n          onSubmit={handleSearchSubmit}\r\n          className=\"mt-2 flex w-full flex-col gap-2 sm:flex-row sm:flex-wrap sm:items-center sm:gap-2 lg:grid lg:flex-1 lg:grid-cols-[minmax(0,18rem)_auto] lg:items-center lg:gap-3\"\r\n        >\r\n          <label className=\"flex w-full flex-col gap-1 sm:w-64 lg:w-full lg:min-w-0\">\r\n            <span className=\"text-sm font-medium\">Поиск</span>\r\n            <input\r\n              id=\"fleet-vehicles-search\"\r\n              name=\"fleetVehicleSearch\"\r\n              className=\"h-10 w-full rounded border px-3 text-sm lg:h-9 lg:text-xs\"\r\n              value={search}\r\n              onChange={(event) => setSearch(event.target.value)}\r\n              placeholder=\"Название или номер\"\r\n            />\r\n          </label>\r\n          <Button\r\n            type=\"submit\"\r\n            className=\"h-10 w-full max-w-[11rem] px-3 text-sm font-semibold sm:h-10 sm:w-auto sm:px-3 lg:h-8 lg:text-xs\"\r\n          >\r\n            Искать\r\n          </Button>\r\n        </form>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"success\"\r\n          className=\"h-10 w-full max-w-[11rem] px-3 text-sm font-semibold sm:w-auto lg:h-8 lg:text-xs\"\r\n          onClick={openCreate}\r\n        >\r\n          Добавить\r\n        </Button>\r\n      </div>\r\n      {loading ? <p className=\"text-sm text-gray-500\">Загрузка транспорта…</p> : null}\r\n      {error ? (\r\n        <p className=\"rounded border border-red-200 bg-red-50 p-3 text-sm text-red-700\">{error}</p>\r\n      ) : null}\r\n      {!loading && !error && !items.length ? (\r\n        <p className=\"text-sm text-gray-500\">Транспорт не найден.</p>\r\n      ) : null}\r\n      <DataTable\r\n        columns={fleetVehicleColumns}\r\n        data={rows}\r\n        pageIndex={page - 1}\r\n        pageSize={PAGE_LIMIT}\r\n        pageCount={totalPages}\r\n        onPageChange={(index) => handlePageChange(index + 1)}\r\n        showGlobalSearch={false}\r\n        showFilters={false}\r\n        onRowClick={(row) => openEdit(row)}\r\n        wrapCellsAsBadges\r\n        badgeClassName={badgeClassName}\r\n        badgeWrapperClassName={badgeWrapperClassName}\r\n        badgeEmptyPlaceholder={SETTINGS_BADGE_EMPTY}\r\n      />\r\n      <Modal\r\n        open={modalOpen}\r\n        onClose={closeModal}\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {selectedVehicle ? (\r\n            <article className=\"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm\">\r\n              <h3 className=\"text-base font-semibold\">Карточка транспорта</h3>\r\n              <dl className=\"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2\">\r\n                {vehicleCardFields.map(({ id, label, render }) => (\r\n                  <div key={id}>\r\n                    <dt className=\"font-medium text-slate-500\">{label}</dt>\r\n                    <dd className=\"text-slate-900\">{render(selectedVehicle)}</dd>\r\n                  </div>\r\n                ))}\r\n              </dl>\r\n            </article>\r\n          ) : null}\r\n          <FleetVehicleDialog\r\n            open={modalOpen}\r\n            mode={mode}\r\n            vehicle={selectedVehicle}\r\n            saving={saving}\r\n            onSubmit={submit}\r\n            onDelete={mode === \"update\" ? remove : undefined}\r\n            onClose={closeModal}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    </section>\r\n  );\r\n}\r\n","// Назначение файла: вкладка настроек задач в разделе настроек.\r\n// Основные модули: React, Spinner, Button, Input.\r\n\r\nimport React from \"react\";\r\n\r\nimport Spinner from \"../../components/Spinner\";\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { Input } from \"../../components/ui/input\";\r\nimport type { CollectionItem } from \"../../services/collections\";\r\n\r\ntype TaskFieldItem = CollectionItem & {\r\n  meta?: CollectionItem[\"meta\"] & {\r\n    defaultLabel?: string;\r\n    fieldType?: string;\r\n    required?: boolean;\r\n    order?: number;\r\n    virtual?: boolean;\r\n  };\r\n};\r\n\r\ntype TaskTypeItem = CollectionItem & {\r\n  meta?: CollectionItem[\"meta\"] & {\r\n    defaultLabel?: string;\r\n    order?: number;\r\n    virtual?: boolean;\r\n    tg_theme_url?: string;\r\n    tg_chat_id?: string;\r\n    tg_topic_id?: number;\r\n    tg_photos_url?: string;\r\n    tg_photos_chat_id?: string;\r\n    tg_photos_topic_id?: number;\r\n  };\r\n};\r\n\r\ninterface TaskSettingsTabProps {\r\n  fields: TaskFieldItem[];\r\n  types: TaskTypeItem[];\r\n  loading: boolean;\r\n  onSaveField: (item: TaskFieldItem, label: string) => Promise<void>;\r\n  onDeleteField: (item: TaskFieldItem) => Promise<void>;\r\n  onSaveType: (\r\n    item: TaskTypeItem,\r\n    payload: { label: string; tg_theme_url: string; tg_photos_url: string },\r\n  ) => Promise<void>;\r\n  onDeleteType: (item: TaskTypeItem) => Promise<void>;\r\n}\r\n\r\nconst CARD_CLASS =\r\n  \"rounded-lg border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900\";\r\n\r\nconst SECTION_GAP = \"space-y-4\";\r\n\r\nconst FieldCard: React.FC<{\r\n  item: TaskFieldItem;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSave: () => Promise<void>;\r\n  onReset: () => void;\r\n  onDelete?: () => Promise<void>;\r\n  saving: boolean;\r\n  deleting?: boolean;\r\n  error?: string;\r\n}> = ({\r\n  item,\r\n  value,\r\n  onChange,\r\n  onSave,\r\n  onReset,\r\n  onDelete,\r\n  saving,\r\n  deleting,\r\n  error,\r\n}) => {\r\n  const [localError, setLocalError] = React.useState<string | undefined>(\r\n    error,\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    setLocalError(error);\r\n  }, [error]);\r\n\r\n  const defaultLabel = item.meta?.defaultLabel ?? item.name;\r\n  const storedLabel = item.value?.trim() || defaultLabel;\r\n  const trimmedValue = value.trim();\r\n  const dirty = trimmedValue !== storedLabel;\r\n\r\n  const handleSave = async () => {\r\n    setLocalError(undefined);\r\n    try {\r\n      await onSave();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setLocalError(message);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setLocalError(undefined);\r\n    onReset();\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!onDelete) return;\r\n    setLocalError(undefined);\r\n    try {\r\n      await onDelete();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setLocalError(message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <article className={CARD_CLASS}>\r\n      <div className=\"flex flex-col gap-2\">\r\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n          <div>\r\n            <h4 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\r\n              {defaultLabel}\r\n              {item.meta?.required ? \" *\" : \"\"}\r\n            </h4>\r\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n              Поле: <span className=\"font-mono\">{item.name}</span>\r\n              {item.meta?.fieldType ? ` • Тип: ${item.meta.fieldType}` : \"\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <label className=\"flex flex-col gap-1\">\r\n          <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n            Отображаемое название\r\n          </span>\r\n          <Input\r\n            value={value}\r\n            onChange={(event) => onChange(event.target.value)}\r\n            placeholder={defaultLabel}\r\n            aria-label={`Название поля ${defaultLabel}`}\r\n          />\r\n        </label>\r\n        {localError ? (\r\n          <p className=\"text-sm text-rose-600\" role=\"alert\">\r\n            {localError}\r\n          </p>\r\n        ) : null}\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <Button\r\n            type=\"button\"\r\n            size=\"sm\"\r\n            onClick={handleSave}\r\n            disabled={saving || deleting || !dirty || !trimmedValue}\r\n          >\r\n            {saving ? <Spinner /> : \"Сохранить\"}\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            onClick={handleReset}\r\n            disabled={saving || deleting}\r\n          >\r\n            Сбросить\r\n          </Button>\r\n          {onDelete && !item.meta?.virtual ? (\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant=\"destructive\"\r\n              onClick={handleDelete}\r\n              disabled={saving || deleting}\r\n            >\r\n              {deleting ? <Spinner /> : \"Удалить\"}\r\n            </Button>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nconst TypeCard: React.FC<{\r\n  item: TaskTypeItem;\r\n  label: string;\r\n  url: string;\r\n  photosUrl: string;\r\n  onChangeLabel: (value: string) => void;\r\n  onChangeUrl: (value: string) => void;\r\n  onChangePhotosUrl: (value: string) => void;\r\n  onSave: () => Promise<void>;\r\n  onReset: () => void;\r\n  onDelete?: () => Promise<void>;\r\n  saving: boolean;\r\n  deleting?: boolean;\r\n  error?: string;\r\n}> = ({\r\n  item,\r\n  label,\r\n  url,\r\n  photosUrl,\r\n  onChangeLabel,\r\n  onChangeUrl,\r\n  onChangePhotosUrl,\r\n  onSave,\r\n  onReset,\r\n  onDelete,\r\n  saving,\r\n  deleting,\r\n  error,\r\n}) => {\r\n  const [localError, setLocalError] = React.useState<string | undefined>(\r\n    error,\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    setLocalError(error);\r\n  }, [error]);\r\n\r\n  const defaultLabel = item.meta?.defaultLabel ?? item.name;\r\n  const storedLabel = item.value?.trim() || defaultLabel;\r\n  const storedUrl = typeof item.meta?.tg_theme_url === \"string\"\r\n    ? item.meta.tg_theme_url\r\n    : \"\";\r\n  const storedPhotosUrl =\r\n    typeof item.meta?.tg_photos_url === \"string\"\r\n      ? item.meta.tg_photos_url\r\n      : \"\";\r\n  const trimmedLabel = label.trim();\r\n  const trimmedUrl = url.trim();\r\n  const trimmedPhotosUrl = photosUrl.trim();\r\n  const dirty =\r\n    trimmedLabel !== storedLabel ||\r\n    trimmedUrl !== (storedUrl || \"\") ||\r\n    trimmedPhotosUrl !== (storedPhotosUrl || \"\");\r\n\r\n  const handleSave = async () => {\r\n    setLocalError(undefined);\r\n    try {\r\n      await onSave();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setLocalError(message);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setLocalError(undefined);\r\n    onReset();\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!onDelete) return;\r\n    setLocalError(undefined);\r\n    try {\r\n      await onDelete();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setLocalError(message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <article className={CARD_CLASS}>\r\n      <div className=\"flex flex-col gap-2\">\r\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n          <div>\r\n            <h4 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\r\n              {defaultLabel}\r\n            </h4>\r\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n              Тип задачи: <span className=\"font-mono\">{item.name}</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"grid gap-3 sm:grid-cols-2\">\r\n          <label className=\"flex flex-col gap-1\">\r\n            <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n              Отображаемое название\r\n            </span>\r\n            <Input\r\n              value={label}\r\n              onChange={(event) => onChangeLabel(event.target.value)}\r\n              placeholder={defaultLabel}\r\n              aria-label={`Название типа ${defaultLabel}`}\r\n            />\r\n          </label>\r\n          <label className=\"flex flex-col gap-1\">\r\n            <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n              Ссылка на тему Telegram\r\n            </span>\r\n            <Input\r\n              value={url}\r\n              onChange={(event) => onChangeUrl(event.target.value)}\r\n              placeholder=\"https://t.me/c/...\"\r\n              aria-label={`Ссылка темы для типа ${defaultLabel}`}\r\n            />\r\n          </label>\r\n          <label className=\"flex flex-col gap-1\">\r\n            <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n              Тема для фото\r\n            </span>\r\n            <Input\r\n              value={photosUrl}\r\n              onChange={(event) => onChangePhotosUrl(event.target.value)}\r\n              placeholder=\"https://t.me/c/...\"\r\n              aria-label={`Ссылка темы для фото ${defaultLabel}`}\r\n            />\r\n          </label>\r\n        </div>\r\n        {item.meta?.tg_chat_id ? (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            Чат: {item.meta.tg_chat_id}\r\n          </p>\r\n        ) : null}\r\n        {item.meta?.tg_topic_id ? (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            Тема: {item.meta.tg_topic_id}\r\n          </p>\r\n        ) : null}\r\n        {item.meta?.tg_photos_chat_id ? (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            Чат фото: {item.meta.tg_photos_chat_id}\r\n          </p>\r\n        ) : null}\r\n        {item.meta?.tg_photos_topic_id ? (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            Тема фото: {item.meta.tg_photos_topic_id}\r\n          </p>\r\n        ) : null}\r\n        {localError ? (\r\n          <p className=\"text-sm text-rose-600\" role=\"alert\">\r\n            {localError}\r\n          </p>\r\n        ) : null}\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <Button\r\n            type=\"button\"\r\n            size=\"sm\"\r\n            onClick={handleSave}\r\n            disabled={saving || deleting || !trimmedLabel || !dirty}\r\n          >\r\n            {saving ? <Spinner /> : \"Сохранить\"}\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            onClick={handleReset}\r\n            disabled={saving || deleting}\r\n          >\r\n            Сбросить\r\n          </Button>\r\n          {onDelete && !item.meta?.virtual ? (\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant=\"destructive\"\r\n              onClick={handleDelete}\r\n              disabled={saving || deleting}\r\n            >\r\n              {deleting ? <Spinner /> : \"Удалить\"}\r\n            </Button>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nconst sortByOrder = <T extends { meta?: { order?: number } }>(items: T[]): T[] =>\r\n  [...items].sort((a, b) => {\r\n    const left = typeof a.meta?.order === \"number\" ? a.meta.order : 0;\r\n    const right = typeof b.meta?.order === \"number\" ? b.meta.order : 0;\r\n    return left - right;\r\n  });\r\n\r\nconst useDraftMap = <TItem extends CollectionItem, TDraft>(\r\n  items: TItem[],\r\n  selector: (item: TItem) => TDraft,\r\n) => {\r\n  const [draft, setDraft] = React.useState<Record<string, TDraft>>({});\r\n\r\n  React.useEffect(() => {\r\n    setDraft((prev) => {\r\n      let changed = false;\r\n      const next: Record<string, TDraft> = { ...prev };\r\n      const itemNames = new Set(items.map((item) => item.name));\r\n\r\n      items.forEach((item) => {\r\n        const key = item.name;\r\n        if (!(key in prev)) {\r\n          next[key] = selector(item);\r\n          changed = true;\r\n        }\r\n      });\r\n\r\n      Object.keys(prev).forEach((key) => {\r\n        if (!itemNames.has(key)) {\r\n          delete next[key];\r\n          changed = true;\r\n        }\r\n      });\r\n\r\n      return changed ? next : prev;\r\n    });\r\n  }, [items, selector]);\r\n\r\n  return [draft, setDraft] as const;\r\n};\r\n\r\nconst TaskSettingsTab: React.FC<TaskSettingsTabProps> = ({\r\n  fields,\r\n  types,\r\n  loading,\r\n  onSaveField,\r\n  onDeleteField,\r\n  onSaveType,\r\n  onDeleteType,\r\n}) => {\r\n  const selectFieldDraft = React.useCallback(\r\n    (item: TaskFieldItem) =>\r\n      item.value?.trim() || item.meta?.defaultLabel || item.name,\r\n    [],\r\n  );\r\n  const selectTypeDraft = React.useCallback(\r\n    (item: TaskTypeItem) => ({\r\n      label: item.value?.trim() || item.meta?.defaultLabel || item.name,\r\n      url:\r\n        typeof item.meta?.tg_theme_url === \"string\"\r\n          ? item.meta.tg_theme_url\r\n          : \"\",\r\n      photosUrl:\r\n        typeof item.meta?.tg_photos_url === \"string\"\r\n          ? item.meta.tg_photos_url\r\n          : \"\",\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const [fieldDrafts, setFieldDrafts] = useDraftMap(fields, selectFieldDraft);\r\n  const [typeDrafts, setTypeDrafts] = useDraftMap(types, selectTypeDraft);\r\n  const [savingField, setSavingField] = React.useState<string | null>(null);\r\n  const [savingType, setSavingType] = React.useState<string | null>(null);\r\n  const [deletingField, setDeletingField] = React.useState<string | null>(null);\r\n  const [deletingType, setDeletingType] = React.useState<string | null>(null);\r\n  const [fieldErrors, setFieldErrors] = React.useState<Record<string, string>>({});\r\n  const [typeErrors, setTypeErrors] = React.useState<Record<string, string>>({});\r\n\r\n  const sortedFields = React.useMemo(() => sortByOrder(fields), [fields]);\r\n  const sortedTypes = React.useMemo(() => sortByOrder(types), [types]);\r\n\r\n  const handleFieldChange = (name: string, value: string) => {\r\n    setFieldDrafts((prev) => ({ ...prev, [name]: value }));\r\n    setFieldErrors((prev) => ({ ...prev, [name]: \"\" }));\r\n  };\r\n\r\n  const handleTypeChange = (\r\n    name: string,\r\n    patch: Partial<{ label: string; url: string; photosUrl: string }>,\r\n  ) => {\r\n    setTypeDrafts((prev) => ({\r\n      ...prev,\r\n      [name]: {\r\n        label: prev[name]?.label ?? \"\",\r\n        url: prev[name]?.url ?? \"\",\r\n        photosUrl: prev[name]?.photosUrl ?? \"\",\r\n        ...patch,\r\n      },\r\n    }));\r\n    setTypeErrors((prev) => ({ ...prev, [name]: \"\" }));\r\n  };\r\n\r\n  const saveField = async (item: TaskFieldItem) => {\r\n    const value = fieldDrafts[item.name] ?? \"\";\r\n    setSavingField(item.name);\r\n    setFieldErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n    try {\r\n      await onSaveField(item, value);\r\n      setFieldDrafts((prev) => ({\r\n        ...prev,\r\n        [item.name]: value,\r\n      }));\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setFieldErrors((prev) => ({ ...prev, [item.name]: message }));\r\n      throw err;\r\n    } finally {\r\n      setSavingField((prev) => (prev === item.name ? null : prev));\r\n    }\r\n  };\r\n\r\n  const deleteField = async (item: TaskFieldItem) => {\r\n    if (item.meta?.virtual) {\r\n      return;\r\n    }\r\n    setDeletingField(item.name);\r\n    setFieldErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n    try {\r\n      await onDeleteField(item);\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setFieldErrors((prev) => ({ ...prev, [item.name]: message }));\r\n      throw err;\r\n    } finally {\r\n      setDeletingField((prev) => (prev === item.name ? null : prev));\r\n    }\r\n  };\r\n\r\n  const revertFieldDraft = (item: TaskFieldItem) => {\r\n    setFieldDrafts((prev) => ({\r\n      ...prev,\r\n      [item.name]: selectFieldDraft(item),\r\n    }));\r\n    setFieldErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n  };\r\n\r\n  const saveType = async (item: TaskTypeItem) => {\r\n    const draft = typeDrafts[item.name] ?? {\r\n      label: \"\",\r\n      url: \"\",\r\n      photosUrl: \"\",\r\n    };\r\n    setSavingType(item.name);\r\n    setTypeErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n    try {\r\n      await onSaveType(item, {\r\n        label: draft.label,\r\n        tg_theme_url: draft.url,\r\n        tg_photos_url: draft.photosUrl,\r\n      });\r\n      setTypeDrafts((prev) => ({\r\n        ...prev,\r\n        [item.name]: {\r\n          label: draft.label,\r\n          url: draft.url,\r\n          photosUrl: draft.photosUrl,\r\n        },\r\n      }));\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setTypeErrors((prev) => ({ ...prev, [item.name]: message }));\r\n      throw err;\r\n    } finally {\r\n      setSavingType((prev) => (prev === item.name ? null : prev));\r\n    }\r\n  };\r\n\r\n  const deleteType = async (item: TaskTypeItem) => {\r\n    if (item.meta?.virtual) {\r\n      return;\r\n    }\r\n    setDeletingType(item.name);\r\n    setTypeErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n    try {\r\n      await onDeleteType(item);\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      setTypeErrors((prev) => ({ ...prev, [item.name]: message }));\r\n      throw err;\r\n    } finally {\r\n      setDeletingType((prev) => (prev === item.name ? null : prev));\r\n    }\r\n  };\r\n\r\n  const revertTypeDraft = (item: TaskTypeItem) => {\r\n    setTypeDrafts((prev) => ({\r\n      ...prev,\r\n      [item.name]: selectTypeDraft(item),\r\n    }));\r\n    setTypeErrors((prev) => ({ ...prev, [item.name]: \"\" }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <section className={SECTION_GAP}>\r\n        <header className=\"space-y-1\">\r\n          <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\r\n            Поля задачи\r\n          </h3>\r\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n            Настройте названия полей, которые видят пользователи в карточке\r\n            задачи.\r\n          </p>\r\n        </header>\r\n        {loading && !sortedFields.length ? (\r\n          <div className=\"flex items-center justify-center py-6\">\r\n            <Spinner />\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-4 lg:grid-cols-2\">\r\n            {sortedFields.map((item) => (\r\n              <FieldCard\r\n                key={item._id}\r\n                item={item}\r\n                value={fieldDrafts[item.name] ?? \"\"}\r\n                onChange={(value) => handleFieldChange(item.name, value)}\r\n                onSave={() => saveField(item)}\r\n                onReset={() => revertFieldDraft(item)}\r\n                onDelete={\r\n                  item.meta?.virtual ? undefined : () => deleteField(item)\r\n                }\r\n                saving={savingField === item.name}\r\n                deleting={deletingField === item.name}\r\n                error={fieldErrors[item.name]}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </section>\r\n      <section className={SECTION_GAP}>\r\n        <header className=\"space-y-1\">\r\n          <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\r\n            Типы задач и темы Telegram\r\n          </h3>\r\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n            Для каждого типа задачи можно задать отображаемое название,\r\n            основную тему чата Telegram и отдельную тему для альбома фото.\r\n          </p>\r\n        </header>\r\n        {loading && !sortedTypes.length ? (\r\n          <div className=\"flex items-center justify-center py-6\">\r\n            <Spinner />\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-4 lg:grid-cols-2\">\r\n            {sortedTypes.map((item) => (\r\n              <TypeCard\r\n                key={item._id}\r\n                item={item}\r\n                label={typeDrafts[item.name]?.label ?? \"\"}\r\n                url={typeDrafts[item.name]?.url ?? \"\"}\r\n                photosUrl={typeDrafts[item.name]?.photosUrl ?? \"\"}\r\n                onChangeLabel={(value) =>\r\n                  handleTypeChange(item.name, { label: value })\r\n                }\r\n                onChangeUrl={(value) =>\r\n                  handleTypeChange(item.name, { url: value })\r\n                }\r\n                onChangePhotosUrl={(value) =>\r\n                  handleTypeChange(item.name, { photosUrl: value })\r\n                }\r\n                onSave={() => saveType(item)}\r\n                onReset={() => revertTypeDraft(item)}\r\n                onDelete={\r\n                  item.meta?.virtual ? undefined : () => deleteType(item)\r\n                }\r\n                saving={savingType === item.name}\r\n                deleting={deletingType === item.name}\r\n                error={typeErrors[item.name]}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskSettingsTab;\r\n","// Назначение: HTTP-запросы аналитики маршрутных планов.\r\n// Основные модули: authFetch, shared\r\n\r\nimport type {\r\n  RoutePlanAnalyticsSummary,\r\n  RoutePlanStatus,\r\n} from \"shared\";\r\nimport authFetch from \"../utils/authFetch\";\r\n\r\nexport interface RoutePlanAnalyticsParams {\r\n  from?: string;\r\n  to?: string;\r\n  status?: RoutePlanStatus;\r\n}\r\n\r\nexport async function fetchRoutePlanAnalytics(\r\n  params: RoutePlanAnalyticsParams = {},\r\n): Promise<RoutePlanAnalyticsSummary> {\r\n  const search = new URLSearchParams();\r\n  if (params.from) search.set(\"from\", params.from);\r\n  if (params.to) search.set(\"to\", params.to);\r\n  if (params.status) search.set(\"status\", params.status);\r\n  const query = search.toString();\r\n  const response = await authFetch(\r\n    `/api/v1/analytics/route-plans/summary${query ? `?${query}` : \"\"}`,\r\n  );\r\n  if (!response.ok) {\r\n    throw new Error(\"Не удалось получить аналитику маршрутных планов\");\r\n  }\r\n  return (await response.json()) as RoutePlanAnalyticsSummary;\r\n}\r\n\r\nexport default { fetchRoutePlanAnalytics };\r\n","// Назначение: дашборд аналитики маршрутных планов с фильтрами и графиками.\r\n// Основные модули: React, react-apexcharts, services/analytics\r\n\r\nimport React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport type {\r\n  RoutePlanAnalyticsSummary,\r\n  RoutePlanStatus,\r\n} from \"shared\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { fetchRoutePlanAnalytics } from \"../services/analytics\";\r\n\r\nconst ReactApexChart = React.lazy(() => import(\"react-apexcharts\"));\r\n\r\nconst DAY_MS = 24 * 60 * 60 * 1000;\r\n\r\nconst toDateInput = (date: Date): string => {\r\n  const iso = new Date(date.getTime() - date.getTimezoneOffset() * 60000)\r\n    .toISOString()\r\n    .slice(0, 10);\r\n  return iso;\r\n};\r\n\r\nconst defaultTo = toDateInput(new Date());\r\nconst defaultFrom = toDateInput(new Date(Date.now() - (DAY_MS * 29)));\r\n\r\ntype DashboardFilters = {\r\n  from: string;\r\n  to: string;\r\n  status: RoutePlanStatus | \"all\";\r\n};\r\n\r\nconst statusOptions: Array<{ value: RoutePlanStatus | \"all\"; label: string }> = [\r\n  { value: \"all\", label: \"Все статусы\" },\r\n  { value: \"draft\", label: \"Черновики\" },\r\n  { value: \"approved\", label: \"Утверждённые\" },\r\n  { value: \"completed\", label: \"Завершённые\" },\r\n];\r\n\r\nconst percentFormatter = new Intl.NumberFormat(\"ru-RU\", {\r\n  style: \"percent\",\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 1,\r\n});\r\n\r\nconst numberFormatter = new Intl.NumberFormat(\"ru-RU\", {\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 1,\r\n});\r\n\r\nconst loadFormatter = new Intl.NumberFormat(\"ru-RU\", {\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\nconst ensureParams = (filters: DashboardFilters) => {\r\n  const params: Record<string, string> = {};\r\n  if (filters.from) params.from = filters.from;\r\n  if (filters.to) params.to = filters.to;\r\n  if (filters.status !== \"all\") params.status = filters.status;\r\n  return params;\r\n};\r\n\r\nconst mapMileageSeries = (data?: RoutePlanAnalyticsSummary | null) =>\r\n  data?.mileage.byPeriod.map((point) => ({\r\n    x: point.date,\r\n    y: typeof point.value === \"number\" ? point.value : 0,\r\n  })) ?? [];\r\n\r\nconst mapLoadSeries = (data?: RoutePlanAnalyticsSummary | null) =>\r\n  data?.load.byPeriod.map((point) => ({\r\n    x: point.date,\r\n    y: typeof point.value === \"number\" ? point.value : null,\r\n  })) ?? [];\r\n\r\nconst mapSlaSeries = (data?: RoutePlanAnalyticsSummary | null) =>\r\n  data?.sla.byPeriod.map((point) => ({\r\n    x: point.date,\r\n    y:\r\n      typeof point.rate === \"number\"\r\n        ? Number((point.rate * 100).toFixed(2))\r\n        : null,\r\n  })) ?? [];\r\n\r\nexport default function AnalyticsDashboard(): React.ReactElement {\r\n  const { t } = useTranslation();\r\n  const [filters, setFilters] = React.useState<DashboardFilters>({\r\n    from: defaultFrom,\r\n    to: defaultTo,\r\n    status: \"completed\",\r\n  });\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState<string | null>(null);\r\n  const [summary, setSummary] = React.useState<RoutePlanAnalyticsSummary | null>(\r\n    null,\r\n  );\r\n\r\n  const loadData = React.useCallback(async (params: DashboardFilters) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetchRoutePlanAnalytics(ensureParams(params));\r\n      setSummary(response);\r\n    } catch (err) {\r\n      console.error(\"Не удалось загрузить аналитику маршрутных планов\", err);\r\n      setError(t(\"analytics.loadError\"));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [t]);\r\n\r\n  React.useEffect(() => {\r\n    void loadData(filters);\r\n  }, [filters, loadData]);\r\n\r\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const form = new FormData(event.currentTarget);\r\n    const nextFilters: DashboardFilters = {\r\n      from: String(form.get(\"from\") || \"\"),\r\n      to: String(form.get(\"to\") || \"\"),\r\n      status: (form.get(\"status\") as DashboardFilters[\"status\"]) || \"all\",\r\n    };\r\n    setFilters(nextFilters);\r\n  };\r\n\r\n  const handleReset = () => {\r\n    const initial: DashboardFilters = {\r\n      from: defaultFrom,\r\n      to: defaultTo,\r\n      status: \"completed\",\r\n    };\r\n    setFilters(initial);\r\n  };\r\n\r\n  const mileageSeries = React.useMemo(() => mapMileageSeries(summary), [summary]);\r\n  const loadSeries = React.useMemo(() => mapLoadSeries(summary), [summary]);\r\n  const slaSeries = React.useMemo(() => mapSlaSeries(summary), [summary]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-3\">\r\n        <h1 className=\"text-2xl font-semibold\">{t(\"analytics.title\")}</h1>\r\n        <p className=\"text-sm text-slate-600 dark:text-slate-300\">\r\n          {t(\"analytics.description\")}\r\n        </p>\r\n      </div>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"flex flex-wrap items-end gap-3 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\"\r\n      >\r\n        <label className=\"flex flex-col text-sm text-slate-700 dark:text-slate-200\">\r\n          {t(\"analytics.filters.from\")}\r\n          <Input type=\"date\" name=\"from\" defaultValue={filters.from} />\r\n        </label>\r\n        <label className=\"flex flex-col text-sm text-slate-700 dark:text-slate-200\">\r\n          {t(\"analytics.filters.to\")}\r\n          <Input type=\"date\" name=\"to\" defaultValue={filters.to} />\r\n        </label>\r\n        <label className=\"flex flex-col text-sm text-slate-700 dark:text-slate-200\">\r\n          {t(\"analytics.filters.status\")}\r\n          <select\r\n            name=\"status\"\r\n            defaultValue={filters.status}\r\n            className=\"mt-1 w-48 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-primary/60 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100\"\r\n          >\r\n            {statusOptions.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {t(`analytics.status.${option.value}`)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <Button type=\"submit\" disabled={loading}>\r\n            {loading ? t(\"analytics.loading\") : t(\"analytics.apply\")}\r\n          </Button>\r\n          <Button type=\"button\" variant=\"outline\" onClick={handleReset}>\r\n            {t(\"analytics.reset\")}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      {error ? (\r\n        <div className=\"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-600 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200\">\r\n          {error}\r\n        </div>\r\n      ) : null}\r\n      <section className=\"grid gap-4 md:grid-cols-3\">\r\n        <article className=\"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h2 className=\"text-sm font-medium text-slate-500 dark:text-slate-300\">\r\n            {t(\"analytics.cards.mileage\")}\r\n          </h2>\r\n          <p className=\"mt-2 text-2xl font-semibold\">\r\n            {numberFormatter.format(summary?.mileage.total ?? 0)} км\r\n          </p>\r\n          <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\r\n            {t(\"analytics.cards.period\", {\r\n              from: summary?.period.from ?? filters.from,\r\n              to: summary?.period.to ?? filters.to,\r\n            })}\r\n          </p>\r\n        </article>\r\n        <article className=\"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h2 className=\"text-sm font-medium text-slate-500 dark:text-slate-300\">\r\n            {t(\"analytics.cards.load\")}\r\n          </h2>\r\n          <p className=\"mt-2 text-2xl font-semibold\">\r\n            {typeof summary?.load.average === \"number\"\r\n              ? `${loadFormatter.format(summary.load.average)} кг`\r\n              : t(\"analytics.noData\")}\r\n          </p>\r\n          <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\r\n            {t(\"analytics.cards.loadHint\")}\r\n          </p>\r\n        </article>\r\n        <article className=\"rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h2 className=\"text-sm font-medium text-slate-500 dark:text-slate-300\">\r\n            SLA\r\n          </h2>\r\n          <p className=\"mt-2 text-2xl font-semibold\">\r\n            {typeof summary?.sla.average === \"number\"\r\n              ? percentFormatter.format(summary.sla.average)\r\n              : t(\"analytics.noData\")}\r\n          </p>\r\n          <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\r\n            {t(\"analytics.cards.slaHint\")}\r\n          </p>\r\n        </article>\r\n      </section>\r\n      <section className=\"grid gap-4 lg:grid-cols-3\">\r\n        <div className=\"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900 lg:col-span-3\">\r\n          <h3 className=\"text-base font-semibold text-slate-700 dark:text-slate-200\">\r\n            {t(\"analytics.charts.mileage\")}\r\n          </h3>\r\n          <React.Suspense fallback={<div>{t(\"analytics.loading\")}</div>}>\r\n            <ReactApexChart\r\n              type=\"area\"\r\n              height={280}\r\n              series={[{ name: t(\"analytics.cards.mileage\"), data: mileageSeries }]}\r\n              options={{\r\n                chart: { id: \"analytics-mileage\", animations: { enabled: false } },\r\n                dataLabels: { enabled: false },\r\n                stroke: { curve: \"smooth\", width: 2 },\r\n                xaxis: { type: \"category\" },\r\n                yaxis: { labels: { formatter: (value: number) => numberFormatter.format(value) } },\r\n                tooltip: {\r\n                  y: {\r\n                    formatter: (value: number) => `${numberFormatter.format(value)} км`,\r\n                  },\r\n                },\r\n              }}\r\n            />\r\n          </React.Suspense>\r\n        </div>\r\n        <div className=\"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h3 className=\"text-base font-semibold text-slate-700 dark:text-slate-200\">\r\n            {t(\"analytics.charts.load\")}\r\n          </h3>\r\n          <React.Suspense fallback={<div>{t(\"analytics.loading\")}</div>}>\r\n            <ReactApexChart\r\n              type=\"bar\"\r\n              height={280}\r\n              series={[{ name: t(\"analytics.cards.load\"), data: loadSeries }]}\r\n              options={{\r\n                chart: { id: \"analytics-load\", animations: { enabled: false } },\r\n                dataLabels: { enabled: false },\r\n                xaxis: { type: \"category\" },\r\n                yaxis: {\r\n                  labels: {\r\n                    formatter: (value: number) => `${loadFormatter.format(value)} кг`,\r\n                  },\r\n                },\r\n                tooltip: {\r\n                  y: {\r\n                    formatter: (value: number) => `${loadFormatter.format(value)} кг`,\r\n                  },\r\n                },\r\n              }}\r\n            />\r\n          </React.Suspense>\r\n        </div>\r\n        <div className=\"space-y-2 rounded-lg bg-white p-4 shadow-sm dark:bg-slate-900\">\r\n          <h3 className=\"text-base font-semibold text-slate-700 dark:text-slate-200\">\r\n            {t(\"analytics.charts.sla\")}\r\n          </h3>\r\n          <React.Suspense fallback={<div>{t(\"analytics.loading\")}</div>}>\r\n            <ReactApexChart\r\n              type=\"line\"\r\n              height={280}\r\n              series={[{ name: \"SLA\", data: slaSeries }]}\r\n              options={{\r\n                chart: { id: \"analytics-sla\", animations: { enabled: false } },\r\n                dataLabels: { enabled: false },\r\n                stroke: { curve: \"straight\", width: 2 },\r\n                markers: { size: 4 },\r\n                xaxis: { type: \"category\" },\r\n                yaxis: {\r\n                  min: 0,\r\n                  max: 100,\r\n                  tickAmount: 5,\r\n                  labels: {\r\n                    formatter: (value: number) =>\r\n                      percentFormatter.format(value / 100),\r\n                  },\r\n                },\r\n                tooltip: {\r\n                  y: {\r\n                    formatter: (value: number) => percentFormatter.format(value / 100),\r\n                  },\r\n                },\r\n              }}\r\n            />\r\n          </React.Suspense>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n","// Назначение файла: колонки таблицы универсальных коллекций настроек\r\n// Основные модули: @tanstack/react-table, services/collections\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport type { CollectionItem } from \"../services/collections\";\r\n\r\nexport interface CollectionTableRow extends CollectionItem {\r\n  displayValue: string;\r\n  metaSummary: string;\r\n}\r\n\r\nexport const collectionColumns: ColumnDef<CollectionTableRow>[] = [\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"Название\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"value\",\r\n    header: \"Значение\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"20rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"displayValue\",\r\n    header: \"Связанные данные\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"24rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"type\",\r\n    header: \"Тип\",\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"_id\",\r\n    header: \"Идентификатор\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"metaSummary\",\r\n    header: \"Доп. сведения\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"24rem\" },\r\n  },\r\n];\r\n\r\n","// Назначение файла: колонки таблицы пользователей в настройках\r\n// Основные модули: @tanstack/react-table, types/user\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport type { User } from \"../types/user\";\r\nimport { formatRoleName } from \"../utils/roleDisplay\";\r\n\r\nexport const settingsUserColumns: ColumnDef<User>[] = [\r\n  {\r\n    accessorKey: \"telegram_id\",\r\n    header: \"Telegram ID\",\r\n    meta: { minWidth: \"8rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"username\",\r\n    header: \"Логин\",\r\n    cell: ({ row }) => row.original.telegram_username ?? row.original.username ?? \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"Имя\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"phone\",\r\n    header: \"Телефон\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"mobNumber\",\r\n    header: \"Моб. номер\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"email\",\r\n    header: \"E-mail\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"20rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"role\",\r\n    header: \"Роль\",\r\n    cell: ({ getValue }) => formatRoleName(getValue<string | undefined>()),\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"access\",\r\n    header: \"Доступ\",\r\n    cell: ({ getValue }) => String(getValue<number | undefined>() ?? \"\"),\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"roleId\",\r\n    header: \"Роль ID\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"departmentId\",\r\n    header: \"Департамент\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"divisionId\",\r\n    header: \"Отдел\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"positionId\",\r\n    header: \"Должность\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n];\r\n\r\n","// Назначение файла: колонки таблицы сотрудников с отображением связанных названий\r\n// Основные модули: @tanstack/react-table, types/user\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport type { User } from \"../types/user\";\r\nimport { formatRoleName } from \"../utils/roleDisplay\";\r\n\r\nexport interface EmployeeRow extends User {\r\n  roleName: string;\r\n  departmentName: string;\r\n  divisionName: string;\r\n  positionName: string;\r\n}\r\n\r\nconst renderAccess = (value: number | undefined) =>\r\n  value === undefined || value === null ? \"\" : String(value);\r\n\r\nexport const settingsEmployeeColumns: ColumnDef<EmployeeRow>[] = [\r\n  {\r\n    accessorKey: \"telegram_id\",\r\n    header: \"Telegram ID\",\r\n    meta: { minWidth: \"8rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"username\",\r\n    header: \"Логин\",\r\n    cell: ({ row }) => row.original.telegram_username ?? row.original.username ?? \"\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"Имя\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"phone\",\r\n    header: \"Телефон\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"mobNumber\",\r\n    header: \"Моб. номер\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"email\",\r\n    header: \"E-mail\",\r\n    meta: { minWidth: \"10rem\", maxWidth: \"20rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"role\",\r\n    header: \"Роль\",\r\n    cell: ({ getValue }) => formatRoleName(getValue<string | undefined>()),\r\n    meta: { minWidth: \"6rem\", maxWidth: \"12rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"access\",\r\n    header: \"Доступ\",\r\n    cell: ({ getValue }) => renderAccess(getValue<number | undefined>()),\r\n    meta: { minWidth: \"6rem\", maxWidth: \"10rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"roleId\",\r\n    header: \"Роль ID\",\r\n    cell: ({ row }) => formatRoleName(row.original.roleName),\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"departmentId\",\r\n    header: \"Департамент\",\r\n    cell: ({ row }) => row.original.departmentName || \"—\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"divisionId\",\r\n    header: \"Отдел\",\r\n    cell: ({ row }) => row.original.divisionName || \"—\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n  {\r\n    accessorKey: \"positionId\",\r\n    header: \"Должность\",\r\n    cell: ({ row }) => row.original.positionName || \"—\",\r\n    meta: { minWidth: \"8rem\", maxWidth: \"16rem\" },\r\n  },\r\n];\r\n","// Назначение: утилиты нормализации данных сотрудников и построения EmployeeRow\r\n// Основные модули: types/user\r\nimport type { EmployeeRow } from \"../columns/settingsEmployeeColumns\";\r\nimport type { User } from \"../types/user\";\r\n\r\nconst normalizeString = (value: unknown): string | undefined => {\r\n  if (typeof value !== \"string\") return undefined;\r\n  const trimmed = value.trim();\r\n  return trimmed.length ? trimmed : undefined;\r\n};\r\n\r\nconst normalizeNumber = (value: unknown): number | undefined =>\r\n  typeof value === \"number\" && Number.isFinite(value) ? value : undefined;\r\n\r\nconst normalizeStringArray = (value: unknown): string[] | undefined => {\r\n  if (!Array.isArray(value)) return undefined;\r\n  return value\r\n    .filter((item): item is string => typeof item === \"string\")\r\n    .map((item) => item.trim())\r\n    .filter((item) => item.length > 0);\r\n};\r\n\r\nexport type EmployeeRowSource = User & {\r\n  roleName?: string | null;\r\n  departmentName?: string | null;\r\n  divisionName?: string | null;\r\n  positionName?: string | null;\r\n};\r\n\r\nexport const buildEmployeeRow = (source: EmployeeRowSource): EmployeeRow => {\r\n  const row: Partial<EmployeeRow> = {\r\n    roleName: normalizeString(source.roleName) ?? \"\",\r\n    departmentName: normalizeString(source.departmentName) ?? \"\",\r\n    divisionName: normalizeString(source.divisionName) ?? \"\",\r\n    positionName: normalizeString(source.positionName) ?? \"\",\r\n  };\r\n\r\n  const assignString = <K extends keyof EmployeeRow>(key: K, raw: unknown) => {\r\n    const normalized = normalizeString(raw);\r\n    if (normalized !== undefined) {\r\n      row[key] = normalized as EmployeeRow[K];\r\n    }\r\n  };\r\n\r\n  const assignNumber = <K extends keyof EmployeeRow>(key: K, raw: unknown) => {\r\n    const normalized = normalizeNumber(raw);\r\n    if (normalized !== undefined) {\r\n      row[key] = normalized as EmployeeRow[K];\r\n    }\r\n  };\r\n\r\n  assignString(\"id\", source.id);\r\n  assignNumber(\"telegram_id\", source.telegram_id);\r\n  assignString(\"telegram_username\", source.telegram_username);\r\n  assignString(\"username\", source.username);\r\n  assignString(\"name\", source.name);\r\n  assignString(\"phone\", source.phone);\r\n  assignString(\"mobNumber\", source.mobNumber);\r\n  assignString(\"email\", source.email);\r\n  assignString(\"role\", source.role);\r\n  assignNumber(\"access\", source.access);\r\n  const permissions = normalizeStringArray(source.permissions);\r\n  if (permissions !== undefined) {\r\n    row.permissions = permissions;\r\n  }\r\n  assignString(\"roleId\", source.roleId);\r\n  assignString(\"roleName\", row.roleName);\r\n  assignString(\"departmentId\", source.departmentId);\r\n  assignString(\"departmentName\", row.departmentName);\r\n  assignString(\"divisionId\", source.divisionId);\r\n  assignString(\"divisionName\", row.divisionName);\r\n  assignString(\"positionId\", source.positionId);\r\n  assignString(\"positionName\", row.positionName);\r\n\r\n  return row as EmployeeRow;\r\n};\r\n","// Назначение: форма редактирования пользователя\r\n// Основные модули: React, ConfirmDialog\r\nimport React from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport ConfirmDialog from \"../../components/ConfirmDialog\";\r\nimport {\r\n  fetchCollectionItems,\r\n  type CollectionItem,\r\n} from \"../../services/collections\";\r\nimport { fetchRoles } from \"../../services/roles\";\r\nimport { ROLE_OPTIONS } from \"../../utils/roleDisplay\";\r\n\r\nexport interface UserFormData {\r\n  telegram_id?: number;\r\n  username: string;\r\n  name?: string;\r\n  phone?: string;\r\n  mobNumber?: string;\r\n  email?: string;\r\n  role?: string;\r\n  access?: number;\r\n  roleId?: string;\r\n  departmentId?: string;\r\n  divisionId?: string;\r\n  positionId?: string;\r\n}\r\n\r\ninterface Props {\r\n  form: UserFormData;\r\n  onChange: (form: UserFormData) => void;\r\n  onSubmit: () => void;\r\n  onReset: () => void;\r\n}\r\n\r\ninterface Role {\r\n  _id: string;\r\n  name: string;\r\n  access: number;\r\n}\r\n\r\nexport default function UserForm({ form, onChange, onSubmit, onReset }: Props) {\r\n  const [confirmSave, setConfirmSave] = React.useState(false);\r\n  const [departments, setDepartments] = React.useState<CollectionItem[]>([]);\r\n  const [divisions, setDivisions] = React.useState<CollectionItem[]>([]);\r\n  const [positions, setPositions] = React.useState<CollectionItem[]>([]);\r\n  const [roles, setRoles] = React.useState<Role[]>([]);\r\n\r\n  React.useEffect(() => {\r\n    fetchCollectionItems(\"departments\", \"\", 1, 100).then((d) =>\r\n      setDepartments(d.items),\r\n    ).catch(() => setDepartments([]));\r\n    fetchCollectionItems(\"divisions\", \"\", 1, 100).then((d) =>\r\n      setDivisions(d.items),\r\n    ).catch(() => setDivisions([]));\r\n    fetchCollectionItems(\"positions\", \"\", 1, 100).then((d) =>\r\n      setPositions(d.items),\r\n    ).catch(() => setPositions([]));\r\n    fetchRoles().then((r) => setRoles(r));\r\n  }, []);\r\n\r\n  const handleRoleChange = (value: string) => {\r\n    const r = roles.find((x) => x.name === value);\r\n    onChange({\r\n      ...form,\r\n      role: value,\r\n      roleId: r?._id,\r\n      access: r?.access ?? 1,\r\n    });\r\n  };\r\n\r\n  const submit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setConfirmSave(true);\r\n  };\r\n  return (\r\n    <form onSubmit={submit} className=\"space-y-2\">\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">ID</label>\r\n        <input\r\n          id=\"settings-user-telegram-id\"\r\n          name=\"telegramId\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.telegram_id ?? \"\"}\r\n          onChange={(e) =>\r\n            onChange({\r\n              ...form,\r\n              telegram_id: e.target.value ? Number(e.target.value) : undefined,\r\n            })\r\n          }\r\n          readOnly={!!form.telegram_id}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Username</label>\r\n        <input\r\n          id=\"settings-user-username\"\r\n          name=\"username\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.username || \"\"}\r\n          onChange={(e) => onChange({ ...form, username: e.target.value })}\r\n          readOnly={!!form.telegram_id}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Имя</label>\r\n        <input\r\n          id=\"settings-user-name\"\r\n          name=\"name\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.name || \"\"}\r\n          onChange={(e) => onChange({ ...form, name: e.target.value })}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Телефон</label>\r\n        <input\r\n          id=\"settings-user-phone\"\r\n          name=\"phone\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.phone || \"\"}\r\n          onChange={(e) => onChange({ ...form, phone: e.target.value })}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Доп. телефон</label>\r\n        <input\r\n          id=\"settings-user-mob\"\r\n          name=\"mobNumber\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.mobNumber || \"\"}\r\n          onChange={(e) => onChange({ ...form, mobNumber: e.target.value })}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Email</label>\r\n        <input\r\n          id=\"settings-user-email\"\r\n          name=\"email\"\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.email || \"\"}\r\n          onChange={(e) => onChange({ ...form, email: e.target.value })}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Роль</label>\r\n        <select\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.role || \"user\"}\r\n          onChange={(e) => handleRoleChange(e.target.value)}\r\n        >\r\n          {ROLE_OPTIONS.map((option) => (\r\n            <option key={option.value} value={option.value}>\r\n              {option.label}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Департамент</label>\r\n        <select\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.departmentId || \"\"}\r\n          onChange={(e) => onChange({ ...form, departmentId: e.target.value })}\r\n        >\r\n          <option value=\"\"></option>\r\n          {departments.map((d) => (\r\n            <option key={d._id} value={d._id}>\r\n              {d.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Отдел</label>\r\n        <select\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.divisionId || \"\"}\r\n          onChange={(e) => onChange({ ...form, divisionId: e.target.value })}\r\n        >\r\n          <option value=\"\"></option>\r\n          {divisions.map((d) => (\r\n            <option key={d._id} value={d._id}>\r\n              {d.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Должность</label>\r\n        <select\r\n          className=\"h-10 w-full rounded border px-3\"\r\n          value={form.positionId || \"\"}\r\n          onChange={(e) => onChange({ ...form, positionId: e.target.value })}\r\n        >\r\n          <option value=\"\"></option>\r\n          {positions.map((p) => (\r\n            <option key={p._id} value={p._id}>\r\n              {p.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <Button type=\"submit\">Сохранить</Button>\r\n        <Button type=\"button\" variant=\"outline\" onClick={onReset}>\r\n          Очистить\r\n        </Button>\r\n      </div>\r\n      <ConfirmDialog\r\n        open={confirmSave}\r\n        message=\"Сохранить изменения?\"\r\n        onConfirm={() => {\r\n          setConfirmSave(false);\r\n          onSubmit();\r\n        }}\r\n        onCancel={() => setConfirmSave(false)}\r\n        confirmText=\"Сохранить\"\r\n      />\r\n    </form>\r\n  );\r\n}\r\n"],"names":["indexesOf","AdjustmentsHorizontalIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React.createElement","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","_queries$active","_searchDrafts$active","_userForm$telegram_id","_roleMap$get","_departmentMap$get3","_divisionMap$get5","_positionMap$get","_selectedEmployee$tel","_selectedEmployee$acc","_roleMap$get2","_departmentMap$get4","_divisionMap$get6","_positionMap$get2","t","useTranslation","_useSearchParams2","_slicedToArray","useSearchParams","searchParams","setSearchParams","_reactExports$useStat30","useState","param","get","isValidModuleKey","activeModule","setActiveModule","_reactExports$useStat32","active","setActive","_reactExports$useStat34","items","setItems","_reactExports$useStat36","isLoading","setIsLoading","_reactExports$useStat38","total","setTotal","_reactExports$useStat40","page","setPage","_reactExports$useStat42","createInitialQueries","queries","setQueries","_reactExports$useStat44","searchDrafts","setSearchDrafts","_reactExports$useStat46","name","value","form","setForm","_reactExports$useStat48","hint","setHint","_reactExports$useStat50","allDepartments","setAllDepartments","_reactExports$useStat52","allDivisions","setAllDivisions","_reactExports$useStat54","allPositions","setAllPositions","_reactExports$useStat56","allRoles","setAllRoles","limit","_reactExports$useStat58","users","setUsers","_reactExports$useStat60","userPage","setUserPage","_reactExports$useStat62","userQuery","setUserQuery","_reactExports$useStat64","userSearchDraft","setUserSearchDraft","_reactExports$useStat66","userModalOpen","setUserModalOpen","_reactExports$useStat68","emptyUser","userForm","setUserForm","_reactExports$useStat70","collectionModalOpen","setCollectionModalOpen","_reactExports$useStat72","selectedCollection","setSelectedCollection","collectionSearchTimer","useRef","_reactExports$useStat74","selectedEmployeeId","setSelectedEmployeeId","_reactExports$useStat76","isEmployeeModalOpen","setIsEmployeeModalOpen","_reactExports$useStat78","employeeFormMode","setEmployeeFormMode","_reactExports$useStat80","taskFieldItems","setTaskFieldItems","_reactExports$useStat82","taskTypeItems","setTaskTypeItems","_reactExports$useStat84","tasksLoading","setTasksLoading","currentUser","useAuth","user","_reactExports$useStat86","confirmUserDelete","setConfirmUserDelete","_reactExports$useStat88","confirmEmployeeDelete","setConfirmEmployeeDelete","canManageUsers","hasAccess","access","ACCESS_ADMIN","useEffect","current","window","clearTimeout","next","handleModuleChange","useCallback","URLSearchParams","toString","delete","set","replace","selectedCollectionInfo","useMemo","_meta$readonly","meta","_typeof","readonly","notice","Boolean","legacy","readonlyReason","breadcrumbs","label","href","currentQuery","currentSearchDraft","isCollectionSearchSupported","isUserSearchActive","isEmployeeSearchActive","applyCollectionSearch","raw","normalized","trim","prev","_objectSpread","_defineProperty","setTimeout","load","_callee15","list","message","_t12","_regenerator","w","_context16","p","n","a","fetchAllCollectionItems","v","length","fetchCollectionItems","mergeById","Error","f","loadUsers","_callee16","_t13","_context17","fetchUsers","USERS_ERROR_HINT","loadTaskSettings","_callee17","_yield$Promise$all","_yield$Promise$all2","fields","types2","_t14","_context18","Promise","all","types","TASK_SETTINGS_ERROR_HINT","saveTaskField","_ref69","_asyncToGenerator","m","_callee18","item","trimmed","_item$meta19","_t15","_context19","virtual","createCollectionItem","updateCollectionItem","_id","collectionType","TASK_FIELD_SAVE_ERROR","_x9","_x0","apply","this","arguments","deleteTaskField","_ref70","_callee19","_item$meta20","_t16","_context20","removeCollectionItem","TASK_SETTINGS_DELETE_ERROR","_x1","saveTaskType","_ref71","_callee20","payload","trimmedLabel","trimmedUrl","trimmedPhotosUrl","_item$meta21","buildMeta","_meta","_t17","_context21","tg_theme_url","tg_photos_url","keys","TASK_TYPE_SAVE_ERROR","_x10","_x11","deleteTaskType","_ref72","_callee21","_item$meta22","_t18","_context22","_x12","type","loadReferenceCollections","_callee22","_yield$Promise$allSet","_yield$Promise$allSet2","departmentsResult","divisionsResult","positionsResult","applyResult","_context23","allSettled","result","setter","fallbackMessage","status","reason","fetchRoles","then","catch","error","openCollectionModal","closeCollectionModal","openUserModal","_ref74","_user$telegram_userna2","_user$name2","_user$phone2","_user$mobNumber2","_user$email2","_user$role2","_user$access","_user$roleId","_user$departmentId","_user$divisionId","_user$positionId","telegram_id","username","telegram_username","phone","mobNumber","email","role","roleId","departmentId","divisionId","positionId","mapUserToForm","closeUserModal","openEmployeeModal","String","updateCollectionSearchDraft","submitCollectionSearch","handleCollectionSearchKeyDown","event","key","preventDefault","currentTarget","resetCollectionSearch","submitUserSearch","handleUserSearchKeyDown","executeUserDelete","_callee23","_t19","_context24","deleteUserApi","showToast","USER_DELETE_SUCCESS","USER_DELETE_ERROR","executeEmployeeDelete","_callee24","_t20","_context25","EMPLOYEE_DELETE_SUCCESS","EMPLOYEE_DELETE_ERROR","submit","_callee25","trimmedName","_selectedCollectionIn","valueToSave","saved","_t21","_context26","safeParseIds","join","remove","_callee26","_selectedCollectionIn2","msg","_t22","_context27","submitUser","_callee27","data","_context28","find","u","createUserApi","_excluded19","updateUserApi","departmentMap","map","Map","forEach","divisionMap","positionMap","position","employeeDetailsIndex","buildEmployeeDetailsIndex","enrichUserWithEmployeeDetails","mergeEmployeeDetails","findEmployeeDetails","enrichedUsers","roleMap","_reactExports$useMemo","owners","duplicates","Set","department","currentOwner","add","divisionOwners","duplicateDivisionIds","Array","from","duplicateDivisionHint","names","_ref80","_divisionMap$get","_allDivisions$find","division","filter","suffix","concat","DUPLICATE_DIVISION_HINT_PREFIX","startsWith","getItemDisplayValue","_item$value5","ids","SETTINGS_BADGE_EMPTY","_ref81","_divisionMap$get2","_allDivisions$find2","_ref82","_departmentMap$get","_allDepartments$find","departmentName","formatCollectionRawValue","_ref83","_divisionMap$get3","_allDivisions$find3","divisionName","formatMetaSummary","summarizeRecord","copyIdLabel","copiedIdLabel","localizedCollectionColumns","collectionColumns","column","hasAccessorKey","accessorKey","header","cell","_ref84","getValue","safeValue","jsx","CopyableId","copyHint","copiedHint","className","children","collectionSearchPlaceholder","collectionSearchHint","collectionSearchCta","collectionResetCta","collectionAddCta","collectionEmptyTitle","collectionEmptyDescription","collectionEmptyAction","userSearchPlaceholder","userAddCta","employeeSearchPlaceholder","employeeAddCta","buildCollectionColumns","excludedKeys","includes","departmentColumns","divisionColumns","positionColumns","renderDepartmentValueField","currentForm","handleChange","options","selected","multiple","onChange","values","target","selectedOptions","option","disabled","ownerId","renderDivisionValueField","jsxs","required","renderPositionValueField","totalPages","Math","ceil","filteredUsers","matchSorter","_item$username","threshold","rankings","STARTS_WITH","_item$telegram_userna","buildUserSearchTokens","CONTAINS","userTotalPages","paginatedUsers","slice","employeeRows","mergedUser","roleNameFromMap","resolveReferenceName","roleName","positionName","roleLabel","formatRoleName","buildEmployeeRow","selectedEmployee","base","fallbackDetails","fallbackUser","parsedId","Number","isFinite","selectedDepartmentDivisionNames","_ref85","_divisionMap$get4","_allDivisions$find4","selectedDivisionDepartmentName","_ref86","_departmentMap$get2","_allDepartments$find2","selectedDivisionPositionNames","selectedDivisionEmployeeNames","directoriesToolbar","placeholder","addLabel","handleAdd","htmlFor","onKeyDown","Button","size","onClick","variant","Tabs","onValueChange","ActionBar","Breadcrumbs","description","toolbar","moduleTabs","tab","TabsList","Icon","icon","labelId","TabsTrigger","TabsContent","tabIcons","isActiveTab","rows","displayValue","metaSummary","columnsForType","showEmpty","DataTable","columns","settingsUserColumns","pageIndex","pageSize","pageCount","onPageChange","index","showGlobalSearch","showFilters","onRowClick","row","wrapCellsAsBadges","badgeClassName","SETTINGS_BADGE_CLASS","badgeWrapperClassName","SETTINGS_BADGE_WRAPPER_CLASS","badgeEmptyPlaceholder","settingsEmployeeColumns","TaskSettingsTab","loading","onSaveField","onDeleteField","onSaveType","onDeleteType","FleetVehiclesTab","Spinner","Modal","open","onClose","Fragment","renderBadgeList","JSON","stringify","CollectionForm","onSubmit","onDelete","onReset","valueLabel","renderValueField","readonlyNotice","UserForm","EmployeeCardForm","telegramId","mode","onSaved","updated","ConfirmDialog","onConfirm","onCancel","confirmText","AnalyticsDashboard","ArchivePage","LogsPage","StoragePage","ForwardRef","React.forwardRef","ArchiveBoxIcon","_ref2","_excluded2","BuildingOffice2Icon","_ref3","_excluded3","CheckIcon","_ref4","_excluded4","DocumentDuplicateIcon","_ref5","_excluded5","IdentificationIcon","_ref6","_excluded6","KeyIcon","_ref7","_excluded7","RectangleStackIcon","_ref8","_excluded8","Squares2X2Icon","_ref9","_excluded9","TruckIcon","_ref0","_excluded0","UserGroupIcon","_ref1","_excluded1","characterMap","chars","allAccents","RegExp","firstAccent","matcher","match","removeAccents","string","removeAccentsModule","exports","has","CASE_SENSITIVE_EQUAL","EQUAL","WORD_STARTS_WITH","ACRONYM","MATCHES","NO_MATCH","defaultBaseSortFn","b","rankedValue","localeCompare","undefined","_options$threshold","_options$baseSort","baseSort","_options$sorter","sorter","matchedItems","sort","aFirst","bFirst","aRank","rank","aKeyIndex","keyIndex","bRank","bKeyIndex","sortRankedValues","reduce","matches","rankingInfo","getMatchRanking","keyThreshold","valuesToRank","allValues","j","J","attributes","getKeyAttributes","itemValues","getItemValues","i","I","push","itemValue","getAllValuesToRank","_ref11","_ref12","newRank","newRankedValue","minRanking","maxRanking","getHighestRanking","_rankingInfo$keyThres","_ref10","testString","stringToRank","_context","indexOf","_marked","prepareValueForComparison","indexesOfStringToRankInTestString","toLowerCase","firstIndexOfStringToRankInTestStringResult","indexOfStringToRankInTestString","indexOfStringToRankInTestStringResult","done","acronym","ch","charAt","getAcronym","matchingInOrderCharCount","charNumber","findMatchingCharacter","matchChar","getRanking","spread","spreadPercentage","inOrderPercentage","firstIndex","getClosenessRanking","_ref13","keepDiacritics","hasOwnProperty","call","path","split","nestedKey","nestedValues","nestedItem","nestedValue","isArray","_toConsumableArray","getNestedValues","defaultKeyAttributes","Infinity","TABS_NAME","_createContextScope2","createContextScope","createRovingFocusGroupScope","createTabsContext","useRovingFocusGroupScope","_createTabsContext2","TabsProvider","useTabsContext","forwardedRef","__scopeTabs","valueProp","defaultValue","_props$orientation","orientation","dir","_props$activationMode","activationMode","tabsProps","_excluded10","direction","useDirection","_useControllableState2","useControllableState","prop","defaultProp","caller","setValue","scope","baseId","useId","Primitive","div","displayName","TAB_LIST_NAME","_props$loop","loop","listProps","_excluded11","context","rovingFocusGroupScope","RovingFocusGroup.Root","asChild","TRIGGER_NAME","_props$disabled","triggerProps","_excluded12","triggerId","makeTriggerId","contentId","makeContentId","isSelected","RovingFocusGroup.Item","focusable","button","onMouseDown","composeEventHandlers","ctrlKey","onFocus","isAutomaticActivation","CONTENT_NAME","forceMount","contentProps","_excluded13","isMountAnimationPreventedRef","React.useRef","React.useEffect","rAF","requestAnimationFrame","cancelAnimationFrame","Presence","present","_ref14","hidden","tabIndex","style","animationDuration","Root2","List","Trigger","Content","_ref15","_excluded14","TabsPrimitive.Root","cn","_ref16","_excluded15","TabsPrimitive.List","_ref17","_excluded16","TabsPrimitive.Trigger","_ref18","_excluded17","TabsPrimitive.Content","_ref19","_ref20","onCopy","_excluded18","_React$useState2","React","copied","setCopied","resetTimerRef","textToShow","defaultCopyHint","defaultCopiedHint","handleCopy","_callee2","performCopy","_context3","_callee","_navigator$clipboard","textarea","_context2","navigator","clipboard","writeText","document","createElement","setAttribute","left","body","appendChild","select","execCommand","removeChild","_ref23","_ref23$valueLabel","_ref23$readonly","_React$useState4","confirmDelete","setConfirmDelete","_React$useState6","confirmSave","setConfirmSave","e","emptyForm","registrationNumber","odometerInitial","odometerCurrent","mileageTotal","transportType","fuelType","fuelRefilled","fuelAverageConsumption","fuelSpentTotal","currentTasks","parseTasks","FleetVehicleDialog","_ref24","vehicle","saving","_reactExports$useStat2","_reactExports$useStat4","setError","_reactExports$useStat6","_reactExports$useStat8","isUpdate","toUpperCase","handleConfirm","_callee3","_t2","_context4","handleDelete","_callee4","_t3","_context5","test","min","step","_unused2","fleetVehicleColumns","minWidth","maxWidth","badgeBaseClass","PAGE_LIMIT","transportHistoryFormatter","Intl","DateTimeFormat","day","month","year","hour","minute","formatHistoryInstant","date","Date","isNaN","getTime","format","buildHistoryLabel","entry","assigned","assignedAt","removed","removedAt","taskTitle","taskId","formatTransportHistory","history","vehicleCardFields","render","_vehicle$transportHis","transportHistory","createdAt","updatedAt","unitId","remoteName","notes","_reactExports$useStat0","_reactExports$useStat10","_reactExports$useStat12","_reactExports$useStat14","search","setSearch","_reactExports$useStat16","appliedSearch","setAppliedSearch","_reactExports$useStat18","setLoading","_reactExports$useStat20","_reactExports$useStat22","modalOpen","setModalOpen","_reactExports$useStat24","setMode","_reactExports$useStat26","setSaving","_reactExports$useStat28","selectedVehicle","setSelectedVehicle","max","transportHistoryInfo","_callee5","_t4","_context6","listFleetVehicles","closeModal","_ref30","_callee6","_context7","createFleetVehicle","updateFleetVehicle","_x","_x2","_ref31","_callee7","_context8","deleteFleetVehicle","_x3","_ref32","CARD_CLASS","SECTION_GAP","FieldCard","_item$meta$defaultLab","_item$meta","_item$value","_item$meta2","_item$meta3","_item$meta4","_ref33","onSave","deleting","_React$useState8","localError","setLocalError","defaultLabel","storedLabel","trimmedValue","dirty","handleSave","_callee8","_t5","_context9","_callee9","_t6","_context0","fieldType","Input","TypeCard","_item$meta$defaultLab2","_item$meta5","_item$value2","_item$meta6","_item$meta7","_item$meta8","_item$meta9","_item$meta0","_item$meta1","_item$meta10","_ref36","url","photosUrl","onChangeLabel","onChangeUrl","onChangePhotosUrl","_React$useState0","storedUrl","storedPhotosUrl","_callee0","_t7","_context1","_callee1","_t8","_context10","tg_chat_id","tg_topic_id","tg_photos_chat_id","tg_photos_topic_id","sortByOrder","_a$meta","_b$meta","order","useDraftMap","selector","_React$useState10","draft","setDraft","changed","itemNames","_ref39","selectFieldDraft","_item$value3","_item$meta11","selectTypeDraft","_item$value4","_item$meta12","_item$meta13","_item$meta14","_useDraftMap2","fieldDrafts","setFieldDrafts","_useDraftMap4","typeDrafts","setTypeDrafts","_React$useState12","savingField","setSavingField","_React$useState14","savingType","setSavingType","_React$useState16","deletingField","setDeletingField","_React$useState18","deletingType","setDeletingType","_React$useState20","fieldErrors","setFieldErrors","_React$useState22","typeErrors","setTypeErrors","sortedFields","sortedTypes","handleTypeChange","patch","_prev$name$label","_prev$name","_prev$name$url","_prev$name2","_prev$name$photosUrl","_prev$name3","saveField","_ref40","_callee10","_fieldDrafts$item$nam","_t9","_context11","_x4","deleteField","_ref41","_callee11","_item$meta15","_t0","_context12","_x5","saveType","_ref42","_callee12","_typeDrafts$item$name","_t1","_context13","_x6","deleteType","_ref43","_callee13","_item$meta16","_t10","_context14","_x7","_fieldDrafts$item$nam2","_item$meta17","handleFieldChange","revertFieldDraft","_typeDrafts$item$name2","_typeDrafts$item$name3","_typeDrafts$item$name4","_typeDrafts$item$name5","_typeDrafts$item$name6","_typeDrafts$item$name7","_item$meta18","revertTypeDraft","fetchRoutePlanAnalytics","_fetchRoutePlanAnalytics","_callee28","params","query","response","_args29","_context29","to","authFetch","ok","json","ReactApexChart","lazy","__vitePreload","module","r","toDateInput","getTimezoneOffset","toISOString","defaultTo","defaultFrom","now","DAY_MS","statusOptions","percentFormatter","NumberFormat","minimumFractionDigits","maximumFractionDigits","numberFormatter","loadFormatter","ensureParams","filters","mapMileageSeries","_data$mileage$byPerio","mileage","byPeriod","point","x","y","mapLoadSeries","_data$load$byPeriod$m","mapSlaSeries","_data$sla$byPeriod$ma","sla","rate","toFixed","_summary$mileage$tota","_summary$period$from","_summary$period$to","_React$useState24","setFilters","_React$useState26","_React$useState28","_React$useState30","summary","setSummary","loadData","_ref44","_callee14","_t11","_context15","console","_x8","mileageSeries","loadSeries","slaSeries","FormData","nextFilters","period","average","Suspense","fallback","height","series","chart","animations","enabled","dataLabels","curve","width","xaxis","yaxis","labels","formatter","tooltip","markers","tickAmount","_ref45","_ref46","_row$original$telegra","original","_ref48","_getValue","_ref49","_ref50","_row$original$telegra2","_ref53","normalizeString","source","_normalizeString","_normalizeString2","_normalizeString3","_normalizeString4","assignString","assignNumber","permissions","normalizeStringArray","_form$telegram_id","_ref57","_React$useState32","_React$useState34","departments","setDepartments","_React$useState36","divisions","setDivisions","_React$useState38","positions","setPositions","_React$useState40","roles","setRoles","readOnly","_r$access","ROLE_OPTIONS","ChartPieIcon","DocumentTextIcon","some","acc","employees","fleets","tasks","ClipboardDocumentListIcon","collectStringIds","flatMap","entries","_ref58","_ref59","KEY_LABEL_OVERRIDES","fleetId","sourceId","invalid","invalidReason","invalidCode","invalidAt","syncPending","syncWarning","syncError","syncFailedAt","formatKeyLabel","override","formatSummaryValue","_ref60","_ref61","nested","formatted","record","_ref62","_ref63","parsed","parse","_unused3","tryParseJsonValue","parts","part","IdsSchema","z.preprocess","input","_unused4","z.array","z.string","transform","normalizeId","safeParse","success","incoming","merged","indexById","fallbackName","_map$get","directName","readValue","_step","_iterator","_createForOfIteratorHelper","s","err","lowerCaseSource","_ref64","_ref65","_step2","_iterator2","lowerKey","pickString","pickNumber","collectEmployeeDetails","rawValue","_unused5","_item$name","combined","details","telegramUsername","firstName","lastName","middleName","pickStringArray","byId","byTelegramUsername","byUsername","TOKEN_SPLIT_REGEX","_user$username","_user$telegram_userna","_user$telegram_id","_user$name","_user$phone","_user$mobNumber","_user$email","_user$role","_user$roleName","_user$departmentName","_user$divisionName","_user$positionName","tokens","addValue","text","permission","fallbackId","candidateId","direct"],"mappings":"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AK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KACL,IAAK,KACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KACL,IAAK,KACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KACL,IAAK,KACL,IAAK,IACL,IAAK,IACL,IAAK,KACL,IAAK,KACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,IAAK,IACL,IAAK,IACL,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,KAAM,IACN,IAAK,IACL,IA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","x_google_ignoreList":[0,1,3,4,5,6,7,8,9,10,11,12,13,14]}