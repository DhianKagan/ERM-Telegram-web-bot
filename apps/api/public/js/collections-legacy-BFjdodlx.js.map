{"version":3,"file":"collections-legacy-BFjdodlx.js","sources":["../../../web/src/services/collections.ts"],"sourcesContent":["// Назначение: запросы к API универсальных коллекций\r\n// Основные модули: authFetch, i18n\r\nimport i18n from \"../i18n\";\r\nimport authFetch from \"../utils/authFetch\";\r\n\r\nexport interface CollectionItemMeta {\r\n  invalid?: boolean;\r\n  invalidReason?: string;\r\n  invalidCode?: string;\r\n  invalidAt?: string;\r\n  syncPending?: boolean;\r\n  syncWarning?: string;\r\n  syncError?: string;\r\n  syncFailedAt?: string;\r\n  legacy?: boolean;\r\n  readonly?: boolean;\r\n  readonlyReason?: string;\r\n  source?: string;\r\n  sourceId?: string;\r\n  fleetId?: string;\r\n  departmentId?: string;\r\n  divisionId?: string;\r\n  positionId?: string;\r\n  defaultLabel?: string;\r\n  fieldType?: string;\r\n  required?: boolean;\r\n  order?: number;\r\n  virtual?: boolean;\r\n  tg_theme_url?: string;\r\n  tg_chat_id?: string;\r\n  tg_topic_id?: number;\r\n  tg_photos_url?: string;\r\n  tg_photos_chat_id?: string;\r\n  tg_photos_topic_id?: number;\r\n  [key: string]: unknown;\r\n}\r\n\r\nexport interface CollectionItem {\r\n  _id: string;\r\n  type: string;\r\n  name: string;\r\n  value: string;\r\n  meta?: CollectionItemMeta;\r\n}\r\n\r\ntype ProblemValidationError = {\r\n  msg?: string;\r\n  message?: string;\r\n  [key: string]: unknown;\r\n};\r\n\r\ntype ProblemResponse = {\r\n  error?: string;\r\n  detail?: unknown;\r\n  message?: string;\r\n  errors?: ProblemValidationError[];\r\n};\r\n\r\ntype ParseErrorOptions = {\r\n  collectionType?: string;\r\n};\r\n\r\nconst validationMessageKeys: Record<string, string> = {\r\n  \"Некорректный тип коллекции\": \"collections.errors.invalidType\",\r\n  \"Тип коллекции обязателен\": \"collections.errors.typeRequired\",\r\n  \"Некорректное название элемента\": \"collections.errors.invalidName\",\r\n  \"Название элемента обязательно\": \"collections.errors.nameRequired\",\r\n  \"Некорректное значение элемента\": \"collections.errors.invalidValue\",\r\n  \"Значение элемента обязательно\": \"collections.errors.valueRequired\",\r\n  \"Значение элемента не может быть пустым\": \"collections.errors.valueRequired\",\r\n  \"Ошибка валидации\": \"collections.errors.generalValidation\",\r\n  \"Ссылка на тему Telegram должна иметь формат https://t.me/c/<id>/<topic>\":\r\n    \"collections.errors.invalidTelegramTopicUrl\",\r\n};\r\n\r\nconst typeSpecificValidationKeys: Record<string, Record<string, string>> = {\r\n  departments: {\r\n    \"Значение элемента обязательно\":\r\n      \"collections.errors.departmentsMustHaveDivisions\",\r\n  },\r\n};\r\n\r\nconst tryParseJson = (raw: string): unknown => {\r\n  try {\r\n    return JSON.parse(raw);\r\n  } catch {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nconst translateValidationMessage = (\r\n  raw: string | undefined,\r\n  options?: ParseErrorOptions,\r\n): string => {\r\n  if (!raw) return \"\";\r\n  const trimmed = raw.trim();\r\n  if (!trimmed) return \"\";\r\n  const collectionType = options?.collectionType;\r\n  const specificKey =\r\n    collectionType && typeSpecificValidationKeys[collectionType]?.[trimmed];\r\n  const key = specificKey ?? validationMessageKeys[trimmed];\r\n  if (key) return i18n.t(key);\r\n  return trimmed;\r\n};\r\n\r\nconst translateValidationErrors = (\r\n  errors: ProblemValidationError[] | undefined,\r\n  options?: ParseErrorOptions,\r\n): string[] => {\r\n  if (!errors?.length) return [];\r\n  const translated = errors\r\n    .map((error) => {\r\n      const base =\r\n        typeof error?.msg === \"string\"\r\n          ? error.msg\r\n          : typeof error?.message === \"string\"\r\n            ? error.message\r\n            : \"\";\r\n      return translateValidationMessage(base, options);\r\n    })\r\n    .filter(Boolean);\r\n  if (translated.length) return translated;\r\n  return [i18n.t(\"collections.errors.generalValidation\")];\r\n};\r\n\r\nconst extractMessagesFromPayload = (\r\n  payload: unknown,\r\n  options?: ParseErrorOptions,\r\n): string[] => {\r\n  if (!payload) return [];\r\n  if (Array.isArray(payload)) {\r\n    const asErrors = payload.filter(\r\n      (item): item is ProblemValidationError =>\r\n        Boolean(item && typeof item === \"object\" && \"msg\" in item),\r\n    );\r\n    if (asErrors.length) return translateValidationErrors(asErrors, options);\r\n    const directStrings = payload\r\n      .map((item) =>\r\n        typeof item === \"string\"\r\n          ? translateValidationMessage(item, options)\r\n          : \"\",\r\n      )\r\n      .filter(Boolean);\r\n    if (directStrings.length) return directStrings;\r\n  }\r\n  if (typeof payload === \"string\") {\r\n    const parsed = tryParseJson(payload);\r\n    if (parsed !== undefined) {\r\n      const nested = extractMessagesFromPayload(parsed, options);\r\n      if (nested.length) return nested;\r\n    }\r\n    const translated = translateValidationMessage(payload, options);\r\n    return translated ? [translated] : [];\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const parseErrorMessage = (\r\n  status: number,\r\n  body: string,\r\n  options?: ParseErrorOptions,\r\n): string => {\r\n  const fallback =\r\n    status === 429\r\n      ? i18n.t(\"collections.fallback.rateLimited\")\r\n      : status === 403\r\n        ? i18n.t(\"collections.fallback.forbidden\")\r\n        : i18n.t(\"collections.fallback.loadFailed\");\r\n\r\n  if (body) {\r\n    const parsed = tryParseJson(body) as ProblemResponse | undefined;\r\n    if (parsed) {\r\n      const errorMessages = translateValidationErrors(parsed.errors, options);\r\n      if (errorMessages.length) {\r\n        return Array.from(new Set(errorMessages)).join(\". \");\r\n      }\r\n      const detailMessages = extractMessagesFromPayload(\r\n        parsed.detail,\r\n        options,\r\n      );\r\n      if (detailMessages.length) {\r\n        return Array.from(new Set(detailMessages)).join(\". \");\r\n      }\r\n      const generalMessage =\r\n        translateValidationMessage(parsed.error, options) ||\r\n        translateValidationMessage(parsed.message, options);\r\n      if (generalMessage) return generalMessage;\r\n    } else {\r\n      const translated = translateValidationMessage(body, options);\r\n      if (translated) return translated;\r\n    }\r\n  }\r\n\r\n  return fallback;\r\n};\r\n\r\nexport const fetchCollectionItems = async (\r\n  type: string,\r\n  search = \"\",\r\n  page = 1,\r\n  limit = 10,\r\n) => {\r\n  const res = await authFetch(\r\n    `/api/v1/collections?type=${type}&page=${page}&limit=${limit}${search ? `&search=${encodeURIComponent(search)}` : \"\"}`,\r\n  );\r\n  if (!res.ok) {\r\n    const body = await res.text().catch(() => \"\");\r\n    throw new Error(parseErrorMessage(res.status, body, { collectionType: type }));\r\n  }\r\n  return res.json();\r\n};\r\n\r\nconst isFiniteNumber = (value: unknown): value is number =>\r\n  typeof value === \"number\" && Number.isFinite(value);\r\n\r\nexport const fetchAllCollectionItems = async (\r\n  type: string,\r\n  search = \"\",\r\n  limit = 200,\r\n): Promise<CollectionItem[]> => {\r\n  const effectiveLimit = limit > 0 ? limit : 200;\r\n  const aggregated: CollectionItem[] = [];\r\n  let page = 1;\r\n  let expectedTotal = 0;\r\n  // ограничиваем количество итераций, чтобы избежать бесконечных циклов при ошибках пагинации\r\n  const maxIterations = 100;\r\n  while (page <= maxIterations) {\r\n    const response = (await fetchCollectionItems(\r\n      type,\r\n      search,\r\n      page,\r\n      effectiveLimit,\r\n    )) as { items?: CollectionItem[]; total?: number };\r\n    const items = Array.isArray(response.items) ? response.items : [];\r\n    if (!items.length && aggregated.length === 0 && !isFiniteNumber(response.total)) {\r\n      return [];\r\n    }\r\n    aggregated.push(...items);\r\n    if (isFiniteNumber(response.total)) {\r\n      expectedTotal = Math.max(expectedTotal, response.total);\r\n    }\r\n    if (items.length < effectiveLimit) {\r\n      break;\r\n    }\r\n    if (expectedTotal && aggregated.length >= expectedTotal) {\r\n      break;\r\n    }\r\n    page += 1;\r\n  }\r\n  if (expectedTotal && aggregated.length > expectedTotal) {\r\n    return aggregated.slice(0, expectedTotal);\r\n  }\r\n  return aggregated;\r\n};\r\n\r\nexport const createCollectionItem = (\r\n  type: string,\r\n  data: { name: string; value: string; meta?: Record<string, unknown> },\r\n) =>\r\n  authFetch(\"/api/v1/collections\", {\r\n    method: \"POST\",\r\n    confirmed: true,\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ type, ...data }),\r\n  }).then(async (r) => {\r\n    if (!r.ok) {\r\n      const body = await r.text().catch(() => \"\");\r\n      throw new Error(parseErrorMessage(r.status, body, { collectionType: type }));\r\n    }\r\n    return r.json();\r\n  });\r\n\r\nexport const updateCollectionItem = (\r\n  id: string,\r\n  data: { name?: string; value?: string; meta?: Record<string, unknown> },\r\n  options?: ParseErrorOptions,\r\n) =>\r\n  authFetch(`/api/v1/collections/${id}`, {\r\n    method: \"PUT\",\r\n    confirmed: true,\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  }).then(async (r) => {\r\n    if (!r.ok) {\r\n      const body = await r.text().catch(() => \"\");\r\n      throw new Error(parseErrorMessage(r.status, body, options));\r\n    }\r\n    return r.json();\r\n  });\r\n\r\nexport const removeCollectionItem = async (id: string) => {\r\n  const r = await authFetch(`/api/v1/collections/${id}`, {\r\n    method: \"DELETE\",\r\n    confirmed: true,\r\n  });\r\n  if (!r.ok) {\r\n    const body = await r.text().catch(() => \"\");\r\n    throw new Error(parseErrorMessage(r.status, body));\r\n  }\r\n  return r.json();\r\n};\r\n"],"names":["validationMessageKeys","typeSpecificValidationKeys","departments","tryParseJson","raw","JSON","parse","_unused","translateValidationMessage","options","_typeSpecificValidati","trimmed","trim","collectionType","specificKey","key","i18n","t","translateValidationErrors","errors","length","translated","map","error","base","msg","message","filter","Boolean","extractMessagesFromPayload","payload","Array","isArray","asErrors","item","_typeof","directStrings","parsed","nested","parseErrorMessage","status","body","fallback","errorMessages","from","Set","join","detailMessages","detail","generalMessage","fetchCollectionItems","exports","_ref","_asyncToGenerator","_regenerator","m","_callee","type","search","page","limit","res","_args","arguments","w","_context","n","undefined","authFetch","concat","encodeURIComponent","ok","text","catch","Error","a","json","_x","apply","isFiniteNumber","value","Number","isFinite","_callee2","effectiveLimit","aggregated","expectedTotal","maxIterations","response","items","_args2","_context2","total","push","_toConsumableArray","Math","max","slice","_x2","_ref2","this","data","method","confirmed","headers","stringify","_objectSpread","then","_ref3","_callee3","r","_context3","_x3","id","_ref4","_callee4","_context4","_x4","_ref5","_callee5","_context5","v","_x5"],"mappings":"+kJA8DA,IAAMA,EAAgD,CACpD,6BAA8B,iCAC9B,2BAA4B,kCAC5B,iCAAkC,iCAClC,gCAAiC,kCACjC,iCAAkC,kCAClC,gCAAiC,mCACjC,yCAA0C,mCAC1C,mBAAoB,uCACpB,0EACE,8CAGEC,EAAqE,CACzEC,YAAa,CACX,gCACE,oDAIAC,EAAe,SAACC,GACpB,IACE,OAAOC,KAAKC,MAAMF,EACpB,CAAA,MAAAG,GACE,MACF,CACF,EAEMC,EAA6B,SACjCJ,EACAK,GACW,IAAAC,EACX,IAAKN,EAAK,MAAO,GACjB,IAAMO,EAAUP,EAAIQ,OACpB,IAAKD,EAAS,MAAO,GACrB,IAAME,EAAiBJ,eAAAA,EAASI,eAC1BC,EACJD,YAAAH,EAAkBT,EAA2BY,uBAA3BH,EAA6CC,IAC3DI,EAAMD,QAAAA,EAAed,EAAsBW,GACjD,OAAII,EAAYC,EAAKC,EAAEF,GAChBJ,CACT,EAEMO,EAA4B,SAChCC,EACAV,GAEA,GAAKU,UAAAA,EAAQC,OAAQ,MAAO,GAC5B,IAAMC,EAAaF,EAChBG,IAAI,SAACC,GACJ,IAAMC,EACkB,iBAAfD,aAAA,EAAAA,EAAOE,KACVF,EAAME,IACoB,iBAAnBF,aAAA,EAAAA,EAAOG,SACZH,EAAMG,QACN,GACR,OAAOlB,EAA2BgB,EAAMf,EAC1C,GACCkB,OAAOC,SACV,OAAIP,EAAWD,OAAeC,EACvB,CAACL,EAAKC,EAAE,wCACjB,EAEMY,EAA6B,SACjCC,EACArB,GAEA,IAAKqB,EAAS,MAAO,GACrB,GAAIC,MAAMC,QAAQF,GAAU,CAC1B,IAAMG,EAAWH,EAAQH,OACvB,SAACO,UACCN,QAAQM,GAAwB,WAAhBC,EAAOD,IAAqB,QAASA,EAAI,GAE7D,GAAID,EAASb,OAAQ,OAAOF,EAA0Be,EAAUxB,GAChE,IAAM2B,EAAgBN,EACnBR,IAAI,SAACY,SACY,iBAATA,EACH1B,EAA2B0B,EAAMzB,GACjC,EAAA,GAELkB,OAAOC,SACV,GAAIQ,EAAchB,OAAQ,OAAOgB,CACnC,CACA,GAAuB,iBAAZN,EAAsB,CAC/B,IAAMO,EAASlC,EAAa2B,GAC5B,QAAe,IAAXO,EAAsB,CACxB,IAAMC,EAAST,EAA2BQ,EAAQ5B,GAClD,GAAI6B,EAAOlB,OAAQ,OAAOkB,CAC5B,CACA,IAAMjB,EAAab,EAA2BsB,EAASrB,GACvD,OAAOY,EAAa,CAACA,GAAc,EACrC,CACA,MAAO,EACT,EAEakB,EAAoB,SAC/BC,EACAC,EACAhC,GAEA,IAAMiC,EACO,MAAXF,EACIxB,EAAKC,EAAE,oCACI,MAAXuB,EACExB,EAAKC,EAAE,kCACPD,EAAKC,EAAE,mCAEf,GAAIwB,EAAM,CACR,IAAMJ,EAASlC,EAAasC,GAC5B,GAAIJ,EAAQ,CACV,IAAMM,EAAgBzB,EAA0BmB,EAAOlB,OAAQV,GAC/D,GAAIkC,EAAcvB,OAChB,OAAOW,MAAMa,KAAK,IAAIC,IAAIF,IAAgBG,KAAK,MAEjD,IAAMC,EAAiBlB,EACrBQ,EAAOW,OACPvC,GAEF,GAAIsC,EAAe3B,OACjB,OAAOW,MAAMa,KAAK,IAAIC,IAAIE,IAAiBD,KAAK,MAElD,IAAMG,EACJzC,EAA2B6B,EAAOd,MAAOd,IACzCD,EAA2B6B,EAAOX,QAASjB,GAC7C,GAAIwC,EAAgB,OAAOA,CAC7B,KAAO,CACL,IAAM5B,EAAab,EAA2BiC,EAAMhC,GACpD,GAAIY,EAAY,OAAOA,CACzB,CACF,CAEA,OAAOqB,CACT,EAEaQ,EAAAC,EAAA,IAAA,WAAA,IAAAC,EAAAC,EAAAC,IAAAC,EAAuB,SAAAC,EAClCC,OAAAC,EAAAC,EAAAC,EAAAC,EAAApB,EAAAqB,EAAAC,UAAA,OAAAT,IAAAU,EAAA,SAAAC,iBAAAA,EAAAC,GAAA,KAAA,SACAR,EAAAI,EAAA1C,eAAA+C,IAAAL,EAAA,GAAAA,EAAA,GAAS,GACTH,EAAAG,EAAA1C,OAAA,QAAA+C,IAAAL,EAAA,GAAAA,KAAO,EACPF,iCAAQ,GAAAK,EAAAC,IAEUE,EAAA,4BAAAC,OACYZ,EAAI,UAAAY,OAASV,EAAI,WAAAU,OAAUT,GAAKS,OAAGX,EAAA,WAAAW,OAAoBC,mBAAmBZ,IAAY,gBAD9GG,OAGGU,IAAAN,EAAAC,EAAA,EAAA,KAAA,CAAA,OAAAD,EAAAC,EAAA,EACYL,EAAIW,OAAOC,MAAM,iBAAM,EAAE,gBAAtChC,MACA,IAAIiC,MAAMnC,EAAkBsB,EAAIrB,OAAQC,EAAM,CAAE5B,eAAgB4C,KAAO,KAAA,EAAA,OAAAQ,EAAAU,IAExEd,EAAIe,QAAK,EAAApB,EAAA,IAClB,OAAA,SAAAqB,GAAA,OAAAzB,EAAA0B,WAAAf,UAAA,CAAA,CAda,IAgBPgB,EAAiB,SAACC,GAAA,MACL,iBAAVA,GAAsBC,OAAOC,SAASF,EAAK,iCAEb,SAAAG,EACrC1B,GAAA,IAAAC,EAAAE,EAAAwB,EAAAC,EAAA1B,EAAA2B,EAAAC,EAAAC,EAAAC,EAAAC,EAAA3B,UAAA,OAAAT,IAAAU,EAAA,SAAA2B,GAAA,cAAAA,EAAAzB,GAAA,KAAA,EACAR,EAAAgC,EAAAtE,OAAA,QAAA+C,IAAAuB,EAAA,GAAAA,KAAS,GAGHN,GAFNxB,iCAAQ,KAEuB,EAAIA,EAAQ,IACrCyB,EAA+B,GACjC1B,EAAO,EACP2B,EAAgB,EAEdC,EAAgB,IAAA,KAAA,EAAA,KACf5B,GAAQ4B,IAAAI,EAAAzB,EAAA,EAAA,KAAA,CAAA,OAAAyB,EAAAzB,EAAA,EACWhB,EACtBO,EACAC,EACAC,EACAyB,UAE8D,GAN1DI,OAMAC,EAAQ1D,MAAMC,QAAQwD,EAASC,OAASD,EAASC,MAAQ,IACpDrE,QAAgC,IAAtBiE,EAAWjE,QAAiB2D,EAAeS,EAASI,OAAK,CAAAD,EAAAzB,EAAA,EAAA,KAAA,CAAA,OAAAyB,EAAAhB,IACrE,IAAC,KAAA,EAKV,GAHAU,EAAWQ,KAAAf,MAAXO,EAAAS,EAAmBL,IACfV,EAAeS,EAASI,SAC1BN,EAAgBS,KAAKC,IAAIV,EAAeE,EAASI,UAE/CH,EAAMrE,OAASgE,IAAAO,EAAAzB,EAAA,EAAA,KAAA,CAAA,OAAAyB,EAAAhB,EAAA,EAAA,GAAA,KAAA,EAAA,KAGfW,GAAiBD,EAAWjE,QAAUkE,GAAA,CAAAK,EAAAzB,iBAAAyB,EAAAhB,EAAA,EAAA,GAAA,KAAA,EAG1ChB,GAAQ,EAAAgC,EAAAzB,EAAA,EAAA,MAAA,KAAA,EAAA,KAENoB,GAAiBD,EAAWjE,OAASkE,IAAAK,EAAAzB,EAAA,EAAA,KAAA,CAAA,OAAAyB,EAAAhB,EAAA,EAChCU,EAAWY,MAAM,EAAGX,IAAa,KAAA,EAAA,OAAAK,EAAAhB,EAAA,EAEnCU,GAAA,EAAAF,MACT,OAAA,SAAAe,GAAA,OAAAC,EAAArB,MAAAsB,KAAArC,UAAA,CAAA,KAEaZ,EAAA,IAAuB,SAClCM,EACA4C,GAAA,OAEAjC,EAAU,sBAAuB,CAC/BkC,OAAQ,OACRC,WAAW,EACXC,QAAS,CAAE,eAAgB,oBAC3B/D,KAAMpC,KAAKoG,UAAAC,EAAA,CAAYjD,KAAAA,GAAS4C,MAC/BM,oBAAAC,EAAAvD,EAAAC,IAAAC,EAAK,SAAAsD,EAAOC,GAAA,IAAArE,EAAA,OAAAa,IAAAU,EAAA,SAAA+C,iBAAAA,EAAA7C,GAAA,KAAA,EAAA,GACR4C,EAAEvC,GAAA,CAAAwC,EAAA7C,EAAA,EAAA,KAAA,CAAA,OAAA6C,EAAA7C,EAAA,EACc4C,EAAEtC,OAAOC,MAAM,WAAA,MAAM,EAAE,GAAA,KAAA,QAApChC,UACIiC,MAAMnC,EAAkBuE,EAAEtE,OAAQC,EAAM,CAAE5B,eAAgB4C,KAAO,KAAA,EAAA,OAAAsD,EAAApC,EAAA,EAEtEmC,EAAElC,QAAK,EAAAiC,EAAA,IACf,OAAA,SAAAG,GAAA,OAAAJ,EAAA9B,MAAAsB,KAAArC,eAAA,GAEUZ,EAAA,IAAuB,SAClC8D,EACAZ,EACA5F,UAEA2D,yBAAAC,OAAiC4C,GAAM,CACrCX,OAAQ,MACRC,WAAW,EACXC,QAAS,CAAE,eAAgB,oBAC3B/D,KAAMpC,KAAKoG,UAAUJ,KACpBM,KAAA,WAAA,IAAAO,EAAA7D,EAAAC,IAAAC,EAAK,SAAA4D,EAAOL,GAAA,IAAArE,EAAA,OAAAa,IAAAU,EAAA,SAAAoD,GAAA,cAAAA,EAAAlD,GAAA,KAAA,EAAA,GACR4C,EAAEvC,GAAA,CAAA6C,EAAAlD,EAAA,EAAA,KAAA,QAAAkD,EAAAlD,IACc4C,EAAEtC,OAAOC,MAAM,iBAAM,EAAE,GAAA,KAAA,QAApChC,UACIiC,MAAMnC,EAAkBuE,EAAEtE,OAAQC,EAAMhC,IAAQ,KAAA,EAAA,OAAA2G,EAAAzC,EAAA,EAErDmC,EAAElC,QAAK,EAAAuC,EAAA,IACf,OAAA,SAAAE,GAAA,OAAAH,EAAApC,MAAAsB,KAAArC,YANE,GAMF,GAEUZ,EAAA,mBAAAmE,EAAAjE,EAAAC,IAAAC,EAAuB,SAAAgE,EAAON,GAAA,IAAAH,EAAArE,EAAA,OAAAa,IAAAU,WAAAwD,GAAA,cAAAA,EAAAtD,GAAA,KAAA,SAAAsD,EAAAtD,IACzBE,EAAA,uBAAAC,OAAiC4C,GAAM,CACrDX,OAAQ,SACRC,WAAW,IACZ,KAAA,EAHK,IAAAO,EAAAU,EAAAC,GAIClD,GAAA,CAAAiD,EAAAtD,EAAA,EAAA,KAAA,CAAA,OAAAsD,EAAAtD,EAAA,EACc4C,EAAEtC,OAAOC,MAAM,WAAA,MAAM,EAAE,GAAA,KAAA,QAApChC,MACA,IAAIiC,MAAMnC,EAAkBuE,EAAEtE,OAAQC,IAAK,KAAA,EAAA,OAAA+E,EAAA7C,EAAA,EAE5CmC,EAAElC,QAAK,EAAA2C,EAAA,IAChB,OAAA,SAAAG,GAAA,OAAAJ,EAAAxC,MAAAsB,KAAArC"}