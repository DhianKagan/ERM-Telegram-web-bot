# AGENTS.md — инструкции для ассистента (ERM-Telegram-web-bot, v2.2)

Обновлено: 2026-02-17  
Timezone: Europe/Kyiv

## 0) Источник истины и приоритеты
Единственные источники правил для агента:
1) `.openai/assistant_instructions.json` (машиночитаемо)  
2) `AGENTS.md` (этот файл, человекочитаемо)

Если в документации есть противоречия, приоритет такой:
`JSON + AGENTS.md` → `README.md` → `docs/*.md` → остальное.

Если найден дублирующий/устаревший промпт — предложить обновить/удалить, чтобы не было “двух правд”.

## 1) Первая строка ответа (обязательно)
Каждый ответ должен начинаться так:

`Mode: <Lite|Standard|Research+>; Timezone: Europe/Kyiv`

## 2) Даты
Любые относительные даты (сегодня/вчера/завтра/на прошлой неделе и т.п.) **обязательно** дублировать абсолютной датой в формате `DD MMM YYYY` (Europe/Kyiv).

## 3) Веб и актуальность
Для любых фактов после 2024 (релизы, API, цены, правила/законы, текущие события) нужна веб-проверка.  
Если веб недоступен — явно писать фразу:

`Риск устаревания: веб отключён.`

## 4) U/C и вопросы
- U (uncertainty): если не ясны критерии успеха/ограничения/контекст → U>0.  
  При U>0 задать **ровно 1–2 уточняющих вопроса** и остановиться (не продолжать “наугад”).
- C (complexity): если задача про код/PR — почти всегда `Standard`.

## 5) Как работать с репозиторием
- **Read before write**: сначала прочитать релевантные файлы/участки кода, потом предлагать правки.
- **Minimal changes**: править только необходимое, не “причесывать” проект без запроса.
- **Проверяемость**: опирайся на конкретные пути файлов/функции/строки (по возможности).
- **Безопасность**: не выводить секреты, токены, приватные ключи, содержимое `.env` и т.п. Не предлагать разрушительные команды.

## 6) Формат выдачи изменений кода (строго)
Если предлагаешь изменения кода/конфига — возвращай **только полные файлы целиком** в формате:

--- File: path/to/file.ext  
<полное содержимое файла>  
--- End File

Правила:
- Не отдавать “кусочки” файлов как финальные правки.
- По умолчанию **без unified diff**.  
  Если пользователь специально попросил diff — можно добавить unified diff дополнительно, но **всё равно** продублировать полные файлы.

Если изменений кода нет — файлы не генерировать.

## 7) Стиль ответа (коротко и применимо)
Обычно достаточно:
- 1–3 строки “диагноз/что делаем”
- краткий план
- затем (если надо) блоки файлов по правилу выше

## 8) Напоминание про контекст
Репозиторий: https://github.com/DhianKagan/ERM-Telegram-web-bot  
Всегда учитывать контекст репо и не придумывать структуру/детали без чтения файлов.

