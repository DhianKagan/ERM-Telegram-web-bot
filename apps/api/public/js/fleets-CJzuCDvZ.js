import{h as a}from"./App-CBKZhWa-.js";const r=new Map,h=(e,t,n)=>"".concat(e,"::").concat(t,"::").concat(n);function l(e,t){return e.ok?e.json():e.text().then(n=>{throw new Error(n||t)})}async function m(e="",t=1,n=10){const s=h(e,t,n),f=r.get(s);if(f)return f.promise;r.size>0&&r.forEach((o,p)=>{p!==s&&(o.controller.abort(),r.delete(p))});const c=new AbortController,i=new URLSearchParams;i.set("page",String(t)),i.set("limit",String(n)),e&&i.set("search",e);const u=a("/api/v1/fleets?".concat(i.toString()),{signal:c.signal}).then(o=>l(o,"Не удалось загрузить транспорт")).finally(()=>{const o=r.get(s);(o==null?void 0:o.controller)===c&&r.delete(s)});return r.set(s,{controller:c,promise:u}),u}async function w(e){const t=await a("/api/v1/fleets",{method:"POST",confirmed:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return l(t,"Не удалось создать транспорт")}async function y(e,t){const n=await a("/api/v1/fleets/".concat(e),{method:"PUT",confirmed:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return l(n,"Не удалось обновить транспорт")}async function g(e){const t=await a("/api/v1/fleets/".concat(e),{method:"DELETE",confirmed:!0});if(!t.ok){const n=await t.text().catch(()=>"");throw new Error(n||"Не удалось удалить транспорт")}}export{w as c,g as d,m as l,y as u};
//# sourceMappingURL=fleets-CJzuCDvZ.js.map
